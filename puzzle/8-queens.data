[{"_1":2},"routes/puzzle-detail",{"_3":4},"data",{"_5":6,"_7":8,"_9":10},"status","success","slug","8-queens","puzzle",{"_7":8,"_11":12,"_35":36,"_37":38,"_39":40,"_66":67},"metadata",{"_13":14,"_15":16,"_17":18,"_19":20,"_22":23,"_25":26,"_27":28,"_29":30,"_31":30,"_32":33,"_34":33},"id","puzzle-47","title","8 Queens","difficulty","easy","concepts",[21],"logic","tags",[24],"has-solution","questionPreview","Can you place 8 queens on a chessboard so that no queen can capture any other?\n","credit","Classic puzzle. Question and solution written by Puzzlestone Peak.","dateCreated","2026-02-03","lastUpdated","preview","Can you place 8 queens on a chessboard so that no queen can capture any other queen? Recall that a queen can move any number of squares horizontally,...","websitePreview","content","<p>Can you place 8 queens on a chessboard so that no queen can capture any other queen? Recall that a queen can move any number of squares horizontally, vertically, or diagonally.</p>\n<p>You may click on the board below to place and remove queens.</p>\n<div class=\"dynamic-block-placeholder\" data-dynamic-block-id=\"0\" data-mode=\"component\"><p class=\"text-muted-foreground text-sm\">[Interactive content: component mode]</p></div>\n<details class=\"content-block solution-block\" data-type=\"solution\"><summary class=\"solution-label\">Solution</summary><div class=\"solution-content markdown-content prose max-w-none px-4 py-4 space-y-4\"><p>Here’s one possible solution:</p><div class=\"dynamic-block-placeholder\" data-dynamic-block-id=\"1\" data-mode=\"component\"><p class=\"text-muted-foreground text-sm\">[Interactive content: component mode]</p></div></div></details>\n<div class=\"inline-component-definition\" style=\"display: none;\"></div>","rawContent","\nCan you place 8 queens on a chessboard so that no queen can capture any other queen? Recall that a queen can move any number of squares horizontally, vertically, or diagonally.\n\nYou may click on the board below to place and remove queens.\n\n:::dynamic\n```yaml\nuse: '#queens-board'\nprops:\n  mode: interactive\n```\n:::\n\n::::solution\nHere’s one possible solution:\n\n:::dynamic\n```yaml\nuse: '#queens-board'\nprops:\n  mode: solution\n  queens: [5, 3, 6, 0, 7, 1, 4, 2]\n```\n:::\n::::\n\n\n:::component[queens-board]\n```js\nfunction mount(options) {\n  const { root, api, props } = options;\n  const {\n    mode = 'interactive',\n    queens: initialQueens = []\n  } = props;\n\n  const BOARD_SIZE = 8;\n\n  // State: Set of position strings \"row,col\"\n  let queens = new Set();\n  initialQueens.forEach((col, row) => {\n    if (row < BOARD_SIZE && col >= 0 && col < BOARD_SIZE) {\n      queens.add(`${row},${col}`);\n    }\n  });\n\n  // Create main container\n  const container = document.createElement('div');\n  container.className = 'flex flex-col items-center gap-4';\n  if (mode === 'interactive') {\n    container.classList.add('interactive');\n  }\n  root.appendChild(container);\n\n  // Create board container with fixed aspect ratio\n  const boardContainer = document.createElement('div');\n  boardContainer.className = 'relative';\n  boardContainer.style.width = '100%';\n  boardContainer.style.maxWidth = '400px';\n  boardContainer.style.aspectRatio = '1';\n  container.appendChild(boardContainer);\n\n  // Create the board grid\n  const board = document.createElement('div');\n  board.className = 'grid';\n  board.style.gridTemplateColumns = `repeat(${BOARD_SIZE}, 1fr)`;\n  board.style.width = '100%';\n  board.style.height = '100%';\n  boardContainer.appendChild(board);\n\n  // Color getter functions (called fresh each render for theme changes)\n  const getColors = () => ({\n    lightSquare: api.getColor('sand-100'),\n    darkSquare: api.getColor('sand-300'),\n    threatLightSquare: api.getColor('error-200'),\n    threatDarkSquare: api.getColor('error-300'),\n    queenColor: api.getColor('stone-800'),\n  });\n\n  // Track cells for updates\n  const cells = [];\n\n  // Create cells\n  for (let row = 0; row < BOARD_SIZE; row++) {\n    for (let col = 0; col < BOARD_SIZE; col++) {\n      const cell = document.createElement('div');\n      const isLight = (row + col) % 2 === 0;\n      const colors = getColors();\n      cell.style.backgroundColor = isLight ? colors.lightSquare : colors.darkSquare;\n      cell.style.position = 'relative';\n      cell.style.display = 'flex';\n      cell.style.alignItems = 'center';\n      cell.style.justifyContent = 'center';\n      cell.style.cursor = mode === 'interactive' ? 'pointer' : 'default';\n      // Fix: Ensure consistent cell sizing with aspect ratio\n      cell.style.aspectRatio = '1';\n\n      cell.dataset.row = row;\n      cell.dataset.col = col;\n\n      // Create queen container (always present, visibility toggled)\n      const queenContainer = document.createElement('div');\n      queenContainer.className = 'queen-container';\n      queenContainer.style.width = '70%';\n      queenContainer.style.height = '70%';\n      queenContainer.style.position = 'absolute';\n      queenContainer.style.display = 'none';\n      cell.appendChild(queenContainer);\n\n      if (mode === 'interactive') {\n        cell.addEventListener('click', () => handleCellClick(row, col));\n      }\n\n      board.appendChild(cell);\n      cells.push({ element: cell, row, col, isLight, queenContainer });\n    }\n  }\n\n  // Status message for interactive mode\n  let statusEl = null;\n  if (mode === 'interactive') {\n    statusEl = document.createElement('div');\n    statusEl.className = 'text-sm text-muted-foreground text-center';\n    container.appendChild(statusEl);\n\n    // Reset button\n    const resetBtn = api.ui.button({\n      label: 'Clear Board',\n      variant: 'outlined',\n      color: 'secondary',\n      size: 'sm',\n      onClick: () => {\n        queens.clear();\n        render();\n      }\n    });\n    container.appendChild(resetBtn);\n  }\n\n  function handleCellClick(row, col) {\n    if (mode !== 'interactive') return;\n\n    const pos = `${row},${col}`;\n    // Toggle queen at this position\n    if (queens.has(pos)) {\n      queens.delete(pos);\n    } else {\n      queens.add(pos);\n    }\n    render();\n  }\n\n  function getThreatenedSquares() {\n    const threatened = new Set();\n\n    queens.forEach((pos) => {\n      const [row, col] = pos.split(',').map(Number);\n\n      // Mark entire row\n      for (let c = 0; c < BOARD_SIZE; c++) {\n        if (c !== col) threatened.add(`${row},${c}`);\n      }\n\n      // Mark entire column\n      for (let r = 0; r < BOARD_SIZE; r++) {\n        if (r !== row) threatened.add(`${r},${col}`);\n      }\n\n      // Mark diagonals\n      for (let i = 1; i < BOARD_SIZE; i++) {\n        // Up-left\n        if (row - i >= 0 && col - i >= 0) threatened.add(`${row - i},${col - i}`);\n        // Up-right\n        if (row - i >= 0 && col + i < BOARD_SIZE) threatened.add(`${row - i},${col + i}`);\n        // Down-left\n        if (row + i < BOARD_SIZE && col - i >= 0) threatened.add(`${row + i},${col - i}`);\n        // Down-right\n        if (row + i < BOARD_SIZE && col + i < BOARD_SIZE) threatened.add(`${row + i},${col + i}`);\n      }\n    });\n\n    return threatened;\n  }\n\n  function getConflictingQueens() {\n    const conflicts = new Set();\n    const queenPositions = Array.from(queens).map((pos) => {\n      const [row, col] = pos.split(',').map(Number);\n      return { row, col };\n    });\n\n    for (let i = 0; i < queenPositions.length; i++) {\n      for (let j = i + 1; j < queenPositions.length; j++) {\n        const q1 = queenPositions[i];\n        const q2 = queenPositions[j];\n\n        // Same row (shouldn't happen with our data structure, but check anyway)\n        if (q1.row === q2.row) {\n          conflicts.add(`${q1.row},${q1.col}`);\n          conflicts.add(`${q2.row},${q2.col}`);\n        }\n        // Same column\n        if (q1.col === q2.col) {\n          conflicts.add(`${q1.row},${q1.col}`);\n          conflicts.add(`${q2.row},${q2.col}`);\n        }\n        // Same diagonal\n        if (Math.abs(q1.row - q2.row) === Math.abs(q1.col - q2.col)) {\n          conflicts.add(`${q1.row},${q1.col}`);\n          conflicts.add(`${q2.row},${q2.col}`);\n        }\n      }\n    }\n\n    return conflicts;\n  }\n\n  // Queen SVG path (reused for all queens)\n  const queenSvgPath = 'M46.3,20.37c0-2.05,1.66-3.7,3.7-3.7s3.7,1.66,3.7,3.7-1.66,3.7-3.7,3.7-3.7-1.66-3.7-3.7Zm8.62,9.97c3.67-1.81,6.2-5.6,6.2-9.97,0-6.14-4.97-11.11-11.11-11.11s-11.11,4.97-11.11,11.11c0,4.37,2.52,8.15,6.2,9.97l-8.02,21.4-12.74-8.49c2.13-2.02,3.46-4.89,3.46-8.06,0-6.14-4.97-11.11-11.11-11.11s-11.11,4.97-11.11,11.11c0,5.1,3.44,9.4,8.12,10.7l6.58,26.33-2.33,9.31c-1.17,4.68,2.37,9.2,7.19,9.2h49.77c4.82,0,8.36-4.53,7.19-9.2l-2.33-9.31,6.58-26.33c4.68-1.31,8.12-5.6,8.12-10.7,0-6.14-4.97-11.11-11.11-11.11s-11.11,4.97-11.11,11.11c0,3.17,1.33,6.03,3.46,8.06l-12.74,8.49-8.02-21.4Zm28.42,8.55h0c2.05,0,3.7-1.66,3.7-3.7s-1.66-3.7-3.7-3.7-3.7,1.66-3.7,3.7,1.66,3.7,3.7,3.7Zm-62.96-3.7c0,2.04-1.66,3.7-3.7,3.7h0c-2.05,0-3.7-1.66-3.7-3.7s1.66-3.7,3.7-3.7,3.7,1.66,3.7,3.7Zm4.74,48.15l1.85-7.41h46.07l1.85,7.41H25.11Zm52.3-32.35l-4.38,17.53H26.97l-4.38-17.53,14.25,9.5c.94,.63,2.12,.79,3.19,.44,1.08-.35,1.93-1.17,2.33-2.22l7.64-20.38,7.64,20.38c.4,1.06,1.26,1.88,2.33,2.22,1.08,.35,2.25,.18,3.19-.44l14.25-9.5Z';\n\n  function render() {\n    const colors = getColors();\n    const threatened = mode === 'interactive' ? getThreatenedSquares() : new Set();\n    const conflicts = mode === 'interactive' ? getConflictingQueens() : new Set();\n    const queenCount = queens.size;\n\n    cells.forEach(({ element, row, col, isLight, queenContainer }) => {\n      const baseColor = isLight ? colors.lightSquare : colors.darkSquare;\n      const hasQueen = queens.has(`${row},${col}`);\n      const isThreatened = threatened.has(`${row},${col}`);\n      const isConflicting = conflicts.has(`${row},${col}`);\n\n      // Set background (threat tinting respects light/dark checkerboard pattern)\n      if (mode === 'interactive' && isThreatened && !hasQueen) {\n        element.style.backgroundColor = isLight ? colors.threatLightSquare : colors.threatDarkSquare;\n      } else {\n        element.style.backgroundColor = baseColor;\n      }\n\n      // Update queen visibility and color (don't recreate DOM)\n      if (hasQueen) {\n        const fillColor = isConflicting ? colors.conflictColor : colors.queenColor;\n        queenContainer.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" style=\"width:100%;height:100%;fill:${fillColor}\"><path d=\"${queenSvgPath}\" fill-rule=\"evenodd\"/></svg>`;\n        queenContainer.style.display = 'block';\n      } else {\n        queenContainer.style.display = 'none';\n      }\n    });\n\n    // Update status\n    if (statusEl) {\n      if (conflicts.size > 0) {\n        statusEl.textContent = `${queenCount} queen${queenCount !== 1 ? 's' : ''} placed — conflict detected!`;\n      } else if (queenCount === BOARD_SIZE) {\n        statusEl.textContent = 'Congratulations! All 8 queens placed with no conflicts!';\n      } else {\n        statusEl.textContent = `${queenCount} of ${BOARD_SIZE} queens placed`;\n      }\n    }\n  }\n\n  // Theme change handler\n  api.onThemeChange(() => {\n    // Just re-render, which will use the current theme colors\n    render();\n  });\n\n  render();\n}\n```\n\n```css\n.interactive .grid > div:hover {\n  opacity: 0.9;\n}\n```\n:::\n","dynamicBlocks",[41,53],{"_42":43,"_44":45,"_46":47,"_48":49,"_51":52},"type","dynamic","mode","component","componentId","#queens-board","props",{"_44":50},"interactive","sourceFile","/home/runner/work/puzzlestone-peak/puzzlestone-peak/apps/web/content/puzzles/logic/8-queens.md",{"_42":43,"_44":45,"_46":47,"_48":54,"_51":52},{"_44":55,"_56":57},"solution","queens",[58,59,60,61,62,63,64,65],5,3,6,0,7,1,4,2,"inlineComponents",{"_68":69},"queens-board",{"_13":68,"_70":71,"_72":73,"_74":75},"code","function mount(options) {\n  const { root, api, props } = options;\n  const {\n    mode = 'interactive',\n    queens: initialQueens = []\n  } = props;\n\n  const BOARD_SIZE = 8;\n\n  // State: Set of position strings \"row,col\"\n  let queens = new Set();\n  initialQueens.forEach((col, row) => {\n    if (row < BOARD_SIZE && col >= 0 && col < BOARD_SIZE) {\n      queens.add(`${row},${col}`);\n    }\n  });\n\n  // Create main container\n  const container = document.createElement('div');\n  container.className = 'flex flex-col items-center gap-4';\n  if (mode === 'interactive') {\n    container.classList.add('interactive');\n  }\n  root.appendChild(container);\n\n  // Create board container with fixed aspect ratio\n  const boardContainer = document.createElement('div');\n  boardContainer.className = 'relative';\n  boardContainer.style.width = '100%';\n  boardContainer.style.maxWidth = '400px';\n  boardContainer.style.aspectRatio = '1';\n  container.appendChild(boardContainer);\n\n  // Create the board grid\n  const board = document.createElement('div');\n  board.className = 'grid';\n  board.style.gridTemplateColumns = `repeat(${BOARD_SIZE}, 1fr)`;\n  board.style.width = '100%';\n  board.style.height = '100%';\n  boardContainer.appendChild(board);\n\n  // Color getter functions (called fresh each render for theme changes)\n  const getColors = () => ({\n    lightSquare: api.getColor('sand-100'),\n    darkSquare: api.getColor('sand-300'),\n    threatLightSquare: api.getColor('error-200'),\n    threatDarkSquare: api.getColor('error-300'),\n    queenColor: api.getColor('stone-800'),\n  });\n\n  // Track cells for updates\n  const cells = [];\n\n  // Create cells\n  for (let row = 0; row < BOARD_SIZE; row++) {\n    for (let col = 0; col < BOARD_SIZE; col++) {\n      const cell = document.createElement('div');\n      const isLight = (row + col) % 2 === 0;\n      const colors = getColors();\n      cell.style.backgroundColor = isLight ? colors.lightSquare : colors.darkSquare;\n      cell.style.position = 'relative';\n      cell.style.display = 'flex';\n      cell.style.alignItems = 'center';\n      cell.style.justifyContent = 'center';\n      cell.style.cursor = mode === 'interactive' ? 'pointer' : 'default';\n      // Fix: Ensure consistent cell sizing with aspect ratio\n      cell.style.aspectRatio = '1';\n\n      cell.dataset.row = row;\n      cell.dataset.col = col;\n\n      // Create queen container (always present, visibility toggled)\n      const queenContainer = document.createElement('div');\n      queenContainer.className = 'queen-container';\n      queenContainer.style.width = '70%';\n      queenContainer.style.height = '70%';\n      queenContainer.style.position = 'absolute';\n      queenContainer.style.display = 'none';\n      cell.appendChild(queenContainer);\n\n      if (mode === 'interactive') {\n        cell.addEventListener('click', () => handleCellClick(row, col));\n      }\n\n      board.appendChild(cell);\n      cells.push({ element: cell, row, col, isLight, queenContainer });\n    }\n  }\n\n  // Status message for interactive mode\n  let statusEl = null;\n  if (mode === 'interactive') {\n    statusEl = document.createElement('div');\n    statusEl.className = 'text-sm text-muted-foreground text-center';\n    container.appendChild(statusEl);\n\n    // Reset button\n    const resetBtn = api.ui.button({\n      label: 'Clear Board',\n      variant: 'outlined',\n      color: 'secondary',\n      size: 'sm',\n      onClick: () => {\n        queens.clear();\n        render();\n      }\n    });\n    container.appendChild(resetBtn);\n  }\n\n  function handleCellClick(row, col) {\n    if (mode !== 'interactive') return;\n\n    const pos = `${row},${col}`;\n    // Toggle queen at this position\n    if (queens.has(pos)) {\n      queens.delete(pos);\n    } else {\n      queens.add(pos);\n    }\n    render();\n  }\n\n  function getThreatenedSquares() {\n    const threatened = new Set();\n\n    queens.forEach((pos) => {\n      const [row, col] = pos.split(',').map(Number);\n\n      // Mark entire row\n      for (let c = 0; c < BOARD_SIZE; c++) {\n        if (c !== col) threatened.add(`${row},${c}`);\n      }\n\n      // Mark entire column\n      for (let r = 0; r < BOARD_SIZE; r++) {\n        if (r !== row) threatened.add(`${r},${col}`);\n      }\n\n      // Mark diagonals\n      for (let i = 1; i < BOARD_SIZE; i++) {\n        // Up-left\n        if (row - i >= 0 && col - i >= 0) threatened.add(`${row - i},${col - i}`);\n        // Up-right\n        if (row - i >= 0 && col + i < BOARD_SIZE) threatened.add(`${row - i},${col + i}`);\n        // Down-left\n        if (row + i < BOARD_SIZE && col - i >= 0) threatened.add(`${row + i},${col - i}`);\n        // Down-right\n        if (row + i < BOARD_SIZE && col + i < BOARD_SIZE) threatened.add(`${row + i},${col + i}`);\n      }\n    });\n\n    return threatened;\n  }\n\n  function getConflictingQueens() {\n    const conflicts = new Set();\n    const queenPositions = Array.from(queens).map((pos) => {\n      const [row, col] = pos.split(',').map(Number);\n      return { row, col };\n    });\n\n    for (let i = 0; i < queenPositions.length; i++) {\n      for (let j = i + 1; j < queenPositions.length; j++) {\n        const q1 = queenPositions[i];\n        const q2 = queenPositions[j];\n\n        // Same row (shouldn't happen with our data structure, but check anyway)\n        if (q1.row === q2.row) {\n          conflicts.add(`${q1.row},${q1.col}`);\n          conflicts.add(`${q2.row},${q2.col}`);\n        }\n        // Same column\n        if (q1.col === q2.col) {\n          conflicts.add(`${q1.row},${q1.col}`);\n          conflicts.add(`${q2.row},${q2.col}`);\n        }\n        // Same diagonal\n        if (Math.abs(q1.row - q2.row) === Math.abs(q1.col - q2.col)) {\n          conflicts.add(`${q1.row},${q1.col}`);\n          conflicts.add(`${q2.row},${q2.col}`);\n        }\n      }\n    }\n\n    return conflicts;\n  }\n\n  // Queen SVG path (reused for all queens)\n  const queenSvgPath = 'M46.3,20.37c0-2.05,1.66-3.7,3.7-3.7s3.7,1.66,3.7,3.7-1.66,3.7-3.7,3.7-3.7-1.66-3.7-3.7Zm8.62,9.97c3.67-1.81,6.2-5.6,6.2-9.97,0-6.14-4.97-11.11-11.11-11.11s-11.11,4.97-11.11,11.11c0,4.37,2.52,8.15,6.2,9.97l-8.02,21.4-12.74-8.49c2.13-2.02,3.46-4.89,3.46-8.06,0-6.14-4.97-11.11-11.11-11.11s-11.11,4.97-11.11,11.11c0,5.1,3.44,9.4,8.12,10.7l6.58,26.33-2.33,9.31c-1.17,4.68,2.37,9.2,7.19,9.2h49.77c4.82,0,8.36-4.53,7.19-9.2l-2.33-9.31,6.58-26.33c4.68-1.31,8.12-5.6,8.12-10.7,0-6.14-4.97-11.11-11.11-11.11s-11.11,4.97-11.11,11.11c0,3.17,1.33,6.03,3.46,8.06l-12.74,8.49-8.02-21.4Zm28.42,8.55h0c2.05,0,3.7-1.66,3.7-3.7s-1.66-3.7-3.7-3.7-3.7,1.66-3.7,3.7,1.66,3.7,3.7,3.7Zm-62.96-3.7c0,2.04-1.66,3.7-3.7,3.7h0c-2.05,0-3.7-1.66-3.7-3.7s1.66-3.7,3.7-3.7,3.7,1.66,3.7,3.7Zm4.74,48.15l1.85-7.41h46.07l1.85,7.41H25.11Zm52.3-32.35l-4.38,17.53H26.97l-4.38-17.53,14.25,9.5c.94,.63,2.12,.79,3.19,.44,1.08-.35,1.93-1.17,2.33-2.22l7.64-20.38,7.64,20.38c.4,1.06,1.26,1.88,2.33,2.22,1.08,.35,2.25,.18,3.19-.44l14.25-9.5Z';\n\n  function render() {\n    const colors = getColors();\n    const threatened = mode === 'interactive' ? getThreatenedSquares() : new Set();\n    const conflicts = mode === 'interactive' ? getConflictingQueens() : new Set();\n    const queenCount = queens.size;\n\n    cells.forEach(({ element, row, col, isLight, queenContainer }) => {\n      const baseColor = isLight ? colors.lightSquare : colors.darkSquare;\n      const hasQueen = queens.has(`${row},${col}`);\n      const isThreatened = threatened.has(`${row},${col}`);\n      const isConflicting = conflicts.has(`${row},${col}`);\n\n      // Set background (threat tinting respects light/dark checkerboard pattern)\n      if (mode === 'interactive' && isThreatened && !hasQueen) {\n        element.style.backgroundColor = isLight ? colors.threatLightSquare : colors.threatDarkSquare;\n      } else {\n        element.style.backgroundColor = baseColor;\n      }\n\n      // Update queen visibility and color (don't recreate DOM)\n      if (hasQueen) {\n        const fillColor = isConflicting ? colors.conflictColor : colors.queenColor;\n        queenContainer.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" style=\"width:100%;height:100%;fill:${fillColor}\"><path d=\"${queenSvgPath}\" fill-rule=\"evenodd\"/></svg>`;\n        queenContainer.style.display = 'block';\n      } else {\n        queenContainer.style.display = 'none';\n      }\n    });\n\n    // Update status\n    if (statusEl) {\n      if (conflicts.size > 0) {\n        statusEl.textContent = `${queenCount} queen${queenCount !== 1 ? 's' : ''} placed — conflict detected!`;\n      } else if (queenCount === BOARD_SIZE) {\n        statusEl.textContent = 'Congratulations! All 8 queens placed with no conflicts!';\n      } else {\n        statusEl.textContent = `${queenCount} of ${BOARD_SIZE} queens placed`;\n      }\n    }\n  }\n\n  // Theme change handler\n  api.onThemeChange(() => {\n    // Just re-render, which will use the current theme colors\n    render();\n  });\n\n  render();\n}","css",".interactive .grid > div:hover {\n  opacity: 0.9;\n}","startLine",46]
