<!DOCTYPE html><html lang="en" class=""><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1LM5FNK1VX"></script><meta name="color-scheme" content="dark light"/><link rel="preload" href="/assets/poppins-400-cpxAROuN.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/assets/poppins-500-C8OXljZJ.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/assets/poppins-600-zEkxB9Mr.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="/assets/poppins-700-Qrb0O0WB.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><title>Average Salaries 2 - Puzzlestone Peak</title><meta name="description" content="Back in Average Salaries 1 , 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s..."/><meta property="og:title" content="Average Salaries 2 - Puzzlestone Peak"/><meta property="og:description" content="Back in Average Salaries 1 , 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s..."/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Average Salaries 2 - Puzzlestone Peak"/><meta name="twitter:description" content="Back in Average Salaries 1 , 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s..."/><meta name="keywords" content="cryptography, encoding, hard, logic puzzle"/><link rel="modulepreload" href="/assets/manifest-25fb394a.js"/><link rel="modulepreload" href="/assets/entry.client-BQEHofJp.js"/><link rel="modulepreload" href="/assets/index-DIth0oIc.js"/><link rel="modulepreload" href="/assets/root-BjuwspyJ.js"/><link rel="modulepreload" href="/assets/Logo-BRp-LhsU.js"/><link rel="modulepreload" href="/assets/use-dark-mode-mdHJdo6o.js"/><link rel="modulepreload" href="/assets/card-CeispfCi.js"/><link rel="modulepreload" href="/assets/NavHeightContext-BwIQMGhB.js"/><link rel="modulepreload" href="/assets/expeditionIndex-Dy75PiyG.js"/><link rel="modulepreload" href="/assets/puzzleIndex-CvT980ad.js"/><link rel="modulepreload" href="/assets/loader-circle-F5-c-Aqt.js"/><link rel="modulepreload" href="/assets/puzzle-detail-ByHrUMNS.js"/><link rel="modulepreload" href="/assets/useBack-BDsmIQAJ.js"/><link rel="modulepreload" href="/assets/ItemCardList-DC-u4o5t.js"/><link rel="modulepreload" href="/assets/ErrorBoundary-Ch767kHG.js"/><link rel="modulepreload" href="/assets/chevron-left-CY6pwb5D.js"/><script>
              (function initTheme() {
                if (localStorage.getItem('darkmode') === '1') {
                  document.documentElement.classList.add('dark');
                }
              })();
            </script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments);}
              gtag('js', new Date());
              gtag('config', 'G-1LM5FNK1VX');
            </script><link rel="stylesheet" href="/assets/root-DvvwlXDE.css"/><link rel="stylesheet" href="/assets/useBack-CyAuISp2.css"/></head><body><section aria-label="Notifications alt+T" tabindex="-1" aria-live="polite" aria-relevant="additions text" aria-atomic="false"></section><div class="min-h-screen bg-background"><nav class="sticky top-0 z-[1000] border-b border-border bg-card"><div class="container mx-auto px-6"><div class="flex h-16 items-center justify-between"><a class="flex items-center gap-3 text-nav-foreground no-underline" href="/" data-discover="true"><svg class="h-10 w-10 text-nav-foreground" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2211.37 2208.98" aria-label="Puzzlestone Peak Logo"><g><g><path fill="currentColor" d="M1108.28,0c649.77,5.24,1114.13,533.8,1102.89,1120-11.85,618.13-493.23,1100.61-1128,1088.81C450,2197-8.61,1690.25.12,1087.2,8.81,487.59,492.57,4.1,1108.28,0ZM121.13,1114.76c1.14,543.44,432.5,984.51,996.37,978.51,557.06-5.93,978-444.2,971.35-995.6C2082,528.37,1628.73,114,1095.67,118.84,573.44,123.64,121,538.05,121.13,1114.76Z"></path><path fill="currentColor" d="M2021.18,1304.81c-125.17-118.57-243.11-238.8-364.9-359.1-2.56,14.24,1.92,24,3.82,33.95,4.41,23.07,11.61,45.81,13.73,69.05,4,43.53,24.59,76.14,55.56,106,57.17,55,111.85,112.69,167.64,169.19,3.08,3.11,6.78,5.62,13.43,11.07l-29.92-94c24.62,13.75,40.06,32.2,57.87,47.59,20.91,18.06,40.77,37.34,61.77,55.28,8.84,7.54,10.58,14.7,7.36,25.8-20.06,69.13-47.63,135-81.34,198.6-9.36,17.65-14.91,9.53-22.48,0q-90.9-114.8-181.89-229.53-95.47-120.15-191.27-240c-1-1.26-2.64-2-7-5.25,9.72,71.9,28.35,139.3,37.91,208.53-107.81-169.7-206.63-344.59-311.28-516-9.22,3.51-3.87,12.13-10,16-12-7.35-18.72-20.06-27.45-30.66q-45.4-55.15-89.63-111.28c-9.15-11.66-14.16-9.84-23.87.14-12.63,13-13.15,24.45-6.86,40.56,17.11,43.76,35.07,87.25,48.64,132.33,1,3.28,1.72,6.64,3.84,14.9L1022.35,771.4l-2.78,2.64c13.51,22.36,26.89,44.8,40.55,67.06,24.58,40.09,49,80.27,74.21,120,6,9.48,6,15.92-1.51,24.54-28.26,32.31-55.84,65.21-83.61,97.95-15.86,18.69-15.92,18.85,1.06,35.86q114.7,114.87,229.51,229.63c2.84,2.84,5.41,6,11.73,12.92-46.79-8.28-88.16-19-132.09-25.8l298,291.64,3.93-2.17L1430.53,1306c23.59,34.58,44.25,64.91,65,95.22q123.36,180.63,251.43,357.94c1.38,1.9,2.39,4.13,4,5.79,13.32,13.77,9.47,24-4.25,35.81-47.75,41.22-98,78.83-151.9,111.65-8.1,4.94-16.34,5.41-25.27,5.45-104.54.45-203.43-26.94-300.81-61.29-107-37.74-210.39-84.76-315.67-126.92-149.26-59.78-302.65-102.49-463-118.55-55.13-5.53-110.43-4.65-165.7-3.63-9.28.18-16.45-.49-22-10-61.64-105.06-105-216.59-122.31-337.73-1.51-10.61,1.49-17.46,8.71-24.81q184.24-187.54,367.82-375.72c10-10.28,15.36-7.56,23.67,1.12,35.77,37.39,72.31,74.05,108,111.53,8.31,8.73,13.08,10.25,21.86.21Q871.5,787.48,1033.71,603.54c21-23.84,42.59-47.13,63.21-71.27,8.62-10.09,13.52-8.08,21.52,1q195.46,222.81,391.26,445.32c9.78,11.18,14.44,10.28,23.92.32,36.07-37.91,73.29-74.72,109.47-112.54,8.26-8.63,13.09-7.71,20.87.25q175.07,179.21,350.85,357.7c13.23,13.39,20.15,25.9,13.9,44.57C2025.39,1278.84,2024.3,1289.49,2021.18,1304.81ZM564.41,931.41c0,18.05-1.59,31,.28,43.31,7.16,47.25-7.05,85.12-43.68,116.5-15.75,13.5-32.89,30.56-38.74,49.32-11,35.33-14.27,73.08-20.87,110.49,8.29-1,11-6.85,14.51-11.08q84.69-101.51,174.52-198.49c8.71-9.46,11.86-16.15.08-25.48-9.14-7.24-16.56-16.62-24.93-24.86C606.56,972.43,587.42,953.86,564.41,931.41Z"></path><path fill="currentColor" d="M1258,2036.19c-156.22,31.67-307.68,13.84-456-37.14-128-44-242.37-111.53-346.16-205.19,33.78-3.18,62.72.36,91.57,3.41,177.71,18.78,340.49,86.11,502.68,155.25,63.74,27.17,127.88,53.3,193.63,75.29C1248.52,2029.42,1254.05,2029.85,1258,2036.19Z"></path><path fill="currentColor" d="M1461.61,671.32c.48-75.58,59.09-133.3,135-132.91,69.62.35,129.18,61.43,128.77,132.05-.43,74-59.91,132.06-134.66,131.48C1518.42,801.37,1461.15,743.42,1461.61,671.32Z"></path></g></g></svg><span class="text-[1.25rem] font-semibold leading-none">Puzzlestone Peak</span></a><div class="hidden items-center gap-6 md:flex"><ul class="flex items-center gap-8"><li><a class="relative pb-2 text-[1rem] font-medium text-nav-foreground no-underline after:absolute after:bottom-0 after:left-0 after:h-[2px] after:w-0 after:bg-nav-foreground after:transition-all after:duration-200 hover:after:w-full" href="/puzzles" data-discover="true">Puzzles</a></li><li><a class="relative pb-2 text-[1rem] font-medium text-nav-foreground no-underline after:absolute after:bottom-0 after:left-0 after:h-[2px] after:w-0 after:bg-nav-foreground after:transition-all after:duration-200 hover:after:w-full" href="/expeditions" data-discover="true">Expeditions</a></li><li><a class="relative pb-2 text-[1rem] font-medium text-nav-foreground no-underline after:absolute after:bottom-0 after:left-0 after:h-[2px] after:w-0 after:bg-nav-foreground after:transition-all after:duration-200 hover:after:w-full" href="/progress" data-discover="true">Progress</a></li></ul><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 w-10 text-primary hover:bg-primary hover:text-background" aria-label="Light mode enabled. Switch to dark mode" aria-pressed="false"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class=""><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></div></button></div><button class="flex h-8 w-8 cursor-pointer flex-col justify-around border-none bg-transparent p-1 text-nav-foreground md:hidden" aria-label="Toggle mobile menu" aria-expanded="false" aria-controls="mobile-menu"><span class="block h-[2px] w-full bg-current transition-all duration-300"></span><span class="block h-[2px] w-full bg-current transition-all duration-300"></span><span class="block h-[2px] w-full bg-current transition-all duration-300"></span></button></div></div></nav><div id="mobile-menu" class="fixed left-0 right-0 top-16 z-[999] border-b border-border bg-card shadow-lg transition-all duration-300 md:hidden pointer-events-none -translate-y-full opacity-0"><div class="px-6 pb-6 pt-4"><ul class="flex flex-col gap-3"><li><a class="flex items-center border-l-[3px] px-4 py-3.5 text-base font-medium text-nav-foreground no-underline transition-all duration-200 border-l-transparent hover:border-l-nav-foreground hover:bg-muted" href="/puzzles" data-discover="true">Puzzles</a></li><li><a class="flex items-center border-l-[3px] px-4 py-3.5 text-base font-medium text-nav-foreground no-underline transition-all duration-200 border-l-transparent hover:border-l-nav-foreground hover:bg-muted" href="/expeditions" data-discover="true">Expeditions</a></li><li><a class="flex items-center border-l-[3px] px-4 py-3.5 text-base font-medium text-nav-foreground no-underline transition-all duration-200 border-l-transparent hover:border-l-nav-foreground hover:bg-muted" href="/progress" data-discover="true">Progress</a></li></ul><div class="mt-4 flex justify-center border-t border-border pt-4"><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 h-10 w-10 text-primary hover:bg-primary hover:text-background" aria-label="Light mode enabled. Switch to dark mode" aria-pressed="false"><div><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class=""><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path></svg></div></button></div></div></div><main><div class="container mx-auto px-4 py-6 max-w-4xl"><a class="inline-flex items-center gap-1.5 text-link hover:text-link-hover hover:underline mb-6 cursor-pointer" href="/puzzles" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-left size-4" aria-hidden="true"><path d="m15 18-6-6 6-6"></path></svg>Back</a><div class="flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4"><h1 class="text-4xl font-bold text-foreground sm:flex-1">Average Salaries 2</h1><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border bg-background h-10 px-4 py-2 border-completed text-completed hover:bg-completed/20 gap-2 w-full sm:w-40" aria-label="Mark puzzle as solved">Mark as Solved</button></div><div class="space-y-4 border-b border-divider pb-6 mb-6"><div><span class="px-3 py-1 rounded-full text-sm font-medium bg-difficulty-hard text-difficulty-hard-foreground">Hard</span></div><div class="text-sm text-muted-foreground"><span>Created: <!-- -->November 2, 2025</span></div></div><div class="my-6"><h2 class="text-lg font-semibold mb-3">Previous puzzle in this series</h2><div class="overflow-hidden rounded-xl border border-border bg-card [&amp;&gt;*]:border-b [&amp;&gt;*]:border-border [&amp;&gt;*:last-child]:border-b-0"><a class="relative block transition-colors no-underline p-4 hover:bg-muted" href="/puzzle/average-salaries-1" data-discover="true"><div class="flex items-center gap-3 mb-3"><span class="px-3 py-1 rounded-full text-sm font-medium bg-difficulty-medium text-difficulty-medium-foreground">Medium</span></div><div class="space-y-2"><h3 class="text-base font-semibold pr-8 text-foreground">Average Salaries 1</h3><p class="text-sm line-clamp-2 pr-8 text-muted-foreground">There’s a global pandemic going on, so everyone is working from home. During this time, 12 employees with similar roles wonder if there are any large salary...</p></div></a></div></div><div class="markdown-content prose max-w-none space-y-4"><p>Back in <a href="/puzzle/average-salaries-1" data-discover="true">Average Salaries 1</a>, 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s the method they came up with:</p>
<details class="content-block spoiler-block" data-type="spoiler"><summary class="spoiler-label">Spoiler: Solution to the previous puzzle</summary><div class="spoiler-content markdown-content prose max-w-none px-4 py-4 space-y-4"><ol>
<li>Number the employees them 1 to 12.</li>
<li>Employee 1 comes up with a random number, which we will call <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation>X</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span>, and adds his salary to it. He emails this sum to employee 2.</li>
<li>Employee 2 adds his salary to the sum and emails the new sum to employee 3.</li>
<li>Employee 3 does the same, sending the new sum to employee 4.</li>
<li>Repeat this process until employee 12 has everyone’s salaries + <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation>X</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span>. He then sends this overall sum to employee 1.</li>
<li>Employee 1 now has the overall sum, which is the sum of everyone’s salaries + <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation>X</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span>. He subtracts <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>X</mi></mrow><annotation>X</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord mathnormal" style="margin-right:0.07847em">X</span></span></span></span> from it, leaving him with the sum of all their salaries. He then divides this sum by 12 to get their average salary.</li>
</ol></div></details>
<p>However, before they begin, one employee interrupts. “Wait! I’m number 7. What if number 6 and number 8 collude? Employee 6 can tell employee 8 what he sent me, then employee 8 can calculate the difference to get my salary.”</p>
<p>The employees pause to think about it. With their current solution, if any 2 employees collude and reveal the contents of their emails, they can find out someone else’s salary. That’s not great.</p>
<p>Is there a way we can do better? Can we make it such that if any 10 employees try to collude, they still can’t get anyone’s salary?</p>
<details class="content-block hint-block" data-type="hint"><summary class="hint-label">Hint: Why 10 employees, not 11?</summary><div class="hint-content markdown-content prose max-w-none px-4 py-4 space-y-4"><p>No matter what method you use to come up with the average salary, any 11 employees colluding can <strong>always</strong> get the 12th employees salary.</p><p>Let’s assume the 12 employees find out their average salary <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>1</mn></msub></mrow><annotation>S_1</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span>.</p><p>If any 11 employees are colluding, they can use the same method to find out their average salary <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>S</mi><mn>2</mn></msub></mrow><annotation>S_2</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span>.</p><p>Then the 12th employee’s salary is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>12</mn><msub><mi>S</mi><mn>1</mn></msub><mo>−</mo><mn>11</mn><msub><mi>S</mi><mn>2</mn></msub></mrow><annotation>12S_1 - 11S_2</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord">12</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em"></span><span class="mord">11</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span>. This is possible no matter what method you use to get the average salary.</p></div></details>
<details class="content-block hint-block" data-type="hint"><summary class="hint-label">Hint</summary><div class="hint-content markdown-content prose max-w-none px-4 py-4 space-y-4"><p>Just as before, the number of coworkers doesn’t matter. In general, for <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation>n</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.4306em"></span><span class="mord mathnormal">n</span></span></span></span> employees, is there a method that doesn’t allow any <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>−</mo><mn>2</mn></mrow><annotation>n-2</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">2</span></span></span></span> employees to get another employee’s salary?</p></div></details>
<details class="content-block hint-block" data-type="hint"><summary class="hint-label">Hint: Examining A Semi-Working Solution</summary><div class="hint-content markdown-content prose max-w-none px-4 py-4 space-y-4"><p>After some more discusson in a video call, someone comes up with another solution. Instead of sending the email in a loop from 1 to 12, then back to 1, they will send it in 2 loops instead.</p><p>This time, every employee comes up with a random number that they’ll keep secret.</p><ol>
<li>Number the employees them 1 to 12.</li>
<li>Employee 1 emails his salary and his random number to employee 2.</li>
<li>Employee 2 adds his salary and his random number to employee 1’s salary and emails the sum to employee 3.</li>
<li>Employee 3 does the same, sending the new sum to employee 4.</li>
<li>Repeat this process until employee 12 sends the sum back to employee 1.</li>
<li>This time, employee 1 deducts his random number from the sum and sends the new sum to employee 2.</li>
<li>Employee 2 deducts his random number and sends the new sum to employee 3.</li>
<li>This repeats until the sum reaches employee 12. Employee 12 deducts his random number, then divides the final sum by 12 to get the average salary.</li>
</ol><p>Let <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>s</mi><mi>i</mi></msub></mrow><annotation>s_i</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> be the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>i</mi><mtext>th</mtext></msup></mrow><annotation>i^\text{th}</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">th</span></span></span></span></span></span></span></span></span></span></span></span> employee’s salary, and <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>r</mi><mi>i</mi></msub></mrow><annotation>r_i</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span> be the <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>i</mi><mtext>th</mtext></msup></mrow><annotation>i^\text{th}</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord mathnormal">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">th</span></span></span></span></span></span></span></span></span></span></span></span> employee’s random number. Our total sum would be:</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>12</mn></msubsup><mo>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>+</mo><msub><mi>r</mi><mi>i</mi></msub><mo>)</mo><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>12</mn></msubsup><msub><mi>r</mi><mi>i</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>12</mn></msubsup><mo>(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>)</mo></mrow><annotation>\sum_{i=1}^{12} (s_i + r_i) - \sum_{i=1}^{12} r_i = \sum_{i=1}^{12} (s_i)</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1.2537em;vertical-align:-0.2997em"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.954em"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></p><p>The final sum divided by 12 gives the average salary, as expected.</p><p>Employee 7 is not convinced. “Employee 6 and 8 can still figure out my salary! On both passes, they can see how much I’ve added and deducted. They can add the differences up to get my salary anyway.”</p><p>Back to the drawing board.</p></div></details>
<details class="content-block solution-block" data-type="solution"><summary class="solution-label">Solution</summary><div class="solution-content markdown-content prose max-w-none px-4 py-4 space-y-4"><p>Let’s imagine a sequence of emails that goes through all the employees in some specified order. As before, each time an employee receives a cumulative sum, modifies it, then emails it on to the next employee.</p><p>The semi-working solution earlier certainly didn’t work, but there’s a seed of a solution in there. Let’s say for a particular employee X, the email chain passes through him three times.</p><ol>
<li>The first time, employee A emails the sum to employee X. Employee X adds 1000 to the number and emails it to employee B.</li>
<li>The second time, employee C emails the sum to employee X. Employee X subtracts 2500 and emails it to employee D.</li>
<li>The third time, employee E emails the sum to employee X. Employee X adds 7000 and emails it to employee F.</li>
</ol><p>The total sum of his changes amounts to his pay of $5500.</p><p>However, imagine that you’re another employee trying to get that previous employee’s salary. If you only got access to 1 or 2 of the numbers (1000, -2500, or 7000), you still don’t have any information as to that employee’s salary. You need all the numbers to compute the person’s salary.</p><p>In fact, you need access to employee A, B, C, D, E, and F to get all these numbers. If any one of them refuse to collude with you, you can’t determine employee X’s salary.</p><p>In general, for any employee X, all the employees that he sends and receives email from must be colluding in order to find out employee X’s salary. If any 1 of them doesn’t cooperate, then his salary remains unknown.</p><p>That gives us an idea of the strategy:</p><ul>
<li>
<p>The email path must go through all the employees such that for any 2 employees X and Y, the email path must go through them.</p>
</li>
<li>
<p>For any employee X, all his contributions to the sum must add up to his salary. The individual contributions can be positive or negative.</p>
</li>
</ul><p>But how do we determine what this path is? Let’s start with a scenario with 5 employees. Let’s represent it with a graph: each vertex represents an employee, and we draw edges between all pairs of employees. We want to draw a path that covers all edges.</p><div class="dynamic-block-container flex justify-center"><iframe class="border-0 block" sandbox="allow-scripts" srcDoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#x27;none&#x27;; script-src &#x27;unsafe-inline&#x27;; style-src &#x27;unsafe-inline&#x27;; img-src data:;&quot;&gt;
  &lt;style&gt;
    /* Prevent scrollbars in iframe while allowing content to expand */
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: auto;
      min-height: 0;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    #root {
      /* flex: 1; */
      /* min-height: 0; */
    }

    /* Theme CSS variables (light/dark mode) */
    /* Theme overrides and customizations */

:root {
  --width-container: 1000px;
}

/* Text selection styling (applied to both main app and iframes) */
::selection {
  background-color: var(--color-selection);
  color: var(--color-selection-foreground);
}


:root {
  --radius: 0.5rem;

  /* Navy */
  --color-navy-50: oklch(0.97 0.015 220);
  --color-navy-100: oklch(0.94 0.020 220);
  --color-navy-200: oklch(0.88 0.030 220);
  --color-navy-300: oklch(0.80 0.045 220);
  --color-navy-400: oklch(0.68 0.060 220);
  --color-navy-500: oklch(0.55 0.075 220);
  --color-navy-600: oklch(0.45 0.080 220);
  --color-navy-700: oklch(0.35 0.075 220);
  --color-navy-800: oklch(0.27 0.065 220);
  --color-navy-900: oklch(0.20 0.050 220);
  --color-navy-950: oklch(0.15 0.040 220);

  /* Frost */
  --color-frost-50: oklch(0.98 0.010 250);
  --color-frost-100: oklch(0.95 0.015 250);
  --color-frost-200: oklch(0.90 0.025 250);
  --color-frost-300: oklch(0.83 0.035 250);
  --color-frost-400: oklch(0.74 0.045 250);
  --color-frost-500: oklch(0.65 0.055 250);
  --color-frost-600: oklch(0.55 0.060 250);
  --color-frost-700: oklch(0.45 0.055 250);
  --color-frost-800: oklch(0.35 0.045 250);
  --color-frost-900: oklch(0.27 0.035 250);
  --color-frost-950: oklch(0.20 0.025 250);

  /* Lagoon */
  --color-lagoon-50: oklch(0.97 0.015 185);
  --color-lagoon-100: oklch(0.94 0.025 185);
  --color-lagoon-200: oklch(0.88 0.040 185);
  --color-lagoon-300: oklch(0.80 0.055 185);
  --color-lagoon-400: oklch(0.70 0.070 185);
  --color-lagoon-500: oklch(0.60 0.080 185);
  --color-lagoon-600: oklch(0.50 0.085 185);
  --color-lagoon-700: oklch(0.40 0.080 185);
  --color-lagoon-800: oklch(0.32 0.070 185);
  --color-lagoon-900: oklch(0.25 0.055 185);
  --color-lagoon-950: oklch(0.18 0.040 185);

  /* Evergreen */
  --color-evergreen-50: oklch(0.97 0.020 155);
  --color-evergreen-100: oklch(0.93 0.035 155);
  --color-evergreen-200: oklch(0.87 0.055 155);
  --color-evergreen-300: oklch(0.79 0.070 155);
  --color-evergreen-400: oklch(0.69 0.085 155);
  --color-evergreen-500: oklch(0.59 0.095 155);
  --color-evergreen-600: oklch(0.49 0.100 155);
  --color-evergreen-700: oklch(0.41 0.095 155);
  --color-evergreen-800: oklch(0.33 0.080 155);
  --color-evergreen-900: oklch(0.27 0.065 155);
  --color-evergreen-950: oklch(0.21 0.050 155);

  /* Sand */
  --color-sand-50: oklch(0.98 0.012 95);
  --color-sand-100: oklch(0.95 0.020 95);
  --color-sand-200: oklch(0.90 0.035 95);
  --color-sand-300: oklch(0.84 0.050 95);
  --color-sand-400: oklch(0.76 0.065 95);
  --color-sand-500: oklch(0.68 0.080 95);
  --color-sand-600: oklch(0.60 0.090 95);
  --color-sand-700: oklch(0.50 0.085 95);
  --color-sand-800: oklch(0.40 0.070 95);
  --color-sand-900: oklch(0.32 0.055 95);
  --color-sand-950: oklch(0.26 0.040 95);

  /* Error */
  --color-error-50: oklch(0.97 0.020 25);
  --color-error-100: oklch(0.94 0.035 25);
  --color-error-200: oklch(0.88 0.055 25);
  --color-error-300: oklch(0.80 0.075 25);
  --color-error-400: oklch(0.70 0.095 25);
  --color-error-500: oklch(0.60 0.110 25);
  --color-error-600: oklch(0.50 0.115 25);
  --color-error-700: oklch(0.42 0.110 25);
  --color-error-800: oklch(0.34 0.095 25);
  --color-error-900: oklch(0.28 0.075 25);
  --color-error-950: oklch(0.22 0.055 25);

  /* Warning */
  --color-warning-50: oklch(0.97 0.020 75);
  --color-warning-100: oklch(0.94 0.035 75);
  --color-warning-200: oklch(0.89 0.060 75);
  --color-warning-300: oklch(0.82 0.085 75);
  --color-warning-400: oklch(0.73 0.105 75);
  --color-warning-500: oklch(0.65 0.120 75);
  --color-warning-600: oklch(0.56 0.125 75);
  --color-warning-700: oklch(0.47 0.115 75);
  --color-warning-800: oklch(0.38 0.095 75);
  --color-warning-900: oklch(0.30 0.070 75);
  --color-warning-950: oklch(0.24 0.050 75);

  /* Success */
  --color-success-50: oklch(0.97 0.020 165);
  --color-success-100: oklch(0.93 0.035 165);
  --color-success-200: oklch(0.87 0.055 165);
  --color-success-300: oklch(0.79 0.075 165);
  --color-success-400: oklch(0.69 0.095 165);
  --color-success-500: oklch(0.59 0.110 165);
  --color-success-600: oklch(0.49 0.115 165);
  --color-success-700: oklch(0.41 0.105 165);
  --color-success-800: oklch(0.33 0.090 165);
  --color-success-900: oklch(0.27 0.070 165);
  --color-success-950: oklch(0.21 0.050 165);

  /* ======================================================
     Tailwind-like Colour Palette
     Inspired by standard Tailwind CSS v4 colours for
     diagrams and illustrations. For website UI, use the
     mountain theme palette above or semantic colours
     instead.
     ====================================================== */

  /* Red */
  --color-red-50: oklch(0.971 0.008 17.38);
  --color-red-100: oklch(0.936 0.019 17.717);
  --color-red-200: oklch(0.885 0.037 18.334);
  --color-red-300: oklch(0.808 0.068 19.571);
  --color-red-400: oklch(0.704 0.115 22.216);
  --color-red-500: oklch(0.637 0.142 25.331);
  --color-red-600: oklch(0.577 0.147 27.325);
  --color-red-700: oklch(0.505 0.128 27.518);
  --color-red-800: oklch(0.444 0.106 26.899);
  --color-red-900: oklch(0.396 0.085 25.723);
  --color-red-950: oklch(0.258 0.055 26.042);
  --color-red: var(--color-red-400);

  /* Orange */
  --color-orange-50: oklch(0.980 0.010 73.684);
  --color-orange-100: oklch(0.954 0.023 75.164);
  --color-orange-200: oklch(0.901 0.046 70.697);
  --color-orange-300: oklch(0.837 0.077 66.29);
  --color-orange-400: oklch(0.750 0.110 55.934);
  --color-orange-500: oklch(0.705 0.128 47.604);
  --color-orange-600: oklch(0.646 0.133 41.116);
  --color-orange-700: oklch(0.553 0.117 38.402);
  --color-orange-800: oklch(0.470 0.094 37.304);
  --color-orange-900: oklch(0.408 0.074 38.172);
  --color-orange-950: oklch(0.266 0.047 36.259);
  --color-orange: var(--color-orange-400);

  /* Amber */
  --color-amber-50: oklch(0.987 0.013 95.277);
  --color-amber-100: oklch(0.962 0.035 95.617);
  --color-amber-200: oklch(0.924 0.072 95.746);
  --color-amber-300: oklch(0.879 0.101 91.605);
  --color-amber-400: oklch(0.828 0.113 84.429);
  --color-amber-500: oklch(0.769 0.113 70.08);
  --color-amber-600: oklch(0.666 0.107 58.318);
  --color-amber-700: oklch(0.555 0.098 48.998);
  --color-amber-800: oklch(0.473 0.082 46.201);
  --color-amber-900: oklch(0.414 0.067 45.904);
  --color-amber-950: oklch(0.279 0.046 45.635);
  --color-amber: var(--color-amber-400);

  /* Yellow */
  --color-yellow-50: oklch(0.987 0.016 102.212);
  --color-yellow-100: oklch(0.973 0.043 103.193);
  --color-yellow-200: oklch(0.945 0.077 101.54);
  --color-yellow-300: oklch(0.905 0.109 98.111);
  --color-yellow-400: oklch(0.852 0.119 91.936);
  --color-yellow-500: oklch(0.795 0.110 86.047);
  --color-yellow-600: oklch(0.681 0.097 75.834);
  --color-yellow-700: oklch(0.554 0.081 66.442);
  --color-yellow-800: oklch(0.476 0.068 61.907);
  --color-yellow-900: oklch(0.421 0.057 57.708);
  --color-yellow-950: oklch(0.286 0.040 53.813);
  --color-yellow: var(--color-yellow-400);

  /* Lime */
  --color-lime-50: oklch(0.986 0.019 120.757);
  --color-lime-100: oklch(0.967 0.040 122.328);
  --color-lime-200: oklch(0.938 0.076 124.321);
  --color-lime-300: oklch(0.897 0.118 126.665);
  --color-lime-400: oklch(0.841 0.143 128.85);
  --color-lime-500: oklch(0.768 0.140 130.85);
  --color-lime-600: oklch(0.648 0.120 131.684);
  --color-lime-700: oklch(0.532 0.094 131.589);
  --color-lime-800: oklch(0.453 0.074 130.933);
  --color-lime-900: oklch(0.405 0.061 131.063);
  --color-lime-950: oklch(0.274 0.043 132.109);
  --color-lime: var(--color-lime-400);

  /* Green */
  --color-green-50: oklch(0.982 0.011 155.826);
  --color-green-100: oklch(0.962 0.026 156.743);
  --color-green-200: oklch(0.925 0.050 155.995);
  --color-green-300: oklch(0.871 0.090 154.449);
  --color-green-400: oklch(0.792 0.125 151.711);
  --color-green-500: oklch(0.723 0.131 149.579);
  --color-green-600: oklch(0.627 0.116 149.214);
  --color-green-700: oklch(0.527 0.092 150.069);
  --color-green-800: oklch(0.448 0.071 151.328);
  --color-green-900: oklch(0.393 0.057 152.535);
  --color-green-950: oklch(0.266 0.039 152.934);
  --color-green: var(--color-green-400);

  /* Emerald */
  --color-emerald-50: oklch(0.979 0.013 166.113);
  --color-emerald-100: oklch(0.950 0.031 163.051);
  --color-emerald-200: oklch(0.905 0.056 164.15);
  --color-emerald-300: oklch(0.845 0.086 164.978);
  --color-emerald-400: oklch(0.765 0.106 163.223);
  --color-emerald-500: oklch(0.696 0.102 162.48);
  --color-emerald-600: oklch(0.596 0.087 163.225);
  --color-emerald-700: oklch(0.508 0.071 165.612);
  --color-emerald-800: oklch(0.432 0.057 166.913);
  --color-emerald-900: oklch(0.378 0.046 168.94);
  --color-emerald-950: oklch(0.262 0.031 172.552);
  --color-emerald: var(--color-emerald-400);

  /* Teal */
  --color-teal-50: oklch(0.984 0.008 180.72);
  --color-teal-100: oklch(0.953 0.031 180.801);
  --color-teal-200: oklch(0.910 0.058 180.426);
  --color-teal-300: oklch(0.855 0.083 181.071);
  --color-teal-400: oklch(0.777 0.091 181.912);
  --color-teal-500: oklch(0.704 0.084 182.503);
  --color-teal-600: oklch(0.600 0.071 184.704);
  --color-teal-700: oklch(0.511 0.058 186.391);
  --color-teal-800: oklch(0.437 0.047 188.216);
  --color-teal-900: oklch(0.386 0.038 188.416);
  --color-teal-950: oklch(0.277 0.028 192.524);
  --color-teal: var(--color-teal-400);

  /* Cyan */
  --color-cyan-50: oklch(0.984 0.011 200.873);
  --color-cyan-100: oklch(0.956 0.027 203.388);
  --color-cyan-200: oklch(0.917 0.048 205.041);
  --color-cyan-300: oklch(0.865 0.076 207.078);
  --color-cyan-400: oklch(0.789 0.092 211.53);
  --color-cyan-500: oklch(0.715 0.086 215.221);
  --color-cyan-600: oklch(0.609 0.076 221.723);
  --color-cyan-700: oklch(0.520 0.063 223.128);
  --color-cyan-800: oklch(0.450 0.051 224.283);
  --color-cyan-900: oklch(0.398 0.042 227.392);
  --color-cyan-950: oklch(0.302 0.034 229.695);
  --color-cyan: var(--color-cyan-400);

  /* Sky */
  --color-sky-50: oklch(0.977 0.008 236.62);
  --color-sky-100: oklch(0.951 0.016 236.824);
  --color-sky-200: oklch(0.901 0.035 230.902);
  --color-sky-300: oklch(0.828 0.067 230.318);
  --color-sky-400: oklch(0.746 0.096 232.661);
  --color-sky-500: oklch(0.685 0.101 237.323);
  --color-sky-600: oklch(0.588 0.095 241.966);
  --color-sky-700: oklch(0.500 0.080 242.749);
  --color-sky-800: oklch(0.443 0.066 240.79);
  --color-sky-900: oklch(0.391 0.054 240.876);
  --color-sky-950: oklch(0.293 0.040 243.157);
  --color-sky: var(--color-sky-400);

  /* Blue */
  --color-blue-50: oklch(0.970 0.008 254.604);
  --color-blue-100: oklch(0.932 0.019 255.585);
  --color-blue-200: oklch(0.882 0.035 254.128);
  --color-blue-300: oklch(0.809 0.063 251.813);
  --color-blue-400: oklch(0.707 0.099 254.624);
  --color-blue-500: oklch(0.623 0.128 259.815);
  --color-blue-600: oklch(0.546 0.147 262.881);
  --color-blue-700: oklch(0.488 0.146 264.376);
  --color-blue-800: oklch(0.424 0.119 265.638);
  --color-blue-900: oklch(0.379 0.088 265.522);
  --color-blue-950: oklch(0.282 0.055 267.935);
  --color-blue: var(--color-blue-400);

  /* Indigo */
  --color-indigo-50: oklch(0.962 0.011 272.314);
  --color-indigo-100: oklch(0.930 0.020 272.788);
  --color-indigo-200: oklch(0.870 0.039 274.039);
  --color-indigo-300: oklch(0.785 0.069 274.713);
  --color-indigo-400: oklch(0.673 0.109 276.935);
  --color-indigo-500: oklch(0.585 0.140 277.117);
  --color-indigo-600: oklch(0.511 0.157 276.966);
  --color-indigo-700: oklch(0.457 0.144 277.023);
  --color-indigo-800: oklch(0.398 0.117 277.366);
  --color-indigo-900: oklch(0.359 0.086 278.697);
  --color-indigo-950: oklch(0.257 0.054 281.288);
  --color-indigo: var(--color-indigo-400);

  /* Violet */
  --color-violet-50: oklch(0.969 0.010 293.756);
  --color-violet-100: oklch(0.943 0.017 294.588);
  --color-violet-200: oklch(0.894 0.034 293.283);
  --color-violet-300: oklch(0.811 0.067 293.571);
  --color-violet-400: oklch(0.702 0.110 293.541);
  --color-violet-500: oklch(0.606 0.150 292.717);
  --color-violet-600: oklch(0.541 0.169 293.009);
  --color-violet-700: oklch(0.491 0.162 292.581);
  --color-violet-800: oklch(0.432 0.139 292.759);
  --color-violet-900: oklch(0.380 0.113 293.745);
  --color-violet-950: oklch(0.283 0.085 291.089);
  --color-violet: var(--color-violet-400);

  /* Purple */
  --color-purple-50: oklch(0.977 0.008 308.299);
  --color-purple-100: oklch(0.946 0.020 307.174);
  --color-purple-200: oklch(0.902 0.038 306.703);
  --color-purple-300: oklch(0.827 0.071 306.383);
  --color-purple-400: oklch(0.714 0.122 305.504);
  --color-purple-500: oklch(0.627 0.159 303.9);
  --color-purple-600: oklch(0.558 0.173 302.321);
  --color-purple-700: oklch(0.496 0.159 301.924);
  --color-purple-800: oklch(0.438 0.131 303.724);
  --color-purple-900: oklch(0.381 0.106 304.987);
  --color-purple-950: oklch(0.291 0.089 302.717);
  --color-purple: var(--color-purple-400);

  /* Fuchsia */
  --color-fuchsia-50: oklch(0.977 0.010 320.058);
  --color-fuchsia-100: oklch(0.952 0.022 318.852);
  --color-fuchsia-200: oklch(0.903 0.046 319.62);
  --color-fuchsia-300: oklch(0.833 0.087 321.434);
  --color-fuchsia-400: oklch(0.740 0.143 322.16);
  --color-fuchsia-500: oklch(0.667 0.177 322.15);
  --color-fuchsia-600: oklch(0.591 0.176 322.896);
  --color-fuchsia-700: oklch(0.518 0.152 323.949);
  --color-fuchsia-800: oklch(0.452 0.127 324.591);
  --color-fuchsia-900: oklch(0.401 0.102 325.612);
  --color-fuchsia-950: oklch(0.293 0.082 325.661);
  --color-fuchsia: var(--color-fuchsia-400);

  /* Pink */
  --color-pink-50: oklch(0.971 0.008 343.198);
  --color-pink-100: oklch(0.948 0.017 342.258);
  --color-pink-200: oklch(0.899 0.037 343.231);
  --color-pink-300: oklch(0.823 0.072 346.018);
  --color-pink-400: oklch(0.718 0.121 349.761);
  --color-pink-500: oklch(0.656 0.145 354.308);
  --color-pink-600: oklch(0.592 0.149 0.584);
  --color-pink-700: oklch(0.525 0.134 3.958);
  --color-pink-800: oklch(0.459 0.112 3.815);
  --color-pink-900: oklch(0.408 0.092 2.432);
  --color-pink-950: oklch(0.284 0.065 3.907);
  --color-pink: var(--color-pink-400);

  /* Rose */
  --color-rose-50: oklch(0.969 0.009 12.422);
  --color-rose-100: oklch(0.941 0.018 12.58);
  --color-rose-200: oklch(0.892 0.035 10.001);
  --color-rose-300: oklch(0.810 0.070 11.638);
  --color-rose-400: oklch(0.712 0.116 13.428);
  --color-rose-500: oklch(0.645 0.148 16.439);
  --color-rose-600: oklch(0.586 0.152 17.585);
  --color-rose-700: oklch(0.514 0.133 16.935);
  --color-rose-800: oklch(0.455 0.113 13.697);
  --color-rose-900: oklch(0.410 0.095 10.272);
  --color-rose-950: oklch(0.271 0.063 12.094);
  --color-rose: var(--color-rose-400);

  /* Slate */
  --color-slate-50: oklch(0.984 0.002 247.858);
  --color-slate-100: oklch(0.968 0.004 247.896);
  --color-slate-200: oklch(0.929 0.008 255.508);
  --color-slate-300: oklch(0.869 0.013 252.894);
  --color-slate-400: oklch(0.704 0.024 256.788);
  --color-slate-500: oklch(0.554 0.028 257.417);
  --color-slate-600: oklch(0.446 0.026 257.281);
  --color-slate-700: oklch(0.372 0.026 257.287);
  --color-slate-800: oklch(0.279 0.025 260.031);
  --color-slate-900: oklch(0.208 0.025 265.755);
  --color-slate-950: oklch(0.129 0.025 264.695);
  --color-slate: var(--color-slate-400);

  /* Gray */
  --color-gray-50: oklch(0.985 0.001 247.839);
  --color-gray-100: oklch(0.967 0.002 264.542);
  --color-gray-200: oklch(0.928 0.004 264.531);
  --color-gray-300: oklch(0.872 0.006 258.338);
  --color-gray-400: oklch(0.707 0.013 261.325);
  --color-gray-500: oklch(0.551 0.016 264.364);
  --color-gray-600: oklch(0.446 0.018 256.802);
  --color-gray-700: oklch(0.373 0.020 259.733);
  --color-gray-800: oklch(0.278 0.020 256.848);
  --color-gray-900: oklch(0.210 0.020 264.665);
  --color-gray-950: oklch(0.130 0.017 261.692);
  --color-gray: var(--color-gray-400);

  /* Zinc */
  --color-zinc-50: oklch(0.985 0 0);
  --color-zinc-100: oklch(0.967 0.001 286.375);
  --color-zinc-200: oklch(0.920 0.002 286.32);
  --color-zinc-300: oklch(0.871 0.004 286.286);
  --color-zinc-400: oklch(0.705 0.009 286.067);
  --color-zinc-500: oklch(0.552 0.010 285.938);
  --color-zinc-600: oklch(0.442 0.010 285.786);
  --color-zinc-700: oklch(0.370 0.008 285.805);
  --color-zinc-800: oklch(0.274 0.004 286.033);
  --color-zinc-900: oklch(0.210 0.004 285.885);
  --color-zinc-950: oklch(0.141 0.003 285.823);
  --color-zinc: var(--color-zinc-400);

  /* Neutral */
  --color-neutral-50: oklch(0.985 0 0);
  --color-neutral-100: oklch(0.970 0 0);
  --color-neutral-200: oklch(0.922 0 0);
  --color-neutral-300: oklch(0.870 0 0);
  --color-neutral-400: oklch(0.708 0 0);
  --color-neutral-500: oklch(0.556 0 0);
  --color-neutral-600: oklch(0.439 0 0);
  --color-neutral-700: oklch(0.371 0 0);
  --color-neutral-800: oklch(0.269 0 0);
  --color-neutral-900: oklch(0.205 0 0);
  --color-neutral-950: oklch(0.145 0 0);
  --color-neutral: var(--color-neutral-400);

  /* Stone */
  --color-stone-50: oklch(0.985 0.001 106.423);
  --color-stone-100: oklch(0.970 0.001 106.424);
  --color-stone-200: oklch(0.923 0.002 48.717);
  --color-stone-300: oklch(0.869 0.003 56.366);
  --color-stone-400: oklch(0.709 0.006 56.259);
  --color-stone-500: oklch(0.553 0.008 58.071);
  --color-stone-600: oklch(0.444 0.007 73.639);
  --color-stone-700: oklch(0.374 0.006 67.558);
  --color-stone-800: oklch(0.268 0.004 34.298);
  --color-stone-900: oklch(0.216 0.004 56.043);
  --color-stone-950: oklch(0.147 0.002 49.25);
  --color-stone: var(--color-stone-400);

  /* Pure white */
  --color-white: oklch(1 0 0);
}

/* Semantic UI Theme Variables */

:root {
  /* Base colors */
  --color-background: var(--color-frost-50);
  --color-foreground: var(--color-navy-950);

  /* Card */
  --color-card: var(--color-white);
  --color-card-foreground: var(--color-navy-950);

  /* Popover */
  --color-popover: var(--color-white);
  --color-popover-foreground: var(--color-navy-950);

  /* Primary */
  --color-primary: var(--color-navy-600);
  --color-primary-foreground: var(--color-white);

  /* Secondary */
  --color-secondary: var(--color-evergreen-600);
  --color-secondary-foreground: var(--color-white);

  /* Muted */
  --color-muted: var(--color-frost-100);
  --color-muted-foreground: var(--color-navy-600);

  /* Accent */
  --color-accent: var(--color-sand-600);
  --color-accent-foreground: var(--color-white);

  /* Destructive */
  --color-destructive: var(--color-error-600);
  --color-destructive-foreground: var(--color-white);

  /* Success */
  --color-success: var(--color-success-600);
  --color-success-foreground: var(--color-white);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-500);
  --color-completed-foreground: var(--color-white);

  /* Warning */
  --color-warning: var(--color-warning-600);
  --color-warning-foreground: var(--color-white);

  /* Info */
  --color-info: var(--color-navy-500);
  --color-info-foreground: var(--color-white);

  /* Border */
  --color-border: var(--color-frost-600);
  --color-input: var(--color-frost-300);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-frost-200);
  --color-surface: var(--color-white);
  --color-text-secondary: var(--color-frost-600);
  --color-text-emphasis: var(--color-navy-600);
  --color-link: var(--color-navy-600);
  --color-link-hover: var(--color-navy-700);

  /* Select component */
  --color-select-hover: var(--color-navy-50);
  --color-select-hover-foreground: var(--color-navy-950);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-600);
  --color-checkbox-checked-foreground: var(--color-white);

  /* Navigation */
  --color-nav-foreground: var(--color-navy-600);

  /* Text selection */
  --color-selection: var(--color-navy-200);
  --color-selection-foreground: var(--color-navy-900);

  /* Difficulty levels (puzzles) */
  --color-difficulty-easy: var(--color-success-100);
  --color-difficulty-easy-foreground: var(--color-success-800);
  --color-difficulty-medium: var(--color-navy-100);
  --color-difficulty-medium-foreground: var(--color-navy-800);
  --color-difficulty-hard: var(--color-warning-100);
  --color-difficulty-hard-foreground: var(--color-warning-800);
  --color-difficulty-expert: var(--color-error-100);
  --color-difficulty-expert-foreground: var(--color-error-800);
  --color-difficulty-open: var(--color-frost-200);
  --color-difficulty-open-foreground: var(--color-frost-900);

  /* Gradients */
  --gradient-recommendation-start: var(--color-evergreen-500);
  --gradient-recommendation-end: var(--color-navy-500);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


.dark {
  /* Base colors */
  --color-background: oklch(0.10 0.035 220); /* darker than navy-950, almost pure black */
  --color-foreground: var(--color-frost-200);

  /* Card */
  --color-card: var(--color-navy-900);
  --color-card-foreground: var(--color-frost-200);

  /* Popover */
  --color-popover: var(--color-navy-900);
  --color-popover-foreground: var(--color-frost-200);

  /* Primary */
  --color-primary: var(--color-navy-400);
  --color-primary-foreground: var(--color-navy-950);

  /* Secondary */
  --color-secondary: var(--color-evergreen-400);
  --color-secondary-foreground: var(--color-navy-950);

  /* Muted */
  --color-muted: var(--color-navy-800);
  --color-muted-foreground: var(--color-frost-400);

  /* Accent */
  --color-accent: var(--color-sand-400);
  --color-accent-foreground: var(--color-navy-950);

  /* Destructive */
  --color-destructive: var(--color-error-400);
  --color-destructive-foreground: var(--color-navy-950);

  /* Success */
  --color-success: var(--color-success-400);
  --color-success-foreground: var(--color-navy-950);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-300);
  --color-completed-foreground: var(--color-navy-950);

  /* Warning */
  --color-warning: var(--color-warning-400);
  --color-warning-foreground: var(--color-navy-950);

  /* Info */
  --color-info: var(--color-navy-300);
  --color-info-foreground: var(--color-navy-950);

  /* Border */
  --color-border: var(--color-navy-700);
  --color-input: var(--color-navy-600);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-navy-700);
  --color-surface: var(--color-navy-900);
  --color-text-secondary: var(--color-frost-400);
  --color-text-emphasis: var(--color-frost-50);
  --color-link: var(--color-navy-400);
  --color-link-hover: var(--color-navy-300);

  /* Select component */
  --color-select-hover: var(--color-navy-800);
  --color-select-hover-foreground: var(--color-frost-200);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-400);
  --color-checkbox-checked-foreground: var(--color-navy-950);

  /* Navigation */
  --color-nav-foreground: var(--color-frost-200);

  /* Text selection */
  --color-selection: var(--color-navy-700);
  --color-selection-foreground: var(--color-navy-100);

  /* Difficulty levels (puzzles) - dark mode */
  --color-difficulty-easy: var(--color-success-900);
  --color-difficulty-easy-foreground: var(--color-success-200);
  --color-difficulty-medium: var(--color-navy-900);
  --color-difficulty-medium-foreground: var(--color-navy-200);
  --color-difficulty-hard: var(--color-warning-900);
  --color-difficulty-hard-foreground: var(--color-warning-200);
  --color-difficulty-expert: var(--color-error-900);
  --color-difficulty-expert-foreground: var(--color-error-200);
  --color-difficulty-open: var(--color-frost-700);
  --color-difficulty-open-foreground: var(--color-frost-200);

  /* Gradients - dark mode */
  --gradient-recommendation-start: var(--color-evergreen-600);
  --gradient-recommendation-end: var(--color-navy-600);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


    /* Base Reset */
*, ::before, ::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: var(--color-border);
}

html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  tab-size: 4;
  font-family: &#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif;
  font-feature-settings: normal;
  font-variation-settings: normal;
}

body {
  margin: 0;
  line-height: inherit;
  color: var(--color-foreground);
  background-color: var(--color-background);
}

/* Reset margins on common elements */
h1, h2, h3, h4, h5, h6, p, blockquote, pre, ul, ol, dl, figure, hr {
  margin: 0;
}

/* Reset list styles */
ul, ol {
  padding: 0;
  list-style: none;
}

/* Reset buttons and inputs */
button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button, select {
  text-transform: none;
}

button, input:where([type=&#x27;button&#x27;]), input:where([type=&#x27;reset&#x27;]), input:where([type=&#x27;submit&#x27;]) {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
  cursor: pointer;
}

button:disabled, input:disabled {
  cursor: default;
}

/* Reset form elements */
input::placeholder, textarea::placeholder {
  opacity: 1;
  color: var(--color-muted-foreground);
}

/* Reset tables */
table {
  text-indent: 0;
  border-color: inherit;
  border-collapse: collapse;
}

/* Link styles */
a {
  color: var(--color-link);
  text-decoration: none;
}

a:hover {
  color: var(--color-link-hover);
  text-decoration: underline;
}

/* Reset headings */
h1, h2, h3, h4, h5, h6 {
  font-size: inherit;
  font-weight: inherit;
}

/* Reset images and media */
img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  vertical-align: middle;
}

img, video {
  max-width: 100%;
  height: auto;
}

/* Sandbox-specific UI styles */
.sandbox-select:invalid {
  color: var(--color-muted-foreground) !important;
}

.sandbox-select option {
  background-color: var(--color-popover) !important;
  color: var(--color-popover-foreground) !important;
  padding: 0.375rem 0.5rem !important;
}

.sandbox-select option:disabled {
  color: var(--color-muted-foreground) !important;
  background-color: var(--color-popover) !important;
}

.sandbox-select option:checked {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

.sandbox-select option:hover,
.sandbox-select option:focus,
.sandbox-select option:active {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

/* Peer helper class for Radix UI components */
.peer { }
    
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;

  &lt;!-- Runtime and globals script --&gt;
  &lt;script&gt;
    // Component props (available globally)
    window.__COMPONENT_PROPS__ = {&quot;n&quot;:5,&quot;maxWidth&quot;:300};

    // Canvas accessibility label (for canvas mode blocks)
    window.__CANVAS_ARIA_LABEL__ = null;

    // Injected sandbox runtime
    (() =&gt; {
  function createCSSGenerator() {
    const generatedClasses = /* @__PURE__ */ new Set();
    const styleSheet = new CSSStyleSheet();
    document.adoptedStyleSheets = [...document.adoptedStyleSheets, styleSheet];
    const spacingScale = {
      &quot;0&quot;: &quot;0&quot;,
      &quot;px&quot;: &quot;1px&quot;,
      &quot;0.5&quot;: &quot;0.125rem&quot;,
      &quot;1&quot;: &quot;0.25rem&quot;,
      &quot;1.5&quot;: &quot;0.375rem&quot;,
      &quot;2&quot;: &quot;0.5rem&quot;,
      &quot;2.5&quot;: &quot;0.625rem&quot;,
      &quot;3&quot;: &quot;0.75rem&quot;,
      &quot;3.5&quot;: &quot;0.875rem&quot;,
      &quot;4&quot;: &quot;1rem&quot;,
      &quot;5&quot;: &quot;1.25rem&quot;,
      &quot;6&quot;: &quot;1.5rem&quot;,
      &quot;7&quot;: &quot;1.75rem&quot;,
      &quot;8&quot;: &quot;2rem&quot;,
      &quot;9&quot;: &quot;2.25rem&quot;,
      &quot;10&quot;: &quot;2.5rem&quot;,
      &quot;11&quot;: &quot;2.75rem&quot;,
      &quot;12&quot;: &quot;3rem&quot;,
      &quot;14&quot;: &quot;3.5rem&quot;,
      &quot;16&quot;: &quot;4rem&quot;,
      &quot;20&quot;: &quot;5rem&quot;,
      &quot;24&quot;: &quot;6rem&quot;,
      &quot;28&quot;: &quot;7rem&quot;,
      &quot;32&quot;: &quot;8rem&quot;,
      &quot;36&quot;: &quot;9rem&quot;,
      &quot;40&quot;: &quot;10rem&quot;,
      &quot;44&quot;: &quot;11rem&quot;,
      &quot;48&quot;: &quot;12rem&quot;,
      &quot;52&quot;: &quot;13rem&quot;,
      &quot;56&quot;: &quot;14rem&quot;,
      &quot;60&quot;: &quot;15rem&quot;,
      &quot;64&quot;: &quot;16rem&quot;,
      &quot;72&quot;: &quot;18rem&quot;,
      &quot;80&quot;: &quot;20rem&quot;,
      &quot;96&quot;: &quot;24rem&quot;
    };
    const sizeValues = {
      &quot;auto&quot;: &quot;auto&quot;,
      &quot;full&quot;: &quot;100%&quot;,
      &quot;screen&quot;: &quot;100vw&quot;,
      // for width
      &quot;min&quot;: &quot;min-content&quot;,
      &quot;max&quot;: &quot;max-content&quot;,
      &quot;fit&quot;: &quot;fit-content&quot;
    };
    const parseArbitraryValue = (value) =&gt; {
      const match = value.match(/^\[(.+)\]$/);
      return match ? match[1] : null;
    };
    const parseOpacity = (className) =&gt; {
      const match = className.match(/^(.+?)\/(\d+)$/);
      if (match) {
        return { base: match[1], opacity: (parseInt(match[2]) / 100).toString() };
      }
      return { base: className, opacity: null };
    };
    const findMatchingBracket = (str, startIndex) =&gt; {
      if (str[startIndex] !== &quot;[&quot;) {
        return -1;
      }
      let depth = 0;
      for (let i = startIndex; i &lt; str.length; i++) {
        const char = str[i];
        if (char === &quot;[&quot;) {
          depth++;
        } else if (char === &quot;]&quot;) {
          depth--;
          if (depth === 0) {
            return i;
          }
        }
      }
      return -1;
    };
    const parseArbitrarySelector = (className) =&gt; {
      if (!className.startsWith(&quot;[&quot;)) {
        return null;
      }
      const closingBracketIndex = findMatchingBracket(className, 0);
      if (closingBracketIndex === -1 || className[closingBracketIndex + 1] !== &quot;:&quot;) {
        return null;
      }
      const bracketContent = className.substring(1, closingBracketIndex);
      if (!bracketContent.startsWith(&quot;&amp;&quot;)) {
        return null;
      }
      const selector = bracketContent.substring(1);
      const baseClass = className.substring(closingBracketIndex + 2);
      return { selector, baseClass };
    };
    const generateRule = (className) =&gt; {
      const arbitrarySelector = parseArbitrarySelector(className);
      if (arbitrarySelector) {
        const { selector, baseClass } = arbitrarySelector;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/&amp;/g, &quot;\\&amp;&quot;).replace(/&gt;/g, &quot;\\&gt;&quot;).replace(/\*/g, &quot;\\*&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\+/g, &quot;\\+&quot;).replace(/~/g, &quot;\\~&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const declarations = baseRule.substring(selectorEnd);
        return `.${escapedClass}${selector} ${declarations}`;
      }
      const variantMatch = className.match(/^(hover|focus|active|disabled|dark):(.+)$/);
      if (variantMatch) {
        const [, variant, baseClass] = variantMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const baseSelector = baseRule.substring(0, selectorEnd).trim();
        const declarations = baseRule.substring(selectorEnd);
        if (variant === &quot;hover&quot;) {
          return `.${escapedClass}:hover ${declarations}`;
        } else if (variant === &quot;focus&quot;) {
          return `.${escapedClass}:focus ${declarations}`;
        } else if (variant === &quot;active&quot;) {
          return `.${escapedClass}:active ${declarations}`;
        } else if (variant === &quot;disabled&quot;) {
          return `.${escapedClass}:disabled ${declarations}`;
        } else if (variant === &quot;dark&quot;) {
          const pseudoMatch = baseSelector.match(/(:(?:hover|focus|active|disabled|focus-visible)(?:\([^)]*\))?)$/);
          const pseudoSelector = pseudoMatch ? pseudoMatch[1] : &quot;&quot;;
          return `.dark .${escapedClass}${pseudoSelector} ${declarations}`;
        }
      }
      const { base, opacity } = parseOpacity(className);
      const spacingMatch = base.match(/^(px|py|pt|pb|pl|pr|mx|my|mt|mb|ml|mr|gap-x|gap-y|space-x|space-y|min-w|min-h|max-w|max-h|inset-x|inset-y|p|m|gap|w|h|top|right|bottom|left|inset)-(.+)$/);
      if (spacingMatch) {
        const [, property, value] = spacingMatch;
        const spacing = spacingScale[value] || sizeValues[value] || parseArbitraryValue(value);
        if (!spacing) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (property === &quot;space-x&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-x-reverse: 0; margin-inline-start: calc(${spacing} * var(--tw-space-x-reverse)); margin-inline-end: calc(${spacing} * calc(1 - var(--tw-space-x-reverse))); }`;
        }
        if (property === &quot;space-y&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-y-reverse: 0; margin-block-start: calc(${spacing} * var(--tw-space-y-reverse)); margin-block-end: calc(${spacing} * calc(1 - var(--tw-space-y-reverse))); }`;
        }
        const propertyMap = {
          &quot;p&quot;: [&quot;padding&quot;],
          &quot;px&quot;: [&quot;padding-left&quot;, &quot;padding-right&quot;],
          &quot;py&quot;: [&quot;padding-top&quot;, &quot;padding-bottom&quot;],
          &quot;pt&quot;: [&quot;padding-top&quot;],
          &quot;pb&quot;: [&quot;padding-bottom&quot;],
          &quot;pl&quot;: [&quot;padding-left&quot;],
          &quot;pr&quot;: [&quot;padding-right&quot;],
          &quot;m&quot;: [&quot;margin&quot;],
          &quot;mx&quot;: [&quot;margin-left&quot;, &quot;margin-right&quot;],
          &quot;my&quot;: [&quot;margin-top&quot;, &quot;margin-bottom&quot;],
          &quot;mt&quot;: [&quot;margin-top&quot;],
          &quot;mb&quot;: [&quot;margin-bottom&quot;],
          &quot;ml&quot;: [&quot;margin-left&quot;],
          &quot;mr&quot;: [&quot;margin-right&quot;],
          &quot;gap&quot;: [&quot;gap&quot;],
          &quot;gap-x&quot;: [&quot;column-gap&quot;],
          &quot;gap-y&quot;: [&quot;row-gap&quot;],
          &quot;w&quot;: [&quot;width&quot;],
          &quot;h&quot;: [&quot;height&quot;],
          &quot;min-w&quot;: [&quot;min-width&quot;],
          &quot;min-h&quot;: [&quot;min-height&quot;],
          &quot;max-w&quot;: [&quot;max-width&quot;],
          &quot;max-h&quot;: [&quot;max-height&quot;],
          &quot;top&quot;: [&quot;top&quot;],
          &quot;right&quot;: [&quot;right&quot;],
          &quot;bottom&quot;: [&quot;bottom&quot;],
          &quot;left&quot;: [&quot;left&quot;],
          &quot;inset&quot;: [&quot;top&quot;, &quot;right&quot;, &quot;bottom&quot;, &quot;left&quot;],
          &quot;inset-x&quot;: [&quot;left&quot;, &quot;right&quot;],
          &quot;inset-y&quot;: [&quot;top&quot;, &quot;bottom&quot;]
        };
        const properties = propertyMap[property];
        if (!properties) return null;
        const declarations = properties.map((prop) =&gt; `${prop}: ${spacing}`).join(&quot;; &quot;);
        return `.${escapedClass} { ${declarations}; }`;
      }
      const textSizeMatch = base.match(/^text-(xs|sm|base|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl|8xl|9xl)$/);
      if (textSizeMatch) {
        const [, size] = textSizeMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const sizeMap = {
          &quot;xs&quot;: { fontSize: &quot;0.75rem&quot;, lineHeight: &quot;1rem&quot; },
          &quot;sm&quot;: { fontSize: &quot;0.875rem&quot;, lineHeight: &quot;1.25rem&quot; },
          &quot;base&quot;: { fontSize: &quot;1rem&quot;, lineHeight: &quot;1.5rem&quot; },
          &quot;lg&quot;: { fontSize: &quot;1.125rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;xl&quot;: { fontSize: &quot;1.25rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;2xl&quot;: { fontSize: &quot;1.5rem&quot;, lineHeight: &quot;2rem&quot; },
          &quot;3xl&quot;: { fontSize: &quot;1.875rem&quot;, lineHeight: &quot;2.25rem&quot; },
          &quot;4xl&quot;: { fontSize: &quot;2.25rem&quot;, lineHeight: &quot;2.5rem&quot; },
          &quot;5xl&quot;: { fontSize: &quot;3rem&quot;, lineHeight: &quot;1&quot; },
          &quot;6xl&quot;: { fontSize: &quot;3.75rem&quot;, lineHeight: &quot;1&quot; },
          &quot;7xl&quot;: { fontSize: &quot;4.5rem&quot;, lineHeight: &quot;1&quot; },
          &quot;8xl&quot;: { fontSize: &quot;6rem&quot;, lineHeight: &quot;1&quot; },
          &quot;9xl&quot;: { fontSize: &quot;8rem&quot;, lineHeight: &quot;1&quot; }
        };
        const { fontSize, lineHeight } = sizeMap[size];
        return `.${escapedClass} { font-size: ${fontSize}; line-height: ${lineHeight}; }`;
      }
      const fontWeightMatch = base.match(/^font-(thin|extralight|light|normal|medium|semibold|bold|extrabold|black)$/);
      if (fontWeightMatch) {
        const [, weight] = fontWeightMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const weightMap = {
          &quot;thin&quot;: &quot;100&quot;,
          &quot;extralight&quot;: &quot;200&quot;,
          &quot;light&quot;: &quot;300&quot;,
          &quot;normal&quot;: &quot;400&quot;,
          &quot;medium&quot;: &quot;500&quot;,
          &quot;semibold&quot;: &quot;600&quot;,
          &quot;bold&quot;: &quot;700&quot;,
          &quot;extrabold&quot;: &quot;800&quot;,
          &quot;black&quot;: &quot;900&quot;
        };
        return `.${escapedClass} { font-weight: ${weightMap[weight]}; }`;
      }
      const fontFamilyMatch = base.match(/^font-(sans|serif|mono)$/);
      if (fontFamilyMatch) {
        const [, family] = fontFamilyMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const familyMap = {
          &quot;sans&quot;: &quot;&#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif&quot;,
          &quot;serif&quot;: &quot;ui-serif, Georgia, Cambria, &#x27;Times New Roman&#x27;, Times, serif&quot;,
          &quot;mono&quot;: &quot;&#x27;Space Mono&#x27;, ui-monospace, &#x27;Cascadia Code&#x27;, monospace&quot;
        };
        return `.${escapedClass} { font-family: ${familyMap[family]}; }`;
      }
      const lineHeightMatch = base.match(/^leading-(.+)$/);
      if (lineHeightMatch) {
        const [, value] = lineHeightMatch;
        const heightMap = {
          &quot;none&quot;: &quot;1&quot;,
          &quot;tight&quot;: &quot;1.25&quot;,
          &quot;snug&quot;: &quot;1.375&quot;,
          &quot;normal&quot;: &quot;1.5&quot;,
          &quot;relaxed&quot;: &quot;1.625&quot;,
          &quot;loose&quot;: &quot;2&quot;
        };
        const lineHeight = heightMap[value] || parseArbitraryValue(value);
        if (!lineHeight) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { line-height: ${lineHeight}; }`;
      }
      const flexMatch = base.match(/^flex-(.+)$/);
      if (flexMatch) {
        const [, value] = flexMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const flexValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { flex: ${flexValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { flex: var(${customProp}); }`;
        }
        const fractionMatch = value.match(/^(\d+)\/(\d+)$/);
        if (fractionMatch) {
          const [, numerator, denominator] = fractionMatch;
          return `.${escapedClass} { flex: calc(${numerator} / ${denominator} * 100%); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { flex: ${number}; }`;
        }
      }
      const gridColsMatch = base.match(/^grid-cols-(.+)$/);
      if (gridColsMatch) {
        const [, value] = gridColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-columns: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-columns: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const colsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-columns: ${colsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-columns: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-columns: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const gridRowsMatch = base.match(/^grid-rows-(.+)$/);
      if (gridRowsMatch) {
        const [, value] = gridRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-rows: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-rows: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const rowsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-rows: ${rowsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-rows: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-rows: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const colStartMatch = base.match(/^col-start-(.+)$/);
      if (colStartMatch) {
        const [, value] = colStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-start: ${number}; }`;
        }
      }
      const colEndMatch = base.match(/^col-end-(.+)$/);
      if (colEndMatch) {
        const [, value] = colEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-end: ${number}; }`;
        }
      }
      const colSpanMatch = base.match(/^col-span-(.+)$/);
      if (colSpanMatch) {
        const [, value] = colSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-column: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column: span ${number} / span ${number}; }`;
        }
      }
      const colMatch = base.match(/^col-(.+)$/);
      if (colMatch) {
        const [, value] = colMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-column: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-column: var(${customProp}); }`;
          }
        }
      }
      const rowStartMatch = base.match(/^row-start-(.+)$/);
      if (rowStartMatch) {
        const [, value] = rowStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-start: ${number}; }`;
        }
      }
      const rowEndMatch = base.match(/^row-end-(.+)$/);
      if (rowEndMatch) {
        const [, value] = rowEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-end: ${number}; }`;
        }
      }
      const rowSpanMatch = base.match(/^row-span-(.+)$/);
      if (rowSpanMatch) {
        const [, value] = rowSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-row: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row: span ${number} / span ${number}; }`;
        }
      }
      const rowMatch = base.match(/^row-(.+)$/);
      if (rowMatch) {
        const [, value] = rowMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-row: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-row: var(${customProp}); }`;
          }
        }
      }
      const autoColsMatch = base.match(/^auto-cols-(.+)$/);
      if (autoColsMatch) {
        const [, value] = autoColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-columns: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-columns: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-columns: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-columns: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-columns: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-columns: var(${customProp}); }`;
        }
      }
      const autoRowsMatch = base.match(/^auto-rows-(.+)$/);
      if (autoRowsMatch) {
        const [, value] = autoRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-rows: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-rows: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-rows: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-rows: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-rows: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-rows: var(${customProp}); }`;
        }
      }
      const gridFlowMatch = base.match(/^grid-flow-(.+)$/);
      if (gridFlowMatch) {
        const [, value] = gridFlowMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        if (value === &quot;row&quot;) {
          return `.${escapedClass} { grid-auto-flow: row; }`;
        }
        if (value === &quot;col&quot;) {
          return `.${escapedClass} { grid-auto-flow: column; }`;
        }
        if (value === &quot;dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: dense; }`;
        }
        if (value === &quot;row-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: row dense; }`;
        }
        if (value === &quot;col-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: column dense; }`;
        }
      }
      const layoutUtilities = {
        // Display
        &quot;flex&quot;: &quot;display: flex&quot;,
        &quot;inline-flex&quot;: &quot;display: inline-flex&quot;,
        &quot;grid&quot;: &quot;display: grid&quot;,
        &quot;inline-grid&quot;: &quot;display: inline-grid&quot;,
        &quot;block&quot;: &quot;display: block&quot;,
        &quot;inline-block&quot;: &quot;display: inline-block&quot;,
        &quot;inline&quot;: &quot;display: inline&quot;,
        &quot;hidden&quot;: &quot;display: none&quot;,
        // Flex direction
        &quot;flex-row&quot;: &quot;flex-direction: row&quot;,
        &quot;flex-row-reverse&quot;: &quot;flex-direction: row-reverse&quot;,
        &quot;flex-col&quot;: &quot;flex-direction: column&quot;,
        &quot;flex-col-reverse&quot;: &quot;flex-direction: column-reverse&quot;,
        // Flex wrap
        &quot;flex-wrap&quot;: &quot;flex-wrap: wrap&quot;,
        &quot;flex-wrap-reverse&quot;: &quot;flex-wrap: wrap-reverse&quot;,
        &quot;flex-nowrap&quot;: &quot;flex-wrap: nowrap&quot;,
        // Flex shrink/grow
        &quot;shrink-0&quot;: &quot;flex-shrink: 0&quot;,
        &quot;shrink&quot;: &quot;flex-shrink: 1&quot;,
        &quot;grow-0&quot;: &quot;flex-grow: 0&quot;,
        &quot;grow&quot;: &quot;flex-grow: 1&quot;,
        // Flex sizing (common static values)
        &quot;flex-1&quot;: &quot;flex: 1 1 0%&quot;,
        &quot;flex-auto&quot;: &quot;flex: 1 1 auto&quot;,
        &quot;flex-initial&quot;: &quot;flex: 0 1 auto&quot;,
        &quot;flex-none&quot;: &quot;flex: none&quot;,
        // Flex/Grid alignment
        &quot;items-start&quot;: &quot;align-items: flex-start&quot;,
        &quot;items-end&quot;: &quot;align-items: flex-end&quot;,
        &quot;items-center&quot;: &quot;align-items: center&quot;,
        &quot;items-baseline&quot;: &quot;align-items: baseline&quot;,
        &quot;items-stretch&quot;: &quot;align-items: stretch&quot;,
        &quot;justify-start&quot;: &quot;justify-content: flex-start&quot;,
        &quot;justify-end&quot;: &quot;justify-content: flex-end&quot;,
        &quot;justify-center&quot;: &quot;justify-content: center&quot;,
        &quot;justify-between&quot;: &quot;justify-content: space-between&quot;,
        &quot;justify-around&quot;: &quot;justify-content: space-around&quot;,
        &quot;justify-evenly&quot;: &quot;justify-content: space-evenly&quot;,
        &quot;place-content-center&quot;: &quot;place-content: center&quot;,
        &quot;place-content-start&quot;: &quot;place-content: start&quot;,
        &quot;place-content-end&quot;: &quot;place-content: end&quot;,
        // Position
        &quot;relative&quot;: &quot;position: relative&quot;,
        &quot;absolute&quot;: &quot;position: absolute&quot;,
        &quot;fixed&quot;: &quot;position: fixed&quot;,
        &quot;sticky&quot;: &quot;position: sticky&quot;,
        // Overflow
        &quot;overflow-hidden&quot;: &quot;overflow: hidden&quot;,
        &quot;overflow-auto&quot;: &quot;overflow: auto&quot;,
        &quot;overflow-scroll&quot;: &quot;overflow: scroll&quot;,
        &quot;overflow-x-hidden&quot;: &quot;overflow-x: hidden&quot;,
        &quot;overflow-y-hidden&quot;: &quot;overflow-y: hidden&quot;,
        &quot;overflow-x-auto&quot;: &quot;overflow-x: auto&quot;,
        &quot;overflow-y-auto&quot;: &quot;overflow-y: auto&quot;,
        // Cursor
        &quot;cursor-pointer&quot;: &quot;cursor: pointer&quot;,
        &quot;cursor-default&quot;: &quot;cursor: default&quot;,
        &quot;cursor-not-allowed&quot;: &quot;cursor: not-allowed&quot;,
        // Text align
        &quot;text-left&quot;: &quot;text-align: left&quot;,
        &quot;text-center&quot;: &quot;text-align: center&quot;,
        &quot;text-right&quot;: &quot;text-align: right&quot;,
        // Text decoration
        &quot;underline&quot;: &quot;text-decoration: underline&quot;,
        &quot;overline&quot;: &quot;text-decoration: overline&quot;,
        &quot;line-through&quot;: &quot;text-decoration: line-through&quot;,
        &quot;no-underline&quot;: &quot;text-decoration: none&quot;,
        // Pointer events
        &quot;pointer-events-none&quot;: &quot;pointer-events: none&quot;,
        &quot;pointer-events-auto&quot;: &quot;pointer-events: auto&quot;,
        // Aspect ratio
        &quot;aspect-square&quot;: &quot;aspect-ratio: 1 / 1&quot;,
        &quot;aspect-video&quot;: &quot;aspect-ratio: 16 / 9&quot;,
        // Shadow
        &quot;shadow&quot;: &quot;box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-sm&quot;: &quot;box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05)&quot;,
        &quot;shadow-md&quot;: &quot;box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-lg&quot;: &quot;box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-none&quot;: &quot;box-shadow: none&quot;,
        // Outline
        &quot;outline-none&quot;: &quot;outline: 2px solid transparent; outline-offset: 2px&quot;,
        // Opacity (common values)
        &quot;opacity-0&quot;: &quot;opacity: 0&quot;,
        &quot;opacity-50&quot;: &quot;opacity: 0.5&quot;,
        &quot;opacity-100&quot;: &quot;opacity: 1&quot;,
        // Appearance
        &quot;appearance-none&quot;: &quot;appearance: none; -webkit-appearance: none; -moz-appearance: none&quot;,
        // Border
        &quot;border&quot;: &quot;border-width: 1px; border-style: solid&quot;,
        // Peer
        &quot;peer&quot;: &quot;&quot;
      };
      if (layoutUtilities[className]) {
        return `.${className} { ${layoutUtilities[className]}; }`;
      }
      const opacityMatch = base.match(/^opacity-(\d+)$/);
      if (opacityMatch) {
        const [, value] = opacityMatch;
        const opacityValue = parseInt(value) / 100;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { opacity: ${opacityValue}; }`;
      }
      const colorMatch = base.match(/^(bg|text|border|ring|outline|fill)-(.+)$/);
      if (colorMatch) {
        const [, property, colorName] = colorMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const propertyMap = {
          &quot;bg&quot;: &quot;background-color&quot;,
          &quot;text&quot;: &quot;color&quot;,
          &quot;border&quot;: &quot;border-color&quot;,
          &quot;ring&quot;: &quot;--tw-ring-color&quot;,
          &quot;outline&quot;: &quot;outline-color&quot;,
          &quot;fill&quot;: &quot;fill&quot;
        };
        const cssProp = propertyMap[property];
        if (!cssProp) return null;
        if (opacity) {
          return `.${escapedClass} { ${cssProp}: oklch(from var(--color-${colorName}) l c h / ${opacity}); }`;
        } else {
          return `.${escapedClass} { ${cssProp}: var(--color-${colorName}); }`;
        }
      }
      if (className === &quot;transition-colors&quot;) {
        return `.transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition&quot;) {
        return `.transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition-opacity&quot;) {
        return `.transition-opacity { transition-property: opacity; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      const borderWidthMatch = base.match(/^border(-[trbl])?-(\d+)$/);
      if (borderWidthMatch) {
        const [, side, width] = borderWidthMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (side) {
          const sideMap = {
            &quot;-t&quot;: &quot;border-top-width&quot;,
            &quot;-r&quot;: &quot;border-right-width&quot;,
            &quot;-b&quot;: &quot;border-bottom-width&quot;,
            &quot;-l&quot;: &quot;border-left-width&quot;
          };
          return `.${escapedClass} { ${sideMap[side]}: ${width}px; }`;
        } else {
          return `.${escapedClass} { border-width: ${width}px; }`;
        }
      }
      const roundedMatch = base.match(/^rounded(-[trblxy])?(-(.+))?$/);
      if (roundedMatch) {
        const [, corner, , value] = roundedMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const roundedValues = {
          &quot;none&quot;: &quot;0&quot;,
          &quot;sm&quot;: &quot;calc(var(--radius) - 4px)&quot;,
          &quot;md&quot;: &quot;calc(var(--radius) - 2px)&quot;,
          &quot;lg&quot;: &quot;var(--radius)&quot;,
          &quot;xl&quot;: &quot;0.75rem&quot;,
          &quot;2xl&quot;: &quot;1rem&quot;,
          &quot;3xl&quot;: &quot;1.5rem&quot;,
          &quot;full&quot;: &quot;9999px&quot;
        };
        const radiusValue = value ? roundedValues[value] || spacingScale[value] || parseArbitraryValue(value) : &quot;0.25rem&quot;;
        if (!radiusValue) return null;
        const cornerMap = {
          &quot;-t&quot;: [&quot;border-top-left-radius&quot;, &quot;border-top-right-radius&quot;],
          &quot;-r&quot;: [&quot;border-top-right-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-b&quot;: [&quot;border-bottom-left-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-l&quot;: [&quot;border-top-left-radius&quot;, &quot;border-bottom-left-radius&quot;],
          &quot;-tl&quot;: [&quot;border-top-left-radius&quot;],
          &quot;-tr&quot;: [&quot;border-top-right-radius&quot;],
          &quot;-bl&quot;: [&quot;border-bottom-left-radius&quot;],
          &quot;-br&quot;: [&quot;border-bottom-right-radius&quot;]
        };
        if (corner &amp;&amp; cornerMap[corner]) {
          const declarations = cornerMap[corner].map((prop) =&gt; `${prop}: ${radiusValue}`).join(&quot;; &quot;);
          return `.${escapedClass} { ${declarations}; }`;
        } else {
          return `.${escapedClass} { border-radius: ${radiusValue}; }`;
        }
      }
      const ringMatch = className.match(/^ring(-offset)?(-(\d+))?$/);
      if (ringMatch) {
        const [, offset, , width] = ringMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (offset) {
          const ringWidth = width || &quot;2&quot;;
          return `.${escapedClass} { --tw-ring-offset-width: ${ringWidth}px; }`;
        } else {
          const ringWidth = width || &quot;3&quot;;
          return `.${escapedClass} { --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(${ringWidth}px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); }`;
        }
      }
      if (className === &quot;ring-offset-background&quot;) {
        return `.ring-offset-background { --tw-ring-offset-color: var(--color-background); }`;
      }
      const focusVisibleMatch = className.match(/^focus-visible:(.+)$/);
      if (focusVisibleMatch) {
        const [, baseClass] = focusVisibleMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}:focus-visible ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      const dataMatch = className.match(/^data-\[(.+?)\]:(.+)$/);
      if (dataMatch) {
        const [, dataAttr, baseClass] = dataMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}[data-${dataAttr}] ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      return null;
    };
    const css = (classNames) =&gt; {
      const classes = classNames.trim().split(/\s+/).filter(Boolean);
      for (const className of classes) {
        if (generatedClasses.has(className)) continue;
        const rule = generateRule(className);
        if (rule) {
          try {
            styleSheet.insertRule(rule, styleSheet.cssRules.length);
            generatedClasses.add(className);
          } catch (error) {
            console.error(`[DynamicBlock Error] Failed to generate CSS for class: ${className}`, error);
          }
        }
      }
      return classNames;
    };
    return css;
  }
  function createUIHelpers(cssGenerator) {
    const isSelector = (arg) =&gt; typeof arg === &quot;string&quot;;
    const applyClasses = (element, baseClasses, customClassName) =&gt; {
      const allClasses = customClassName ? `${baseClasses} ${customClassName}`.replace(/\s+/g, &quot; &quot;).trim() : baseClasses;
      cssGenerator(allClasses);
      if (element instanceof SVGElement) {
        element.setAttribute(&quot;class&quot;, allClasses);
      } else {
        element.className = allClasses;
      }
    };
    const applyStyles = (element, styles) =&gt; {
      if (!styles) return;
      Object.entries(styles).forEach(([property, value]) =&gt; {
        if (element instanceof HTMLElement) {
          element.style.setProperty(property, value);
        } else {
          const currentStyle = element.getAttribute(&quot;style&quot;) || &quot;&quot;;
          const newStyle = `${currentStyle}${currentStyle ? &quot;; &quot; : &quot;&quot;}${property}: ${value}`;
          element.setAttribute(&quot;style&quot;, newStyle);
        }
      });
    };
    return {
      /**
       * Button helper - creates or enhances button elements
       */
      button(selectorOrOptions, options) {
        const baseClasses = &quot;inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50&quot;;
        const getVariantClasses = (variant2 = &quot;contained&quot;, color2 = &quot;primary&quot;, size2 = &quot;md&quot;) =&gt; {
          const variantBaseMap = {
            contained: &quot;&quot;,
            outlined: &quot;border bg-background&quot;,
            text: &quot;&quot;,
            ghost: &quot;&quot;
          };
          const variantColorMap = {
            contained: `bg-${color2} text-${color2}-foreground hover:bg-${color2}/80`,
            outlined: `border-${color2} text-${color2} hover:bg-${color2}/20`,
            text: `text-${color2} hover:bg-${color2}/20`,
            ghost: `text-${color2} hover:bg-${color2} hover:text-background`
          };
          const sizeMap = {
            sm: &quot;h-9 rounded-md px-3 text-sm&quot;,
            md: &quot;h-10 px-4 py-2&quot;,
            lg: &quot;h-12 rounded-md px-6 text-base&quot;,
            xl: &quot;h-14 rounded-md px-8 text-lg&quot;,
            icon: &quot;h-10 w-10&quot;
          };
          const variantBase = variantBaseMap[variant2] || variantBaseMap.contained;
          const variantColor = variantColorMap[variant2] || variantColorMap.contained;
          const sizeClasses = sizeMap[size2] || sizeMap.md;
          return `${baseClasses} ${variantBase} ${variantColor} ${sizeClasses}`.replace(/\s+/g, &quot; &quot;).trim();
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((btn2) =&gt; {
            const { variant: variant2, color: color2, size: size2, disabled: disabled2, onClick: onClick2, className: className2, style: style2 } = options || {};
            applyClasses(btn2, getVariantClasses(variant2, color2, size2), className2);
            applyStyles(btn2, style2);
            if (disabled2 !== void 0) btn2.disabled = disabled2;
            if (onClick2) btn2.addEventListener(&quot;click&quot;, onClick2);
          });
          return elements;
        }
        const { label, variant, color, size, disabled, onClick, className, style } = selectorOrOptions;
        const btn = document.createElement(&quot;button&quot;);
        btn.type = &quot;button&quot;;
        if (label) btn.textContent = label;
        applyClasses(btn, getVariantClasses(variant, color, size), className);
        applyStyles(btn, style);
        if (disabled) btn.disabled = disabled;
        if (onClick) btn.addEventListener(&quot;click&quot;, onClick);
        return btn;
      },
      /**
       * Input helper - creates or enhances input elements
       */
      input(selectorOrOptions, options) {
        const baseClasses = &quot;flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((input2) =&gt; {
            const { type: type2, placeholder: placeholder2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(input2, baseClasses, className2);
            applyStyles(input2, style2);
            if (type2) input2.type = type2;
            if (placeholder2) input2.placeholder = placeholder2;
            if (disabled2 !== void 0) input2.disabled = disabled2;
            if (value2 !== void 0) input2.value = value2;
            if (onInput2) input2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) input2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { type, placeholder, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const input = document.createElement(&quot;input&quot;);
        input.type = type || &quot;text&quot;;
        applyClasses(input, baseClasses, className);
        applyStyles(input, style);
        if (placeholder) input.placeholder = placeholder;
        if (disabled) input.disabled = disabled;
        if (value !== void 0) input.value = value;
        if (onInput) input.addEventListener(&quot;input&quot;, onInput);
        if (onChange) input.addEventListener(&quot;change&quot;, onChange);
        return input;
      },
      /**
       * Textarea helper - creates or enhances textarea elements
       */
      textarea(selectorOrOptions, options) {
        const baseClasses = &quot;flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((textarea2) =&gt; {
            const { placeholder: placeholder2, rows: rows2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(textarea2, baseClasses, className2);
            applyStyles(textarea2, style2);
            if (placeholder2) textarea2.placeholder = placeholder2;
            if (rows2) textarea2.rows = rows2;
            if (disabled2 !== void 0) textarea2.disabled = disabled2;
            if (value2 !== void 0) textarea2.value = value2;
            if (onInput2) textarea2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) textarea2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { placeholder, rows, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const textarea = document.createElement(&quot;textarea&quot;);
        applyClasses(textarea, baseClasses, className);
        applyStyles(textarea, style);
        if (placeholder) textarea.placeholder = placeholder;
        if (rows) textarea.rows = rows;
        if (disabled) textarea.disabled = disabled;
        if (value !== void 0) textarea.value = value;
        if (onInput) textarea.addEventListener(&quot;input&quot;, onInput);
        if (onChange) textarea.addEventListener(&quot;change&quot;, onChange);
        return textarea;
      },
      /**
       * Select helper - creates or enhances select elements
       * Uses native HTML select with chevron icon styling to match shadcn
       */
      select(selectorOrOptions, options) {
        const createSelectWrapper = (items2, value2, placeholder2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;relative w-full&quot;, className2);
          applyStyles(wrapper, style2);
          const select = document.createElement(&quot;select&quot;);
          const selectClasses = &quot;sandbox-select flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer&quot;;
          applyClasses(select, selectClasses);
          if (placeholder2) {
            const placeholderOption = document.createElement(&quot;option&quot;);
            placeholderOption.value = &quot;&quot;;
            placeholderOption.textContent = placeholder2;
            placeholderOption.disabled = true;
            placeholderOption.selected = true;
            select.appendChild(placeholderOption);
            select.required = true;
          }
          if (items2) {
            items2.forEach((item) =&gt; {
              const option = document.createElement(&quot;option&quot;);
              option.value = item.value;
              option.textContent = item.label;
              select.appendChild(option);
            });
          }
          if (value2) {
            select.value = value2;
            if (placeholder2) select.required = false;
          }
          if (disabled2) select.disabled = disabled2;
          if (onChange2) {
            select.addEventListener(&quot;change&quot;, (e) =&gt; {
              const newValue = e.target.value;
              if (placeholder2) {
                select.required = newValue === &quot;&quot;;
              }
              onChange2(newValue);
            });
          }
          const chevron = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(chevron, &quot;h-4 w-4 opacity-50 pointer-events-none&quot;);
          chevron.style.position = &quot;absolute&quot;;
          chevron.style.right = &quot;0.75rem&quot;;
          chevron.style.top = &quot;50%&quot;;
          chevron.style.transform = &quot;translateY(-50%)&quot;;
          chevron.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          chevron.setAttribute(&quot;width&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;height&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          chevron.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          chevron.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          chevron.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          chevron.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          chevron.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;6 9 12 15 18 9&quot;);
          chevron.appendChild(polyline);
          select.style.paddingRight = &quot;2.5rem&quot;;
          wrapper.appendChild(select);
          wrapper.appendChild(chevron);
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          const wrappers = [];
          elements.forEach((select) =&gt; {
            const { items: items2, value: value2, placeholder: placeholder2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const wrapper = createSelectWrapper(items2, value2, placeholder2, disabled2, onChange2, className2, style2);
            select.replaceWith(wrapper);
            wrappers.push(wrapper);
          });
          return document.querySelectorAll(&quot;.relative:has(select)&quot;);
        }
        const { items, value, placeholder, disabled, onChange, className, style } = selectorOrOptions;
        return createSelectWrapper(items, value, placeholder, disabled, onChange, className, style);
      },
      /**
       * Checkbox helper - creates checkbox elements matching shadcn Radix UI styling
       * Uses custom div-based checkbox with check icon for visual parity
       */
      checkbox(selectorOrOptions, options) {
        const createCheckbox = (checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const checkboxContainer = document.createElement(&quot;button&quot;);
          checkboxContainer.type = &quot;button&quot;;
          checkboxContainer.role = &quot;checkbox&quot;;
          checkboxContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          const checkboxClasses = &quot;grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer&quot;;
          applyClasses(checkboxContainer, checkboxClasses);
          const updateCheckboxStyles = (isChecked2) =&gt; {
            if (isChecked2) {
              checkboxContainer.style.backgroundColor = &quot;var(--color-checkbox-checked)&quot;;
              checkboxContainer.style.color = &quot;var(--color-checkbox-checked-foreground)&quot;;
            } else {
              checkboxContainer.style.backgroundColor = &quot;&quot;;
              checkboxContainer.style.color = &quot;&quot;;
            }
          };
          updateCheckboxStyles(!!checked2);
          if (disabled2) {
            checkboxContainer.disabled = true;
          }
          const checkIcon = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(checkIcon, &quot;h-4 w-4&quot;);
          checkIcon.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          checkIcon.setAttribute(&quot;width&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;height&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          checkIcon.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          checkIcon.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          checkIcon.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          checkIcon.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          checkIcon.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;20 6 9 17 4 12&quot;);
          checkIcon.appendChild(polyline);
          if (checked2) {
            checkboxContainer.appendChild(checkIcon);
          }
          let isChecked = !!checked2;
          checkboxContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            isChecked = !isChecked;
            checkboxContainer.setAttribute(&quot;aria-checked&quot;, isChecked ? &quot;true&quot; : &quot;false&quot;);
            updateCheckboxStyles(isChecked);
            if (isChecked) {
              checkboxContainer.appendChild(checkIcon);
            } else {
              if (checkIcon.parentNode === checkboxContainer) {
                checkboxContainer.removeChild(checkIcon);
              }
            }
            if (onChange2) onChange2(isChecked);
          });
          wrapper.appendChild(checkboxContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) checkboxContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const checkboxWrapper = createCheckbox(checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(checkboxWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createCheckbox(checked, label, disabled, onChange, className, style);
      },
      /**
       * Radio helper - creates radio button elements matching shadcn Radix UI styling
       * Uses custom button-based radio with circle fill indicator for visual parity
       */
      radio(selectorOrOptions, options) {
        const createRadio = (name2, value2, checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const radioContainer = document.createElement(&quot;button&quot;);
          radioContainer.type = &quot;button&quot;;
          radioContainer.role = &quot;radio&quot;;
          radioContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          radioContainer.setAttribute(&quot;data-name&quot;, name2);
          radioContainer.setAttribute(&quot;data-value&quot;, value2);
          const radioClasses = &quot;aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer flex items-center justify-center&quot;;
          applyClasses(radioContainer, radioClasses);
          if (disabled2) {
            radioContainer.disabled = true;
          }
          const circleIndicator = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          circleIndicator.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          circleIndicator.setAttribute(&quot;width&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;height&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          circleIndicator.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          circleIndicator.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          circleIndicator.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          circleIndicator.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          circleIndicator.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          applyClasses(circleIndicator, &quot;h-3.5 w-3.5 fill-primary&quot;);
          const circle = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;circle&quot;);
          circle.setAttribute(&quot;cx&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;cy&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;r&quot;, &quot;10&quot;);
          circleIndicator.appendChild(circle);
          if (checked2) {
            radioContainer.appendChild(circleIndicator);
          }
          radioContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            const allRadiosInGroup = document.querySelectorAll(`[role=&quot;radio&quot;][data-name=&quot;${name2}&quot;]`);
            allRadiosInGroup.forEach((radio) =&gt; {
              radio.setAttribute(&quot;aria-checked&quot;, &quot;false&quot;);
              while (radio.firstChild) {
                radio.removeChild(radio.firstChild);
              }
            });
            radioContainer.setAttribute(&quot;aria-checked&quot;, &quot;true&quot;);
            radioContainer.appendChild(circleIndicator);
            if (onChange2) onChange2(value2);
          });
          wrapper.appendChild(radioContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) radioContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { name: name2, value: value2, checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const radioWrapper = createRadio(name2, value2, checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(radioWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { name, value, checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createRadio(name, value, checked, label, disabled, onChange, className, style);
      }
    };
  }
  function scanAndGenerateClasses(api) {
    const classNames = /* @__PURE__ */ new Set();
    const elements = document.querySelectorAll(&quot;[class]&quot;);
    elements.forEach((element) =&gt; {
      const classList = element.className;
      if (typeof classList === &quot;string&quot;) {
        classList.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
    });
    const scripts = document.querySelectorAll(&quot;script&quot;);
    scripts.forEach((script) =&gt; {
      const content = script.textContent || &quot;&quot;;
      const stringMatches = content.matchAll(/(?:className|class)\s*[=:]\s*[&quot;&#x27;`]([^&quot;&#x27;`]+)[&quot;&#x27;`]/g);
      for (const match of stringMatches) {
        const classes = match[1];
        classes.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
      const templateMatches = content.matchAll(/`([^`]*(?:p-|m-|bg-|text-|border-|rounded|flex|grid|grid-cols-|grid-rows-|grid-flow-|auto-cols-|auto-rows-|col-|row-|w-|h-|gap-)[^`]*)`/g);
      for (const match of templateMatches) {
        const classes = match[1];
        const tailwindMatches = classes.matchAll(/\b((?:p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|gap-x|gap-y|w|h|min-w|min-h|max-w|max-h|bg|text|border|rounded|flex|grid|grid-cols|grid-rows|grid-flow|auto-cols|auto-rows|col|row|inline|block|hidden|top|right|bottom|left|inset)(?:-[\w[\]/:.%-]+)?)\b/g);
        for (const tailwindMatch of tailwindMatches) {
          if (tailwindMatch[1]) classNames.add(tailwindMatch[1]);
        }
      }
    });
    if (classNames.size &gt; 0) {
      const allClasses = Array.from(classNames).join(&quot; &quot;);
      api.css(allClasses);
    }
  }
  function setupMutationObserver(api) {
    const sandboxWindow2 = window;
    const config = sandboxWindow2.$CONFIG || {};
    const autoDetectClasses = config.autoDetectClasses !== false;
    if (!autoDetectClasses) {
      return;
    }
    const observer = new MutationObserver((mutations) =&gt; {
      const classNames = /* @__PURE__ */ new Set();
      for (const mutation of mutations) {
        mutation.addedNodes.forEach((node) =&gt; {
          if (node.nodeType === Node.ELEMENT_NODE) {
            const element = node;
            if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
              element.className.split(/\s+/).forEach((cls) =&gt; {
                if (cls) classNames.add(cls);
              });
            }
            element.querySelectorAll(&quot;[class]&quot;).forEach((child) =&gt; {
              if (typeof child.className === &quot;string&quot;) {
                child.className.split(/\s+/).forEach((cls) =&gt; {
                  if (cls) classNames.add(cls);
                });
              }
            });
          }
        });
        if (mutation.type === &quot;attributes&quot; &amp;&amp; mutation.attributeName === &quot;class&quot;) {
          const element = mutation.target;
          if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
            element.className.split(/\s+/).forEach((cls) =&gt; {
              if (cls) classNames.add(cls);
            });
          }
        }
      }
      if (classNames.size &gt; 0) {
        const allClasses = Array.from(classNames).join(&quot; &quot;);
        api.css(allClasses);
      }
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: [&quot;class&quot;]
    });
  }
  const clamp = (v, min, max) =&gt; Math.min(Math.max(v, min), max);
  function parseColor(input) {
    const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${input}`).trim();
    const colorStr = cssVar || input;
    const oklchMatch = colorStr.match(/oklch\(([^)]+)\)/);
    if (oklchMatch) {
      const parts = oklchMatch[1].split(&quot;/&quot;);
      const channels = parts[0].trim().split(/\s+/);
      if (channels.length === 3) {
        const parseVal = (s, pctScale) =&gt; s.endsWith(&quot;%&quot;) ? parseFloat(s) / 100 * pctScale : parseFloat(s);
        const l = parseVal(channels[0], 1);
        const c = parseVal(channels[1], 1);
        const h = parseVal(channels[2], 360);
        let a2 = 1;
        if (parts[1] != null) {
          const alphaStr = parts[1].trim();
          a2 = alphaStr.endsWith(&quot;%&quot;) ? parseFloat(alphaStr) / 100 : parseFloat(alphaStr);
        }
        if (!isNaN(l) &amp;&amp; !isNaN(c) &amp;&amp; !isNaN(h) &amp;&amp; !isNaN(a2)) {
          return oklchToRgb({ l, c, h, a: a2 });
        }
      }
    }
    const canvas = document.createElement(&quot;canvas&quot;);
    canvas.width = 1;
    canvas.height = 1;
    const ctx = canvas.getContext(&quot;2d&quot;);
    ctx.fillStyle = colorStr;
    ctx.fillRect(0, 0, 1, 1);
    const [r, g, b, a] = ctx.getImageData(0, 0, 1, 1).data;
    return { r: r / 255, g: g / 255, b: b / 255, a: a / 255 };
  }
  function srgbToLinear(c) {
    return c &lt;= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  }
  function linearToSrgb(c) {
    return c &lt;= 31308e-7 ? c * 12.92 : 1.055 * Math.pow(c, 1 / 2.4) - 0.055;
  }
  function rgbToOklab(rgb) {
    const r = srgbToLinear(rgb.r);
    const g = srgbToLinear(rgb.g);
    const b = srgbToLinear(rgb.b);
    const l_ = 0.4122214708 * r + 0.5363325363 * g + 0.0514459929 * b;
    const m_ = 0.2119034982 * r + 0.6806995451 * g + 0.1073969566 * b;
    const s_ = 0.0883024619 * r + 0.2817188376 * g + 0.6299787005 * b;
    const l = Math.cbrt(l_);
    const m = Math.cbrt(m_);
    const s = Math.cbrt(s_);
    return {
      L: 0.2104542553 * l + 0.793617785 * m - 0.0040720468 * s,
      a: 1.9779984951 * l - 2.428592205 * m + 0.4505937099 * s,
      b: 0.0259040371 * l + 0.7827717662 * m - 0.808675766 * s,
      alpha: rgb.a
    };
  }
  function oklabToRgb(lab) {
    const l = lab.L + 0.3963377774 * lab.a + 0.2158037573 * lab.b;
    const m = lab.L - 0.1055613458 * lab.a - 0.0638541728 * lab.b;
    const s = lab.L - 0.0894841775 * lab.a - 1.291485548 * lab.b;
    const l3 = l * l * l;
    const m3 = m * m * m;
    const s3 = s * s * s;
    return {
      r: clamp(linearToSrgb(4.0767416621 * l3 - 3.3077115913 * m3 + 0.2309699292 * s3), 0, 1),
      g: clamp(linearToSrgb(-1.2684380046 * l3 + 2.6097574011 * m3 - 0.3413193965 * s3), 0, 1),
      b: clamp(linearToSrgb(-0.0041960863 * l3 - 0.7034186147 * m3 + 1.707614701 * s3), 0, 1),
      a: lab.alpha
    };
  }
  function oklabToOklch(lab) {
    const c = Math.sqrt(lab.a * lab.a + lab.b * lab.b);
    let h = Math.atan2(lab.b, lab.a) * 180 / Math.PI;
    if (h &lt; 0) h += 360;
    return { l: lab.L, c, h, a: lab.alpha };
  }
  function oklchToOklab(oklch) {
    const hRad = oklch.h * Math.PI / 180;
    return {
      L: oklch.l,
      a: oklch.c * Math.cos(hRad),
      b: oklch.c * Math.sin(hRad),
      alpha: oklch.a
    };
  }
  function rgbToOklch(rgb) {
    return oklabToOklch(rgbToOklab(rgb));
  }
  function oklchToRgb(oklch) {
    return oklabToRgb(oklchToOklab(oklch));
  }
  function rgbToHsl(rgb) {
    const { r, g, b } = rgb;
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    const d = max - min;
    const l = (max + min) / 2;
    if (d === 0) return { h: 0, s: 0, l: l * 100, a: rgb.a };
    const s = l &gt; 0.5 ? d / (2 - max - min) : d / (max + min);
    let h = 0;
    if (max === r) h = ((g - b) / d + (g &lt; b ? 6 : 0)) / 6;
    else if (max === g) h = ((b - r) / d + 2) / 6;
    else h = ((r - g) / d + 4) / 6;
    return { h: h * 360, s: s * 100, l: l * 100, a: rgb.a };
  }
  function hslToRgb(hsl) {
    const h = hsl.h / 360;
    const s = hsl.s / 100;
    const l = hsl.l / 100;
    if (s === 0) return { r: l, g: l, b: l, a: hsl.a };
    const hue2rgb = (p2, q2, t) =&gt; {
      if (t &lt; 0) t += 1;
      if (t &gt; 1) t -= 1;
      if (t &lt; 1 / 6) return p2 + (q2 - p2) * 6 * t;
      if (t &lt; 1 / 2) return q2;
      if (t &lt; 2 / 3) return p2 + (q2 - p2) * (2 / 3 - t) * 6;
      return p2;
    };
    const q = l &lt; 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    return {
      r: hue2rgb(p, q, h + 1 / 3),
      g: hue2rgb(p, q, h),
      b: hue2rgb(p, q, h - 1 / 3),
      a: hsl.a
    };
  }
  function formatOklch(oklch) {
    const l = Math.round(oklch.l * 1e3) / 1e3;
    const c = Math.round(oklch.c * 1e3) / 1e3;
    const h = Math.round(oklch.h * 100) / 100;
    if (oklch.a &lt; 1) {
      const a = Math.round(oklch.a * 1e3) / 1e3;
      return `oklch(${l} ${c} ${h} / ${a})`;
    }
    return `oklch(${l} ${c} ${h})`;
  }
  function determineAdjustSpace(opts) {
    if (opts.space) return opts.space;
    const hasOklch = opts.lightness != null || opts.chroma != null || opts.hue != null;
    const hasHsl = opts.saturation != null;
    const hasRgb = opts.red != null || opts.green != null || opts.blue != null;
    if (hasHsl &amp;&amp; !hasOklch &amp;&amp; !hasRgb) return &quot;hsl&quot;;
    if (hasRgb &amp;&amp; !hasOklch &amp;&amp; !hasHsl) return &quot;rgb&quot;;
    if (hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    if (!hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    throw new Error(
      &quot;[getColor] Cannot mix channels from different color spaces. Use the space parameter to disambiguate, or only use channels from one space.&quot;
    );
  }
  function adjustColor(input, opts) {
    const rgba = parseColor(input);
    const space = determineAdjustSpace(opts);
    const alphaAdj = opts.alpha ?? 0;
    if (space === &quot;oklch&quot;) {
      const oklch = rgbToOklch(rgba);
      oklch.l = clamp(oklch.l + (opts.lightness ?? 0), 0, 1);
      oklch.c = Math.max(0, oklch.c + (opts.chroma ?? 0));
      oklch.h = ((oklch.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      oklch.a = clamp(oklch.a + alphaAdj, 0, 1);
      return formatOklch(oklch);
    }
    if (space === &quot;hsl&quot;) {
      const hsl = rgbToHsl(rgba);
      hsl.h = ((hsl.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      hsl.s = clamp(hsl.s + (opts.saturation ?? 0), 0, 100);
      hsl.l = clamp(hsl.l + (opts.lightness ?? 0), 0, 100);
      hsl.a = clamp(hsl.a + alphaAdj, 0, 1);
      const rgb = hslToRgb(hsl);
      return formatOklch(rgbToOklch(rgb));
    }
    const r = clamp(rgba.r + (opts.red ?? 0) / 255, 0, 1);
    const g = clamp(rgba.g + (opts.green ?? 0) / 255, 0, 1);
    const b = clamp(rgba.b + (opts.blue ?? 0) / 255, 0, 1);
    const a = clamp(rgba.a + alphaAdj, 0, 1);
    return formatOklch(rgbToOklch({ r, g, b, a }));
  }
  function initializeSandbox() {
    const themeChangeCallbacks = [];
    const resizeCallbacks = [];
    let currentTheme = document.documentElement.classList.contains(&quot;dark&quot;) ? &quot;dark&quot; : &quot;light&quot;;
    const cssGenerator = createCSSGenerator();
    const api = {
      get theme() {
        return currentTheme;
      },
      size: {
        get width() {
          return window.innerWidth;
        }
      },
      onResize: (callback) =&gt; {
        resizeCallbacks.push(callback);
        callback(window.innerWidth);
      },
      onThemeChange: (callback) =&gt; {
        themeChangeCallbacks.push(callback);
        callback(currentTheme);
      },
      requestResize: (height) =&gt; {
        window.parent.postMessage(
          {
            event: &quot;resize-request&quot;,
            data: { height }
          },
          &quot;*&quot;
        );
      },
      getColor: (color, adjust) =&gt; {
        if (adjust) {
          return adjustColor(color, adjust);
        }
        const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${color}`).trim();
        if (cssVar) return cssVar;
        return formatOklch(rgbToOklch(parseColor(color)));
      },
      getFont: (name) =&gt; {
        if (name === &quot;default&quot;) {
          const value = getComputedStyle(document.body).fontFamily;
          return value.trim();
        } else if (name === &quot;mono&quot;) {
          return &#x27;&quot;Space Mono&quot;, ui-monospace, &quot;Cascadia Code&quot;, monospace&#x27;;
        }
        return &quot;&quot;;
      },
      css: cssGenerator,
      ui: createUIHelpers(cssGenerator),
      emit: (event, data) =&gt; {
        void event;
        void data;
      }
    };
    window.addEventListener(&quot;message&quot;, (event) =&gt; {
      if (event.data?.event === &quot;theme-change&quot;) {
        const newTheme = event.data.data.theme;
        if (newTheme === &quot;dark&quot;) {
          document.documentElement.classList.add(&quot;dark&quot;);
        } else {
          document.documentElement.classList.remove(&quot;dark&quot;);
        }
        currentTheme = newTheme;
        themeChangeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newTheme);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onThemeChange callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }
    });
    let resizeTimeout;
    window.addEventListener(&quot;resize&quot;, () =&gt; {
      clearTimeout(resizeTimeout);
      resizeTimeout = window.setTimeout(() =&gt; {
        const newWidth = window.innerWidth;
        resizeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newWidth);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onResize callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }, 150);
    });
    const sandboxWindow2 = window;
    sandboxWindow2.sandboxContext = api;
    setupAutoResize(api);
    scanAndGenerateClasses(api);
    setupMutationObserver(api);
  }
  function setupAutoResize(api) {
    let lastHeight = 0;
    const updateHeight = () =&gt; {
      const root2 = document.getElementById(&quot;root&quot;);
      if (!root2) return;
      const currentHeight = root2.scrollHeight;
      if (currentHeight !== lastHeight) {
        lastHeight = currentHeight;
        api.requestResize(currentHeight);
      }
    };
    const resizeObserver = new ResizeObserver(() =&gt; {
      updateHeight();
    });
    const root = document.getElementById(&quot;root&quot;);
    if (root) {
      resizeObserver.observe(root);
    }
    setTimeout(updateHeight, 0);
  }
  initializeSandbox();
  function executeMountIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const root = document.getElementById(&quot;root&quot;);
      if (!root) {
        console.error(&quot;[DynamicBlock Error] Root element not found - cannot execute mount()&quot;);
        return;
      }
      if (typeof sandboxWindow2.mount === &quot;function&quot;) {
        try {
          sandboxWindow2.mount({ root, api, props });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in mount() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error in executeMountIfExists():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  function executeDrawIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const drawFn = sandboxWindow2.draw;
      if (!api) {
        console.error(&quot;[DynamicBlock Error] Sandbox context not initialized&quot;);
        return;
      }
      if (typeof drawFn !== &quot;function&quot;) {
        return;
      }
      let canvas = document.querySelector(&quot;canvas&quot;);
      if (!canvas) {
        const root = document.getElementById(&quot;root&quot;);
        if (!root) {
          console.error(&quot;[DynamicBlock Error] Root element not found - cannot create canvas&quot;);
          return;
        }
        root.innerHTML = &quot;&quot;;
        canvas = document.createElement(&quot;canvas&quot;);
        canvas.className = api.css(&quot;[&amp;:not([width])]:w-full [&amp;[width]]:mx-auto&quot;);
        root.appendChild(canvas);
      }
      const ariaLabel = sandboxWindow2.__CANVAS_ARIA_LABEL__;
      if (ariaLabel &amp;&amp; typeof ariaLabel === &quot;string&quot;) {
        canvas.setAttribute(&quot;aria-label&quot;, ariaLabel);
      }
      const autoRedrawConfig = sandboxWindow2.autoRedraw || {
        onThemeChange: true,
        onResize: true
      };
      const themeChangeConfig = autoRedrawConfig.onThemeChange === false ? false : autoRedrawConfig.onThemeChange || 0;
      const resizeConfig = autoRedrawConfig.onResize === false ? false : autoRedrawConfig.onResize === true ? 150 : autoRedrawConfig.onResize;
      let resizeTimeout;
      const executeDraw = () =&gt; {
        try {
          const theme = api.theme;
          const width = window.innerWidth;
          drawFn({ canvas, api, theme, width, props });
          requestAnimationFrame(() =&gt; {
            const root = document.getElementById(&quot;root&quot;);
            if (root) {
              const height = root.scrollHeight;
              if (height &gt; 0) {
                api.requestResize(height);
              }
            }
          });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in draw() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      };
      executeDraw();
      if (themeChangeConfig !== false) {
        api.onThemeChange(() =&gt; {
          const debounce = typeof themeChangeConfig === &quot;number&quot; ? themeChangeConfig : 0;
          if (debounce === 0) {
            executeDraw();
          } else {
            setTimeout(executeDraw, debounce);
          }
        });
      }
      if (resizeConfig !== false) {
        api.onResize(() =&gt; {
          clearTimeout(resizeTimeout);
          const debounce = typeof resizeConfig === &quot;number&quot; ? resizeConfig : 150;
          resizeTimeout = window.setTimeout(executeDraw, debounce);
        });
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error setting up draw():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  const sandboxWindow = window;
  sandboxWindow.executeMountIfExists = executeMountIfExists;
  sandboxWindow.executeDrawIfExists = executeDrawIfExists;
})();

  &lt;/script&gt;

  &lt;!-- User code script with source mapping --&gt;
  &lt;script&gt;//# sourceURL=content/puzzles/cryptography/average-salaries-2.md

































































































































































































function draw(options) {
  const { canvas, api, width: _width, props } = options;
  const { n, showExtraPaths = false, maxWidth = 600 } = props || {};

  const width = Math.min(_width, maxWidth);
  const lineThickness = 2;
  const fontSize = 16;
  const labelOffset = 20;
  const canvasSize = width + lineThickness * 2;
  canvas.width = canvasSize;
  canvas.height = canvasSize;

  const centerX = canvasSize / 2;
  const centerY = canvasSize / 2;
  const radius = Math.max(0, (width / 2) - labelOffset - fontSize / 2);

  const ctx = canvas.getContext(&#x27;2d&#x27;);
  const fgColor = api.getColor(&#x27;foreground&#x27;);
  const mutedColor = api.getColor(&#x27;blue-500&#x27;);
  const font = api.getFont(&#x27;default&#x27;);

  // Calculate point positions around the circle
  const points = [];
  for (let i = 0; i &lt; n; i++) {
    const angle = (i / n) * 2 * Math.PI - Math.PI / 2; // Start from top
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);
    points.push({ x, y, angle });
  }

  // Draw lines between all pairs of points
  ctx.strokeStyle = fgColor;
  ctx.lineWidth = lineThickness;
  for (let i = 0; i &lt; n; i++) {
    for (let j = i + 1; j &lt; n; j++) {
      ctx.beginPath();
      ctx.moveTo(points[i].x, points[i].y);
      ctx.lineTo(points[j].x, points[j].y);
      ctx.stroke();
    }
  }

  // Draw extra arc paths if requested
  if (showExtraPaths) {
    ctx.strokeStyle = mutedColor;
    ctx.lineWidth = lineThickness;
    for (let i = 1; i &lt; n - 1; i += 2) {
      const startAngle = points[i].angle;
      const endAngle = points[i + 1].angle;

      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, startAngle, endAngle);
      ctx.stroke();
    }
  }

  // Draw and label points
  ctx.fillStyle = fgColor;
  const pointRadius = 5;

  for (let i = 0; i &lt; n; i++) {
    // Draw point
    ctx.beginPath();
    ctx.arc(points[i].x, points[i].y, pointRadius, 0, 2 * Math.PI);
    ctx.fill();

    // Draw label
    const labelAngle = points[i].angle;
    const labelX = centerX + (radius + labelOffset) * Math.cos(labelAngle);
    const labelY = centerY + (radius + labelOffset) * Math.sin(labelAngle);

    ctx.font = `${fontSize}px ${font}`;
    ctx.textAlign = &#x27;center&#x27;;
    ctx.textBaseline = &#x27;middle&#x27;;
    ctx.fillText((i + 1).toString(), labelX, labelY);
  }
}&lt;/script&gt;

  &lt;!-- Execution script --&gt;
  &lt;script&gt;
    // Execute mount() if defined, passing props
    if (typeof executeMountIfExists === &#x27;function&#x27;) {
      executeMountIfExists(window.__COMPONENT_PROPS__);
    }

    // Execute draw() if defined, passing props
    if (typeof executeDrawIfExists === &#x27;function&#x27;) {
      executeDrawIfExists(window.__COMPONENT_PROPS__);
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" style="width:100%;height:300px" title="Interactive content 0"></iframe></div><p>In this example, we can traverse all the edges with the path:</p><p>1 → 2 → 3 → 4 → 5 → 1 → 3 → 5 → 2 → 4 → 1</p><p>This is called an Eulerian path: a path that traverses all the edges exactly once. The length of the path is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><mn>2</mn></mfrac><mo>=</mo><mn>10</mn></mrow><annotation>\frac{n(n-1)}{2} = 10</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">10</span></span></span></span>: the total number of edges.</p><p>:::note{type=&quot;info&quot;}[Eulerian Graphs]
If a graph has only vertex with even degrees, it must have an Eulerian circuit: a path that traverses every edge exactly once, ending on same vertex.</p><p>If a graph has exactly 2 vertices with odd degrees, it must have an Eulerian path: a path that traverses every edge exactly once. This path must start on one of the vertices with odd degrees, and end on the other vertex with odd degree.
:::</p><p>However, this only applies to situations with an odd number of employees. How about when there are an even number of employees? Let’s take a look at a situation with 6 employees.</p><div class="dynamic-block-container flex justify-center"><iframe class="border-0 block" sandbox="allow-scripts" srcDoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#x27;none&#x27;; script-src &#x27;unsafe-inline&#x27;; style-src &#x27;unsafe-inline&#x27;; img-src data:;&quot;&gt;
  &lt;style&gt;
    /* Prevent scrollbars in iframe while allowing content to expand */
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: auto;
      min-height: 0;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    #root {
      /* flex: 1; */
      /* min-height: 0; */
    }

    /* Theme CSS variables (light/dark mode) */
    /* Theme overrides and customizations */

:root {
  --width-container: 1000px;
}

/* Text selection styling (applied to both main app and iframes) */
::selection {
  background-color: var(--color-selection);
  color: var(--color-selection-foreground);
}


:root {
  --radius: 0.5rem;

  /* Navy */
  --color-navy-50: oklch(0.97 0.015 220);
  --color-navy-100: oklch(0.94 0.020 220);
  --color-navy-200: oklch(0.88 0.030 220);
  --color-navy-300: oklch(0.80 0.045 220);
  --color-navy-400: oklch(0.68 0.060 220);
  --color-navy-500: oklch(0.55 0.075 220);
  --color-navy-600: oklch(0.45 0.080 220);
  --color-navy-700: oklch(0.35 0.075 220);
  --color-navy-800: oklch(0.27 0.065 220);
  --color-navy-900: oklch(0.20 0.050 220);
  --color-navy-950: oklch(0.15 0.040 220);

  /* Frost */
  --color-frost-50: oklch(0.98 0.010 250);
  --color-frost-100: oklch(0.95 0.015 250);
  --color-frost-200: oklch(0.90 0.025 250);
  --color-frost-300: oklch(0.83 0.035 250);
  --color-frost-400: oklch(0.74 0.045 250);
  --color-frost-500: oklch(0.65 0.055 250);
  --color-frost-600: oklch(0.55 0.060 250);
  --color-frost-700: oklch(0.45 0.055 250);
  --color-frost-800: oklch(0.35 0.045 250);
  --color-frost-900: oklch(0.27 0.035 250);
  --color-frost-950: oklch(0.20 0.025 250);

  /* Lagoon */
  --color-lagoon-50: oklch(0.97 0.015 185);
  --color-lagoon-100: oklch(0.94 0.025 185);
  --color-lagoon-200: oklch(0.88 0.040 185);
  --color-lagoon-300: oklch(0.80 0.055 185);
  --color-lagoon-400: oklch(0.70 0.070 185);
  --color-lagoon-500: oklch(0.60 0.080 185);
  --color-lagoon-600: oklch(0.50 0.085 185);
  --color-lagoon-700: oklch(0.40 0.080 185);
  --color-lagoon-800: oklch(0.32 0.070 185);
  --color-lagoon-900: oklch(0.25 0.055 185);
  --color-lagoon-950: oklch(0.18 0.040 185);

  /* Evergreen */
  --color-evergreen-50: oklch(0.97 0.020 155);
  --color-evergreen-100: oklch(0.93 0.035 155);
  --color-evergreen-200: oklch(0.87 0.055 155);
  --color-evergreen-300: oklch(0.79 0.070 155);
  --color-evergreen-400: oklch(0.69 0.085 155);
  --color-evergreen-500: oklch(0.59 0.095 155);
  --color-evergreen-600: oklch(0.49 0.100 155);
  --color-evergreen-700: oklch(0.41 0.095 155);
  --color-evergreen-800: oklch(0.33 0.080 155);
  --color-evergreen-900: oklch(0.27 0.065 155);
  --color-evergreen-950: oklch(0.21 0.050 155);

  /* Sand */
  --color-sand-50: oklch(0.98 0.012 95);
  --color-sand-100: oklch(0.95 0.020 95);
  --color-sand-200: oklch(0.90 0.035 95);
  --color-sand-300: oklch(0.84 0.050 95);
  --color-sand-400: oklch(0.76 0.065 95);
  --color-sand-500: oklch(0.68 0.080 95);
  --color-sand-600: oklch(0.60 0.090 95);
  --color-sand-700: oklch(0.50 0.085 95);
  --color-sand-800: oklch(0.40 0.070 95);
  --color-sand-900: oklch(0.32 0.055 95);
  --color-sand-950: oklch(0.26 0.040 95);

  /* Error */
  --color-error-50: oklch(0.97 0.020 25);
  --color-error-100: oklch(0.94 0.035 25);
  --color-error-200: oklch(0.88 0.055 25);
  --color-error-300: oklch(0.80 0.075 25);
  --color-error-400: oklch(0.70 0.095 25);
  --color-error-500: oklch(0.60 0.110 25);
  --color-error-600: oklch(0.50 0.115 25);
  --color-error-700: oklch(0.42 0.110 25);
  --color-error-800: oklch(0.34 0.095 25);
  --color-error-900: oklch(0.28 0.075 25);
  --color-error-950: oklch(0.22 0.055 25);

  /* Warning */
  --color-warning-50: oklch(0.97 0.020 75);
  --color-warning-100: oklch(0.94 0.035 75);
  --color-warning-200: oklch(0.89 0.060 75);
  --color-warning-300: oklch(0.82 0.085 75);
  --color-warning-400: oklch(0.73 0.105 75);
  --color-warning-500: oklch(0.65 0.120 75);
  --color-warning-600: oklch(0.56 0.125 75);
  --color-warning-700: oklch(0.47 0.115 75);
  --color-warning-800: oklch(0.38 0.095 75);
  --color-warning-900: oklch(0.30 0.070 75);
  --color-warning-950: oklch(0.24 0.050 75);

  /* Success */
  --color-success-50: oklch(0.97 0.020 165);
  --color-success-100: oklch(0.93 0.035 165);
  --color-success-200: oklch(0.87 0.055 165);
  --color-success-300: oklch(0.79 0.075 165);
  --color-success-400: oklch(0.69 0.095 165);
  --color-success-500: oklch(0.59 0.110 165);
  --color-success-600: oklch(0.49 0.115 165);
  --color-success-700: oklch(0.41 0.105 165);
  --color-success-800: oklch(0.33 0.090 165);
  --color-success-900: oklch(0.27 0.070 165);
  --color-success-950: oklch(0.21 0.050 165);

  /* ======================================================
     Tailwind-like Colour Palette
     Inspired by standard Tailwind CSS v4 colours for
     diagrams and illustrations. For website UI, use the
     mountain theme palette above or semantic colours
     instead.
     ====================================================== */

  /* Red */
  --color-red-50: oklch(0.971 0.008 17.38);
  --color-red-100: oklch(0.936 0.019 17.717);
  --color-red-200: oklch(0.885 0.037 18.334);
  --color-red-300: oklch(0.808 0.068 19.571);
  --color-red-400: oklch(0.704 0.115 22.216);
  --color-red-500: oklch(0.637 0.142 25.331);
  --color-red-600: oklch(0.577 0.147 27.325);
  --color-red-700: oklch(0.505 0.128 27.518);
  --color-red-800: oklch(0.444 0.106 26.899);
  --color-red-900: oklch(0.396 0.085 25.723);
  --color-red-950: oklch(0.258 0.055 26.042);
  --color-red: var(--color-red-400);

  /* Orange */
  --color-orange-50: oklch(0.980 0.010 73.684);
  --color-orange-100: oklch(0.954 0.023 75.164);
  --color-orange-200: oklch(0.901 0.046 70.697);
  --color-orange-300: oklch(0.837 0.077 66.29);
  --color-orange-400: oklch(0.750 0.110 55.934);
  --color-orange-500: oklch(0.705 0.128 47.604);
  --color-orange-600: oklch(0.646 0.133 41.116);
  --color-orange-700: oklch(0.553 0.117 38.402);
  --color-orange-800: oklch(0.470 0.094 37.304);
  --color-orange-900: oklch(0.408 0.074 38.172);
  --color-orange-950: oklch(0.266 0.047 36.259);
  --color-orange: var(--color-orange-400);

  /* Amber */
  --color-amber-50: oklch(0.987 0.013 95.277);
  --color-amber-100: oklch(0.962 0.035 95.617);
  --color-amber-200: oklch(0.924 0.072 95.746);
  --color-amber-300: oklch(0.879 0.101 91.605);
  --color-amber-400: oklch(0.828 0.113 84.429);
  --color-amber-500: oklch(0.769 0.113 70.08);
  --color-amber-600: oklch(0.666 0.107 58.318);
  --color-amber-700: oklch(0.555 0.098 48.998);
  --color-amber-800: oklch(0.473 0.082 46.201);
  --color-amber-900: oklch(0.414 0.067 45.904);
  --color-amber-950: oklch(0.279 0.046 45.635);
  --color-amber: var(--color-amber-400);

  /* Yellow */
  --color-yellow-50: oklch(0.987 0.016 102.212);
  --color-yellow-100: oklch(0.973 0.043 103.193);
  --color-yellow-200: oklch(0.945 0.077 101.54);
  --color-yellow-300: oklch(0.905 0.109 98.111);
  --color-yellow-400: oklch(0.852 0.119 91.936);
  --color-yellow-500: oklch(0.795 0.110 86.047);
  --color-yellow-600: oklch(0.681 0.097 75.834);
  --color-yellow-700: oklch(0.554 0.081 66.442);
  --color-yellow-800: oklch(0.476 0.068 61.907);
  --color-yellow-900: oklch(0.421 0.057 57.708);
  --color-yellow-950: oklch(0.286 0.040 53.813);
  --color-yellow: var(--color-yellow-400);

  /* Lime */
  --color-lime-50: oklch(0.986 0.019 120.757);
  --color-lime-100: oklch(0.967 0.040 122.328);
  --color-lime-200: oklch(0.938 0.076 124.321);
  --color-lime-300: oklch(0.897 0.118 126.665);
  --color-lime-400: oklch(0.841 0.143 128.85);
  --color-lime-500: oklch(0.768 0.140 130.85);
  --color-lime-600: oklch(0.648 0.120 131.684);
  --color-lime-700: oklch(0.532 0.094 131.589);
  --color-lime-800: oklch(0.453 0.074 130.933);
  --color-lime-900: oklch(0.405 0.061 131.063);
  --color-lime-950: oklch(0.274 0.043 132.109);
  --color-lime: var(--color-lime-400);

  /* Green */
  --color-green-50: oklch(0.982 0.011 155.826);
  --color-green-100: oklch(0.962 0.026 156.743);
  --color-green-200: oklch(0.925 0.050 155.995);
  --color-green-300: oklch(0.871 0.090 154.449);
  --color-green-400: oklch(0.792 0.125 151.711);
  --color-green-500: oklch(0.723 0.131 149.579);
  --color-green-600: oklch(0.627 0.116 149.214);
  --color-green-700: oklch(0.527 0.092 150.069);
  --color-green-800: oklch(0.448 0.071 151.328);
  --color-green-900: oklch(0.393 0.057 152.535);
  --color-green-950: oklch(0.266 0.039 152.934);
  --color-green: var(--color-green-400);

  /* Emerald */
  --color-emerald-50: oklch(0.979 0.013 166.113);
  --color-emerald-100: oklch(0.950 0.031 163.051);
  --color-emerald-200: oklch(0.905 0.056 164.15);
  --color-emerald-300: oklch(0.845 0.086 164.978);
  --color-emerald-400: oklch(0.765 0.106 163.223);
  --color-emerald-500: oklch(0.696 0.102 162.48);
  --color-emerald-600: oklch(0.596 0.087 163.225);
  --color-emerald-700: oklch(0.508 0.071 165.612);
  --color-emerald-800: oklch(0.432 0.057 166.913);
  --color-emerald-900: oklch(0.378 0.046 168.94);
  --color-emerald-950: oklch(0.262 0.031 172.552);
  --color-emerald: var(--color-emerald-400);

  /* Teal */
  --color-teal-50: oklch(0.984 0.008 180.72);
  --color-teal-100: oklch(0.953 0.031 180.801);
  --color-teal-200: oklch(0.910 0.058 180.426);
  --color-teal-300: oklch(0.855 0.083 181.071);
  --color-teal-400: oklch(0.777 0.091 181.912);
  --color-teal-500: oklch(0.704 0.084 182.503);
  --color-teal-600: oklch(0.600 0.071 184.704);
  --color-teal-700: oklch(0.511 0.058 186.391);
  --color-teal-800: oklch(0.437 0.047 188.216);
  --color-teal-900: oklch(0.386 0.038 188.416);
  --color-teal-950: oklch(0.277 0.028 192.524);
  --color-teal: var(--color-teal-400);

  /* Cyan */
  --color-cyan-50: oklch(0.984 0.011 200.873);
  --color-cyan-100: oklch(0.956 0.027 203.388);
  --color-cyan-200: oklch(0.917 0.048 205.041);
  --color-cyan-300: oklch(0.865 0.076 207.078);
  --color-cyan-400: oklch(0.789 0.092 211.53);
  --color-cyan-500: oklch(0.715 0.086 215.221);
  --color-cyan-600: oklch(0.609 0.076 221.723);
  --color-cyan-700: oklch(0.520 0.063 223.128);
  --color-cyan-800: oklch(0.450 0.051 224.283);
  --color-cyan-900: oklch(0.398 0.042 227.392);
  --color-cyan-950: oklch(0.302 0.034 229.695);
  --color-cyan: var(--color-cyan-400);

  /* Sky */
  --color-sky-50: oklch(0.977 0.008 236.62);
  --color-sky-100: oklch(0.951 0.016 236.824);
  --color-sky-200: oklch(0.901 0.035 230.902);
  --color-sky-300: oklch(0.828 0.067 230.318);
  --color-sky-400: oklch(0.746 0.096 232.661);
  --color-sky-500: oklch(0.685 0.101 237.323);
  --color-sky-600: oklch(0.588 0.095 241.966);
  --color-sky-700: oklch(0.500 0.080 242.749);
  --color-sky-800: oklch(0.443 0.066 240.79);
  --color-sky-900: oklch(0.391 0.054 240.876);
  --color-sky-950: oklch(0.293 0.040 243.157);
  --color-sky: var(--color-sky-400);

  /* Blue */
  --color-blue-50: oklch(0.970 0.008 254.604);
  --color-blue-100: oklch(0.932 0.019 255.585);
  --color-blue-200: oklch(0.882 0.035 254.128);
  --color-blue-300: oklch(0.809 0.063 251.813);
  --color-blue-400: oklch(0.707 0.099 254.624);
  --color-blue-500: oklch(0.623 0.128 259.815);
  --color-blue-600: oklch(0.546 0.147 262.881);
  --color-blue-700: oklch(0.488 0.146 264.376);
  --color-blue-800: oklch(0.424 0.119 265.638);
  --color-blue-900: oklch(0.379 0.088 265.522);
  --color-blue-950: oklch(0.282 0.055 267.935);
  --color-blue: var(--color-blue-400);

  /* Indigo */
  --color-indigo-50: oklch(0.962 0.011 272.314);
  --color-indigo-100: oklch(0.930 0.020 272.788);
  --color-indigo-200: oklch(0.870 0.039 274.039);
  --color-indigo-300: oklch(0.785 0.069 274.713);
  --color-indigo-400: oklch(0.673 0.109 276.935);
  --color-indigo-500: oklch(0.585 0.140 277.117);
  --color-indigo-600: oklch(0.511 0.157 276.966);
  --color-indigo-700: oklch(0.457 0.144 277.023);
  --color-indigo-800: oklch(0.398 0.117 277.366);
  --color-indigo-900: oklch(0.359 0.086 278.697);
  --color-indigo-950: oklch(0.257 0.054 281.288);
  --color-indigo: var(--color-indigo-400);

  /* Violet */
  --color-violet-50: oklch(0.969 0.010 293.756);
  --color-violet-100: oklch(0.943 0.017 294.588);
  --color-violet-200: oklch(0.894 0.034 293.283);
  --color-violet-300: oklch(0.811 0.067 293.571);
  --color-violet-400: oklch(0.702 0.110 293.541);
  --color-violet-500: oklch(0.606 0.150 292.717);
  --color-violet-600: oklch(0.541 0.169 293.009);
  --color-violet-700: oklch(0.491 0.162 292.581);
  --color-violet-800: oklch(0.432 0.139 292.759);
  --color-violet-900: oklch(0.380 0.113 293.745);
  --color-violet-950: oklch(0.283 0.085 291.089);
  --color-violet: var(--color-violet-400);

  /* Purple */
  --color-purple-50: oklch(0.977 0.008 308.299);
  --color-purple-100: oklch(0.946 0.020 307.174);
  --color-purple-200: oklch(0.902 0.038 306.703);
  --color-purple-300: oklch(0.827 0.071 306.383);
  --color-purple-400: oklch(0.714 0.122 305.504);
  --color-purple-500: oklch(0.627 0.159 303.9);
  --color-purple-600: oklch(0.558 0.173 302.321);
  --color-purple-700: oklch(0.496 0.159 301.924);
  --color-purple-800: oklch(0.438 0.131 303.724);
  --color-purple-900: oklch(0.381 0.106 304.987);
  --color-purple-950: oklch(0.291 0.089 302.717);
  --color-purple: var(--color-purple-400);

  /* Fuchsia */
  --color-fuchsia-50: oklch(0.977 0.010 320.058);
  --color-fuchsia-100: oklch(0.952 0.022 318.852);
  --color-fuchsia-200: oklch(0.903 0.046 319.62);
  --color-fuchsia-300: oklch(0.833 0.087 321.434);
  --color-fuchsia-400: oklch(0.740 0.143 322.16);
  --color-fuchsia-500: oklch(0.667 0.177 322.15);
  --color-fuchsia-600: oklch(0.591 0.176 322.896);
  --color-fuchsia-700: oklch(0.518 0.152 323.949);
  --color-fuchsia-800: oklch(0.452 0.127 324.591);
  --color-fuchsia-900: oklch(0.401 0.102 325.612);
  --color-fuchsia-950: oklch(0.293 0.082 325.661);
  --color-fuchsia: var(--color-fuchsia-400);

  /* Pink */
  --color-pink-50: oklch(0.971 0.008 343.198);
  --color-pink-100: oklch(0.948 0.017 342.258);
  --color-pink-200: oklch(0.899 0.037 343.231);
  --color-pink-300: oklch(0.823 0.072 346.018);
  --color-pink-400: oklch(0.718 0.121 349.761);
  --color-pink-500: oklch(0.656 0.145 354.308);
  --color-pink-600: oklch(0.592 0.149 0.584);
  --color-pink-700: oklch(0.525 0.134 3.958);
  --color-pink-800: oklch(0.459 0.112 3.815);
  --color-pink-900: oklch(0.408 0.092 2.432);
  --color-pink-950: oklch(0.284 0.065 3.907);
  --color-pink: var(--color-pink-400);

  /* Rose */
  --color-rose-50: oklch(0.969 0.009 12.422);
  --color-rose-100: oklch(0.941 0.018 12.58);
  --color-rose-200: oklch(0.892 0.035 10.001);
  --color-rose-300: oklch(0.810 0.070 11.638);
  --color-rose-400: oklch(0.712 0.116 13.428);
  --color-rose-500: oklch(0.645 0.148 16.439);
  --color-rose-600: oklch(0.586 0.152 17.585);
  --color-rose-700: oklch(0.514 0.133 16.935);
  --color-rose-800: oklch(0.455 0.113 13.697);
  --color-rose-900: oklch(0.410 0.095 10.272);
  --color-rose-950: oklch(0.271 0.063 12.094);
  --color-rose: var(--color-rose-400);

  /* Slate */
  --color-slate-50: oklch(0.984 0.002 247.858);
  --color-slate-100: oklch(0.968 0.004 247.896);
  --color-slate-200: oklch(0.929 0.008 255.508);
  --color-slate-300: oklch(0.869 0.013 252.894);
  --color-slate-400: oklch(0.704 0.024 256.788);
  --color-slate-500: oklch(0.554 0.028 257.417);
  --color-slate-600: oklch(0.446 0.026 257.281);
  --color-slate-700: oklch(0.372 0.026 257.287);
  --color-slate-800: oklch(0.279 0.025 260.031);
  --color-slate-900: oklch(0.208 0.025 265.755);
  --color-slate-950: oklch(0.129 0.025 264.695);
  --color-slate: var(--color-slate-400);

  /* Gray */
  --color-gray-50: oklch(0.985 0.001 247.839);
  --color-gray-100: oklch(0.967 0.002 264.542);
  --color-gray-200: oklch(0.928 0.004 264.531);
  --color-gray-300: oklch(0.872 0.006 258.338);
  --color-gray-400: oklch(0.707 0.013 261.325);
  --color-gray-500: oklch(0.551 0.016 264.364);
  --color-gray-600: oklch(0.446 0.018 256.802);
  --color-gray-700: oklch(0.373 0.020 259.733);
  --color-gray-800: oklch(0.278 0.020 256.848);
  --color-gray-900: oklch(0.210 0.020 264.665);
  --color-gray-950: oklch(0.130 0.017 261.692);
  --color-gray: var(--color-gray-400);

  /* Zinc */
  --color-zinc-50: oklch(0.985 0 0);
  --color-zinc-100: oklch(0.967 0.001 286.375);
  --color-zinc-200: oklch(0.920 0.002 286.32);
  --color-zinc-300: oklch(0.871 0.004 286.286);
  --color-zinc-400: oklch(0.705 0.009 286.067);
  --color-zinc-500: oklch(0.552 0.010 285.938);
  --color-zinc-600: oklch(0.442 0.010 285.786);
  --color-zinc-700: oklch(0.370 0.008 285.805);
  --color-zinc-800: oklch(0.274 0.004 286.033);
  --color-zinc-900: oklch(0.210 0.004 285.885);
  --color-zinc-950: oklch(0.141 0.003 285.823);
  --color-zinc: var(--color-zinc-400);

  /* Neutral */
  --color-neutral-50: oklch(0.985 0 0);
  --color-neutral-100: oklch(0.970 0 0);
  --color-neutral-200: oklch(0.922 0 0);
  --color-neutral-300: oklch(0.870 0 0);
  --color-neutral-400: oklch(0.708 0 0);
  --color-neutral-500: oklch(0.556 0 0);
  --color-neutral-600: oklch(0.439 0 0);
  --color-neutral-700: oklch(0.371 0 0);
  --color-neutral-800: oklch(0.269 0 0);
  --color-neutral-900: oklch(0.205 0 0);
  --color-neutral-950: oklch(0.145 0 0);
  --color-neutral: var(--color-neutral-400);

  /* Stone */
  --color-stone-50: oklch(0.985 0.001 106.423);
  --color-stone-100: oklch(0.970 0.001 106.424);
  --color-stone-200: oklch(0.923 0.002 48.717);
  --color-stone-300: oklch(0.869 0.003 56.366);
  --color-stone-400: oklch(0.709 0.006 56.259);
  --color-stone-500: oklch(0.553 0.008 58.071);
  --color-stone-600: oklch(0.444 0.007 73.639);
  --color-stone-700: oklch(0.374 0.006 67.558);
  --color-stone-800: oklch(0.268 0.004 34.298);
  --color-stone-900: oklch(0.216 0.004 56.043);
  --color-stone-950: oklch(0.147 0.002 49.25);
  --color-stone: var(--color-stone-400);

  /* Pure white */
  --color-white: oklch(1 0 0);
}

/* Semantic UI Theme Variables */

:root {
  /* Base colors */
  --color-background: var(--color-frost-50);
  --color-foreground: var(--color-navy-950);

  /* Card */
  --color-card: var(--color-white);
  --color-card-foreground: var(--color-navy-950);

  /* Popover */
  --color-popover: var(--color-white);
  --color-popover-foreground: var(--color-navy-950);

  /* Primary */
  --color-primary: var(--color-navy-600);
  --color-primary-foreground: var(--color-white);

  /* Secondary */
  --color-secondary: var(--color-evergreen-600);
  --color-secondary-foreground: var(--color-white);

  /* Muted */
  --color-muted: var(--color-frost-100);
  --color-muted-foreground: var(--color-navy-600);

  /* Accent */
  --color-accent: var(--color-sand-600);
  --color-accent-foreground: var(--color-white);

  /* Destructive */
  --color-destructive: var(--color-error-600);
  --color-destructive-foreground: var(--color-white);

  /* Success */
  --color-success: var(--color-success-600);
  --color-success-foreground: var(--color-white);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-500);
  --color-completed-foreground: var(--color-white);

  /* Warning */
  --color-warning: var(--color-warning-600);
  --color-warning-foreground: var(--color-white);

  /* Info */
  --color-info: var(--color-navy-500);
  --color-info-foreground: var(--color-white);

  /* Border */
  --color-border: var(--color-frost-600);
  --color-input: var(--color-frost-300);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-frost-200);
  --color-surface: var(--color-white);
  --color-text-secondary: var(--color-frost-600);
  --color-text-emphasis: var(--color-navy-600);
  --color-link: var(--color-navy-600);
  --color-link-hover: var(--color-navy-700);

  /* Select component */
  --color-select-hover: var(--color-navy-50);
  --color-select-hover-foreground: var(--color-navy-950);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-600);
  --color-checkbox-checked-foreground: var(--color-white);

  /* Navigation */
  --color-nav-foreground: var(--color-navy-600);

  /* Text selection */
  --color-selection: var(--color-navy-200);
  --color-selection-foreground: var(--color-navy-900);

  /* Difficulty levels (puzzles) */
  --color-difficulty-easy: var(--color-success-100);
  --color-difficulty-easy-foreground: var(--color-success-800);
  --color-difficulty-medium: var(--color-navy-100);
  --color-difficulty-medium-foreground: var(--color-navy-800);
  --color-difficulty-hard: var(--color-warning-100);
  --color-difficulty-hard-foreground: var(--color-warning-800);
  --color-difficulty-expert: var(--color-error-100);
  --color-difficulty-expert-foreground: var(--color-error-800);
  --color-difficulty-open: var(--color-frost-200);
  --color-difficulty-open-foreground: var(--color-frost-900);

  /* Gradients */
  --gradient-recommendation-start: var(--color-evergreen-500);
  --gradient-recommendation-end: var(--color-navy-500);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


.dark {
  /* Base colors */
  --color-background: oklch(0.10 0.035 220); /* darker than navy-950, almost pure black */
  --color-foreground: var(--color-frost-200);

  /* Card */
  --color-card: var(--color-navy-900);
  --color-card-foreground: var(--color-frost-200);

  /* Popover */
  --color-popover: var(--color-navy-900);
  --color-popover-foreground: var(--color-frost-200);

  /* Primary */
  --color-primary: var(--color-navy-400);
  --color-primary-foreground: var(--color-navy-950);

  /* Secondary */
  --color-secondary: var(--color-evergreen-400);
  --color-secondary-foreground: var(--color-navy-950);

  /* Muted */
  --color-muted: var(--color-navy-800);
  --color-muted-foreground: var(--color-frost-400);

  /* Accent */
  --color-accent: var(--color-sand-400);
  --color-accent-foreground: var(--color-navy-950);

  /* Destructive */
  --color-destructive: var(--color-error-400);
  --color-destructive-foreground: var(--color-navy-950);

  /* Success */
  --color-success: var(--color-success-400);
  --color-success-foreground: var(--color-navy-950);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-300);
  --color-completed-foreground: var(--color-navy-950);

  /* Warning */
  --color-warning: var(--color-warning-400);
  --color-warning-foreground: var(--color-navy-950);

  /* Info */
  --color-info: var(--color-navy-300);
  --color-info-foreground: var(--color-navy-950);

  /* Border */
  --color-border: var(--color-navy-700);
  --color-input: var(--color-navy-600);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-navy-700);
  --color-surface: var(--color-navy-900);
  --color-text-secondary: var(--color-frost-400);
  --color-text-emphasis: var(--color-frost-50);
  --color-link: var(--color-navy-400);
  --color-link-hover: var(--color-navy-300);

  /* Select component */
  --color-select-hover: var(--color-navy-800);
  --color-select-hover-foreground: var(--color-frost-200);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-400);
  --color-checkbox-checked-foreground: var(--color-navy-950);

  /* Navigation */
  --color-nav-foreground: var(--color-frost-200);

  /* Text selection */
  --color-selection: var(--color-navy-700);
  --color-selection-foreground: var(--color-navy-100);

  /* Difficulty levels (puzzles) - dark mode */
  --color-difficulty-easy: var(--color-success-900);
  --color-difficulty-easy-foreground: var(--color-success-200);
  --color-difficulty-medium: var(--color-navy-900);
  --color-difficulty-medium-foreground: var(--color-navy-200);
  --color-difficulty-hard: var(--color-warning-900);
  --color-difficulty-hard-foreground: var(--color-warning-200);
  --color-difficulty-expert: var(--color-error-900);
  --color-difficulty-expert-foreground: var(--color-error-200);
  --color-difficulty-open: var(--color-frost-700);
  --color-difficulty-open-foreground: var(--color-frost-200);

  /* Gradients - dark mode */
  --gradient-recommendation-start: var(--color-evergreen-600);
  --gradient-recommendation-end: var(--color-navy-600);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


    /* Base Reset */
*, ::before, ::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: var(--color-border);
}

html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  tab-size: 4;
  font-family: &#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif;
  font-feature-settings: normal;
  font-variation-settings: normal;
}

body {
  margin: 0;
  line-height: inherit;
  color: var(--color-foreground);
  background-color: var(--color-background);
}

/* Reset margins on common elements */
h1, h2, h3, h4, h5, h6, p, blockquote, pre, ul, ol, dl, figure, hr {
  margin: 0;
}

/* Reset list styles */
ul, ol {
  padding: 0;
  list-style: none;
}

/* Reset buttons and inputs */
button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button, select {
  text-transform: none;
}

button, input:where([type=&#x27;button&#x27;]), input:where([type=&#x27;reset&#x27;]), input:where([type=&#x27;submit&#x27;]) {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
  cursor: pointer;
}

button:disabled, input:disabled {
  cursor: default;
}

/* Reset form elements */
input::placeholder, textarea::placeholder {
  opacity: 1;
  color: var(--color-muted-foreground);
}

/* Reset tables */
table {
  text-indent: 0;
  border-color: inherit;
  border-collapse: collapse;
}

/* Link styles */
a {
  color: var(--color-link);
  text-decoration: none;
}

a:hover {
  color: var(--color-link-hover);
  text-decoration: underline;
}

/* Reset headings */
h1, h2, h3, h4, h5, h6 {
  font-size: inherit;
  font-weight: inherit;
}

/* Reset images and media */
img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  vertical-align: middle;
}

img, video {
  max-width: 100%;
  height: auto;
}

/* Sandbox-specific UI styles */
.sandbox-select:invalid {
  color: var(--color-muted-foreground) !important;
}

.sandbox-select option {
  background-color: var(--color-popover) !important;
  color: var(--color-popover-foreground) !important;
  padding: 0.375rem 0.5rem !important;
}

.sandbox-select option:disabled {
  color: var(--color-muted-foreground) !important;
  background-color: var(--color-popover) !important;
}

.sandbox-select option:checked {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

.sandbox-select option:hover,
.sandbox-select option:focus,
.sandbox-select option:active {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

/* Peer helper class for Radix UI components */
.peer { }
    
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;

  &lt;!-- Runtime and globals script --&gt;
  &lt;script&gt;
    // Component props (available globally)
    window.__COMPONENT_PROPS__ = {&quot;n&quot;:6,&quot;maxWidth&quot;:350};

    // Canvas accessibility label (for canvas mode blocks)
    window.__CANVAS_ARIA_LABEL__ = null;

    // Injected sandbox runtime
    (() =&gt; {
  function createCSSGenerator() {
    const generatedClasses = /* @__PURE__ */ new Set();
    const styleSheet = new CSSStyleSheet();
    document.adoptedStyleSheets = [...document.adoptedStyleSheets, styleSheet];
    const spacingScale = {
      &quot;0&quot;: &quot;0&quot;,
      &quot;px&quot;: &quot;1px&quot;,
      &quot;0.5&quot;: &quot;0.125rem&quot;,
      &quot;1&quot;: &quot;0.25rem&quot;,
      &quot;1.5&quot;: &quot;0.375rem&quot;,
      &quot;2&quot;: &quot;0.5rem&quot;,
      &quot;2.5&quot;: &quot;0.625rem&quot;,
      &quot;3&quot;: &quot;0.75rem&quot;,
      &quot;3.5&quot;: &quot;0.875rem&quot;,
      &quot;4&quot;: &quot;1rem&quot;,
      &quot;5&quot;: &quot;1.25rem&quot;,
      &quot;6&quot;: &quot;1.5rem&quot;,
      &quot;7&quot;: &quot;1.75rem&quot;,
      &quot;8&quot;: &quot;2rem&quot;,
      &quot;9&quot;: &quot;2.25rem&quot;,
      &quot;10&quot;: &quot;2.5rem&quot;,
      &quot;11&quot;: &quot;2.75rem&quot;,
      &quot;12&quot;: &quot;3rem&quot;,
      &quot;14&quot;: &quot;3.5rem&quot;,
      &quot;16&quot;: &quot;4rem&quot;,
      &quot;20&quot;: &quot;5rem&quot;,
      &quot;24&quot;: &quot;6rem&quot;,
      &quot;28&quot;: &quot;7rem&quot;,
      &quot;32&quot;: &quot;8rem&quot;,
      &quot;36&quot;: &quot;9rem&quot;,
      &quot;40&quot;: &quot;10rem&quot;,
      &quot;44&quot;: &quot;11rem&quot;,
      &quot;48&quot;: &quot;12rem&quot;,
      &quot;52&quot;: &quot;13rem&quot;,
      &quot;56&quot;: &quot;14rem&quot;,
      &quot;60&quot;: &quot;15rem&quot;,
      &quot;64&quot;: &quot;16rem&quot;,
      &quot;72&quot;: &quot;18rem&quot;,
      &quot;80&quot;: &quot;20rem&quot;,
      &quot;96&quot;: &quot;24rem&quot;
    };
    const sizeValues = {
      &quot;auto&quot;: &quot;auto&quot;,
      &quot;full&quot;: &quot;100%&quot;,
      &quot;screen&quot;: &quot;100vw&quot;,
      // for width
      &quot;min&quot;: &quot;min-content&quot;,
      &quot;max&quot;: &quot;max-content&quot;,
      &quot;fit&quot;: &quot;fit-content&quot;
    };
    const parseArbitraryValue = (value) =&gt; {
      const match = value.match(/^\[(.+)\]$/);
      return match ? match[1] : null;
    };
    const parseOpacity = (className) =&gt; {
      const match = className.match(/^(.+?)\/(\d+)$/);
      if (match) {
        return { base: match[1], opacity: (parseInt(match[2]) / 100).toString() };
      }
      return { base: className, opacity: null };
    };
    const findMatchingBracket = (str, startIndex) =&gt; {
      if (str[startIndex] !== &quot;[&quot;) {
        return -1;
      }
      let depth = 0;
      for (let i = startIndex; i &lt; str.length; i++) {
        const char = str[i];
        if (char === &quot;[&quot;) {
          depth++;
        } else if (char === &quot;]&quot;) {
          depth--;
          if (depth === 0) {
            return i;
          }
        }
      }
      return -1;
    };
    const parseArbitrarySelector = (className) =&gt; {
      if (!className.startsWith(&quot;[&quot;)) {
        return null;
      }
      const closingBracketIndex = findMatchingBracket(className, 0);
      if (closingBracketIndex === -1 || className[closingBracketIndex + 1] !== &quot;:&quot;) {
        return null;
      }
      const bracketContent = className.substring(1, closingBracketIndex);
      if (!bracketContent.startsWith(&quot;&amp;&quot;)) {
        return null;
      }
      const selector = bracketContent.substring(1);
      const baseClass = className.substring(closingBracketIndex + 2);
      return { selector, baseClass };
    };
    const generateRule = (className) =&gt; {
      const arbitrarySelector = parseArbitrarySelector(className);
      if (arbitrarySelector) {
        const { selector, baseClass } = arbitrarySelector;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/&amp;/g, &quot;\\&amp;&quot;).replace(/&gt;/g, &quot;\\&gt;&quot;).replace(/\*/g, &quot;\\*&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\+/g, &quot;\\+&quot;).replace(/~/g, &quot;\\~&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const declarations = baseRule.substring(selectorEnd);
        return `.${escapedClass}${selector} ${declarations}`;
      }
      const variantMatch = className.match(/^(hover|focus|active|disabled|dark):(.+)$/);
      if (variantMatch) {
        const [, variant, baseClass] = variantMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const baseSelector = baseRule.substring(0, selectorEnd).trim();
        const declarations = baseRule.substring(selectorEnd);
        if (variant === &quot;hover&quot;) {
          return `.${escapedClass}:hover ${declarations}`;
        } else if (variant === &quot;focus&quot;) {
          return `.${escapedClass}:focus ${declarations}`;
        } else if (variant === &quot;active&quot;) {
          return `.${escapedClass}:active ${declarations}`;
        } else if (variant === &quot;disabled&quot;) {
          return `.${escapedClass}:disabled ${declarations}`;
        } else if (variant === &quot;dark&quot;) {
          const pseudoMatch = baseSelector.match(/(:(?:hover|focus|active|disabled|focus-visible)(?:\([^)]*\))?)$/);
          const pseudoSelector = pseudoMatch ? pseudoMatch[1] : &quot;&quot;;
          return `.dark .${escapedClass}${pseudoSelector} ${declarations}`;
        }
      }
      const { base, opacity } = parseOpacity(className);
      const spacingMatch = base.match(/^(px|py|pt|pb|pl|pr|mx|my|mt|mb|ml|mr|gap-x|gap-y|space-x|space-y|min-w|min-h|max-w|max-h|inset-x|inset-y|p|m|gap|w|h|top|right|bottom|left|inset)-(.+)$/);
      if (spacingMatch) {
        const [, property, value] = spacingMatch;
        const spacing = spacingScale[value] || sizeValues[value] || parseArbitraryValue(value);
        if (!spacing) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (property === &quot;space-x&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-x-reverse: 0; margin-inline-start: calc(${spacing} * var(--tw-space-x-reverse)); margin-inline-end: calc(${spacing} * calc(1 - var(--tw-space-x-reverse))); }`;
        }
        if (property === &quot;space-y&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-y-reverse: 0; margin-block-start: calc(${spacing} * var(--tw-space-y-reverse)); margin-block-end: calc(${spacing} * calc(1 - var(--tw-space-y-reverse))); }`;
        }
        const propertyMap = {
          &quot;p&quot;: [&quot;padding&quot;],
          &quot;px&quot;: [&quot;padding-left&quot;, &quot;padding-right&quot;],
          &quot;py&quot;: [&quot;padding-top&quot;, &quot;padding-bottom&quot;],
          &quot;pt&quot;: [&quot;padding-top&quot;],
          &quot;pb&quot;: [&quot;padding-bottom&quot;],
          &quot;pl&quot;: [&quot;padding-left&quot;],
          &quot;pr&quot;: [&quot;padding-right&quot;],
          &quot;m&quot;: [&quot;margin&quot;],
          &quot;mx&quot;: [&quot;margin-left&quot;, &quot;margin-right&quot;],
          &quot;my&quot;: [&quot;margin-top&quot;, &quot;margin-bottom&quot;],
          &quot;mt&quot;: [&quot;margin-top&quot;],
          &quot;mb&quot;: [&quot;margin-bottom&quot;],
          &quot;ml&quot;: [&quot;margin-left&quot;],
          &quot;mr&quot;: [&quot;margin-right&quot;],
          &quot;gap&quot;: [&quot;gap&quot;],
          &quot;gap-x&quot;: [&quot;column-gap&quot;],
          &quot;gap-y&quot;: [&quot;row-gap&quot;],
          &quot;w&quot;: [&quot;width&quot;],
          &quot;h&quot;: [&quot;height&quot;],
          &quot;min-w&quot;: [&quot;min-width&quot;],
          &quot;min-h&quot;: [&quot;min-height&quot;],
          &quot;max-w&quot;: [&quot;max-width&quot;],
          &quot;max-h&quot;: [&quot;max-height&quot;],
          &quot;top&quot;: [&quot;top&quot;],
          &quot;right&quot;: [&quot;right&quot;],
          &quot;bottom&quot;: [&quot;bottom&quot;],
          &quot;left&quot;: [&quot;left&quot;],
          &quot;inset&quot;: [&quot;top&quot;, &quot;right&quot;, &quot;bottom&quot;, &quot;left&quot;],
          &quot;inset-x&quot;: [&quot;left&quot;, &quot;right&quot;],
          &quot;inset-y&quot;: [&quot;top&quot;, &quot;bottom&quot;]
        };
        const properties = propertyMap[property];
        if (!properties) return null;
        const declarations = properties.map((prop) =&gt; `${prop}: ${spacing}`).join(&quot;; &quot;);
        return `.${escapedClass} { ${declarations}; }`;
      }
      const textSizeMatch = base.match(/^text-(xs|sm|base|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl|8xl|9xl)$/);
      if (textSizeMatch) {
        const [, size] = textSizeMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const sizeMap = {
          &quot;xs&quot;: { fontSize: &quot;0.75rem&quot;, lineHeight: &quot;1rem&quot; },
          &quot;sm&quot;: { fontSize: &quot;0.875rem&quot;, lineHeight: &quot;1.25rem&quot; },
          &quot;base&quot;: { fontSize: &quot;1rem&quot;, lineHeight: &quot;1.5rem&quot; },
          &quot;lg&quot;: { fontSize: &quot;1.125rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;xl&quot;: { fontSize: &quot;1.25rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;2xl&quot;: { fontSize: &quot;1.5rem&quot;, lineHeight: &quot;2rem&quot; },
          &quot;3xl&quot;: { fontSize: &quot;1.875rem&quot;, lineHeight: &quot;2.25rem&quot; },
          &quot;4xl&quot;: { fontSize: &quot;2.25rem&quot;, lineHeight: &quot;2.5rem&quot; },
          &quot;5xl&quot;: { fontSize: &quot;3rem&quot;, lineHeight: &quot;1&quot; },
          &quot;6xl&quot;: { fontSize: &quot;3.75rem&quot;, lineHeight: &quot;1&quot; },
          &quot;7xl&quot;: { fontSize: &quot;4.5rem&quot;, lineHeight: &quot;1&quot; },
          &quot;8xl&quot;: { fontSize: &quot;6rem&quot;, lineHeight: &quot;1&quot; },
          &quot;9xl&quot;: { fontSize: &quot;8rem&quot;, lineHeight: &quot;1&quot; }
        };
        const { fontSize, lineHeight } = sizeMap[size];
        return `.${escapedClass} { font-size: ${fontSize}; line-height: ${lineHeight}; }`;
      }
      const fontWeightMatch = base.match(/^font-(thin|extralight|light|normal|medium|semibold|bold|extrabold|black)$/);
      if (fontWeightMatch) {
        const [, weight] = fontWeightMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const weightMap = {
          &quot;thin&quot;: &quot;100&quot;,
          &quot;extralight&quot;: &quot;200&quot;,
          &quot;light&quot;: &quot;300&quot;,
          &quot;normal&quot;: &quot;400&quot;,
          &quot;medium&quot;: &quot;500&quot;,
          &quot;semibold&quot;: &quot;600&quot;,
          &quot;bold&quot;: &quot;700&quot;,
          &quot;extrabold&quot;: &quot;800&quot;,
          &quot;black&quot;: &quot;900&quot;
        };
        return `.${escapedClass} { font-weight: ${weightMap[weight]}; }`;
      }
      const fontFamilyMatch = base.match(/^font-(sans|serif|mono)$/);
      if (fontFamilyMatch) {
        const [, family] = fontFamilyMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const familyMap = {
          &quot;sans&quot;: &quot;&#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif&quot;,
          &quot;serif&quot;: &quot;ui-serif, Georgia, Cambria, &#x27;Times New Roman&#x27;, Times, serif&quot;,
          &quot;mono&quot;: &quot;&#x27;Space Mono&#x27;, ui-monospace, &#x27;Cascadia Code&#x27;, monospace&quot;
        };
        return `.${escapedClass} { font-family: ${familyMap[family]}; }`;
      }
      const lineHeightMatch = base.match(/^leading-(.+)$/);
      if (lineHeightMatch) {
        const [, value] = lineHeightMatch;
        const heightMap = {
          &quot;none&quot;: &quot;1&quot;,
          &quot;tight&quot;: &quot;1.25&quot;,
          &quot;snug&quot;: &quot;1.375&quot;,
          &quot;normal&quot;: &quot;1.5&quot;,
          &quot;relaxed&quot;: &quot;1.625&quot;,
          &quot;loose&quot;: &quot;2&quot;
        };
        const lineHeight = heightMap[value] || parseArbitraryValue(value);
        if (!lineHeight) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { line-height: ${lineHeight}; }`;
      }
      const flexMatch = base.match(/^flex-(.+)$/);
      if (flexMatch) {
        const [, value] = flexMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const flexValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { flex: ${flexValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { flex: var(${customProp}); }`;
        }
        const fractionMatch = value.match(/^(\d+)\/(\d+)$/);
        if (fractionMatch) {
          const [, numerator, denominator] = fractionMatch;
          return `.${escapedClass} { flex: calc(${numerator} / ${denominator} * 100%); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { flex: ${number}; }`;
        }
      }
      const gridColsMatch = base.match(/^grid-cols-(.+)$/);
      if (gridColsMatch) {
        const [, value] = gridColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-columns: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-columns: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const colsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-columns: ${colsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-columns: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-columns: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const gridRowsMatch = base.match(/^grid-rows-(.+)$/);
      if (gridRowsMatch) {
        const [, value] = gridRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-rows: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-rows: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const rowsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-rows: ${rowsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-rows: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-rows: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const colStartMatch = base.match(/^col-start-(.+)$/);
      if (colStartMatch) {
        const [, value] = colStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-start: ${number}; }`;
        }
      }
      const colEndMatch = base.match(/^col-end-(.+)$/);
      if (colEndMatch) {
        const [, value] = colEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-end: ${number}; }`;
        }
      }
      const colSpanMatch = base.match(/^col-span-(.+)$/);
      if (colSpanMatch) {
        const [, value] = colSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-column: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column: span ${number} / span ${number}; }`;
        }
      }
      const colMatch = base.match(/^col-(.+)$/);
      if (colMatch) {
        const [, value] = colMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-column: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-column: var(${customProp}); }`;
          }
        }
      }
      const rowStartMatch = base.match(/^row-start-(.+)$/);
      if (rowStartMatch) {
        const [, value] = rowStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-start: ${number}; }`;
        }
      }
      const rowEndMatch = base.match(/^row-end-(.+)$/);
      if (rowEndMatch) {
        const [, value] = rowEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-end: ${number}; }`;
        }
      }
      const rowSpanMatch = base.match(/^row-span-(.+)$/);
      if (rowSpanMatch) {
        const [, value] = rowSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-row: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row: span ${number} / span ${number}; }`;
        }
      }
      const rowMatch = base.match(/^row-(.+)$/);
      if (rowMatch) {
        const [, value] = rowMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-row: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-row: var(${customProp}); }`;
          }
        }
      }
      const autoColsMatch = base.match(/^auto-cols-(.+)$/);
      if (autoColsMatch) {
        const [, value] = autoColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-columns: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-columns: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-columns: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-columns: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-columns: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-columns: var(${customProp}); }`;
        }
      }
      const autoRowsMatch = base.match(/^auto-rows-(.+)$/);
      if (autoRowsMatch) {
        const [, value] = autoRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-rows: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-rows: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-rows: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-rows: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-rows: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-rows: var(${customProp}); }`;
        }
      }
      const gridFlowMatch = base.match(/^grid-flow-(.+)$/);
      if (gridFlowMatch) {
        const [, value] = gridFlowMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        if (value === &quot;row&quot;) {
          return `.${escapedClass} { grid-auto-flow: row; }`;
        }
        if (value === &quot;col&quot;) {
          return `.${escapedClass} { grid-auto-flow: column; }`;
        }
        if (value === &quot;dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: dense; }`;
        }
        if (value === &quot;row-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: row dense; }`;
        }
        if (value === &quot;col-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: column dense; }`;
        }
      }
      const layoutUtilities = {
        // Display
        &quot;flex&quot;: &quot;display: flex&quot;,
        &quot;inline-flex&quot;: &quot;display: inline-flex&quot;,
        &quot;grid&quot;: &quot;display: grid&quot;,
        &quot;inline-grid&quot;: &quot;display: inline-grid&quot;,
        &quot;block&quot;: &quot;display: block&quot;,
        &quot;inline-block&quot;: &quot;display: inline-block&quot;,
        &quot;inline&quot;: &quot;display: inline&quot;,
        &quot;hidden&quot;: &quot;display: none&quot;,
        // Flex direction
        &quot;flex-row&quot;: &quot;flex-direction: row&quot;,
        &quot;flex-row-reverse&quot;: &quot;flex-direction: row-reverse&quot;,
        &quot;flex-col&quot;: &quot;flex-direction: column&quot;,
        &quot;flex-col-reverse&quot;: &quot;flex-direction: column-reverse&quot;,
        // Flex wrap
        &quot;flex-wrap&quot;: &quot;flex-wrap: wrap&quot;,
        &quot;flex-wrap-reverse&quot;: &quot;flex-wrap: wrap-reverse&quot;,
        &quot;flex-nowrap&quot;: &quot;flex-wrap: nowrap&quot;,
        // Flex shrink/grow
        &quot;shrink-0&quot;: &quot;flex-shrink: 0&quot;,
        &quot;shrink&quot;: &quot;flex-shrink: 1&quot;,
        &quot;grow-0&quot;: &quot;flex-grow: 0&quot;,
        &quot;grow&quot;: &quot;flex-grow: 1&quot;,
        // Flex sizing (common static values)
        &quot;flex-1&quot;: &quot;flex: 1 1 0%&quot;,
        &quot;flex-auto&quot;: &quot;flex: 1 1 auto&quot;,
        &quot;flex-initial&quot;: &quot;flex: 0 1 auto&quot;,
        &quot;flex-none&quot;: &quot;flex: none&quot;,
        // Flex/Grid alignment
        &quot;items-start&quot;: &quot;align-items: flex-start&quot;,
        &quot;items-end&quot;: &quot;align-items: flex-end&quot;,
        &quot;items-center&quot;: &quot;align-items: center&quot;,
        &quot;items-baseline&quot;: &quot;align-items: baseline&quot;,
        &quot;items-stretch&quot;: &quot;align-items: stretch&quot;,
        &quot;justify-start&quot;: &quot;justify-content: flex-start&quot;,
        &quot;justify-end&quot;: &quot;justify-content: flex-end&quot;,
        &quot;justify-center&quot;: &quot;justify-content: center&quot;,
        &quot;justify-between&quot;: &quot;justify-content: space-between&quot;,
        &quot;justify-around&quot;: &quot;justify-content: space-around&quot;,
        &quot;justify-evenly&quot;: &quot;justify-content: space-evenly&quot;,
        &quot;place-content-center&quot;: &quot;place-content: center&quot;,
        &quot;place-content-start&quot;: &quot;place-content: start&quot;,
        &quot;place-content-end&quot;: &quot;place-content: end&quot;,
        // Position
        &quot;relative&quot;: &quot;position: relative&quot;,
        &quot;absolute&quot;: &quot;position: absolute&quot;,
        &quot;fixed&quot;: &quot;position: fixed&quot;,
        &quot;sticky&quot;: &quot;position: sticky&quot;,
        // Overflow
        &quot;overflow-hidden&quot;: &quot;overflow: hidden&quot;,
        &quot;overflow-auto&quot;: &quot;overflow: auto&quot;,
        &quot;overflow-scroll&quot;: &quot;overflow: scroll&quot;,
        &quot;overflow-x-hidden&quot;: &quot;overflow-x: hidden&quot;,
        &quot;overflow-y-hidden&quot;: &quot;overflow-y: hidden&quot;,
        &quot;overflow-x-auto&quot;: &quot;overflow-x: auto&quot;,
        &quot;overflow-y-auto&quot;: &quot;overflow-y: auto&quot;,
        // Cursor
        &quot;cursor-pointer&quot;: &quot;cursor: pointer&quot;,
        &quot;cursor-default&quot;: &quot;cursor: default&quot;,
        &quot;cursor-not-allowed&quot;: &quot;cursor: not-allowed&quot;,
        // Text align
        &quot;text-left&quot;: &quot;text-align: left&quot;,
        &quot;text-center&quot;: &quot;text-align: center&quot;,
        &quot;text-right&quot;: &quot;text-align: right&quot;,
        // Text decoration
        &quot;underline&quot;: &quot;text-decoration: underline&quot;,
        &quot;overline&quot;: &quot;text-decoration: overline&quot;,
        &quot;line-through&quot;: &quot;text-decoration: line-through&quot;,
        &quot;no-underline&quot;: &quot;text-decoration: none&quot;,
        // Pointer events
        &quot;pointer-events-none&quot;: &quot;pointer-events: none&quot;,
        &quot;pointer-events-auto&quot;: &quot;pointer-events: auto&quot;,
        // Aspect ratio
        &quot;aspect-square&quot;: &quot;aspect-ratio: 1 / 1&quot;,
        &quot;aspect-video&quot;: &quot;aspect-ratio: 16 / 9&quot;,
        // Shadow
        &quot;shadow&quot;: &quot;box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-sm&quot;: &quot;box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05)&quot;,
        &quot;shadow-md&quot;: &quot;box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-lg&quot;: &quot;box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-none&quot;: &quot;box-shadow: none&quot;,
        // Outline
        &quot;outline-none&quot;: &quot;outline: 2px solid transparent; outline-offset: 2px&quot;,
        // Opacity (common values)
        &quot;opacity-0&quot;: &quot;opacity: 0&quot;,
        &quot;opacity-50&quot;: &quot;opacity: 0.5&quot;,
        &quot;opacity-100&quot;: &quot;opacity: 1&quot;,
        // Appearance
        &quot;appearance-none&quot;: &quot;appearance: none; -webkit-appearance: none; -moz-appearance: none&quot;,
        // Border
        &quot;border&quot;: &quot;border-width: 1px; border-style: solid&quot;,
        // Peer
        &quot;peer&quot;: &quot;&quot;
      };
      if (layoutUtilities[className]) {
        return `.${className} { ${layoutUtilities[className]}; }`;
      }
      const opacityMatch = base.match(/^opacity-(\d+)$/);
      if (opacityMatch) {
        const [, value] = opacityMatch;
        const opacityValue = parseInt(value) / 100;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { opacity: ${opacityValue}; }`;
      }
      const colorMatch = base.match(/^(bg|text|border|ring|outline|fill)-(.+)$/);
      if (colorMatch) {
        const [, property, colorName] = colorMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const propertyMap = {
          &quot;bg&quot;: &quot;background-color&quot;,
          &quot;text&quot;: &quot;color&quot;,
          &quot;border&quot;: &quot;border-color&quot;,
          &quot;ring&quot;: &quot;--tw-ring-color&quot;,
          &quot;outline&quot;: &quot;outline-color&quot;,
          &quot;fill&quot;: &quot;fill&quot;
        };
        const cssProp = propertyMap[property];
        if (!cssProp) return null;
        if (opacity) {
          return `.${escapedClass} { ${cssProp}: oklch(from var(--color-${colorName}) l c h / ${opacity}); }`;
        } else {
          return `.${escapedClass} { ${cssProp}: var(--color-${colorName}); }`;
        }
      }
      if (className === &quot;transition-colors&quot;) {
        return `.transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition&quot;) {
        return `.transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition-opacity&quot;) {
        return `.transition-opacity { transition-property: opacity; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      const borderWidthMatch = base.match(/^border(-[trbl])?-(\d+)$/);
      if (borderWidthMatch) {
        const [, side, width] = borderWidthMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (side) {
          const sideMap = {
            &quot;-t&quot;: &quot;border-top-width&quot;,
            &quot;-r&quot;: &quot;border-right-width&quot;,
            &quot;-b&quot;: &quot;border-bottom-width&quot;,
            &quot;-l&quot;: &quot;border-left-width&quot;
          };
          return `.${escapedClass} { ${sideMap[side]}: ${width}px; }`;
        } else {
          return `.${escapedClass} { border-width: ${width}px; }`;
        }
      }
      const roundedMatch = base.match(/^rounded(-[trblxy])?(-(.+))?$/);
      if (roundedMatch) {
        const [, corner, , value] = roundedMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const roundedValues = {
          &quot;none&quot;: &quot;0&quot;,
          &quot;sm&quot;: &quot;calc(var(--radius) - 4px)&quot;,
          &quot;md&quot;: &quot;calc(var(--radius) - 2px)&quot;,
          &quot;lg&quot;: &quot;var(--radius)&quot;,
          &quot;xl&quot;: &quot;0.75rem&quot;,
          &quot;2xl&quot;: &quot;1rem&quot;,
          &quot;3xl&quot;: &quot;1.5rem&quot;,
          &quot;full&quot;: &quot;9999px&quot;
        };
        const radiusValue = value ? roundedValues[value] || spacingScale[value] || parseArbitraryValue(value) : &quot;0.25rem&quot;;
        if (!radiusValue) return null;
        const cornerMap = {
          &quot;-t&quot;: [&quot;border-top-left-radius&quot;, &quot;border-top-right-radius&quot;],
          &quot;-r&quot;: [&quot;border-top-right-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-b&quot;: [&quot;border-bottom-left-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-l&quot;: [&quot;border-top-left-radius&quot;, &quot;border-bottom-left-radius&quot;],
          &quot;-tl&quot;: [&quot;border-top-left-radius&quot;],
          &quot;-tr&quot;: [&quot;border-top-right-radius&quot;],
          &quot;-bl&quot;: [&quot;border-bottom-left-radius&quot;],
          &quot;-br&quot;: [&quot;border-bottom-right-radius&quot;]
        };
        if (corner &amp;&amp; cornerMap[corner]) {
          const declarations = cornerMap[corner].map((prop) =&gt; `${prop}: ${radiusValue}`).join(&quot;; &quot;);
          return `.${escapedClass} { ${declarations}; }`;
        } else {
          return `.${escapedClass} { border-radius: ${radiusValue}; }`;
        }
      }
      const ringMatch = className.match(/^ring(-offset)?(-(\d+))?$/);
      if (ringMatch) {
        const [, offset, , width] = ringMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (offset) {
          const ringWidth = width || &quot;2&quot;;
          return `.${escapedClass} { --tw-ring-offset-width: ${ringWidth}px; }`;
        } else {
          const ringWidth = width || &quot;3&quot;;
          return `.${escapedClass} { --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(${ringWidth}px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); }`;
        }
      }
      if (className === &quot;ring-offset-background&quot;) {
        return `.ring-offset-background { --tw-ring-offset-color: var(--color-background); }`;
      }
      const focusVisibleMatch = className.match(/^focus-visible:(.+)$/);
      if (focusVisibleMatch) {
        const [, baseClass] = focusVisibleMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}:focus-visible ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      const dataMatch = className.match(/^data-\[(.+?)\]:(.+)$/);
      if (dataMatch) {
        const [, dataAttr, baseClass] = dataMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}[data-${dataAttr}] ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      return null;
    };
    const css = (classNames) =&gt; {
      const classes = classNames.trim().split(/\s+/).filter(Boolean);
      for (const className of classes) {
        if (generatedClasses.has(className)) continue;
        const rule = generateRule(className);
        if (rule) {
          try {
            styleSheet.insertRule(rule, styleSheet.cssRules.length);
            generatedClasses.add(className);
          } catch (error) {
            console.error(`[DynamicBlock Error] Failed to generate CSS for class: ${className}`, error);
          }
        }
      }
      return classNames;
    };
    return css;
  }
  function createUIHelpers(cssGenerator) {
    const isSelector = (arg) =&gt; typeof arg === &quot;string&quot;;
    const applyClasses = (element, baseClasses, customClassName) =&gt; {
      const allClasses = customClassName ? `${baseClasses} ${customClassName}`.replace(/\s+/g, &quot; &quot;).trim() : baseClasses;
      cssGenerator(allClasses);
      if (element instanceof SVGElement) {
        element.setAttribute(&quot;class&quot;, allClasses);
      } else {
        element.className = allClasses;
      }
    };
    const applyStyles = (element, styles) =&gt; {
      if (!styles) return;
      Object.entries(styles).forEach(([property, value]) =&gt; {
        if (element instanceof HTMLElement) {
          element.style.setProperty(property, value);
        } else {
          const currentStyle = element.getAttribute(&quot;style&quot;) || &quot;&quot;;
          const newStyle = `${currentStyle}${currentStyle ? &quot;; &quot; : &quot;&quot;}${property}: ${value}`;
          element.setAttribute(&quot;style&quot;, newStyle);
        }
      });
    };
    return {
      /**
       * Button helper - creates or enhances button elements
       */
      button(selectorOrOptions, options) {
        const baseClasses = &quot;inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50&quot;;
        const getVariantClasses = (variant2 = &quot;contained&quot;, color2 = &quot;primary&quot;, size2 = &quot;md&quot;) =&gt; {
          const variantBaseMap = {
            contained: &quot;&quot;,
            outlined: &quot;border bg-background&quot;,
            text: &quot;&quot;,
            ghost: &quot;&quot;
          };
          const variantColorMap = {
            contained: `bg-${color2} text-${color2}-foreground hover:bg-${color2}/80`,
            outlined: `border-${color2} text-${color2} hover:bg-${color2}/20`,
            text: `text-${color2} hover:bg-${color2}/20`,
            ghost: `text-${color2} hover:bg-${color2} hover:text-background`
          };
          const sizeMap = {
            sm: &quot;h-9 rounded-md px-3 text-sm&quot;,
            md: &quot;h-10 px-4 py-2&quot;,
            lg: &quot;h-12 rounded-md px-6 text-base&quot;,
            xl: &quot;h-14 rounded-md px-8 text-lg&quot;,
            icon: &quot;h-10 w-10&quot;
          };
          const variantBase = variantBaseMap[variant2] || variantBaseMap.contained;
          const variantColor = variantColorMap[variant2] || variantColorMap.contained;
          const sizeClasses = sizeMap[size2] || sizeMap.md;
          return `${baseClasses} ${variantBase} ${variantColor} ${sizeClasses}`.replace(/\s+/g, &quot; &quot;).trim();
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((btn2) =&gt; {
            const { variant: variant2, color: color2, size: size2, disabled: disabled2, onClick: onClick2, className: className2, style: style2 } = options || {};
            applyClasses(btn2, getVariantClasses(variant2, color2, size2), className2);
            applyStyles(btn2, style2);
            if (disabled2 !== void 0) btn2.disabled = disabled2;
            if (onClick2) btn2.addEventListener(&quot;click&quot;, onClick2);
          });
          return elements;
        }
        const { label, variant, color, size, disabled, onClick, className, style } = selectorOrOptions;
        const btn = document.createElement(&quot;button&quot;);
        btn.type = &quot;button&quot;;
        if (label) btn.textContent = label;
        applyClasses(btn, getVariantClasses(variant, color, size), className);
        applyStyles(btn, style);
        if (disabled) btn.disabled = disabled;
        if (onClick) btn.addEventListener(&quot;click&quot;, onClick);
        return btn;
      },
      /**
       * Input helper - creates or enhances input elements
       */
      input(selectorOrOptions, options) {
        const baseClasses = &quot;flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((input2) =&gt; {
            const { type: type2, placeholder: placeholder2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(input2, baseClasses, className2);
            applyStyles(input2, style2);
            if (type2) input2.type = type2;
            if (placeholder2) input2.placeholder = placeholder2;
            if (disabled2 !== void 0) input2.disabled = disabled2;
            if (value2 !== void 0) input2.value = value2;
            if (onInput2) input2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) input2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { type, placeholder, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const input = document.createElement(&quot;input&quot;);
        input.type = type || &quot;text&quot;;
        applyClasses(input, baseClasses, className);
        applyStyles(input, style);
        if (placeholder) input.placeholder = placeholder;
        if (disabled) input.disabled = disabled;
        if (value !== void 0) input.value = value;
        if (onInput) input.addEventListener(&quot;input&quot;, onInput);
        if (onChange) input.addEventListener(&quot;change&quot;, onChange);
        return input;
      },
      /**
       * Textarea helper - creates or enhances textarea elements
       */
      textarea(selectorOrOptions, options) {
        const baseClasses = &quot;flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((textarea2) =&gt; {
            const { placeholder: placeholder2, rows: rows2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(textarea2, baseClasses, className2);
            applyStyles(textarea2, style2);
            if (placeholder2) textarea2.placeholder = placeholder2;
            if (rows2) textarea2.rows = rows2;
            if (disabled2 !== void 0) textarea2.disabled = disabled2;
            if (value2 !== void 0) textarea2.value = value2;
            if (onInput2) textarea2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) textarea2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { placeholder, rows, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const textarea = document.createElement(&quot;textarea&quot;);
        applyClasses(textarea, baseClasses, className);
        applyStyles(textarea, style);
        if (placeholder) textarea.placeholder = placeholder;
        if (rows) textarea.rows = rows;
        if (disabled) textarea.disabled = disabled;
        if (value !== void 0) textarea.value = value;
        if (onInput) textarea.addEventListener(&quot;input&quot;, onInput);
        if (onChange) textarea.addEventListener(&quot;change&quot;, onChange);
        return textarea;
      },
      /**
       * Select helper - creates or enhances select elements
       * Uses native HTML select with chevron icon styling to match shadcn
       */
      select(selectorOrOptions, options) {
        const createSelectWrapper = (items2, value2, placeholder2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;relative w-full&quot;, className2);
          applyStyles(wrapper, style2);
          const select = document.createElement(&quot;select&quot;);
          const selectClasses = &quot;sandbox-select flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer&quot;;
          applyClasses(select, selectClasses);
          if (placeholder2) {
            const placeholderOption = document.createElement(&quot;option&quot;);
            placeholderOption.value = &quot;&quot;;
            placeholderOption.textContent = placeholder2;
            placeholderOption.disabled = true;
            placeholderOption.selected = true;
            select.appendChild(placeholderOption);
            select.required = true;
          }
          if (items2) {
            items2.forEach((item) =&gt; {
              const option = document.createElement(&quot;option&quot;);
              option.value = item.value;
              option.textContent = item.label;
              select.appendChild(option);
            });
          }
          if (value2) {
            select.value = value2;
            if (placeholder2) select.required = false;
          }
          if (disabled2) select.disabled = disabled2;
          if (onChange2) {
            select.addEventListener(&quot;change&quot;, (e) =&gt; {
              const newValue = e.target.value;
              if (placeholder2) {
                select.required = newValue === &quot;&quot;;
              }
              onChange2(newValue);
            });
          }
          const chevron = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(chevron, &quot;h-4 w-4 opacity-50 pointer-events-none&quot;);
          chevron.style.position = &quot;absolute&quot;;
          chevron.style.right = &quot;0.75rem&quot;;
          chevron.style.top = &quot;50%&quot;;
          chevron.style.transform = &quot;translateY(-50%)&quot;;
          chevron.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          chevron.setAttribute(&quot;width&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;height&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          chevron.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          chevron.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          chevron.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          chevron.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          chevron.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;6 9 12 15 18 9&quot;);
          chevron.appendChild(polyline);
          select.style.paddingRight = &quot;2.5rem&quot;;
          wrapper.appendChild(select);
          wrapper.appendChild(chevron);
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          const wrappers = [];
          elements.forEach((select) =&gt; {
            const { items: items2, value: value2, placeholder: placeholder2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const wrapper = createSelectWrapper(items2, value2, placeholder2, disabled2, onChange2, className2, style2);
            select.replaceWith(wrapper);
            wrappers.push(wrapper);
          });
          return document.querySelectorAll(&quot;.relative:has(select)&quot;);
        }
        const { items, value, placeholder, disabled, onChange, className, style } = selectorOrOptions;
        return createSelectWrapper(items, value, placeholder, disabled, onChange, className, style);
      },
      /**
       * Checkbox helper - creates checkbox elements matching shadcn Radix UI styling
       * Uses custom div-based checkbox with check icon for visual parity
       */
      checkbox(selectorOrOptions, options) {
        const createCheckbox = (checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const checkboxContainer = document.createElement(&quot;button&quot;);
          checkboxContainer.type = &quot;button&quot;;
          checkboxContainer.role = &quot;checkbox&quot;;
          checkboxContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          const checkboxClasses = &quot;grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer&quot;;
          applyClasses(checkboxContainer, checkboxClasses);
          const updateCheckboxStyles = (isChecked2) =&gt; {
            if (isChecked2) {
              checkboxContainer.style.backgroundColor = &quot;var(--color-checkbox-checked)&quot;;
              checkboxContainer.style.color = &quot;var(--color-checkbox-checked-foreground)&quot;;
            } else {
              checkboxContainer.style.backgroundColor = &quot;&quot;;
              checkboxContainer.style.color = &quot;&quot;;
            }
          };
          updateCheckboxStyles(!!checked2);
          if (disabled2) {
            checkboxContainer.disabled = true;
          }
          const checkIcon = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(checkIcon, &quot;h-4 w-4&quot;);
          checkIcon.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          checkIcon.setAttribute(&quot;width&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;height&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          checkIcon.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          checkIcon.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          checkIcon.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          checkIcon.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          checkIcon.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;20 6 9 17 4 12&quot;);
          checkIcon.appendChild(polyline);
          if (checked2) {
            checkboxContainer.appendChild(checkIcon);
          }
          let isChecked = !!checked2;
          checkboxContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            isChecked = !isChecked;
            checkboxContainer.setAttribute(&quot;aria-checked&quot;, isChecked ? &quot;true&quot; : &quot;false&quot;);
            updateCheckboxStyles(isChecked);
            if (isChecked) {
              checkboxContainer.appendChild(checkIcon);
            } else {
              if (checkIcon.parentNode === checkboxContainer) {
                checkboxContainer.removeChild(checkIcon);
              }
            }
            if (onChange2) onChange2(isChecked);
          });
          wrapper.appendChild(checkboxContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) checkboxContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const checkboxWrapper = createCheckbox(checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(checkboxWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createCheckbox(checked, label, disabled, onChange, className, style);
      },
      /**
       * Radio helper - creates radio button elements matching shadcn Radix UI styling
       * Uses custom button-based radio with circle fill indicator for visual parity
       */
      radio(selectorOrOptions, options) {
        const createRadio = (name2, value2, checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const radioContainer = document.createElement(&quot;button&quot;);
          radioContainer.type = &quot;button&quot;;
          radioContainer.role = &quot;radio&quot;;
          radioContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          radioContainer.setAttribute(&quot;data-name&quot;, name2);
          radioContainer.setAttribute(&quot;data-value&quot;, value2);
          const radioClasses = &quot;aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer flex items-center justify-center&quot;;
          applyClasses(radioContainer, radioClasses);
          if (disabled2) {
            radioContainer.disabled = true;
          }
          const circleIndicator = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          circleIndicator.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          circleIndicator.setAttribute(&quot;width&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;height&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          circleIndicator.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          circleIndicator.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          circleIndicator.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          circleIndicator.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          circleIndicator.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          applyClasses(circleIndicator, &quot;h-3.5 w-3.5 fill-primary&quot;);
          const circle = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;circle&quot;);
          circle.setAttribute(&quot;cx&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;cy&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;r&quot;, &quot;10&quot;);
          circleIndicator.appendChild(circle);
          if (checked2) {
            radioContainer.appendChild(circleIndicator);
          }
          radioContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            const allRadiosInGroup = document.querySelectorAll(`[role=&quot;radio&quot;][data-name=&quot;${name2}&quot;]`);
            allRadiosInGroup.forEach((radio) =&gt; {
              radio.setAttribute(&quot;aria-checked&quot;, &quot;false&quot;);
              while (radio.firstChild) {
                radio.removeChild(radio.firstChild);
              }
            });
            radioContainer.setAttribute(&quot;aria-checked&quot;, &quot;true&quot;);
            radioContainer.appendChild(circleIndicator);
            if (onChange2) onChange2(value2);
          });
          wrapper.appendChild(radioContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) radioContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { name: name2, value: value2, checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const radioWrapper = createRadio(name2, value2, checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(radioWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { name, value, checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createRadio(name, value, checked, label, disabled, onChange, className, style);
      }
    };
  }
  function scanAndGenerateClasses(api) {
    const classNames = /* @__PURE__ */ new Set();
    const elements = document.querySelectorAll(&quot;[class]&quot;);
    elements.forEach((element) =&gt; {
      const classList = element.className;
      if (typeof classList === &quot;string&quot;) {
        classList.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
    });
    const scripts = document.querySelectorAll(&quot;script&quot;);
    scripts.forEach((script) =&gt; {
      const content = script.textContent || &quot;&quot;;
      const stringMatches = content.matchAll(/(?:className|class)\s*[=:]\s*[&quot;&#x27;`]([^&quot;&#x27;`]+)[&quot;&#x27;`]/g);
      for (const match of stringMatches) {
        const classes = match[1];
        classes.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
      const templateMatches = content.matchAll(/`([^`]*(?:p-|m-|bg-|text-|border-|rounded|flex|grid|grid-cols-|grid-rows-|grid-flow-|auto-cols-|auto-rows-|col-|row-|w-|h-|gap-)[^`]*)`/g);
      for (const match of templateMatches) {
        const classes = match[1];
        const tailwindMatches = classes.matchAll(/\b((?:p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|gap-x|gap-y|w|h|min-w|min-h|max-w|max-h|bg|text|border|rounded|flex|grid|grid-cols|grid-rows|grid-flow|auto-cols|auto-rows|col|row|inline|block|hidden|top|right|bottom|left|inset)(?:-[\w[\]/:.%-]+)?)\b/g);
        for (const tailwindMatch of tailwindMatches) {
          if (tailwindMatch[1]) classNames.add(tailwindMatch[1]);
        }
      }
    });
    if (classNames.size &gt; 0) {
      const allClasses = Array.from(classNames).join(&quot; &quot;);
      api.css(allClasses);
    }
  }
  function setupMutationObserver(api) {
    const sandboxWindow2 = window;
    const config = sandboxWindow2.$CONFIG || {};
    const autoDetectClasses = config.autoDetectClasses !== false;
    if (!autoDetectClasses) {
      return;
    }
    const observer = new MutationObserver((mutations) =&gt; {
      const classNames = /* @__PURE__ */ new Set();
      for (const mutation of mutations) {
        mutation.addedNodes.forEach((node) =&gt; {
          if (node.nodeType === Node.ELEMENT_NODE) {
            const element = node;
            if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
              element.className.split(/\s+/).forEach((cls) =&gt; {
                if (cls) classNames.add(cls);
              });
            }
            element.querySelectorAll(&quot;[class]&quot;).forEach((child) =&gt; {
              if (typeof child.className === &quot;string&quot;) {
                child.className.split(/\s+/).forEach((cls) =&gt; {
                  if (cls) classNames.add(cls);
                });
              }
            });
          }
        });
        if (mutation.type === &quot;attributes&quot; &amp;&amp; mutation.attributeName === &quot;class&quot;) {
          const element = mutation.target;
          if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
            element.className.split(/\s+/).forEach((cls) =&gt; {
              if (cls) classNames.add(cls);
            });
          }
        }
      }
      if (classNames.size &gt; 0) {
        const allClasses = Array.from(classNames).join(&quot; &quot;);
        api.css(allClasses);
      }
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: [&quot;class&quot;]
    });
  }
  const clamp = (v, min, max) =&gt; Math.min(Math.max(v, min), max);
  function parseColor(input) {
    const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${input}`).trim();
    const colorStr = cssVar || input;
    const oklchMatch = colorStr.match(/oklch\(([^)]+)\)/);
    if (oklchMatch) {
      const parts = oklchMatch[1].split(&quot;/&quot;);
      const channels = parts[0].trim().split(/\s+/);
      if (channels.length === 3) {
        const parseVal = (s, pctScale) =&gt; s.endsWith(&quot;%&quot;) ? parseFloat(s) / 100 * pctScale : parseFloat(s);
        const l = parseVal(channels[0], 1);
        const c = parseVal(channels[1], 1);
        const h = parseVal(channels[2], 360);
        let a2 = 1;
        if (parts[1] != null) {
          const alphaStr = parts[1].trim();
          a2 = alphaStr.endsWith(&quot;%&quot;) ? parseFloat(alphaStr) / 100 : parseFloat(alphaStr);
        }
        if (!isNaN(l) &amp;&amp; !isNaN(c) &amp;&amp; !isNaN(h) &amp;&amp; !isNaN(a2)) {
          return oklchToRgb({ l, c, h, a: a2 });
        }
      }
    }
    const canvas = document.createElement(&quot;canvas&quot;);
    canvas.width = 1;
    canvas.height = 1;
    const ctx = canvas.getContext(&quot;2d&quot;);
    ctx.fillStyle = colorStr;
    ctx.fillRect(0, 0, 1, 1);
    const [r, g, b, a] = ctx.getImageData(0, 0, 1, 1).data;
    return { r: r / 255, g: g / 255, b: b / 255, a: a / 255 };
  }
  function srgbToLinear(c) {
    return c &lt;= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  }
  function linearToSrgb(c) {
    return c &lt;= 31308e-7 ? c * 12.92 : 1.055 * Math.pow(c, 1 / 2.4) - 0.055;
  }
  function rgbToOklab(rgb) {
    const r = srgbToLinear(rgb.r);
    const g = srgbToLinear(rgb.g);
    const b = srgbToLinear(rgb.b);
    const l_ = 0.4122214708 * r + 0.5363325363 * g + 0.0514459929 * b;
    const m_ = 0.2119034982 * r + 0.6806995451 * g + 0.1073969566 * b;
    const s_ = 0.0883024619 * r + 0.2817188376 * g + 0.6299787005 * b;
    const l = Math.cbrt(l_);
    const m = Math.cbrt(m_);
    const s = Math.cbrt(s_);
    return {
      L: 0.2104542553 * l + 0.793617785 * m - 0.0040720468 * s,
      a: 1.9779984951 * l - 2.428592205 * m + 0.4505937099 * s,
      b: 0.0259040371 * l + 0.7827717662 * m - 0.808675766 * s,
      alpha: rgb.a
    };
  }
  function oklabToRgb(lab) {
    const l = lab.L + 0.3963377774 * lab.a + 0.2158037573 * lab.b;
    const m = lab.L - 0.1055613458 * lab.a - 0.0638541728 * lab.b;
    const s = lab.L - 0.0894841775 * lab.a - 1.291485548 * lab.b;
    const l3 = l * l * l;
    const m3 = m * m * m;
    const s3 = s * s * s;
    return {
      r: clamp(linearToSrgb(4.0767416621 * l3 - 3.3077115913 * m3 + 0.2309699292 * s3), 0, 1),
      g: clamp(linearToSrgb(-1.2684380046 * l3 + 2.6097574011 * m3 - 0.3413193965 * s3), 0, 1),
      b: clamp(linearToSrgb(-0.0041960863 * l3 - 0.7034186147 * m3 + 1.707614701 * s3), 0, 1),
      a: lab.alpha
    };
  }
  function oklabToOklch(lab) {
    const c = Math.sqrt(lab.a * lab.a + lab.b * lab.b);
    let h = Math.atan2(lab.b, lab.a) * 180 / Math.PI;
    if (h &lt; 0) h += 360;
    return { l: lab.L, c, h, a: lab.alpha };
  }
  function oklchToOklab(oklch) {
    const hRad = oklch.h * Math.PI / 180;
    return {
      L: oklch.l,
      a: oklch.c * Math.cos(hRad),
      b: oklch.c * Math.sin(hRad),
      alpha: oklch.a
    };
  }
  function rgbToOklch(rgb) {
    return oklabToOklch(rgbToOklab(rgb));
  }
  function oklchToRgb(oklch) {
    return oklabToRgb(oklchToOklab(oklch));
  }
  function rgbToHsl(rgb) {
    const { r, g, b } = rgb;
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    const d = max - min;
    const l = (max + min) / 2;
    if (d === 0) return { h: 0, s: 0, l: l * 100, a: rgb.a };
    const s = l &gt; 0.5 ? d / (2 - max - min) : d / (max + min);
    let h = 0;
    if (max === r) h = ((g - b) / d + (g &lt; b ? 6 : 0)) / 6;
    else if (max === g) h = ((b - r) / d + 2) / 6;
    else h = ((r - g) / d + 4) / 6;
    return { h: h * 360, s: s * 100, l: l * 100, a: rgb.a };
  }
  function hslToRgb(hsl) {
    const h = hsl.h / 360;
    const s = hsl.s / 100;
    const l = hsl.l / 100;
    if (s === 0) return { r: l, g: l, b: l, a: hsl.a };
    const hue2rgb = (p2, q2, t) =&gt; {
      if (t &lt; 0) t += 1;
      if (t &gt; 1) t -= 1;
      if (t &lt; 1 / 6) return p2 + (q2 - p2) * 6 * t;
      if (t &lt; 1 / 2) return q2;
      if (t &lt; 2 / 3) return p2 + (q2 - p2) * (2 / 3 - t) * 6;
      return p2;
    };
    const q = l &lt; 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    return {
      r: hue2rgb(p, q, h + 1 / 3),
      g: hue2rgb(p, q, h),
      b: hue2rgb(p, q, h - 1 / 3),
      a: hsl.a
    };
  }
  function formatOklch(oklch) {
    const l = Math.round(oklch.l * 1e3) / 1e3;
    const c = Math.round(oklch.c * 1e3) / 1e3;
    const h = Math.round(oklch.h * 100) / 100;
    if (oklch.a &lt; 1) {
      const a = Math.round(oklch.a * 1e3) / 1e3;
      return `oklch(${l} ${c} ${h} / ${a})`;
    }
    return `oklch(${l} ${c} ${h})`;
  }
  function determineAdjustSpace(opts) {
    if (opts.space) return opts.space;
    const hasOklch = opts.lightness != null || opts.chroma != null || opts.hue != null;
    const hasHsl = opts.saturation != null;
    const hasRgb = opts.red != null || opts.green != null || opts.blue != null;
    if (hasHsl &amp;&amp; !hasOklch &amp;&amp; !hasRgb) return &quot;hsl&quot;;
    if (hasRgb &amp;&amp; !hasOklch &amp;&amp; !hasHsl) return &quot;rgb&quot;;
    if (hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    if (!hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    throw new Error(
      &quot;[getColor] Cannot mix channels from different color spaces. Use the space parameter to disambiguate, or only use channels from one space.&quot;
    );
  }
  function adjustColor(input, opts) {
    const rgba = parseColor(input);
    const space = determineAdjustSpace(opts);
    const alphaAdj = opts.alpha ?? 0;
    if (space === &quot;oklch&quot;) {
      const oklch = rgbToOklch(rgba);
      oklch.l = clamp(oklch.l + (opts.lightness ?? 0), 0, 1);
      oklch.c = Math.max(0, oklch.c + (opts.chroma ?? 0));
      oklch.h = ((oklch.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      oklch.a = clamp(oklch.a + alphaAdj, 0, 1);
      return formatOklch(oklch);
    }
    if (space === &quot;hsl&quot;) {
      const hsl = rgbToHsl(rgba);
      hsl.h = ((hsl.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      hsl.s = clamp(hsl.s + (opts.saturation ?? 0), 0, 100);
      hsl.l = clamp(hsl.l + (opts.lightness ?? 0), 0, 100);
      hsl.a = clamp(hsl.a + alphaAdj, 0, 1);
      const rgb = hslToRgb(hsl);
      return formatOklch(rgbToOklch(rgb));
    }
    const r = clamp(rgba.r + (opts.red ?? 0) / 255, 0, 1);
    const g = clamp(rgba.g + (opts.green ?? 0) / 255, 0, 1);
    const b = clamp(rgba.b + (opts.blue ?? 0) / 255, 0, 1);
    const a = clamp(rgba.a + alphaAdj, 0, 1);
    return formatOklch(rgbToOklch({ r, g, b, a }));
  }
  function initializeSandbox() {
    const themeChangeCallbacks = [];
    const resizeCallbacks = [];
    let currentTheme = document.documentElement.classList.contains(&quot;dark&quot;) ? &quot;dark&quot; : &quot;light&quot;;
    const cssGenerator = createCSSGenerator();
    const api = {
      get theme() {
        return currentTheme;
      },
      size: {
        get width() {
          return window.innerWidth;
        }
      },
      onResize: (callback) =&gt; {
        resizeCallbacks.push(callback);
        callback(window.innerWidth);
      },
      onThemeChange: (callback) =&gt; {
        themeChangeCallbacks.push(callback);
        callback(currentTheme);
      },
      requestResize: (height) =&gt; {
        window.parent.postMessage(
          {
            event: &quot;resize-request&quot;,
            data: { height }
          },
          &quot;*&quot;
        );
      },
      getColor: (color, adjust) =&gt; {
        if (adjust) {
          return adjustColor(color, adjust);
        }
        const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${color}`).trim();
        if (cssVar) return cssVar;
        return formatOklch(rgbToOklch(parseColor(color)));
      },
      getFont: (name) =&gt; {
        if (name === &quot;default&quot;) {
          const value = getComputedStyle(document.body).fontFamily;
          return value.trim();
        } else if (name === &quot;mono&quot;) {
          return &#x27;&quot;Space Mono&quot;, ui-monospace, &quot;Cascadia Code&quot;, monospace&#x27;;
        }
        return &quot;&quot;;
      },
      css: cssGenerator,
      ui: createUIHelpers(cssGenerator),
      emit: (event, data) =&gt; {
        void event;
        void data;
      }
    };
    window.addEventListener(&quot;message&quot;, (event) =&gt; {
      if (event.data?.event === &quot;theme-change&quot;) {
        const newTheme = event.data.data.theme;
        if (newTheme === &quot;dark&quot;) {
          document.documentElement.classList.add(&quot;dark&quot;);
        } else {
          document.documentElement.classList.remove(&quot;dark&quot;);
        }
        currentTheme = newTheme;
        themeChangeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newTheme);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onThemeChange callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }
    });
    let resizeTimeout;
    window.addEventListener(&quot;resize&quot;, () =&gt; {
      clearTimeout(resizeTimeout);
      resizeTimeout = window.setTimeout(() =&gt; {
        const newWidth = window.innerWidth;
        resizeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newWidth);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onResize callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }, 150);
    });
    const sandboxWindow2 = window;
    sandboxWindow2.sandboxContext = api;
    setupAutoResize(api);
    scanAndGenerateClasses(api);
    setupMutationObserver(api);
  }
  function setupAutoResize(api) {
    let lastHeight = 0;
    const updateHeight = () =&gt; {
      const root2 = document.getElementById(&quot;root&quot;);
      if (!root2) return;
      const currentHeight = root2.scrollHeight;
      if (currentHeight !== lastHeight) {
        lastHeight = currentHeight;
        api.requestResize(currentHeight);
      }
    };
    const resizeObserver = new ResizeObserver(() =&gt; {
      updateHeight();
    });
    const root = document.getElementById(&quot;root&quot;);
    if (root) {
      resizeObserver.observe(root);
    }
    setTimeout(updateHeight, 0);
  }
  initializeSandbox();
  function executeMountIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const root = document.getElementById(&quot;root&quot;);
      if (!root) {
        console.error(&quot;[DynamicBlock Error] Root element not found - cannot execute mount()&quot;);
        return;
      }
      if (typeof sandboxWindow2.mount === &quot;function&quot;) {
        try {
          sandboxWindow2.mount({ root, api, props });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in mount() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error in executeMountIfExists():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  function executeDrawIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const drawFn = sandboxWindow2.draw;
      if (!api) {
        console.error(&quot;[DynamicBlock Error] Sandbox context not initialized&quot;);
        return;
      }
      if (typeof drawFn !== &quot;function&quot;) {
        return;
      }
      let canvas = document.querySelector(&quot;canvas&quot;);
      if (!canvas) {
        const root = document.getElementById(&quot;root&quot;);
        if (!root) {
          console.error(&quot;[DynamicBlock Error] Root element not found - cannot create canvas&quot;);
          return;
        }
        root.innerHTML = &quot;&quot;;
        canvas = document.createElement(&quot;canvas&quot;);
        canvas.className = api.css(&quot;[&amp;:not([width])]:w-full [&amp;[width]]:mx-auto&quot;);
        root.appendChild(canvas);
      }
      const ariaLabel = sandboxWindow2.__CANVAS_ARIA_LABEL__;
      if (ariaLabel &amp;&amp; typeof ariaLabel === &quot;string&quot;) {
        canvas.setAttribute(&quot;aria-label&quot;, ariaLabel);
      }
      const autoRedrawConfig = sandboxWindow2.autoRedraw || {
        onThemeChange: true,
        onResize: true
      };
      const themeChangeConfig = autoRedrawConfig.onThemeChange === false ? false : autoRedrawConfig.onThemeChange || 0;
      const resizeConfig = autoRedrawConfig.onResize === false ? false : autoRedrawConfig.onResize === true ? 150 : autoRedrawConfig.onResize;
      let resizeTimeout;
      const executeDraw = () =&gt; {
        try {
          const theme = api.theme;
          const width = window.innerWidth;
          drawFn({ canvas, api, theme, width, props });
          requestAnimationFrame(() =&gt; {
            const root = document.getElementById(&quot;root&quot;);
            if (root) {
              const height = root.scrollHeight;
              if (height &gt; 0) {
                api.requestResize(height);
              }
            }
          });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in draw() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      };
      executeDraw();
      if (themeChangeConfig !== false) {
        api.onThemeChange(() =&gt; {
          const debounce = typeof themeChangeConfig === &quot;number&quot; ? themeChangeConfig : 0;
          if (debounce === 0) {
            executeDraw();
          } else {
            setTimeout(executeDraw, debounce);
          }
        });
      }
      if (resizeConfig !== false) {
        api.onResize(() =&gt; {
          clearTimeout(resizeTimeout);
          const debounce = typeof resizeConfig === &quot;number&quot; ? resizeConfig : 150;
          resizeTimeout = window.setTimeout(executeDraw, debounce);
        });
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error setting up draw():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  const sandboxWindow = window;
  sandboxWindow.executeMountIfExists = executeMountIfExists;
  sandboxWindow.executeDrawIfExists = executeDrawIfExists;
})();

  &lt;/script&gt;

  &lt;!-- User code script with source mapping --&gt;
  &lt;script&gt;//# sourceURL=content/puzzles/cryptography/average-salaries-2.md

































































































































































































function draw(options) {
  const { canvas, api, width: _width, props } = options;
  const { n, showExtraPaths = false, maxWidth = 600 } = props || {};

  const width = Math.min(_width, maxWidth);
  const lineThickness = 2;
  const fontSize = 16;
  const labelOffset = 20;
  const canvasSize = width + lineThickness * 2;
  canvas.width = canvasSize;
  canvas.height = canvasSize;

  const centerX = canvasSize / 2;
  const centerY = canvasSize / 2;
  const radius = Math.max(0, (width / 2) - labelOffset - fontSize / 2);

  const ctx = canvas.getContext(&#x27;2d&#x27;);
  const fgColor = api.getColor(&#x27;foreground&#x27;);
  const mutedColor = api.getColor(&#x27;blue-500&#x27;);
  const font = api.getFont(&#x27;default&#x27;);

  // Calculate point positions around the circle
  const points = [];
  for (let i = 0; i &lt; n; i++) {
    const angle = (i / n) * 2 * Math.PI - Math.PI / 2; // Start from top
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);
    points.push({ x, y, angle });
  }

  // Draw lines between all pairs of points
  ctx.strokeStyle = fgColor;
  ctx.lineWidth = lineThickness;
  for (let i = 0; i &lt; n; i++) {
    for (let j = i + 1; j &lt; n; j++) {
      ctx.beginPath();
      ctx.moveTo(points[i].x, points[i].y);
      ctx.lineTo(points[j].x, points[j].y);
      ctx.stroke();
    }
  }

  // Draw extra arc paths if requested
  if (showExtraPaths) {
    ctx.strokeStyle = mutedColor;
    ctx.lineWidth = lineThickness;
    for (let i = 1; i &lt; n - 1; i += 2) {
      const startAngle = points[i].angle;
      const endAngle = points[i + 1].angle;

      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, startAngle, endAngle);
      ctx.stroke();
    }
  }

  // Draw and label points
  ctx.fillStyle = fgColor;
  const pointRadius = 5;

  for (let i = 0; i &lt; n; i++) {
    // Draw point
    ctx.beginPath();
    ctx.arc(points[i].x, points[i].y, pointRadius, 0, 2 * Math.PI);
    ctx.fill();

    // Draw label
    const labelAngle = points[i].angle;
    const labelX = centerX + (radius + labelOffset) * Math.cos(labelAngle);
    const labelY = centerY + (radius + labelOffset) * Math.sin(labelAngle);

    ctx.font = `${fontSize}px ${font}`;
    ctx.textAlign = &#x27;center&#x27;;
    ctx.textBaseline = &#x27;middle&#x27;;
    ctx.fillText((i + 1).toString(), labelX, labelY);
  }
}&lt;/script&gt;

  &lt;!-- Execution script --&gt;
  &lt;script&gt;
    // Execute mount() if defined, passing props
    if (typeof executeMountIfExists === &#x27;function&#x27;) {
      executeMountIfExists(window.__COMPONENT_PROPS__);
    }

    // Execute draw() if defined, passing props
    if (typeof executeDrawIfExists === &#x27;function&#x27;) {
      executeDrawIfExists(window.__COMPONENT_PROPS__);
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" style="width:100%;height:300px" title="Interactive content 1"></iframe></div><p>Here, we have 6 vertices of degree 5, which means there isn’t an Eulerian path. However, if we allow some pairs of employees to email each other more than once, we can add some repeated edges, marked in blue.</p><div class="dynamic-block-container flex justify-center"><iframe class="border-0 block" sandbox="allow-scripts" srcDoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#x27;none&#x27;; script-src &#x27;unsafe-inline&#x27;; style-src &#x27;unsafe-inline&#x27;; img-src data:;&quot;&gt;
  &lt;style&gt;
    /* Prevent scrollbars in iframe while allowing content to expand */
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: auto;
      min-height: 0;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    #root {
      /* flex: 1; */
      /* min-height: 0; */
    }

    /* Theme CSS variables (light/dark mode) */
    /* Theme overrides and customizations */

:root {
  --width-container: 1000px;
}

/* Text selection styling (applied to both main app and iframes) */
::selection {
  background-color: var(--color-selection);
  color: var(--color-selection-foreground);
}


:root {
  --radius: 0.5rem;

  /* Navy */
  --color-navy-50: oklch(0.97 0.015 220);
  --color-navy-100: oklch(0.94 0.020 220);
  --color-navy-200: oklch(0.88 0.030 220);
  --color-navy-300: oklch(0.80 0.045 220);
  --color-navy-400: oklch(0.68 0.060 220);
  --color-navy-500: oklch(0.55 0.075 220);
  --color-navy-600: oklch(0.45 0.080 220);
  --color-navy-700: oklch(0.35 0.075 220);
  --color-navy-800: oklch(0.27 0.065 220);
  --color-navy-900: oklch(0.20 0.050 220);
  --color-navy-950: oklch(0.15 0.040 220);

  /* Frost */
  --color-frost-50: oklch(0.98 0.010 250);
  --color-frost-100: oklch(0.95 0.015 250);
  --color-frost-200: oklch(0.90 0.025 250);
  --color-frost-300: oklch(0.83 0.035 250);
  --color-frost-400: oklch(0.74 0.045 250);
  --color-frost-500: oklch(0.65 0.055 250);
  --color-frost-600: oklch(0.55 0.060 250);
  --color-frost-700: oklch(0.45 0.055 250);
  --color-frost-800: oklch(0.35 0.045 250);
  --color-frost-900: oklch(0.27 0.035 250);
  --color-frost-950: oklch(0.20 0.025 250);

  /* Lagoon */
  --color-lagoon-50: oklch(0.97 0.015 185);
  --color-lagoon-100: oklch(0.94 0.025 185);
  --color-lagoon-200: oklch(0.88 0.040 185);
  --color-lagoon-300: oklch(0.80 0.055 185);
  --color-lagoon-400: oklch(0.70 0.070 185);
  --color-lagoon-500: oklch(0.60 0.080 185);
  --color-lagoon-600: oklch(0.50 0.085 185);
  --color-lagoon-700: oklch(0.40 0.080 185);
  --color-lagoon-800: oklch(0.32 0.070 185);
  --color-lagoon-900: oklch(0.25 0.055 185);
  --color-lagoon-950: oklch(0.18 0.040 185);

  /* Evergreen */
  --color-evergreen-50: oklch(0.97 0.020 155);
  --color-evergreen-100: oklch(0.93 0.035 155);
  --color-evergreen-200: oklch(0.87 0.055 155);
  --color-evergreen-300: oklch(0.79 0.070 155);
  --color-evergreen-400: oklch(0.69 0.085 155);
  --color-evergreen-500: oklch(0.59 0.095 155);
  --color-evergreen-600: oklch(0.49 0.100 155);
  --color-evergreen-700: oklch(0.41 0.095 155);
  --color-evergreen-800: oklch(0.33 0.080 155);
  --color-evergreen-900: oklch(0.27 0.065 155);
  --color-evergreen-950: oklch(0.21 0.050 155);

  /* Sand */
  --color-sand-50: oklch(0.98 0.012 95);
  --color-sand-100: oklch(0.95 0.020 95);
  --color-sand-200: oklch(0.90 0.035 95);
  --color-sand-300: oklch(0.84 0.050 95);
  --color-sand-400: oklch(0.76 0.065 95);
  --color-sand-500: oklch(0.68 0.080 95);
  --color-sand-600: oklch(0.60 0.090 95);
  --color-sand-700: oklch(0.50 0.085 95);
  --color-sand-800: oklch(0.40 0.070 95);
  --color-sand-900: oklch(0.32 0.055 95);
  --color-sand-950: oklch(0.26 0.040 95);

  /* Error */
  --color-error-50: oklch(0.97 0.020 25);
  --color-error-100: oklch(0.94 0.035 25);
  --color-error-200: oklch(0.88 0.055 25);
  --color-error-300: oklch(0.80 0.075 25);
  --color-error-400: oklch(0.70 0.095 25);
  --color-error-500: oklch(0.60 0.110 25);
  --color-error-600: oklch(0.50 0.115 25);
  --color-error-700: oklch(0.42 0.110 25);
  --color-error-800: oklch(0.34 0.095 25);
  --color-error-900: oklch(0.28 0.075 25);
  --color-error-950: oklch(0.22 0.055 25);

  /* Warning */
  --color-warning-50: oklch(0.97 0.020 75);
  --color-warning-100: oklch(0.94 0.035 75);
  --color-warning-200: oklch(0.89 0.060 75);
  --color-warning-300: oklch(0.82 0.085 75);
  --color-warning-400: oklch(0.73 0.105 75);
  --color-warning-500: oklch(0.65 0.120 75);
  --color-warning-600: oklch(0.56 0.125 75);
  --color-warning-700: oklch(0.47 0.115 75);
  --color-warning-800: oklch(0.38 0.095 75);
  --color-warning-900: oklch(0.30 0.070 75);
  --color-warning-950: oklch(0.24 0.050 75);

  /* Success */
  --color-success-50: oklch(0.97 0.020 165);
  --color-success-100: oklch(0.93 0.035 165);
  --color-success-200: oklch(0.87 0.055 165);
  --color-success-300: oklch(0.79 0.075 165);
  --color-success-400: oklch(0.69 0.095 165);
  --color-success-500: oklch(0.59 0.110 165);
  --color-success-600: oklch(0.49 0.115 165);
  --color-success-700: oklch(0.41 0.105 165);
  --color-success-800: oklch(0.33 0.090 165);
  --color-success-900: oklch(0.27 0.070 165);
  --color-success-950: oklch(0.21 0.050 165);

  /* ======================================================
     Tailwind-like Colour Palette
     Inspired by standard Tailwind CSS v4 colours for
     diagrams and illustrations. For website UI, use the
     mountain theme palette above or semantic colours
     instead.
     ====================================================== */

  /* Red */
  --color-red-50: oklch(0.971 0.008 17.38);
  --color-red-100: oklch(0.936 0.019 17.717);
  --color-red-200: oklch(0.885 0.037 18.334);
  --color-red-300: oklch(0.808 0.068 19.571);
  --color-red-400: oklch(0.704 0.115 22.216);
  --color-red-500: oklch(0.637 0.142 25.331);
  --color-red-600: oklch(0.577 0.147 27.325);
  --color-red-700: oklch(0.505 0.128 27.518);
  --color-red-800: oklch(0.444 0.106 26.899);
  --color-red-900: oklch(0.396 0.085 25.723);
  --color-red-950: oklch(0.258 0.055 26.042);
  --color-red: var(--color-red-400);

  /* Orange */
  --color-orange-50: oklch(0.980 0.010 73.684);
  --color-orange-100: oklch(0.954 0.023 75.164);
  --color-orange-200: oklch(0.901 0.046 70.697);
  --color-orange-300: oklch(0.837 0.077 66.29);
  --color-orange-400: oklch(0.750 0.110 55.934);
  --color-orange-500: oklch(0.705 0.128 47.604);
  --color-orange-600: oklch(0.646 0.133 41.116);
  --color-orange-700: oklch(0.553 0.117 38.402);
  --color-orange-800: oklch(0.470 0.094 37.304);
  --color-orange-900: oklch(0.408 0.074 38.172);
  --color-orange-950: oklch(0.266 0.047 36.259);
  --color-orange: var(--color-orange-400);

  /* Amber */
  --color-amber-50: oklch(0.987 0.013 95.277);
  --color-amber-100: oklch(0.962 0.035 95.617);
  --color-amber-200: oklch(0.924 0.072 95.746);
  --color-amber-300: oklch(0.879 0.101 91.605);
  --color-amber-400: oklch(0.828 0.113 84.429);
  --color-amber-500: oklch(0.769 0.113 70.08);
  --color-amber-600: oklch(0.666 0.107 58.318);
  --color-amber-700: oklch(0.555 0.098 48.998);
  --color-amber-800: oklch(0.473 0.082 46.201);
  --color-amber-900: oklch(0.414 0.067 45.904);
  --color-amber-950: oklch(0.279 0.046 45.635);
  --color-amber: var(--color-amber-400);

  /* Yellow */
  --color-yellow-50: oklch(0.987 0.016 102.212);
  --color-yellow-100: oklch(0.973 0.043 103.193);
  --color-yellow-200: oklch(0.945 0.077 101.54);
  --color-yellow-300: oklch(0.905 0.109 98.111);
  --color-yellow-400: oklch(0.852 0.119 91.936);
  --color-yellow-500: oklch(0.795 0.110 86.047);
  --color-yellow-600: oklch(0.681 0.097 75.834);
  --color-yellow-700: oklch(0.554 0.081 66.442);
  --color-yellow-800: oklch(0.476 0.068 61.907);
  --color-yellow-900: oklch(0.421 0.057 57.708);
  --color-yellow-950: oklch(0.286 0.040 53.813);
  --color-yellow: var(--color-yellow-400);

  /* Lime */
  --color-lime-50: oklch(0.986 0.019 120.757);
  --color-lime-100: oklch(0.967 0.040 122.328);
  --color-lime-200: oklch(0.938 0.076 124.321);
  --color-lime-300: oklch(0.897 0.118 126.665);
  --color-lime-400: oklch(0.841 0.143 128.85);
  --color-lime-500: oklch(0.768 0.140 130.85);
  --color-lime-600: oklch(0.648 0.120 131.684);
  --color-lime-700: oklch(0.532 0.094 131.589);
  --color-lime-800: oklch(0.453 0.074 130.933);
  --color-lime-900: oklch(0.405 0.061 131.063);
  --color-lime-950: oklch(0.274 0.043 132.109);
  --color-lime: var(--color-lime-400);

  /* Green */
  --color-green-50: oklch(0.982 0.011 155.826);
  --color-green-100: oklch(0.962 0.026 156.743);
  --color-green-200: oklch(0.925 0.050 155.995);
  --color-green-300: oklch(0.871 0.090 154.449);
  --color-green-400: oklch(0.792 0.125 151.711);
  --color-green-500: oklch(0.723 0.131 149.579);
  --color-green-600: oklch(0.627 0.116 149.214);
  --color-green-700: oklch(0.527 0.092 150.069);
  --color-green-800: oklch(0.448 0.071 151.328);
  --color-green-900: oklch(0.393 0.057 152.535);
  --color-green-950: oklch(0.266 0.039 152.934);
  --color-green: var(--color-green-400);

  /* Emerald */
  --color-emerald-50: oklch(0.979 0.013 166.113);
  --color-emerald-100: oklch(0.950 0.031 163.051);
  --color-emerald-200: oklch(0.905 0.056 164.15);
  --color-emerald-300: oklch(0.845 0.086 164.978);
  --color-emerald-400: oklch(0.765 0.106 163.223);
  --color-emerald-500: oklch(0.696 0.102 162.48);
  --color-emerald-600: oklch(0.596 0.087 163.225);
  --color-emerald-700: oklch(0.508 0.071 165.612);
  --color-emerald-800: oklch(0.432 0.057 166.913);
  --color-emerald-900: oklch(0.378 0.046 168.94);
  --color-emerald-950: oklch(0.262 0.031 172.552);
  --color-emerald: var(--color-emerald-400);

  /* Teal */
  --color-teal-50: oklch(0.984 0.008 180.72);
  --color-teal-100: oklch(0.953 0.031 180.801);
  --color-teal-200: oklch(0.910 0.058 180.426);
  --color-teal-300: oklch(0.855 0.083 181.071);
  --color-teal-400: oklch(0.777 0.091 181.912);
  --color-teal-500: oklch(0.704 0.084 182.503);
  --color-teal-600: oklch(0.600 0.071 184.704);
  --color-teal-700: oklch(0.511 0.058 186.391);
  --color-teal-800: oklch(0.437 0.047 188.216);
  --color-teal-900: oklch(0.386 0.038 188.416);
  --color-teal-950: oklch(0.277 0.028 192.524);
  --color-teal: var(--color-teal-400);

  /* Cyan */
  --color-cyan-50: oklch(0.984 0.011 200.873);
  --color-cyan-100: oklch(0.956 0.027 203.388);
  --color-cyan-200: oklch(0.917 0.048 205.041);
  --color-cyan-300: oklch(0.865 0.076 207.078);
  --color-cyan-400: oklch(0.789 0.092 211.53);
  --color-cyan-500: oklch(0.715 0.086 215.221);
  --color-cyan-600: oklch(0.609 0.076 221.723);
  --color-cyan-700: oklch(0.520 0.063 223.128);
  --color-cyan-800: oklch(0.450 0.051 224.283);
  --color-cyan-900: oklch(0.398 0.042 227.392);
  --color-cyan-950: oklch(0.302 0.034 229.695);
  --color-cyan: var(--color-cyan-400);

  /* Sky */
  --color-sky-50: oklch(0.977 0.008 236.62);
  --color-sky-100: oklch(0.951 0.016 236.824);
  --color-sky-200: oklch(0.901 0.035 230.902);
  --color-sky-300: oklch(0.828 0.067 230.318);
  --color-sky-400: oklch(0.746 0.096 232.661);
  --color-sky-500: oklch(0.685 0.101 237.323);
  --color-sky-600: oklch(0.588 0.095 241.966);
  --color-sky-700: oklch(0.500 0.080 242.749);
  --color-sky-800: oklch(0.443 0.066 240.79);
  --color-sky-900: oklch(0.391 0.054 240.876);
  --color-sky-950: oklch(0.293 0.040 243.157);
  --color-sky: var(--color-sky-400);

  /* Blue */
  --color-blue-50: oklch(0.970 0.008 254.604);
  --color-blue-100: oklch(0.932 0.019 255.585);
  --color-blue-200: oklch(0.882 0.035 254.128);
  --color-blue-300: oklch(0.809 0.063 251.813);
  --color-blue-400: oklch(0.707 0.099 254.624);
  --color-blue-500: oklch(0.623 0.128 259.815);
  --color-blue-600: oklch(0.546 0.147 262.881);
  --color-blue-700: oklch(0.488 0.146 264.376);
  --color-blue-800: oklch(0.424 0.119 265.638);
  --color-blue-900: oklch(0.379 0.088 265.522);
  --color-blue-950: oklch(0.282 0.055 267.935);
  --color-blue: var(--color-blue-400);

  /* Indigo */
  --color-indigo-50: oklch(0.962 0.011 272.314);
  --color-indigo-100: oklch(0.930 0.020 272.788);
  --color-indigo-200: oklch(0.870 0.039 274.039);
  --color-indigo-300: oklch(0.785 0.069 274.713);
  --color-indigo-400: oklch(0.673 0.109 276.935);
  --color-indigo-500: oklch(0.585 0.140 277.117);
  --color-indigo-600: oklch(0.511 0.157 276.966);
  --color-indigo-700: oklch(0.457 0.144 277.023);
  --color-indigo-800: oklch(0.398 0.117 277.366);
  --color-indigo-900: oklch(0.359 0.086 278.697);
  --color-indigo-950: oklch(0.257 0.054 281.288);
  --color-indigo: var(--color-indigo-400);

  /* Violet */
  --color-violet-50: oklch(0.969 0.010 293.756);
  --color-violet-100: oklch(0.943 0.017 294.588);
  --color-violet-200: oklch(0.894 0.034 293.283);
  --color-violet-300: oklch(0.811 0.067 293.571);
  --color-violet-400: oklch(0.702 0.110 293.541);
  --color-violet-500: oklch(0.606 0.150 292.717);
  --color-violet-600: oklch(0.541 0.169 293.009);
  --color-violet-700: oklch(0.491 0.162 292.581);
  --color-violet-800: oklch(0.432 0.139 292.759);
  --color-violet-900: oklch(0.380 0.113 293.745);
  --color-violet-950: oklch(0.283 0.085 291.089);
  --color-violet: var(--color-violet-400);

  /* Purple */
  --color-purple-50: oklch(0.977 0.008 308.299);
  --color-purple-100: oklch(0.946 0.020 307.174);
  --color-purple-200: oklch(0.902 0.038 306.703);
  --color-purple-300: oklch(0.827 0.071 306.383);
  --color-purple-400: oklch(0.714 0.122 305.504);
  --color-purple-500: oklch(0.627 0.159 303.9);
  --color-purple-600: oklch(0.558 0.173 302.321);
  --color-purple-700: oklch(0.496 0.159 301.924);
  --color-purple-800: oklch(0.438 0.131 303.724);
  --color-purple-900: oklch(0.381 0.106 304.987);
  --color-purple-950: oklch(0.291 0.089 302.717);
  --color-purple: var(--color-purple-400);

  /* Fuchsia */
  --color-fuchsia-50: oklch(0.977 0.010 320.058);
  --color-fuchsia-100: oklch(0.952 0.022 318.852);
  --color-fuchsia-200: oklch(0.903 0.046 319.62);
  --color-fuchsia-300: oklch(0.833 0.087 321.434);
  --color-fuchsia-400: oklch(0.740 0.143 322.16);
  --color-fuchsia-500: oklch(0.667 0.177 322.15);
  --color-fuchsia-600: oklch(0.591 0.176 322.896);
  --color-fuchsia-700: oklch(0.518 0.152 323.949);
  --color-fuchsia-800: oklch(0.452 0.127 324.591);
  --color-fuchsia-900: oklch(0.401 0.102 325.612);
  --color-fuchsia-950: oklch(0.293 0.082 325.661);
  --color-fuchsia: var(--color-fuchsia-400);

  /* Pink */
  --color-pink-50: oklch(0.971 0.008 343.198);
  --color-pink-100: oklch(0.948 0.017 342.258);
  --color-pink-200: oklch(0.899 0.037 343.231);
  --color-pink-300: oklch(0.823 0.072 346.018);
  --color-pink-400: oklch(0.718 0.121 349.761);
  --color-pink-500: oklch(0.656 0.145 354.308);
  --color-pink-600: oklch(0.592 0.149 0.584);
  --color-pink-700: oklch(0.525 0.134 3.958);
  --color-pink-800: oklch(0.459 0.112 3.815);
  --color-pink-900: oklch(0.408 0.092 2.432);
  --color-pink-950: oklch(0.284 0.065 3.907);
  --color-pink: var(--color-pink-400);

  /* Rose */
  --color-rose-50: oklch(0.969 0.009 12.422);
  --color-rose-100: oklch(0.941 0.018 12.58);
  --color-rose-200: oklch(0.892 0.035 10.001);
  --color-rose-300: oklch(0.810 0.070 11.638);
  --color-rose-400: oklch(0.712 0.116 13.428);
  --color-rose-500: oklch(0.645 0.148 16.439);
  --color-rose-600: oklch(0.586 0.152 17.585);
  --color-rose-700: oklch(0.514 0.133 16.935);
  --color-rose-800: oklch(0.455 0.113 13.697);
  --color-rose-900: oklch(0.410 0.095 10.272);
  --color-rose-950: oklch(0.271 0.063 12.094);
  --color-rose: var(--color-rose-400);

  /* Slate */
  --color-slate-50: oklch(0.984 0.002 247.858);
  --color-slate-100: oklch(0.968 0.004 247.896);
  --color-slate-200: oklch(0.929 0.008 255.508);
  --color-slate-300: oklch(0.869 0.013 252.894);
  --color-slate-400: oklch(0.704 0.024 256.788);
  --color-slate-500: oklch(0.554 0.028 257.417);
  --color-slate-600: oklch(0.446 0.026 257.281);
  --color-slate-700: oklch(0.372 0.026 257.287);
  --color-slate-800: oklch(0.279 0.025 260.031);
  --color-slate-900: oklch(0.208 0.025 265.755);
  --color-slate-950: oklch(0.129 0.025 264.695);
  --color-slate: var(--color-slate-400);

  /* Gray */
  --color-gray-50: oklch(0.985 0.001 247.839);
  --color-gray-100: oklch(0.967 0.002 264.542);
  --color-gray-200: oklch(0.928 0.004 264.531);
  --color-gray-300: oklch(0.872 0.006 258.338);
  --color-gray-400: oklch(0.707 0.013 261.325);
  --color-gray-500: oklch(0.551 0.016 264.364);
  --color-gray-600: oklch(0.446 0.018 256.802);
  --color-gray-700: oklch(0.373 0.020 259.733);
  --color-gray-800: oklch(0.278 0.020 256.848);
  --color-gray-900: oklch(0.210 0.020 264.665);
  --color-gray-950: oklch(0.130 0.017 261.692);
  --color-gray: var(--color-gray-400);

  /* Zinc */
  --color-zinc-50: oklch(0.985 0 0);
  --color-zinc-100: oklch(0.967 0.001 286.375);
  --color-zinc-200: oklch(0.920 0.002 286.32);
  --color-zinc-300: oklch(0.871 0.004 286.286);
  --color-zinc-400: oklch(0.705 0.009 286.067);
  --color-zinc-500: oklch(0.552 0.010 285.938);
  --color-zinc-600: oklch(0.442 0.010 285.786);
  --color-zinc-700: oklch(0.370 0.008 285.805);
  --color-zinc-800: oklch(0.274 0.004 286.033);
  --color-zinc-900: oklch(0.210 0.004 285.885);
  --color-zinc-950: oklch(0.141 0.003 285.823);
  --color-zinc: var(--color-zinc-400);

  /* Neutral */
  --color-neutral-50: oklch(0.985 0 0);
  --color-neutral-100: oklch(0.970 0 0);
  --color-neutral-200: oklch(0.922 0 0);
  --color-neutral-300: oklch(0.870 0 0);
  --color-neutral-400: oklch(0.708 0 0);
  --color-neutral-500: oklch(0.556 0 0);
  --color-neutral-600: oklch(0.439 0 0);
  --color-neutral-700: oklch(0.371 0 0);
  --color-neutral-800: oklch(0.269 0 0);
  --color-neutral-900: oklch(0.205 0 0);
  --color-neutral-950: oklch(0.145 0 0);
  --color-neutral: var(--color-neutral-400);

  /* Stone */
  --color-stone-50: oklch(0.985 0.001 106.423);
  --color-stone-100: oklch(0.970 0.001 106.424);
  --color-stone-200: oklch(0.923 0.002 48.717);
  --color-stone-300: oklch(0.869 0.003 56.366);
  --color-stone-400: oklch(0.709 0.006 56.259);
  --color-stone-500: oklch(0.553 0.008 58.071);
  --color-stone-600: oklch(0.444 0.007 73.639);
  --color-stone-700: oklch(0.374 0.006 67.558);
  --color-stone-800: oklch(0.268 0.004 34.298);
  --color-stone-900: oklch(0.216 0.004 56.043);
  --color-stone-950: oklch(0.147 0.002 49.25);
  --color-stone: var(--color-stone-400);

  /* Pure white */
  --color-white: oklch(1 0 0);
}

/* Semantic UI Theme Variables */

:root {
  /* Base colors */
  --color-background: var(--color-frost-50);
  --color-foreground: var(--color-navy-950);

  /* Card */
  --color-card: var(--color-white);
  --color-card-foreground: var(--color-navy-950);

  /* Popover */
  --color-popover: var(--color-white);
  --color-popover-foreground: var(--color-navy-950);

  /* Primary */
  --color-primary: var(--color-navy-600);
  --color-primary-foreground: var(--color-white);

  /* Secondary */
  --color-secondary: var(--color-evergreen-600);
  --color-secondary-foreground: var(--color-white);

  /* Muted */
  --color-muted: var(--color-frost-100);
  --color-muted-foreground: var(--color-navy-600);

  /* Accent */
  --color-accent: var(--color-sand-600);
  --color-accent-foreground: var(--color-white);

  /* Destructive */
  --color-destructive: var(--color-error-600);
  --color-destructive-foreground: var(--color-white);

  /* Success */
  --color-success: var(--color-success-600);
  --color-success-foreground: var(--color-white);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-500);
  --color-completed-foreground: var(--color-white);

  /* Warning */
  --color-warning: var(--color-warning-600);
  --color-warning-foreground: var(--color-white);

  /* Info */
  --color-info: var(--color-navy-500);
  --color-info-foreground: var(--color-white);

  /* Border */
  --color-border: var(--color-frost-600);
  --color-input: var(--color-frost-300);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-frost-200);
  --color-surface: var(--color-white);
  --color-text-secondary: var(--color-frost-600);
  --color-text-emphasis: var(--color-navy-600);
  --color-link: var(--color-navy-600);
  --color-link-hover: var(--color-navy-700);

  /* Select component */
  --color-select-hover: var(--color-navy-50);
  --color-select-hover-foreground: var(--color-navy-950);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-600);
  --color-checkbox-checked-foreground: var(--color-white);

  /* Navigation */
  --color-nav-foreground: var(--color-navy-600);

  /* Text selection */
  --color-selection: var(--color-navy-200);
  --color-selection-foreground: var(--color-navy-900);

  /* Difficulty levels (puzzles) */
  --color-difficulty-easy: var(--color-success-100);
  --color-difficulty-easy-foreground: var(--color-success-800);
  --color-difficulty-medium: var(--color-navy-100);
  --color-difficulty-medium-foreground: var(--color-navy-800);
  --color-difficulty-hard: var(--color-warning-100);
  --color-difficulty-hard-foreground: var(--color-warning-800);
  --color-difficulty-expert: var(--color-error-100);
  --color-difficulty-expert-foreground: var(--color-error-800);
  --color-difficulty-open: var(--color-frost-200);
  --color-difficulty-open-foreground: var(--color-frost-900);

  /* Gradients */
  --gradient-recommendation-start: var(--color-evergreen-500);
  --gradient-recommendation-end: var(--color-navy-500);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


.dark {
  /* Base colors */
  --color-background: oklch(0.10 0.035 220); /* darker than navy-950, almost pure black */
  --color-foreground: var(--color-frost-200);

  /* Card */
  --color-card: var(--color-navy-900);
  --color-card-foreground: var(--color-frost-200);

  /* Popover */
  --color-popover: var(--color-navy-900);
  --color-popover-foreground: var(--color-frost-200);

  /* Primary */
  --color-primary: var(--color-navy-400);
  --color-primary-foreground: var(--color-navy-950);

  /* Secondary */
  --color-secondary: var(--color-evergreen-400);
  --color-secondary-foreground: var(--color-navy-950);

  /* Muted */
  --color-muted: var(--color-navy-800);
  --color-muted-foreground: var(--color-frost-400);

  /* Accent */
  --color-accent: var(--color-sand-400);
  --color-accent-foreground: var(--color-navy-950);

  /* Destructive */
  --color-destructive: var(--color-error-400);
  --color-destructive-foreground: var(--color-navy-950);

  /* Success */
  --color-success: var(--color-success-400);
  --color-success-foreground: var(--color-navy-950);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-300);
  --color-completed-foreground: var(--color-navy-950);

  /* Warning */
  --color-warning: var(--color-warning-400);
  --color-warning-foreground: var(--color-navy-950);

  /* Info */
  --color-info: var(--color-navy-300);
  --color-info-foreground: var(--color-navy-950);

  /* Border */
  --color-border: var(--color-navy-700);
  --color-input: var(--color-navy-600);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-navy-700);
  --color-surface: var(--color-navy-900);
  --color-text-secondary: var(--color-frost-400);
  --color-text-emphasis: var(--color-frost-50);
  --color-link: var(--color-navy-400);
  --color-link-hover: var(--color-navy-300);

  /* Select component */
  --color-select-hover: var(--color-navy-800);
  --color-select-hover-foreground: var(--color-frost-200);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-400);
  --color-checkbox-checked-foreground: var(--color-navy-950);

  /* Navigation */
  --color-nav-foreground: var(--color-frost-200);

  /* Text selection */
  --color-selection: var(--color-navy-700);
  --color-selection-foreground: var(--color-navy-100);

  /* Difficulty levels (puzzles) - dark mode */
  --color-difficulty-easy: var(--color-success-900);
  --color-difficulty-easy-foreground: var(--color-success-200);
  --color-difficulty-medium: var(--color-navy-900);
  --color-difficulty-medium-foreground: var(--color-navy-200);
  --color-difficulty-hard: var(--color-warning-900);
  --color-difficulty-hard-foreground: var(--color-warning-200);
  --color-difficulty-expert: var(--color-error-900);
  --color-difficulty-expert-foreground: var(--color-error-200);
  --color-difficulty-open: var(--color-frost-700);
  --color-difficulty-open-foreground: var(--color-frost-200);

  /* Gradients - dark mode */
  --gradient-recommendation-start: var(--color-evergreen-600);
  --gradient-recommendation-end: var(--color-navy-600);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


    /* Base Reset */
*, ::before, ::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: var(--color-border);
}

html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  tab-size: 4;
  font-family: &#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif;
  font-feature-settings: normal;
  font-variation-settings: normal;
}

body {
  margin: 0;
  line-height: inherit;
  color: var(--color-foreground);
  background-color: var(--color-background);
}

/* Reset margins on common elements */
h1, h2, h3, h4, h5, h6, p, blockquote, pre, ul, ol, dl, figure, hr {
  margin: 0;
}

/* Reset list styles */
ul, ol {
  padding: 0;
  list-style: none;
}

/* Reset buttons and inputs */
button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button, select {
  text-transform: none;
}

button, input:where([type=&#x27;button&#x27;]), input:where([type=&#x27;reset&#x27;]), input:where([type=&#x27;submit&#x27;]) {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
  cursor: pointer;
}

button:disabled, input:disabled {
  cursor: default;
}

/* Reset form elements */
input::placeholder, textarea::placeholder {
  opacity: 1;
  color: var(--color-muted-foreground);
}

/* Reset tables */
table {
  text-indent: 0;
  border-color: inherit;
  border-collapse: collapse;
}

/* Link styles */
a {
  color: var(--color-link);
  text-decoration: none;
}

a:hover {
  color: var(--color-link-hover);
  text-decoration: underline;
}

/* Reset headings */
h1, h2, h3, h4, h5, h6 {
  font-size: inherit;
  font-weight: inherit;
}

/* Reset images and media */
img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  vertical-align: middle;
}

img, video {
  max-width: 100%;
  height: auto;
}

/* Sandbox-specific UI styles */
.sandbox-select:invalid {
  color: var(--color-muted-foreground) !important;
}

.sandbox-select option {
  background-color: var(--color-popover) !important;
  color: var(--color-popover-foreground) !important;
  padding: 0.375rem 0.5rem !important;
}

.sandbox-select option:disabled {
  color: var(--color-muted-foreground) !important;
  background-color: var(--color-popover) !important;
}

.sandbox-select option:checked {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

.sandbox-select option:hover,
.sandbox-select option:focus,
.sandbox-select option:active {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

/* Peer helper class for Radix UI components */
.peer { }
    
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;

  &lt;!-- Runtime and globals script --&gt;
  &lt;script&gt;
    // Component props (available globally)
    window.__COMPONENT_PROPS__ = {&quot;n&quot;:6,&quot;maxWidth&quot;:350,&quot;showExtraPaths&quot;:true};

    // Canvas accessibility label (for canvas mode blocks)
    window.__CANVAS_ARIA_LABEL__ = null;

    // Injected sandbox runtime
    (() =&gt; {
  function createCSSGenerator() {
    const generatedClasses = /* @__PURE__ */ new Set();
    const styleSheet = new CSSStyleSheet();
    document.adoptedStyleSheets = [...document.adoptedStyleSheets, styleSheet];
    const spacingScale = {
      &quot;0&quot;: &quot;0&quot;,
      &quot;px&quot;: &quot;1px&quot;,
      &quot;0.5&quot;: &quot;0.125rem&quot;,
      &quot;1&quot;: &quot;0.25rem&quot;,
      &quot;1.5&quot;: &quot;0.375rem&quot;,
      &quot;2&quot;: &quot;0.5rem&quot;,
      &quot;2.5&quot;: &quot;0.625rem&quot;,
      &quot;3&quot;: &quot;0.75rem&quot;,
      &quot;3.5&quot;: &quot;0.875rem&quot;,
      &quot;4&quot;: &quot;1rem&quot;,
      &quot;5&quot;: &quot;1.25rem&quot;,
      &quot;6&quot;: &quot;1.5rem&quot;,
      &quot;7&quot;: &quot;1.75rem&quot;,
      &quot;8&quot;: &quot;2rem&quot;,
      &quot;9&quot;: &quot;2.25rem&quot;,
      &quot;10&quot;: &quot;2.5rem&quot;,
      &quot;11&quot;: &quot;2.75rem&quot;,
      &quot;12&quot;: &quot;3rem&quot;,
      &quot;14&quot;: &quot;3.5rem&quot;,
      &quot;16&quot;: &quot;4rem&quot;,
      &quot;20&quot;: &quot;5rem&quot;,
      &quot;24&quot;: &quot;6rem&quot;,
      &quot;28&quot;: &quot;7rem&quot;,
      &quot;32&quot;: &quot;8rem&quot;,
      &quot;36&quot;: &quot;9rem&quot;,
      &quot;40&quot;: &quot;10rem&quot;,
      &quot;44&quot;: &quot;11rem&quot;,
      &quot;48&quot;: &quot;12rem&quot;,
      &quot;52&quot;: &quot;13rem&quot;,
      &quot;56&quot;: &quot;14rem&quot;,
      &quot;60&quot;: &quot;15rem&quot;,
      &quot;64&quot;: &quot;16rem&quot;,
      &quot;72&quot;: &quot;18rem&quot;,
      &quot;80&quot;: &quot;20rem&quot;,
      &quot;96&quot;: &quot;24rem&quot;
    };
    const sizeValues = {
      &quot;auto&quot;: &quot;auto&quot;,
      &quot;full&quot;: &quot;100%&quot;,
      &quot;screen&quot;: &quot;100vw&quot;,
      // for width
      &quot;min&quot;: &quot;min-content&quot;,
      &quot;max&quot;: &quot;max-content&quot;,
      &quot;fit&quot;: &quot;fit-content&quot;
    };
    const parseArbitraryValue = (value) =&gt; {
      const match = value.match(/^\[(.+)\]$/);
      return match ? match[1] : null;
    };
    const parseOpacity = (className) =&gt; {
      const match = className.match(/^(.+?)\/(\d+)$/);
      if (match) {
        return { base: match[1], opacity: (parseInt(match[2]) / 100).toString() };
      }
      return { base: className, opacity: null };
    };
    const findMatchingBracket = (str, startIndex) =&gt; {
      if (str[startIndex] !== &quot;[&quot;) {
        return -1;
      }
      let depth = 0;
      for (let i = startIndex; i &lt; str.length; i++) {
        const char = str[i];
        if (char === &quot;[&quot;) {
          depth++;
        } else if (char === &quot;]&quot;) {
          depth--;
          if (depth === 0) {
            return i;
          }
        }
      }
      return -1;
    };
    const parseArbitrarySelector = (className) =&gt; {
      if (!className.startsWith(&quot;[&quot;)) {
        return null;
      }
      const closingBracketIndex = findMatchingBracket(className, 0);
      if (closingBracketIndex === -1 || className[closingBracketIndex + 1] !== &quot;:&quot;) {
        return null;
      }
      const bracketContent = className.substring(1, closingBracketIndex);
      if (!bracketContent.startsWith(&quot;&amp;&quot;)) {
        return null;
      }
      const selector = bracketContent.substring(1);
      const baseClass = className.substring(closingBracketIndex + 2);
      return { selector, baseClass };
    };
    const generateRule = (className) =&gt; {
      const arbitrarySelector = parseArbitrarySelector(className);
      if (arbitrarySelector) {
        const { selector, baseClass } = arbitrarySelector;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/&amp;/g, &quot;\\&amp;&quot;).replace(/&gt;/g, &quot;\\&gt;&quot;).replace(/\*/g, &quot;\\*&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\+/g, &quot;\\+&quot;).replace(/~/g, &quot;\\~&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const declarations = baseRule.substring(selectorEnd);
        return `.${escapedClass}${selector} ${declarations}`;
      }
      const variantMatch = className.match(/^(hover|focus|active|disabled|dark):(.+)$/);
      if (variantMatch) {
        const [, variant, baseClass] = variantMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const baseSelector = baseRule.substring(0, selectorEnd).trim();
        const declarations = baseRule.substring(selectorEnd);
        if (variant === &quot;hover&quot;) {
          return `.${escapedClass}:hover ${declarations}`;
        } else if (variant === &quot;focus&quot;) {
          return `.${escapedClass}:focus ${declarations}`;
        } else if (variant === &quot;active&quot;) {
          return `.${escapedClass}:active ${declarations}`;
        } else if (variant === &quot;disabled&quot;) {
          return `.${escapedClass}:disabled ${declarations}`;
        } else if (variant === &quot;dark&quot;) {
          const pseudoMatch = baseSelector.match(/(:(?:hover|focus|active|disabled|focus-visible)(?:\([^)]*\))?)$/);
          const pseudoSelector = pseudoMatch ? pseudoMatch[1] : &quot;&quot;;
          return `.dark .${escapedClass}${pseudoSelector} ${declarations}`;
        }
      }
      const { base, opacity } = parseOpacity(className);
      const spacingMatch = base.match(/^(px|py|pt|pb|pl|pr|mx|my|mt|mb|ml|mr|gap-x|gap-y|space-x|space-y|min-w|min-h|max-w|max-h|inset-x|inset-y|p|m|gap|w|h|top|right|bottom|left|inset)-(.+)$/);
      if (spacingMatch) {
        const [, property, value] = spacingMatch;
        const spacing = spacingScale[value] || sizeValues[value] || parseArbitraryValue(value);
        if (!spacing) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (property === &quot;space-x&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-x-reverse: 0; margin-inline-start: calc(${spacing} * var(--tw-space-x-reverse)); margin-inline-end: calc(${spacing} * calc(1 - var(--tw-space-x-reverse))); }`;
        }
        if (property === &quot;space-y&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-y-reverse: 0; margin-block-start: calc(${spacing} * var(--tw-space-y-reverse)); margin-block-end: calc(${spacing} * calc(1 - var(--tw-space-y-reverse))); }`;
        }
        const propertyMap = {
          &quot;p&quot;: [&quot;padding&quot;],
          &quot;px&quot;: [&quot;padding-left&quot;, &quot;padding-right&quot;],
          &quot;py&quot;: [&quot;padding-top&quot;, &quot;padding-bottom&quot;],
          &quot;pt&quot;: [&quot;padding-top&quot;],
          &quot;pb&quot;: [&quot;padding-bottom&quot;],
          &quot;pl&quot;: [&quot;padding-left&quot;],
          &quot;pr&quot;: [&quot;padding-right&quot;],
          &quot;m&quot;: [&quot;margin&quot;],
          &quot;mx&quot;: [&quot;margin-left&quot;, &quot;margin-right&quot;],
          &quot;my&quot;: [&quot;margin-top&quot;, &quot;margin-bottom&quot;],
          &quot;mt&quot;: [&quot;margin-top&quot;],
          &quot;mb&quot;: [&quot;margin-bottom&quot;],
          &quot;ml&quot;: [&quot;margin-left&quot;],
          &quot;mr&quot;: [&quot;margin-right&quot;],
          &quot;gap&quot;: [&quot;gap&quot;],
          &quot;gap-x&quot;: [&quot;column-gap&quot;],
          &quot;gap-y&quot;: [&quot;row-gap&quot;],
          &quot;w&quot;: [&quot;width&quot;],
          &quot;h&quot;: [&quot;height&quot;],
          &quot;min-w&quot;: [&quot;min-width&quot;],
          &quot;min-h&quot;: [&quot;min-height&quot;],
          &quot;max-w&quot;: [&quot;max-width&quot;],
          &quot;max-h&quot;: [&quot;max-height&quot;],
          &quot;top&quot;: [&quot;top&quot;],
          &quot;right&quot;: [&quot;right&quot;],
          &quot;bottom&quot;: [&quot;bottom&quot;],
          &quot;left&quot;: [&quot;left&quot;],
          &quot;inset&quot;: [&quot;top&quot;, &quot;right&quot;, &quot;bottom&quot;, &quot;left&quot;],
          &quot;inset-x&quot;: [&quot;left&quot;, &quot;right&quot;],
          &quot;inset-y&quot;: [&quot;top&quot;, &quot;bottom&quot;]
        };
        const properties = propertyMap[property];
        if (!properties) return null;
        const declarations = properties.map((prop) =&gt; `${prop}: ${spacing}`).join(&quot;; &quot;);
        return `.${escapedClass} { ${declarations}; }`;
      }
      const textSizeMatch = base.match(/^text-(xs|sm|base|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl|8xl|9xl)$/);
      if (textSizeMatch) {
        const [, size] = textSizeMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const sizeMap = {
          &quot;xs&quot;: { fontSize: &quot;0.75rem&quot;, lineHeight: &quot;1rem&quot; },
          &quot;sm&quot;: { fontSize: &quot;0.875rem&quot;, lineHeight: &quot;1.25rem&quot; },
          &quot;base&quot;: { fontSize: &quot;1rem&quot;, lineHeight: &quot;1.5rem&quot; },
          &quot;lg&quot;: { fontSize: &quot;1.125rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;xl&quot;: { fontSize: &quot;1.25rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;2xl&quot;: { fontSize: &quot;1.5rem&quot;, lineHeight: &quot;2rem&quot; },
          &quot;3xl&quot;: { fontSize: &quot;1.875rem&quot;, lineHeight: &quot;2.25rem&quot; },
          &quot;4xl&quot;: { fontSize: &quot;2.25rem&quot;, lineHeight: &quot;2.5rem&quot; },
          &quot;5xl&quot;: { fontSize: &quot;3rem&quot;, lineHeight: &quot;1&quot; },
          &quot;6xl&quot;: { fontSize: &quot;3.75rem&quot;, lineHeight: &quot;1&quot; },
          &quot;7xl&quot;: { fontSize: &quot;4.5rem&quot;, lineHeight: &quot;1&quot; },
          &quot;8xl&quot;: { fontSize: &quot;6rem&quot;, lineHeight: &quot;1&quot; },
          &quot;9xl&quot;: { fontSize: &quot;8rem&quot;, lineHeight: &quot;1&quot; }
        };
        const { fontSize, lineHeight } = sizeMap[size];
        return `.${escapedClass} { font-size: ${fontSize}; line-height: ${lineHeight}; }`;
      }
      const fontWeightMatch = base.match(/^font-(thin|extralight|light|normal|medium|semibold|bold|extrabold|black)$/);
      if (fontWeightMatch) {
        const [, weight] = fontWeightMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const weightMap = {
          &quot;thin&quot;: &quot;100&quot;,
          &quot;extralight&quot;: &quot;200&quot;,
          &quot;light&quot;: &quot;300&quot;,
          &quot;normal&quot;: &quot;400&quot;,
          &quot;medium&quot;: &quot;500&quot;,
          &quot;semibold&quot;: &quot;600&quot;,
          &quot;bold&quot;: &quot;700&quot;,
          &quot;extrabold&quot;: &quot;800&quot;,
          &quot;black&quot;: &quot;900&quot;
        };
        return `.${escapedClass} { font-weight: ${weightMap[weight]}; }`;
      }
      const fontFamilyMatch = base.match(/^font-(sans|serif|mono)$/);
      if (fontFamilyMatch) {
        const [, family] = fontFamilyMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const familyMap = {
          &quot;sans&quot;: &quot;&#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif&quot;,
          &quot;serif&quot;: &quot;ui-serif, Georgia, Cambria, &#x27;Times New Roman&#x27;, Times, serif&quot;,
          &quot;mono&quot;: &quot;&#x27;Space Mono&#x27;, ui-monospace, &#x27;Cascadia Code&#x27;, monospace&quot;
        };
        return `.${escapedClass} { font-family: ${familyMap[family]}; }`;
      }
      const lineHeightMatch = base.match(/^leading-(.+)$/);
      if (lineHeightMatch) {
        const [, value] = lineHeightMatch;
        const heightMap = {
          &quot;none&quot;: &quot;1&quot;,
          &quot;tight&quot;: &quot;1.25&quot;,
          &quot;snug&quot;: &quot;1.375&quot;,
          &quot;normal&quot;: &quot;1.5&quot;,
          &quot;relaxed&quot;: &quot;1.625&quot;,
          &quot;loose&quot;: &quot;2&quot;
        };
        const lineHeight = heightMap[value] || parseArbitraryValue(value);
        if (!lineHeight) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { line-height: ${lineHeight}; }`;
      }
      const flexMatch = base.match(/^flex-(.+)$/);
      if (flexMatch) {
        const [, value] = flexMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const flexValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { flex: ${flexValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { flex: var(${customProp}); }`;
        }
        const fractionMatch = value.match(/^(\d+)\/(\d+)$/);
        if (fractionMatch) {
          const [, numerator, denominator] = fractionMatch;
          return `.${escapedClass} { flex: calc(${numerator} / ${denominator} * 100%); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { flex: ${number}; }`;
        }
      }
      const gridColsMatch = base.match(/^grid-cols-(.+)$/);
      if (gridColsMatch) {
        const [, value] = gridColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-columns: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-columns: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const colsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-columns: ${colsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-columns: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-columns: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const gridRowsMatch = base.match(/^grid-rows-(.+)$/);
      if (gridRowsMatch) {
        const [, value] = gridRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-rows: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-rows: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const rowsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-rows: ${rowsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-rows: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-rows: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const colStartMatch = base.match(/^col-start-(.+)$/);
      if (colStartMatch) {
        const [, value] = colStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-start: ${number}; }`;
        }
      }
      const colEndMatch = base.match(/^col-end-(.+)$/);
      if (colEndMatch) {
        const [, value] = colEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-end: ${number}; }`;
        }
      }
      const colSpanMatch = base.match(/^col-span-(.+)$/);
      if (colSpanMatch) {
        const [, value] = colSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-column: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column: span ${number} / span ${number}; }`;
        }
      }
      const colMatch = base.match(/^col-(.+)$/);
      if (colMatch) {
        const [, value] = colMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-column: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-column: var(${customProp}); }`;
          }
        }
      }
      const rowStartMatch = base.match(/^row-start-(.+)$/);
      if (rowStartMatch) {
        const [, value] = rowStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-start: ${number}; }`;
        }
      }
      const rowEndMatch = base.match(/^row-end-(.+)$/);
      if (rowEndMatch) {
        const [, value] = rowEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-end: ${number}; }`;
        }
      }
      const rowSpanMatch = base.match(/^row-span-(.+)$/);
      if (rowSpanMatch) {
        const [, value] = rowSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-row: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row: span ${number} / span ${number}; }`;
        }
      }
      const rowMatch = base.match(/^row-(.+)$/);
      if (rowMatch) {
        const [, value] = rowMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-row: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-row: var(${customProp}); }`;
          }
        }
      }
      const autoColsMatch = base.match(/^auto-cols-(.+)$/);
      if (autoColsMatch) {
        const [, value] = autoColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-columns: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-columns: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-columns: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-columns: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-columns: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-columns: var(${customProp}); }`;
        }
      }
      const autoRowsMatch = base.match(/^auto-rows-(.+)$/);
      if (autoRowsMatch) {
        const [, value] = autoRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-rows: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-rows: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-rows: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-rows: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-rows: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-rows: var(${customProp}); }`;
        }
      }
      const gridFlowMatch = base.match(/^grid-flow-(.+)$/);
      if (gridFlowMatch) {
        const [, value] = gridFlowMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        if (value === &quot;row&quot;) {
          return `.${escapedClass} { grid-auto-flow: row; }`;
        }
        if (value === &quot;col&quot;) {
          return `.${escapedClass} { grid-auto-flow: column; }`;
        }
        if (value === &quot;dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: dense; }`;
        }
        if (value === &quot;row-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: row dense; }`;
        }
        if (value === &quot;col-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: column dense; }`;
        }
      }
      const layoutUtilities = {
        // Display
        &quot;flex&quot;: &quot;display: flex&quot;,
        &quot;inline-flex&quot;: &quot;display: inline-flex&quot;,
        &quot;grid&quot;: &quot;display: grid&quot;,
        &quot;inline-grid&quot;: &quot;display: inline-grid&quot;,
        &quot;block&quot;: &quot;display: block&quot;,
        &quot;inline-block&quot;: &quot;display: inline-block&quot;,
        &quot;inline&quot;: &quot;display: inline&quot;,
        &quot;hidden&quot;: &quot;display: none&quot;,
        // Flex direction
        &quot;flex-row&quot;: &quot;flex-direction: row&quot;,
        &quot;flex-row-reverse&quot;: &quot;flex-direction: row-reverse&quot;,
        &quot;flex-col&quot;: &quot;flex-direction: column&quot;,
        &quot;flex-col-reverse&quot;: &quot;flex-direction: column-reverse&quot;,
        // Flex wrap
        &quot;flex-wrap&quot;: &quot;flex-wrap: wrap&quot;,
        &quot;flex-wrap-reverse&quot;: &quot;flex-wrap: wrap-reverse&quot;,
        &quot;flex-nowrap&quot;: &quot;flex-wrap: nowrap&quot;,
        // Flex shrink/grow
        &quot;shrink-0&quot;: &quot;flex-shrink: 0&quot;,
        &quot;shrink&quot;: &quot;flex-shrink: 1&quot;,
        &quot;grow-0&quot;: &quot;flex-grow: 0&quot;,
        &quot;grow&quot;: &quot;flex-grow: 1&quot;,
        // Flex sizing (common static values)
        &quot;flex-1&quot;: &quot;flex: 1 1 0%&quot;,
        &quot;flex-auto&quot;: &quot;flex: 1 1 auto&quot;,
        &quot;flex-initial&quot;: &quot;flex: 0 1 auto&quot;,
        &quot;flex-none&quot;: &quot;flex: none&quot;,
        // Flex/Grid alignment
        &quot;items-start&quot;: &quot;align-items: flex-start&quot;,
        &quot;items-end&quot;: &quot;align-items: flex-end&quot;,
        &quot;items-center&quot;: &quot;align-items: center&quot;,
        &quot;items-baseline&quot;: &quot;align-items: baseline&quot;,
        &quot;items-stretch&quot;: &quot;align-items: stretch&quot;,
        &quot;justify-start&quot;: &quot;justify-content: flex-start&quot;,
        &quot;justify-end&quot;: &quot;justify-content: flex-end&quot;,
        &quot;justify-center&quot;: &quot;justify-content: center&quot;,
        &quot;justify-between&quot;: &quot;justify-content: space-between&quot;,
        &quot;justify-around&quot;: &quot;justify-content: space-around&quot;,
        &quot;justify-evenly&quot;: &quot;justify-content: space-evenly&quot;,
        &quot;place-content-center&quot;: &quot;place-content: center&quot;,
        &quot;place-content-start&quot;: &quot;place-content: start&quot;,
        &quot;place-content-end&quot;: &quot;place-content: end&quot;,
        // Position
        &quot;relative&quot;: &quot;position: relative&quot;,
        &quot;absolute&quot;: &quot;position: absolute&quot;,
        &quot;fixed&quot;: &quot;position: fixed&quot;,
        &quot;sticky&quot;: &quot;position: sticky&quot;,
        // Overflow
        &quot;overflow-hidden&quot;: &quot;overflow: hidden&quot;,
        &quot;overflow-auto&quot;: &quot;overflow: auto&quot;,
        &quot;overflow-scroll&quot;: &quot;overflow: scroll&quot;,
        &quot;overflow-x-hidden&quot;: &quot;overflow-x: hidden&quot;,
        &quot;overflow-y-hidden&quot;: &quot;overflow-y: hidden&quot;,
        &quot;overflow-x-auto&quot;: &quot;overflow-x: auto&quot;,
        &quot;overflow-y-auto&quot;: &quot;overflow-y: auto&quot;,
        // Cursor
        &quot;cursor-pointer&quot;: &quot;cursor: pointer&quot;,
        &quot;cursor-default&quot;: &quot;cursor: default&quot;,
        &quot;cursor-not-allowed&quot;: &quot;cursor: not-allowed&quot;,
        // Text align
        &quot;text-left&quot;: &quot;text-align: left&quot;,
        &quot;text-center&quot;: &quot;text-align: center&quot;,
        &quot;text-right&quot;: &quot;text-align: right&quot;,
        // Text decoration
        &quot;underline&quot;: &quot;text-decoration: underline&quot;,
        &quot;overline&quot;: &quot;text-decoration: overline&quot;,
        &quot;line-through&quot;: &quot;text-decoration: line-through&quot;,
        &quot;no-underline&quot;: &quot;text-decoration: none&quot;,
        // Pointer events
        &quot;pointer-events-none&quot;: &quot;pointer-events: none&quot;,
        &quot;pointer-events-auto&quot;: &quot;pointer-events: auto&quot;,
        // Aspect ratio
        &quot;aspect-square&quot;: &quot;aspect-ratio: 1 / 1&quot;,
        &quot;aspect-video&quot;: &quot;aspect-ratio: 16 / 9&quot;,
        // Shadow
        &quot;shadow&quot;: &quot;box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-sm&quot;: &quot;box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05)&quot;,
        &quot;shadow-md&quot;: &quot;box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-lg&quot;: &quot;box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-none&quot;: &quot;box-shadow: none&quot;,
        // Outline
        &quot;outline-none&quot;: &quot;outline: 2px solid transparent; outline-offset: 2px&quot;,
        // Opacity (common values)
        &quot;opacity-0&quot;: &quot;opacity: 0&quot;,
        &quot;opacity-50&quot;: &quot;opacity: 0.5&quot;,
        &quot;opacity-100&quot;: &quot;opacity: 1&quot;,
        // Appearance
        &quot;appearance-none&quot;: &quot;appearance: none; -webkit-appearance: none; -moz-appearance: none&quot;,
        // Border
        &quot;border&quot;: &quot;border-width: 1px; border-style: solid&quot;,
        // Peer
        &quot;peer&quot;: &quot;&quot;
      };
      if (layoutUtilities[className]) {
        return `.${className} { ${layoutUtilities[className]}; }`;
      }
      const opacityMatch = base.match(/^opacity-(\d+)$/);
      if (opacityMatch) {
        const [, value] = opacityMatch;
        const opacityValue = parseInt(value) / 100;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { opacity: ${opacityValue}; }`;
      }
      const colorMatch = base.match(/^(bg|text|border|ring|outline|fill)-(.+)$/);
      if (colorMatch) {
        const [, property, colorName] = colorMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const propertyMap = {
          &quot;bg&quot;: &quot;background-color&quot;,
          &quot;text&quot;: &quot;color&quot;,
          &quot;border&quot;: &quot;border-color&quot;,
          &quot;ring&quot;: &quot;--tw-ring-color&quot;,
          &quot;outline&quot;: &quot;outline-color&quot;,
          &quot;fill&quot;: &quot;fill&quot;
        };
        const cssProp = propertyMap[property];
        if (!cssProp) return null;
        if (opacity) {
          return `.${escapedClass} { ${cssProp}: oklch(from var(--color-${colorName}) l c h / ${opacity}); }`;
        } else {
          return `.${escapedClass} { ${cssProp}: var(--color-${colorName}); }`;
        }
      }
      if (className === &quot;transition-colors&quot;) {
        return `.transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition&quot;) {
        return `.transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition-opacity&quot;) {
        return `.transition-opacity { transition-property: opacity; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      const borderWidthMatch = base.match(/^border(-[trbl])?-(\d+)$/);
      if (borderWidthMatch) {
        const [, side, width] = borderWidthMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (side) {
          const sideMap = {
            &quot;-t&quot;: &quot;border-top-width&quot;,
            &quot;-r&quot;: &quot;border-right-width&quot;,
            &quot;-b&quot;: &quot;border-bottom-width&quot;,
            &quot;-l&quot;: &quot;border-left-width&quot;
          };
          return `.${escapedClass} { ${sideMap[side]}: ${width}px; }`;
        } else {
          return `.${escapedClass} { border-width: ${width}px; }`;
        }
      }
      const roundedMatch = base.match(/^rounded(-[trblxy])?(-(.+))?$/);
      if (roundedMatch) {
        const [, corner, , value] = roundedMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const roundedValues = {
          &quot;none&quot;: &quot;0&quot;,
          &quot;sm&quot;: &quot;calc(var(--radius) - 4px)&quot;,
          &quot;md&quot;: &quot;calc(var(--radius) - 2px)&quot;,
          &quot;lg&quot;: &quot;var(--radius)&quot;,
          &quot;xl&quot;: &quot;0.75rem&quot;,
          &quot;2xl&quot;: &quot;1rem&quot;,
          &quot;3xl&quot;: &quot;1.5rem&quot;,
          &quot;full&quot;: &quot;9999px&quot;
        };
        const radiusValue = value ? roundedValues[value] || spacingScale[value] || parseArbitraryValue(value) : &quot;0.25rem&quot;;
        if (!radiusValue) return null;
        const cornerMap = {
          &quot;-t&quot;: [&quot;border-top-left-radius&quot;, &quot;border-top-right-radius&quot;],
          &quot;-r&quot;: [&quot;border-top-right-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-b&quot;: [&quot;border-bottom-left-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-l&quot;: [&quot;border-top-left-radius&quot;, &quot;border-bottom-left-radius&quot;],
          &quot;-tl&quot;: [&quot;border-top-left-radius&quot;],
          &quot;-tr&quot;: [&quot;border-top-right-radius&quot;],
          &quot;-bl&quot;: [&quot;border-bottom-left-radius&quot;],
          &quot;-br&quot;: [&quot;border-bottom-right-radius&quot;]
        };
        if (corner &amp;&amp; cornerMap[corner]) {
          const declarations = cornerMap[corner].map((prop) =&gt; `${prop}: ${radiusValue}`).join(&quot;; &quot;);
          return `.${escapedClass} { ${declarations}; }`;
        } else {
          return `.${escapedClass} { border-radius: ${radiusValue}; }`;
        }
      }
      const ringMatch = className.match(/^ring(-offset)?(-(\d+))?$/);
      if (ringMatch) {
        const [, offset, , width] = ringMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (offset) {
          const ringWidth = width || &quot;2&quot;;
          return `.${escapedClass} { --tw-ring-offset-width: ${ringWidth}px; }`;
        } else {
          const ringWidth = width || &quot;3&quot;;
          return `.${escapedClass} { --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(${ringWidth}px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); }`;
        }
      }
      if (className === &quot;ring-offset-background&quot;) {
        return `.ring-offset-background { --tw-ring-offset-color: var(--color-background); }`;
      }
      const focusVisibleMatch = className.match(/^focus-visible:(.+)$/);
      if (focusVisibleMatch) {
        const [, baseClass] = focusVisibleMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}:focus-visible ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      const dataMatch = className.match(/^data-\[(.+?)\]:(.+)$/);
      if (dataMatch) {
        const [, dataAttr, baseClass] = dataMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}[data-${dataAttr}] ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      return null;
    };
    const css = (classNames) =&gt; {
      const classes = classNames.trim().split(/\s+/).filter(Boolean);
      for (const className of classes) {
        if (generatedClasses.has(className)) continue;
        const rule = generateRule(className);
        if (rule) {
          try {
            styleSheet.insertRule(rule, styleSheet.cssRules.length);
            generatedClasses.add(className);
          } catch (error) {
            console.error(`[DynamicBlock Error] Failed to generate CSS for class: ${className}`, error);
          }
        }
      }
      return classNames;
    };
    return css;
  }
  function createUIHelpers(cssGenerator) {
    const isSelector = (arg) =&gt; typeof arg === &quot;string&quot;;
    const applyClasses = (element, baseClasses, customClassName) =&gt; {
      const allClasses = customClassName ? `${baseClasses} ${customClassName}`.replace(/\s+/g, &quot; &quot;).trim() : baseClasses;
      cssGenerator(allClasses);
      if (element instanceof SVGElement) {
        element.setAttribute(&quot;class&quot;, allClasses);
      } else {
        element.className = allClasses;
      }
    };
    const applyStyles = (element, styles) =&gt; {
      if (!styles) return;
      Object.entries(styles).forEach(([property, value]) =&gt; {
        if (element instanceof HTMLElement) {
          element.style.setProperty(property, value);
        } else {
          const currentStyle = element.getAttribute(&quot;style&quot;) || &quot;&quot;;
          const newStyle = `${currentStyle}${currentStyle ? &quot;; &quot; : &quot;&quot;}${property}: ${value}`;
          element.setAttribute(&quot;style&quot;, newStyle);
        }
      });
    };
    return {
      /**
       * Button helper - creates or enhances button elements
       */
      button(selectorOrOptions, options) {
        const baseClasses = &quot;inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50&quot;;
        const getVariantClasses = (variant2 = &quot;contained&quot;, color2 = &quot;primary&quot;, size2 = &quot;md&quot;) =&gt; {
          const variantBaseMap = {
            contained: &quot;&quot;,
            outlined: &quot;border bg-background&quot;,
            text: &quot;&quot;,
            ghost: &quot;&quot;
          };
          const variantColorMap = {
            contained: `bg-${color2} text-${color2}-foreground hover:bg-${color2}/80`,
            outlined: `border-${color2} text-${color2} hover:bg-${color2}/20`,
            text: `text-${color2} hover:bg-${color2}/20`,
            ghost: `text-${color2} hover:bg-${color2} hover:text-background`
          };
          const sizeMap = {
            sm: &quot;h-9 rounded-md px-3 text-sm&quot;,
            md: &quot;h-10 px-4 py-2&quot;,
            lg: &quot;h-12 rounded-md px-6 text-base&quot;,
            xl: &quot;h-14 rounded-md px-8 text-lg&quot;,
            icon: &quot;h-10 w-10&quot;
          };
          const variantBase = variantBaseMap[variant2] || variantBaseMap.contained;
          const variantColor = variantColorMap[variant2] || variantColorMap.contained;
          const sizeClasses = sizeMap[size2] || sizeMap.md;
          return `${baseClasses} ${variantBase} ${variantColor} ${sizeClasses}`.replace(/\s+/g, &quot; &quot;).trim();
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((btn2) =&gt; {
            const { variant: variant2, color: color2, size: size2, disabled: disabled2, onClick: onClick2, className: className2, style: style2 } = options || {};
            applyClasses(btn2, getVariantClasses(variant2, color2, size2), className2);
            applyStyles(btn2, style2);
            if (disabled2 !== void 0) btn2.disabled = disabled2;
            if (onClick2) btn2.addEventListener(&quot;click&quot;, onClick2);
          });
          return elements;
        }
        const { label, variant, color, size, disabled, onClick, className, style } = selectorOrOptions;
        const btn = document.createElement(&quot;button&quot;);
        btn.type = &quot;button&quot;;
        if (label) btn.textContent = label;
        applyClasses(btn, getVariantClasses(variant, color, size), className);
        applyStyles(btn, style);
        if (disabled) btn.disabled = disabled;
        if (onClick) btn.addEventListener(&quot;click&quot;, onClick);
        return btn;
      },
      /**
       * Input helper - creates or enhances input elements
       */
      input(selectorOrOptions, options) {
        const baseClasses = &quot;flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((input2) =&gt; {
            const { type: type2, placeholder: placeholder2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(input2, baseClasses, className2);
            applyStyles(input2, style2);
            if (type2) input2.type = type2;
            if (placeholder2) input2.placeholder = placeholder2;
            if (disabled2 !== void 0) input2.disabled = disabled2;
            if (value2 !== void 0) input2.value = value2;
            if (onInput2) input2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) input2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { type, placeholder, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const input = document.createElement(&quot;input&quot;);
        input.type = type || &quot;text&quot;;
        applyClasses(input, baseClasses, className);
        applyStyles(input, style);
        if (placeholder) input.placeholder = placeholder;
        if (disabled) input.disabled = disabled;
        if (value !== void 0) input.value = value;
        if (onInput) input.addEventListener(&quot;input&quot;, onInput);
        if (onChange) input.addEventListener(&quot;change&quot;, onChange);
        return input;
      },
      /**
       * Textarea helper - creates or enhances textarea elements
       */
      textarea(selectorOrOptions, options) {
        const baseClasses = &quot;flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((textarea2) =&gt; {
            const { placeholder: placeholder2, rows: rows2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(textarea2, baseClasses, className2);
            applyStyles(textarea2, style2);
            if (placeholder2) textarea2.placeholder = placeholder2;
            if (rows2) textarea2.rows = rows2;
            if (disabled2 !== void 0) textarea2.disabled = disabled2;
            if (value2 !== void 0) textarea2.value = value2;
            if (onInput2) textarea2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) textarea2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { placeholder, rows, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const textarea = document.createElement(&quot;textarea&quot;);
        applyClasses(textarea, baseClasses, className);
        applyStyles(textarea, style);
        if (placeholder) textarea.placeholder = placeholder;
        if (rows) textarea.rows = rows;
        if (disabled) textarea.disabled = disabled;
        if (value !== void 0) textarea.value = value;
        if (onInput) textarea.addEventListener(&quot;input&quot;, onInput);
        if (onChange) textarea.addEventListener(&quot;change&quot;, onChange);
        return textarea;
      },
      /**
       * Select helper - creates or enhances select elements
       * Uses native HTML select with chevron icon styling to match shadcn
       */
      select(selectorOrOptions, options) {
        const createSelectWrapper = (items2, value2, placeholder2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;relative w-full&quot;, className2);
          applyStyles(wrapper, style2);
          const select = document.createElement(&quot;select&quot;);
          const selectClasses = &quot;sandbox-select flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer&quot;;
          applyClasses(select, selectClasses);
          if (placeholder2) {
            const placeholderOption = document.createElement(&quot;option&quot;);
            placeholderOption.value = &quot;&quot;;
            placeholderOption.textContent = placeholder2;
            placeholderOption.disabled = true;
            placeholderOption.selected = true;
            select.appendChild(placeholderOption);
            select.required = true;
          }
          if (items2) {
            items2.forEach((item) =&gt; {
              const option = document.createElement(&quot;option&quot;);
              option.value = item.value;
              option.textContent = item.label;
              select.appendChild(option);
            });
          }
          if (value2) {
            select.value = value2;
            if (placeholder2) select.required = false;
          }
          if (disabled2) select.disabled = disabled2;
          if (onChange2) {
            select.addEventListener(&quot;change&quot;, (e) =&gt; {
              const newValue = e.target.value;
              if (placeholder2) {
                select.required = newValue === &quot;&quot;;
              }
              onChange2(newValue);
            });
          }
          const chevron = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(chevron, &quot;h-4 w-4 opacity-50 pointer-events-none&quot;);
          chevron.style.position = &quot;absolute&quot;;
          chevron.style.right = &quot;0.75rem&quot;;
          chevron.style.top = &quot;50%&quot;;
          chevron.style.transform = &quot;translateY(-50%)&quot;;
          chevron.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          chevron.setAttribute(&quot;width&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;height&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          chevron.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          chevron.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          chevron.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          chevron.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          chevron.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;6 9 12 15 18 9&quot;);
          chevron.appendChild(polyline);
          select.style.paddingRight = &quot;2.5rem&quot;;
          wrapper.appendChild(select);
          wrapper.appendChild(chevron);
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          const wrappers = [];
          elements.forEach((select) =&gt; {
            const { items: items2, value: value2, placeholder: placeholder2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const wrapper = createSelectWrapper(items2, value2, placeholder2, disabled2, onChange2, className2, style2);
            select.replaceWith(wrapper);
            wrappers.push(wrapper);
          });
          return document.querySelectorAll(&quot;.relative:has(select)&quot;);
        }
        const { items, value, placeholder, disabled, onChange, className, style } = selectorOrOptions;
        return createSelectWrapper(items, value, placeholder, disabled, onChange, className, style);
      },
      /**
       * Checkbox helper - creates checkbox elements matching shadcn Radix UI styling
       * Uses custom div-based checkbox with check icon for visual parity
       */
      checkbox(selectorOrOptions, options) {
        const createCheckbox = (checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const checkboxContainer = document.createElement(&quot;button&quot;);
          checkboxContainer.type = &quot;button&quot;;
          checkboxContainer.role = &quot;checkbox&quot;;
          checkboxContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          const checkboxClasses = &quot;grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer&quot;;
          applyClasses(checkboxContainer, checkboxClasses);
          const updateCheckboxStyles = (isChecked2) =&gt; {
            if (isChecked2) {
              checkboxContainer.style.backgroundColor = &quot;var(--color-checkbox-checked)&quot;;
              checkboxContainer.style.color = &quot;var(--color-checkbox-checked-foreground)&quot;;
            } else {
              checkboxContainer.style.backgroundColor = &quot;&quot;;
              checkboxContainer.style.color = &quot;&quot;;
            }
          };
          updateCheckboxStyles(!!checked2);
          if (disabled2) {
            checkboxContainer.disabled = true;
          }
          const checkIcon = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(checkIcon, &quot;h-4 w-4&quot;);
          checkIcon.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          checkIcon.setAttribute(&quot;width&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;height&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          checkIcon.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          checkIcon.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          checkIcon.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          checkIcon.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          checkIcon.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;20 6 9 17 4 12&quot;);
          checkIcon.appendChild(polyline);
          if (checked2) {
            checkboxContainer.appendChild(checkIcon);
          }
          let isChecked = !!checked2;
          checkboxContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            isChecked = !isChecked;
            checkboxContainer.setAttribute(&quot;aria-checked&quot;, isChecked ? &quot;true&quot; : &quot;false&quot;);
            updateCheckboxStyles(isChecked);
            if (isChecked) {
              checkboxContainer.appendChild(checkIcon);
            } else {
              if (checkIcon.parentNode === checkboxContainer) {
                checkboxContainer.removeChild(checkIcon);
              }
            }
            if (onChange2) onChange2(isChecked);
          });
          wrapper.appendChild(checkboxContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) checkboxContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const checkboxWrapper = createCheckbox(checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(checkboxWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createCheckbox(checked, label, disabled, onChange, className, style);
      },
      /**
       * Radio helper - creates radio button elements matching shadcn Radix UI styling
       * Uses custom button-based radio with circle fill indicator for visual parity
       */
      radio(selectorOrOptions, options) {
        const createRadio = (name2, value2, checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const radioContainer = document.createElement(&quot;button&quot;);
          radioContainer.type = &quot;button&quot;;
          radioContainer.role = &quot;radio&quot;;
          radioContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          radioContainer.setAttribute(&quot;data-name&quot;, name2);
          radioContainer.setAttribute(&quot;data-value&quot;, value2);
          const radioClasses = &quot;aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer flex items-center justify-center&quot;;
          applyClasses(radioContainer, radioClasses);
          if (disabled2) {
            radioContainer.disabled = true;
          }
          const circleIndicator = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          circleIndicator.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          circleIndicator.setAttribute(&quot;width&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;height&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          circleIndicator.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          circleIndicator.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          circleIndicator.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          circleIndicator.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          circleIndicator.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          applyClasses(circleIndicator, &quot;h-3.5 w-3.5 fill-primary&quot;);
          const circle = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;circle&quot;);
          circle.setAttribute(&quot;cx&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;cy&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;r&quot;, &quot;10&quot;);
          circleIndicator.appendChild(circle);
          if (checked2) {
            radioContainer.appendChild(circleIndicator);
          }
          radioContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            const allRadiosInGroup = document.querySelectorAll(`[role=&quot;radio&quot;][data-name=&quot;${name2}&quot;]`);
            allRadiosInGroup.forEach((radio) =&gt; {
              radio.setAttribute(&quot;aria-checked&quot;, &quot;false&quot;);
              while (radio.firstChild) {
                radio.removeChild(radio.firstChild);
              }
            });
            radioContainer.setAttribute(&quot;aria-checked&quot;, &quot;true&quot;);
            radioContainer.appendChild(circleIndicator);
            if (onChange2) onChange2(value2);
          });
          wrapper.appendChild(radioContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) radioContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { name: name2, value: value2, checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const radioWrapper = createRadio(name2, value2, checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(radioWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { name, value, checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createRadio(name, value, checked, label, disabled, onChange, className, style);
      }
    };
  }
  function scanAndGenerateClasses(api) {
    const classNames = /* @__PURE__ */ new Set();
    const elements = document.querySelectorAll(&quot;[class]&quot;);
    elements.forEach((element) =&gt; {
      const classList = element.className;
      if (typeof classList === &quot;string&quot;) {
        classList.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
    });
    const scripts = document.querySelectorAll(&quot;script&quot;);
    scripts.forEach((script) =&gt; {
      const content = script.textContent || &quot;&quot;;
      const stringMatches = content.matchAll(/(?:className|class)\s*[=:]\s*[&quot;&#x27;`]([^&quot;&#x27;`]+)[&quot;&#x27;`]/g);
      for (const match of stringMatches) {
        const classes = match[1];
        classes.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
      const templateMatches = content.matchAll(/`([^`]*(?:p-|m-|bg-|text-|border-|rounded|flex|grid|grid-cols-|grid-rows-|grid-flow-|auto-cols-|auto-rows-|col-|row-|w-|h-|gap-)[^`]*)`/g);
      for (const match of templateMatches) {
        const classes = match[1];
        const tailwindMatches = classes.matchAll(/\b((?:p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|gap-x|gap-y|w|h|min-w|min-h|max-w|max-h|bg|text|border|rounded|flex|grid|grid-cols|grid-rows|grid-flow|auto-cols|auto-rows|col|row|inline|block|hidden|top|right|bottom|left|inset)(?:-[\w[\]/:.%-]+)?)\b/g);
        for (const tailwindMatch of tailwindMatches) {
          if (tailwindMatch[1]) classNames.add(tailwindMatch[1]);
        }
      }
    });
    if (classNames.size &gt; 0) {
      const allClasses = Array.from(classNames).join(&quot; &quot;);
      api.css(allClasses);
    }
  }
  function setupMutationObserver(api) {
    const sandboxWindow2 = window;
    const config = sandboxWindow2.$CONFIG || {};
    const autoDetectClasses = config.autoDetectClasses !== false;
    if (!autoDetectClasses) {
      return;
    }
    const observer = new MutationObserver((mutations) =&gt; {
      const classNames = /* @__PURE__ */ new Set();
      for (const mutation of mutations) {
        mutation.addedNodes.forEach((node) =&gt; {
          if (node.nodeType === Node.ELEMENT_NODE) {
            const element = node;
            if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
              element.className.split(/\s+/).forEach((cls) =&gt; {
                if (cls) classNames.add(cls);
              });
            }
            element.querySelectorAll(&quot;[class]&quot;).forEach((child) =&gt; {
              if (typeof child.className === &quot;string&quot;) {
                child.className.split(/\s+/).forEach((cls) =&gt; {
                  if (cls) classNames.add(cls);
                });
              }
            });
          }
        });
        if (mutation.type === &quot;attributes&quot; &amp;&amp; mutation.attributeName === &quot;class&quot;) {
          const element = mutation.target;
          if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
            element.className.split(/\s+/).forEach((cls) =&gt; {
              if (cls) classNames.add(cls);
            });
          }
        }
      }
      if (classNames.size &gt; 0) {
        const allClasses = Array.from(classNames).join(&quot; &quot;);
        api.css(allClasses);
      }
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: [&quot;class&quot;]
    });
  }
  const clamp = (v, min, max) =&gt; Math.min(Math.max(v, min), max);
  function parseColor(input) {
    const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${input}`).trim();
    const colorStr = cssVar || input;
    const oklchMatch = colorStr.match(/oklch\(([^)]+)\)/);
    if (oklchMatch) {
      const parts = oklchMatch[1].split(&quot;/&quot;);
      const channels = parts[0].trim().split(/\s+/);
      if (channels.length === 3) {
        const parseVal = (s, pctScale) =&gt; s.endsWith(&quot;%&quot;) ? parseFloat(s) / 100 * pctScale : parseFloat(s);
        const l = parseVal(channels[0], 1);
        const c = parseVal(channels[1], 1);
        const h = parseVal(channels[2], 360);
        let a2 = 1;
        if (parts[1] != null) {
          const alphaStr = parts[1].trim();
          a2 = alphaStr.endsWith(&quot;%&quot;) ? parseFloat(alphaStr) / 100 : parseFloat(alphaStr);
        }
        if (!isNaN(l) &amp;&amp; !isNaN(c) &amp;&amp; !isNaN(h) &amp;&amp; !isNaN(a2)) {
          return oklchToRgb({ l, c, h, a: a2 });
        }
      }
    }
    const canvas = document.createElement(&quot;canvas&quot;);
    canvas.width = 1;
    canvas.height = 1;
    const ctx = canvas.getContext(&quot;2d&quot;);
    ctx.fillStyle = colorStr;
    ctx.fillRect(0, 0, 1, 1);
    const [r, g, b, a] = ctx.getImageData(0, 0, 1, 1).data;
    return { r: r / 255, g: g / 255, b: b / 255, a: a / 255 };
  }
  function srgbToLinear(c) {
    return c &lt;= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  }
  function linearToSrgb(c) {
    return c &lt;= 31308e-7 ? c * 12.92 : 1.055 * Math.pow(c, 1 / 2.4) - 0.055;
  }
  function rgbToOklab(rgb) {
    const r = srgbToLinear(rgb.r);
    const g = srgbToLinear(rgb.g);
    const b = srgbToLinear(rgb.b);
    const l_ = 0.4122214708 * r + 0.5363325363 * g + 0.0514459929 * b;
    const m_ = 0.2119034982 * r + 0.6806995451 * g + 0.1073969566 * b;
    const s_ = 0.0883024619 * r + 0.2817188376 * g + 0.6299787005 * b;
    const l = Math.cbrt(l_);
    const m = Math.cbrt(m_);
    const s = Math.cbrt(s_);
    return {
      L: 0.2104542553 * l + 0.793617785 * m - 0.0040720468 * s,
      a: 1.9779984951 * l - 2.428592205 * m + 0.4505937099 * s,
      b: 0.0259040371 * l + 0.7827717662 * m - 0.808675766 * s,
      alpha: rgb.a
    };
  }
  function oklabToRgb(lab) {
    const l = lab.L + 0.3963377774 * lab.a + 0.2158037573 * lab.b;
    const m = lab.L - 0.1055613458 * lab.a - 0.0638541728 * lab.b;
    const s = lab.L - 0.0894841775 * lab.a - 1.291485548 * lab.b;
    const l3 = l * l * l;
    const m3 = m * m * m;
    const s3 = s * s * s;
    return {
      r: clamp(linearToSrgb(4.0767416621 * l3 - 3.3077115913 * m3 + 0.2309699292 * s3), 0, 1),
      g: clamp(linearToSrgb(-1.2684380046 * l3 + 2.6097574011 * m3 - 0.3413193965 * s3), 0, 1),
      b: clamp(linearToSrgb(-0.0041960863 * l3 - 0.7034186147 * m3 + 1.707614701 * s3), 0, 1),
      a: lab.alpha
    };
  }
  function oklabToOklch(lab) {
    const c = Math.sqrt(lab.a * lab.a + lab.b * lab.b);
    let h = Math.atan2(lab.b, lab.a) * 180 / Math.PI;
    if (h &lt; 0) h += 360;
    return { l: lab.L, c, h, a: lab.alpha };
  }
  function oklchToOklab(oklch) {
    const hRad = oklch.h * Math.PI / 180;
    return {
      L: oklch.l,
      a: oklch.c * Math.cos(hRad),
      b: oklch.c * Math.sin(hRad),
      alpha: oklch.a
    };
  }
  function rgbToOklch(rgb) {
    return oklabToOklch(rgbToOklab(rgb));
  }
  function oklchToRgb(oklch) {
    return oklabToRgb(oklchToOklab(oklch));
  }
  function rgbToHsl(rgb) {
    const { r, g, b } = rgb;
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    const d = max - min;
    const l = (max + min) / 2;
    if (d === 0) return { h: 0, s: 0, l: l * 100, a: rgb.a };
    const s = l &gt; 0.5 ? d / (2 - max - min) : d / (max + min);
    let h = 0;
    if (max === r) h = ((g - b) / d + (g &lt; b ? 6 : 0)) / 6;
    else if (max === g) h = ((b - r) / d + 2) / 6;
    else h = ((r - g) / d + 4) / 6;
    return { h: h * 360, s: s * 100, l: l * 100, a: rgb.a };
  }
  function hslToRgb(hsl) {
    const h = hsl.h / 360;
    const s = hsl.s / 100;
    const l = hsl.l / 100;
    if (s === 0) return { r: l, g: l, b: l, a: hsl.a };
    const hue2rgb = (p2, q2, t) =&gt; {
      if (t &lt; 0) t += 1;
      if (t &gt; 1) t -= 1;
      if (t &lt; 1 / 6) return p2 + (q2 - p2) * 6 * t;
      if (t &lt; 1 / 2) return q2;
      if (t &lt; 2 / 3) return p2 + (q2 - p2) * (2 / 3 - t) * 6;
      return p2;
    };
    const q = l &lt; 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    return {
      r: hue2rgb(p, q, h + 1 / 3),
      g: hue2rgb(p, q, h),
      b: hue2rgb(p, q, h - 1 / 3),
      a: hsl.a
    };
  }
  function formatOklch(oklch) {
    const l = Math.round(oklch.l * 1e3) / 1e3;
    const c = Math.round(oklch.c * 1e3) / 1e3;
    const h = Math.round(oklch.h * 100) / 100;
    if (oklch.a &lt; 1) {
      const a = Math.round(oklch.a * 1e3) / 1e3;
      return `oklch(${l} ${c} ${h} / ${a})`;
    }
    return `oklch(${l} ${c} ${h})`;
  }
  function determineAdjustSpace(opts) {
    if (opts.space) return opts.space;
    const hasOklch = opts.lightness != null || opts.chroma != null || opts.hue != null;
    const hasHsl = opts.saturation != null;
    const hasRgb = opts.red != null || opts.green != null || opts.blue != null;
    if (hasHsl &amp;&amp; !hasOklch &amp;&amp; !hasRgb) return &quot;hsl&quot;;
    if (hasRgb &amp;&amp; !hasOklch &amp;&amp; !hasHsl) return &quot;rgb&quot;;
    if (hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    if (!hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    throw new Error(
      &quot;[getColor] Cannot mix channels from different color spaces. Use the space parameter to disambiguate, or only use channels from one space.&quot;
    );
  }
  function adjustColor(input, opts) {
    const rgba = parseColor(input);
    const space = determineAdjustSpace(opts);
    const alphaAdj = opts.alpha ?? 0;
    if (space === &quot;oklch&quot;) {
      const oklch = rgbToOklch(rgba);
      oklch.l = clamp(oklch.l + (opts.lightness ?? 0), 0, 1);
      oklch.c = Math.max(0, oklch.c + (opts.chroma ?? 0));
      oklch.h = ((oklch.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      oklch.a = clamp(oklch.a + alphaAdj, 0, 1);
      return formatOklch(oklch);
    }
    if (space === &quot;hsl&quot;) {
      const hsl = rgbToHsl(rgba);
      hsl.h = ((hsl.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      hsl.s = clamp(hsl.s + (opts.saturation ?? 0), 0, 100);
      hsl.l = clamp(hsl.l + (opts.lightness ?? 0), 0, 100);
      hsl.a = clamp(hsl.a + alphaAdj, 0, 1);
      const rgb = hslToRgb(hsl);
      return formatOklch(rgbToOklch(rgb));
    }
    const r = clamp(rgba.r + (opts.red ?? 0) / 255, 0, 1);
    const g = clamp(rgba.g + (opts.green ?? 0) / 255, 0, 1);
    const b = clamp(rgba.b + (opts.blue ?? 0) / 255, 0, 1);
    const a = clamp(rgba.a + alphaAdj, 0, 1);
    return formatOklch(rgbToOklch({ r, g, b, a }));
  }
  function initializeSandbox() {
    const themeChangeCallbacks = [];
    const resizeCallbacks = [];
    let currentTheme = document.documentElement.classList.contains(&quot;dark&quot;) ? &quot;dark&quot; : &quot;light&quot;;
    const cssGenerator = createCSSGenerator();
    const api = {
      get theme() {
        return currentTheme;
      },
      size: {
        get width() {
          return window.innerWidth;
        }
      },
      onResize: (callback) =&gt; {
        resizeCallbacks.push(callback);
        callback(window.innerWidth);
      },
      onThemeChange: (callback) =&gt; {
        themeChangeCallbacks.push(callback);
        callback(currentTheme);
      },
      requestResize: (height) =&gt; {
        window.parent.postMessage(
          {
            event: &quot;resize-request&quot;,
            data: { height }
          },
          &quot;*&quot;
        );
      },
      getColor: (color, adjust) =&gt; {
        if (adjust) {
          return adjustColor(color, adjust);
        }
        const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${color}`).trim();
        if (cssVar) return cssVar;
        return formatOklch(rgbToOklch(parseColor(color)));
      },
      getFont: (name) =&gt; {
        if (name === &quot;default&quot;) {
          const value = getComputedStyle(document.body).fontFamily;
          return value.trim();
        } else if (name === &quot;mono&quot;) {
          return &#x27;&quot;Space Mono&quot;, ui-monospace, &quot;Cascadia Code&quot;, monospace&#x27;;
        }
        return &quot;&quot;;
      },
      css: cssGenerator,
      ui: createUIHelpers(cssGenerator),
      emit: (event, data) =&gt; {
        void event;
        void data;
      }
    };
    window.addEventListener(&quot;message&quot;, (event) =&gt; {
      if (event.data?.event === &quot;theme-change&quot;) {
        const newTheme = event.data.data.theme;
        if (newTheme === &quot;dark&quot;) {
          document.documentElement.classList.add(&quot;dark&quot;);
        } else {
          document.documentElement.classList.remove(&quot;dark&quot;);
        }
        currentTheme = newTheme;
        themeChangeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newTheme);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onThemeChange callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }
    });
    let resizeTimeout;
    window.addEventListener(&quot;resize&quot;, () =&gt; {
      clearTimeout(resizeTimeout);
      resizeTimeout = window.setTimeout(() =&gt; {
        const newWidth = window.innerWidth;
        resizeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newWidth);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onResize callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }, 150);
    });
    const sandboxWindow2 = window;
    sandboxWindow2.sandboxContext = api;
    setupAutoResize(api);
    scanAndGenerateClasses(api);
    setupMutationObserver(api);
  }
  function setupAutoResize(api) {
    let lastHeight = 0;
    const updateHeight = () =&gt; {
      const root2 = document.getElementById(&quot;root&quot;);
      if (!root2) return;
      const currentHeight = root2.scrollHeight;
      if (currentHeight !== lastHeight) {
        lastHeight = currentHeight;
        api.requestResize(currentHeight);
      }
    };
    const resizeObserver = new ResizeObserver(() =&gt; {
      updateHeight();
    });
    const root = document.getElementById(&quot;root&quot;);
    if (root) {
      resizeObserver.observe(root);
    }
    setTimeout(updateHeight, 0);
  }
  initializeSandbox();
  function executeMountIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const root = document.getElementById(&quot;root&quot;);
      if (!root) {
        console.error(&quot;[DynamicBlock Error] Root element not found - cannot execute mount()&quot;);
        return;
      }
      if (typeof sandboxWindow2.mount === &quot;function&quot;) {
        try {
          sandboxWindow2.mount({ root, api, props });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in mount() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error in executeMountIfExists():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  function executeDrawIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const drawFn = sandboxWindow2.draw;
      if (!api) {
        console.error(&quot;[DynamicBlock Error] Sandbox context not initialized&quot;);
        return;
      }
      if (typeof drawFn !== &quot;function&quot;) {
        return;
      }
      let canvas = document.querySelector(&quot;canvas&quot;);
      if (!canvas) {
        const root = document.getElementById(&quot;root&quot;);
        if (!root) {
          console.error(&quot;[DynamicBlock Error] Root element not found - cannot create canvas&quot;);
          return;
        }
        root.innerHTML = &quot;&quot;;
        canvas = document.createElement(&quot;canvas&quot;);
        canvas.className = api.css(&quot;[&amp;:not([width])]:w-full [&amp;[width]]:mx-auto&quot;);
        root.appendChild(canvas);
      }
      const ariaLabel = sandboxWindow2.__CANVAS_ARIA_LABEL__;
      if (ariaLabel &amp;&amp; typeof ariaLabel === &quot;string&quot;) {
        canvas.setAttribute(&quot;aria-label&quot;, ariaLabel);
      }
      const autoRedrawConfig = sandboxWindow2.autoRedraw || {
        onThemeChange: true,
        onResize: true
      };
      const themeChangeConfig = autoRedrawConfig.onThemeChange === false ? false : autoRedrawConfig.onThemeChange || 0;
      const resizeConfig = autoRedrawConfig.onResize === false ? false : autoRedrawConfig.onResize === true ? 150 : autoRedrawConfig.onResize;
      let resizeTimeout;
      const executeDraw = () =&gt; {
        try {
          const theme = api.theme;
          const width = window.innerWidth;
          drawFn({ canvas, api, theme, width, props });
          requestAnimationFrame(() =&gt; {
            const root = document.getElementById(&quot;root&quot;);
            if (root) {
              const height = root.scrollHeight;
              if (height &gt; 0) {
                api.requestResize(height);
              }
            }
          });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in draw() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      };
      executeDraw();
      if (themeChangeConfig !== false) {
        api.onThemeChange(() =&gt; {
          const debounce = typeof themeChangeConfig === &quot;number&quot; ? themeChangeConfig : 0;
          if (debounce === 0) {
            executeDraw();
          } else {
            setTimeout(executeDraw, debounce);
          }
        });
      }
      if (resizeConfig !== false) {
        api.onResize(() =&gt; {
          clearTimeout(resizeTimeout);
          const debounce = typeof resizeConfig === &quot;number&quot; ? resizeConfig : 150;
          resizeTimeout = window.setTimeout(executeDraw, debounce);
        });
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error setting up draw():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  const sandboxWindow = window;
  sandboxWindow.executeMountIfExists = executeMountIfExists;
  sandboxWindow.executeDrawIfExists = executeDrawIfExists;
})();

  &lt;/script&gt;

  &lt;!-- User code script with source mapping --&gt;
  &lt;script&gt;//# sourceURL=content/puzzles/cryptography/average-salaries-2.md

































































































































































































function draw(options) {
  const { canvas, api, width: _width, props } = options;
  const { n, showExtraPaths = false, maxWidth = 600 } = props || {};

  const width = Math.min(_width, maxWidth);
  const lineThickness = 2;
  const fontSize = 16;
  const labelOffset = 20;
  const canvasSize = width + lineThickness * 2;
  canvas.width = canvasSize;
  canvas.height = canvasSize;

  const centerX = canvasSize / 2;
  const centerY = canvasSize / 2;
  const radius = Math.max(0, (width / 2) - labelOffset - fontSize / 2);

  const ctx = canvas.getContext(&#x27;2d&#x27;);
  const fgColor = api.getColor(&#x27;foreground&#x27;);
  const mutedColor = api.getColor(&#x27;blue-500&#x27;);
  const font = api.getFont(&#x27;default&#x27;);

  // Calculate point positions around the circle
  const points = [];
  for (let i = 0; i &lt; n; i++) {
    const angle = (i / n) * 2 * Math.PI - Math.PI / 2; // Start from top
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);
    points.push({ x, y, angle });
  }

  // Draw lines between all pairs of points
  ctx.strokeStyle = fgColor;
  ctx.lineWidth = lineThickness;
  for (let i = 0; i &lt; n; i++) {
    for (let j = i + 1; j &lt; n; j++) {
      ctx.beginPath();
      ctx.moveTo(points[i].x, points[i].y);
      ctx.lineTo(points[j].x, points[j].y);
      ctx.stroke();
    }
  }

  // Draw extra arc paths if requested
  if (showExtraPaths) {
    ctx.strokeStyle = mutedColor;
    ctx.lineWidth = lineThickness;
    for (let i = 1; i &lt; n - 1; i += 2) {
      const startAngle = points[i].angle;
      const endAngle = points[i + 1].angle;

      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, startAngle, endAngle);
      ctx.stroke();
    }
  }

  // Draw and label points
  ctx.fillStyle = fgColor;
  const pointRadius = 5;

  for (let i = 0; i &lt; n; i++) {
    // Draw point
    ctx.beginPath();
    ctx.arc(points[i].x, points[i].y, pointRadius, 0, 2 * Math.PI);
    ctx.fill();

    // Draw label
    const labelAngle = points[i].angle;
    const labelX = centerX + (radius + labelOffset) * Math.cos(labelAngle);
    const labelY = centerY + (radius + labelOffset) * Math.sin(labelAngle);

    ctx.font = `${fontSize}px ${font}`;
    ctx.textAlign = &#x27;center&#x27;;
    ctx.textBaseline = &#x27;middle&#x27;;
    ctx.fillText((i + 1).toString(), labelX, labelY);
  }
}&lt;/script&gt;

  &lt;!-- Execution script --&gt;
  &lt;script&gt;
    // Execute mount() if defined, passing props
    if (typeof executeMountIfExists === &#x27;function&#x27;) {
      executeMountIfExists(window.__COMPONENT_PROPS__);
    }

    // Execute draw() if defined, passing props
    if (typeof executeDrawIfExists === &#x27;function&#x27;) {
      executeDrawIfExists(window.__COMPONENT_PROPS__);
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" style="width:100%;height:300px" title="Interactive content 2"></iframe></div><p>With our additional edges, we now have 4 vertices of degree 6, and 2 vertices of degree 5. We can start at employee 1 and end at employee 6. This is one of the possible Eulerian paths:</p><p>1 → 2 → 3 → 4 → 5 → 6 → 1 → 3 → 5 → 1 → 4 → 6 → 2 → 4 → 5 → 2 → 3 → 6</p><p>The length of the path is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>n</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><mn>2</mn></mfrac><mo>+</mo><mfrac><mrow><mo>(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo>)</mo></mrow><mn>2</mn></mfrac><mo>=</mo><mn>17</mn></mrow><annotation>\frac{n(n-1)}{2} + \frac{(n - 2)}{2}= 17</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1.355em;vertical-align:-0.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">17</span></span></span></span>, where the second term accounts for the additional blue edges.</p><p>To summarise, the minimum length of this path (and thus the minimum number of emails sent) is given as:</p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>{</mo><mtable><mtr><mtd><mfrac><mrow><mi>n</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><mn>2</mn></mfrac></mtd><mtd><mrow><mtext>if </mtext><mi>n</mi><mtext> is even</mtext></mrow></mtd></mtr><mtr><mtd><mrow><mfrac><mrow><mi>n</mi><mo>(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo>)</mo></mrow><mn>2</mn></mfrac><mo>+</mo><mfrac><mrow><mo>(</mo><mi>n</mi><mo>−</mo><mn>2</mn><mo>)</mo></mrow><mn>2</mn></mfrac></mrow></mtd><mtd><mrow><mtext>if </mtext><mi>n</mi><mtext> is odd</mtext></mrow></mtd></mtr></mtable></mrow><annotation>\begin{cases}
  \frac{n(n-1)}{2} &amp;\text{if } n \text{ is even} \\
  \frac{n(n-1)}{2} + \frac{(n - 2)}{2} &amp;\text{if } n \text{ is odd}
\end{cases}</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.692em"><span style="top:-3.692em"><span class="pstrut" style="height:3.01em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.25em"><span class="pstrut" style="height:3.01em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:0.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.192em"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.692em"><span style="top:-3.692em"><span class="pstrut" style="height:3.01em"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathnormal">n</span><span class="mord text"><span class="mord"> is even</span></span></span></span><span style="top:-2.25em"><span class="pstrut" style="height:3.01em"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathnormal">n</span><span class="mord text"><span class="mord"> is odd</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.192em"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><p>For our situation with 12 employees, this will be our graph.</p><div class="dynamic-block-container flex justify-center"><iframe class="border-0 block" sandbox="allow-scripts" srcDoc="&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#x27;none&#x27;; script-src &#x27;unsafe-inline&#x27;; style-src &#x27;unsafe-inline&#x27;; img-src data:;&quot;&gt;
  &lt;style&gt;
    /* Prevent scrollbars in iframe while allowing content to expand */
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: auto;
      min-height: 0;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    #root {
      /* flex: 1; */
      /* min-height: 0; */
    }

    /* Theme CSS variables (light/dark mode) */
    /* Theme overrides and customizations */

:root {
  --width-container: 1000px;
}

/* Text selection styling (applied to both main app and iframes) */
::selection {
  background-color: var(--color-selection);
  color: var(--color-selection-foreground);
}


:root {
  --radius: 0.5rem;

  /* Navy */
  --color-navy-50: oklch(0.97 0.015 220);
  --color-navy-100: oklch(0.94 0.020 220);
  --color-navy-200: oklch(0.88 0.030 220);
  --color-navy-300: oklch(0.80 0.045 220);
  --color-navy-400: oklch(0.68 0.060 220);
  --color-navy-500: oklch(0.55 0.075 220);
  --color-navy-600: oklch(0.45 0.080 220);
  --color-navy-700: oklch(0.35 0.075 220);
  --color-navy-800: oklch(0.27 0.065 220);
  --color-navy-900: oklch(0.20 0.050 220);
  --color-navy-950: oklch(0.15 0.040 220);

  /* Frost */
  --color-frost-50: oklch(0.98 0.010 250);
  --color-frost-100: oklch(0.95 0.015 250);
  --color-frost-200: oklch(0.90 0.025 250);
  --color-frost-300: oklch(0.83 0.035 250);
  --color-frost-400: oklch(0.74 0.045 250);
  --color-frost-500: oklch(0.65 0.055 250);
  --color-frost-600: oklch(0.55 0.060 250);
  --color-frost-700: oklch(0.45 0.055 250);
  --color-frost-800: oklch(0.35 0.045 250);
  --color-frost-900: oklch(0.27 0.035 250);
  --color-frost-950: oklch(0.20 0.025 250);

  /* Lagoon */
  --color-lagoon-50: oklch(0.97 0.015 185);
  --color-lagoon-100: oklch(0.94 0.025 185);
  --color-lagoon-200: oklch(0.88 0.040 185);
  --color-lagoon-300: oklch(0.80 0.055 185);
  --color-lagoon-400: oklch(0.70 0.070 185);
  --color-lagoon-500: oklch(0.60 0.080 185);
  --color-lagoon-600: oklch(0.50 0.085 185);
  --color-lagoon-700: oklch(0.40 0.080 185);
  --color-lagoon-800: oklch(0.32 0.070 185);
  --color-lagoon-900: oklch(0.25 0.055 185);
  --color-lagoon-950: oklch(0.18 0.040 185);

  /* Evergreen */
  --color-evergreen-50: oklch(0.97 0.020 155);
  --color-evergreen-100: oklch(0.93 0.035 155);
  --color-evergreen-200: oklch(0.87 0.055 155);
  --color-evergreen-300: oklch(0.79 0.070 155);
  --color-evergreen-400: oklch(0.69 0.085 155);
  --color-evergreen-500: oklch(0.59 0.095 155);
  --color-evergreen-600: oklch(0.49 0.100 155);
  --color-evergreen-700: oklch(0.41 0.095 155);
  --color-evergreen-800: oklch(0.33 0.080 155);
  --color-evergreen-900: oklch(0.27 0.065 155);
  --color-evergreen-950: oklch(0.21 0.050 155);

  /* Sand */
  --color-sand-50: oklch(0.98 0.012 95);
  --color-sand-100: oklch(0.95 0.020 95);
  --color-sand-200: oklch(0.90 0.035 95);
  --color-sand-300: oklch(0.84 0.050 95);
  --color-sand-400: oklch(0.76 0.065 95);
  --color-sand-500: oklch(0.68 0.080 95);
  --color-sand-600: oklch(0.60 0.090 95);
  --color-sand-700: oklch(0.50 0.085 95);
  --color-sand-800: oklch(0.40 0.070 95);
  --color-sand-900: oklch(0.32 0.055 95);
  --color-sand-950: oklch(0.26 0.040 95);

  /* Error */
  --color-error-50: oklch(0.97 0.020 25);
  --color-error-100: oklch(0.94 0.035 25);
  --color-error-200: oklch(0.88 0.055 25);
  --color-error-300: oklch(0.80 0.075 25);
  --color-error-400: oklch(0.70 0.095 25);
  --color-error-500: oklch(0.60 0.110 25);
  --color-error-600: oklch(0.50 0.115 25);
  --color-error-700: oklch(0.42 0.110 25);
  --color-error-800: oklch(0.34 0.095 25);
  --color-error-900: oklch(0.28 0.075 25);
  --color-error-950: oklch(0.22 0.055 25);

  /* Warning */
  --color-warning-50: oklch(0.97 0.020 75);
  --color-warning-100: oklch(0.94 0.035 75);
  --color-warning-200: oklch(0.89 0.060 75);
  --color-warning-300: oklch(0.82 0.085 75);
  --color-warning-400: oklch(0.73 0.105 75);
  --color-warning-500: oklch(0.65 0.120 75);
  --color-warning-600: oklch(0.56 0.125 75);
  --color-warning-700: oklch(0.47 0.115 75);
  --color-warning-800: oklch(0.38 0.095 75);
  --color-warning-900: oklch(0.30 0.070 75);
  --color-warning-950: oklch(0.24 0.050 75);

  /* Success */
  --color-success-50: oklch(0.97 0.020 165);
  --color-success-100: oklch(0.93 0.035 165);
  --color-success-200: oklch(0.87 0.055 165);
  --color-success-300: oklch(0.79 0.075 165);
  --color-success-400: oklch(0.69 0.095 165);
  --color-success-500: oklch(0.59 0.110 165);
  --color-success-600: oklch(0.49 0.115 165);
  --color-success-700: oklch(0.41 0.105 165);
  --color-success-800: oklch(0.33 0.090 165);
  --color-success-900: oklch(0.27 0.070 165);
  --color-success-950: oklch(0.21 0.050 165);

  /* ======================================================
     Tailwind-like Colour Palette
     Inspired by standard Tailwind CSS v4 colours for
     diagrams and illustrations. For website UI, use the
     mountain theme palette above or semantic colours
     instead.
     ====================================================== */

  /* Red */
  --color-red-50: oklch(0.971 0.008 17.38);
  --color-red-100: oklch(0.936 0.019 17.717);
  --color-red-200: oklch(0.885 0.037 18.334);
  --color-red-300: oklch(0.808 0.068 19.571);
  --color-red-400: oklch(0.704 0.115 22.216);
  --color-red-500: oklch(0.637 0.142 25.331);
  --color-red-600: oklch(0.577 0.147 27.325);
  --color-red-700: oklch(0.505 0.128 27.518);
  --color-red-800: oklch(0.444 0.106 26.899);
  --color-red-900: oklch(0.396 0.085 25.723);
  --color-red-950: oklch(0.258 0.055 26.042);
  --color-red: var(--color-red-400);

  /* Orange */
  --color-orange-50: oklch(0.980 0.010 73.684);
  --color-orange-100: oklch(0.954 0.023 75.164);
  --color-orange-200: oklch(0.901 0.046 70.697);
  --color-orange-300: oklch(0.837 0.077 66.29);
  --color-orange-400: oklch(0.750 0.110 55.934);
  --color-orange-500: oklch(0.705 0.128 47.604);
  --color-orange-600: oklch(0.646 0.133 41.116);
  --color-orange-700: oklch(0.553 0.117 38.402);
  --color-orange-800: oklch(0.470 0.094 37.304);
  --color-orange-900: oklch(0.408 0.074 38.172);
  --color-orange-950: oklch(0.266 0.047 36.259);
  --color-orange: var(--color-orange-400);

  /* Amber */
  --color-amber-50: oklch(0.987 0.013 95.277);
  --color-amber-100: oklch(0.962 0.035 95.617);
  --color-amber-200: oklch(0.924 0.072 95.746);
  --color-amber-300: oklch(0.879 0.101 91.605);
  --color-amber-400: oklch(0.828 0.113 84.429);
  --color-amber-500: oklch(0.769 0.113 70.08);
  --color-amber-600: oklch(0.666 0.107 58.318);
  --color-amber-700: oklch(0.555 0.098 48.998);
  --color-amber-800: oklch(0.473 0.082 46.201);
  --color-amber-900: oklch(0.414 0.067 45.904);
  --color-amber-950: oklch(0.279 0.046 45.635);
  --color-amber: var(--color-amber-400);

  /* Yellow */
  --color-yellow-50: oklch(0.987 0.016 102.212);
  --color-yellow-100: oklch(0.973 0.043 103.193);
  --color-yellow-200: oklch(0.945 0.077 101.54);
  --color-yellow-300: oklch(0.905 0.109 98.111);
  --color-yellow-400: oklch(0.852 0.119 91.936);
  --color-yellow-500: oklch(0.795 0.110 86.047);
  --color-yellow-600: oklch(0.681 0.097 75.834);
  --color-yellow-700: oklch(0.554 0.081 66.442);
  --color-yellow-800: oklch(0.476 0.068 61.907);
  --color-yellow-900: oklch(0.421 0.057 57.708);
  --color-yellow-950: oklch(0.286 0.040 53.813);
  --color-yellow: var(--color-yellow-400);

  /* Lime */
  --color-lime-50: oklch(0.986 0.019 120.757);
  --color-lime-100: oklch(0.967 0.040 122.328);
  --color-lime-200: oklch(0.938 0.076 124.321);
  --color-lime-300: oklch(0.897 0.118 126.665);
  --color-lime-400: oklch(0.841 0.143 128.85);
  --color-lime-500: oklch(0.768 0.140 130.85);
  --color-lime-600: oklch(0.648 0.120 131.684);
  --color-lime-700: oklch(0.532 0.094 131.589);
  --color-lime-800: oklch(0.453 0.074 130.933);
  --color-lime-900: oklch(0.405 0.061 131.063);
  --color-lime-950: oklch(0.274 0.043 132.109);
  --color-lime: var(--color-lime-400);

  /* Green */
  --color-green-50: oklch(0.982 0.011 155.826);
  --color-green-100: oklch(0.962 0.026 156.743);
  --color-green-200: oklch(0.925 0.050 155.995);
  --color-green-300: oklch(0.871 0.090 154.449);
  --color-green-400: oklch(0.792 0.125 151.711);
  --color-green-500: oklch(0.723 0.131 149.579);
  --color-green-600: oklch(0.627 0.116 149.214);
  --color-green-700: oklch(0.527 0.092 150.069);
  --color-green-800: oklch(0.448 0.071 151.328);
  --color-green-900: oklch(0.393 0.057 152.535);
  --color-green-950: oklch(0.266 0.039 152.934);
  --color-green: var(--color-green-400);

  /* Emerald */
  --color-emerald-50: oklch(0.979 0.013 166.113);
  --color-emerald-100: oklch(0.950 0.031 163.051);
  --color-emerald-200: oklch(0.905 0.056 164.15);
  --color-emerald-300: oklch(0.845 0.086 164.978);
  --color-emerald-400: oklch(0.765 0.106 163.223);
  --color-emerald-500: oklch(0.696 0.102 162.48);
  --color-emerald-600: oklch(0.596 0.087 163.225);
  --color-emerald-700: oklch(0.508 0.071 165.612);
  --color-emerald-800: oklch(0.432 0.057 166.913);
  --color-emerald-900: oklch(0.378 0.046 168.94);
  --color-emerald-950: oklch(0.262 0.031 172.552);
  --color-emerald: var(--color-emerald-400);

  /* Teal */
  --color-teal-50: oklch(0.984 0.008 180.72);
  --color-teal-100: oklch(0.953 0.031 180.801);
  --color-teal-200: oklch(0.910 0.058 180.426);
  --color-teal-300: oklch(0.855 0.083 181.071);
  --color-teal-400: oklch(0.777 0.091 181.912);
  --color-teal-500: oklch(0.704 0.084 182.503);
  --color-teal-600: oklch(0.600 0.071 184.704);
  --color-teal-700: oklch(0.511 0.058 186.391);
  --color-teal-800: oklch(0.437 0.047 188.216);
  --color-teal-900: oklch(0.386 0.038 188.416);
  --color-teal-950: oklch(0.277 0.028 192.524);
  --color-teal: var(--color-teal-400);

  /* Cyan */
  --color-cyan-50: oklch(0.984 0.011 200.873);
  --color-cyan-100: oklch(0.956 0.027 203.388);
  --color-cyan-200: oklch(0.917 0.048 205.041);
  --color-cyan-300: oklch(0.865 0.076 207.078);
  --color-cyan-400: oklch(0.789 0.092 211.53);
  --color-cyan-500: oklch(0.715 0.086 215.221);
  --color-cyan-600: oklch(0.609 0.076 221.723);
  --color-cyan-700: oklch(0.520 0.063 223.128);
  --color-cyan-800: oklch(0.450 0.051 224.283);
  --color-cyan-900: oklch(0.398 0.042 227.392);
  --color-cyan-950: oklch(0.302 0.034 229.695);
  --color-cyan: var(--color-cyan-400);

  /* Sky */
  --color-sky-50: oklch(0.977 0.008 236.62);
  --color-sky-100: oklch(0.951 0.016 236.824);
  --color-sky-200: oklch(0.901 0.035 230.902);
  --color-sky-300: oklch(0.828 0.067 230.318);
  --color-sky-400: oklch(0.746 0.096 232.661);
  --color-sky-500: oklch(0.685 0.101 237.323);
  --color-sky-600: oklch(0.588 0.095 241.966);
  --color-sky-700: oklch(0.500 0.080 242.749);
  --color-sky-800: oklch(0.443 0.066 240.79);
  --color-sky-900: oklch(0.391 0.054 240.876);
  --color-sky-950: oklch(0.293 0.040 243.157);
  --color-sky: var(--color-sky-400);

  /* Blue */
  --color-blue-50: oklch(0.970 0.008 254.604);
  --color-blue-100: oklch(0.932 0.019 255.585);
  --color-blue-200: oklch(0.882 0.035 254.128);
  --color-blue-300: oklch(0.809 0.063 251.813);
  --color-blue-400: oklch(0.707 0.099 254.624);
  --color-blue-500: oklch(0.623 0.128 259.815);
  --color-blue-600: oklch(0.546 0.147 262.881);
  --color-blue-700: oklch(0.488 0.146 264.376);
  --color-blue-800: oklch(0.424 0.119 265.638);
  --color-blue-900: oklch(0.379 0.088 265.522);
  --color-blue-950: oklch(0.282 0.055 267.935);
  --color-blue: var(--color-blue-400);

  /* Indigo */
  --color-indigo-50: oklch(0.962 0.011 272.314);
  --color-indigo-100: oklch(0.930 0.020 272.788);
  --color-indigo-200: oklch(0.870 0.039 274.039);
  --color-indigo-300: oklch(0.785 0.069 274.713);
  --color-indigo-400: oklch(0.673 0.109 276.935);
  --color-indigo-500: oklch(0.585 0.140 277.117);
  --color-indigo-600: oklch(0.511 0.157 276.966);
  --color-indigo-700: oklch(0.457 0.144 277.023);
  --color-indigo-800: oklch(0.398 0.117 277.366);
  --color-indigo-900: oklch(0.359 0.086 278.697);
  --color-indigo-950: oklch(0.257 0.054 281.288);
  --color-indigo: var(--color-indigo-400);

  /* Violet */
  --color-violet-50: oklch(0.969 0.010 293.756);
  --color-violet-100: oklch(0.943 0.017 294.588);
  --color-violet-200: oklch(0.894 0.034 293.283);
  --color-violet-300: oklch(0.811 0.067 293.571);
  --color-violet-400: oklch(0.702 0.110 293.541);
  --color-violet-500: oklch(0.606 0.150 292.717);
  --color-violet-600: oklch(0.541 0.169 293.009);
  --color-violet-700: oklch(0.491 0.162 292.581);
  --color-violet-800: oklch(0.432 0.139 292.759);
  --color-violet-900: oklch(0.380 0.113 293.745);
  --color-violet-950: oklch(0.283 0.085 291.089);
  --color-violet: var(--color-violet-400);

  /* Purple */
  --color-purple-50: oklch(0.977 0.008 308.299);
  --color-purple-100: oklch(0.946 0.020 307.174);
  --color-purple-200: oklch(0.902 0.038 306.703);
  --color-purple-300: oklch(0.827 0.071 306.383);
  --color-purple-400: oklch(0.714 0.122 305.504);
  --color-purple-500: oklch(0.627 0.159 303.9);
  --color-purple-600: oklch(0.558 0.173 302.321);
  --color-purple-700: oklch(0.496 0.159 301.924);
  --color-purple-800: oklch(0.438 0.131 303.724);
  --color-purple-900: oklch(0.381 0.106 304.987);
  --color-purple-950: oklch(0.291 0.089 302.717);
  --color-purple: var(--color-purple-400);

  /* Fuchsia */
  --color-fuchsia-50: oklch(0.977 0.010 320.058);
  --color-fuchsia-100: oklch(0.952 0.022 318.852);
  --color-fuchsia-200: oklch(0.903 0.046 319.62);
  --color-fuchsia-300: oklch(0.833 0.087 321.434);
  --color-fuchsia-400: oklch(0.740 0.143 322.16);
  --color-fuchsia-500: oklch(0.667 0.177 322.15);
  --color-fuchsia-600: oklch(0.591 0.176 322.896);
  --color-fuchsia-700: oklch(0.518 0.152 323.949);
  --color-fuchsia-800: oklch(0.452 0.127 324.591);
  --color-fuchsia-900: oklch(0.401 0.102 325.612);
  --color-fuchsia-950: oklch(0.293 0.082 325.661);
  --color-fuchsia: var(--color-fuchsia-400);

  /* Pink */
  --color-pink-50: oklch(0.971 0.008 343.198);
  --color-pink-100: oklch(0.948 0.017 342.258);
  --color-pink-200: oklch(0.899 0.037 343.231);
  --color-pink-300: oklch(0.823 0.072 346.018);
  --color-pink-400: oklch(0.718 0.121 349.761);
  --color-pink-500: oklch(0.656 0.145 354.308);
  --color-pink-600: oklch(0.592 0.149 0.584);
  --color-pink-700: oklch(0.525 0.134 3.958);
  --color-pink-800: oklch(0.459 0.112 3.815);
  --color-pink-900: oklch(0.408 0.092 2.432);
  --color-pink-950: oklch(0.284 0.065 3.907);
  --color-pink: var(--color-pink-400);

  /* Rose */
  --color-rose-50: oklch(0.969 0.009 12.422);
  --color-rose-100: oklch(0.941 0.018 12.58);
  --color-rose-200: oklch(0.892 0.035 10.001);
  --color-rose-300: oklch(0.810 0.070 11.638);
  --color-rose-400: oklch(0.712 0.116 13.428);
  --color-rose-500: oklch(0.645 0.148 16.439);
  --color-rose-600: oklch(0.586 0.152 17.585);
  --color-rose-700: oklch(0.514 0.133 16.935);
  --color-rose-800: oklch(0.455 0.113 13.697);
  --color-rose-900: oklch(0.410 0.095 10.272);
  --color-rose-950: oklch(0.271 0.063 12.094);
  --color-rose: var(--color-rose-400);

  /* Slate */
  --color-slate-50: oklch(0.984 0.002 247.858);
  --color-slate-100: oklch(0.968 0.004 247.896);
  --color-slate-200: oklch(0.929 0.008 255.508);
  --color-slate-300: oklch(0.869 0.013 252.894);
  --color-slate-400: oklch(0.704 0.024 256.788);
  --color-slate-500: oklch(0.554 0.028 257.417);
  --color-slate-600: oklch(0.446 0.026 257.281);
  --color-slate-700: oklch(0.372 0.026 257.287);
  --color-slate-800: oklch(0.279 0.025 260.031);
  --color-slate-900: oklch(0.208 0.025 265.755);
  --color-slate-950: oklch(0.129 0.025 264.695);
  --color-slate: var(--color-slate-400);

  /* Gray */
  --color-gray-50: oklch(0.985 0.001 247.839);
  --color-gray-100: oklch(0.967 0.002 264.542);
  --color-gray-200: oklch(0.928 0.004 264.531);
  --color-gray-300: oklch(0.872 0.006 258.338);
  --color-gray-400: oklch(0.707 0.013 261.325);
  --color-gray-500: oklch(0.551 0.016 264.364);
  --color-gray-600: oklch(0.446 0.018 256.802);
  --color-gray-700: oklch(0.373 0.020 259.733);
  --color-gray-800: oklch(0.278 0.020 256.848);
  --color-gray-900: oklch(0.210 0.020 264.665);
  --color-gray-950: oklch(0.130 0.017 261.692);
  --color-gray: var(--color-gray-400);

  /* Zinc */
  --color-zinc-50: oklch(0.985 0 0);
  --color-zinc-100: oklch(0.967 0.001 286.375);
  --color-zinc-200: oklch(0.920 0.002 286.32);
  --color-zinc-300: oklch(0.871 0.004 286.286);
  --color-zinc-400: oklch(0.705 0.009 286.067);
  --color-zinc-500: oklch(0.552 0.010 285.938);
  --color-zinc-600: oklch(0.442 0.010 285.786);
  --color-zinc-700: oklch(0.370 0.008 285.805);
  --color-zinc-800: oklch(0.274 0.004 286.033);
  --color-zinc-900: oklch(0.210 0.004 285.885);
  --color-zinc-950: oklch(0.141 0.003 285.823);
  --color-zinc: var(--color-zinc-400);

  /* Neutral */
  --color-neutral-50: oklch(0.985 0 0);
  --color-neutral-100: oklch(0.970 0 0);
  --color-neutral-200: oklch(0.922 0 0);
  --color-neutral-300: oklch(0.870 0 0);
  --color-neutral-400: oklch(0.708 0 0);
  --color-neutral-500: oklch(0.556 0 0);
  --color-neutral-600: oklch(0.439 0 0);
  --color-neutral-700: oklch(0.371 0 0);
  --color-neutral-800: oklch(0.269 0 0);
  --color-neutral-900: oklch(0.205 0 0);
  --color-neutral-950: oklch(0.145 0 0);
  --color-neutral: var(--color-neutral-400);

  /* Stone */
  --color-stone-50: oklch(0.985 0.001 106.423);
  --color-stone-100: oklch(0.970 0.001 106.424);
  --color-stone-200: oklch(0.923 0.002 48.717);
  --color-stone-300: oklch(0.869 0.003 56.366);
  --color-stone-400: oklch(0.709 0.006 56.259);
  --color-stone-500: oklch(0.553 0.008 58.071);
  --color-stone-600: oklch(0.444 0.007 73.639);
  --color-stone-700: oklch(0.374 0.006 67.558);
  --color-stone-800: oklch(0.268 0.004 34.298);
  --color-stone-900: oklch(0.216 0.004 56.043);
  --color-stone-950: oklch(0.147 0.002 49.25);
  --color-stone: var(--color-stone-400);

  /* Pure white */
  --color-white: oklch(1 0 0);
}

/* Semantic UI Theme Variables */

:root {
  /* Base colors */
  --color-background: var(--color-frost-50);
  --color-foreground: var(--color-navy-950);

  /* Card */
  --color-card: var(--color-white);
  --color-card-foreground: var(--color-navy-950);

  /* Popover */
  --color-popover: var(--color-white);
  --color-popover-foreground: var(--color-navy-950);

  /* Primary */
  --color-primary: var(--color-navy-600);
  --color-primary-foreground: var(--color-white);

  /* Secondary */
  --color-secondary: var(--color-evergreen-600);
  --color-secondary-foreground: var(--color-white);

  /* Muted */
  --color-muted: var(--color-frost-100);
  --color-muted-foreground: var(--color-navy-600);

  /* Accent */
  --color-accent: var(--color-sand-600);
  --color-accent-foreground: var(--color-white);

  /* Destructive */
  --color-destructive: var(--color-error-600);
  --color-destructive-foreground: var(--color-white);

  /* Success */
  --color-success: var(--color-success-600);
  --color-success-foreground: var(--color-white);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-500);
  --color-completed-foreground: var(--color-white);

  /* Warning */
  --color-warning: var(--color-warning-600);
  --color-warning-foreground: var(--color-white);

  /* Info */
  --color-info: var(--color-navy-500);
  --color-info-foreground: var(--color-white);

  /* Border */
  --color-border: var(--color-frost-600);
  --color-input: var(--color-frost-300);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-frost-200);
  --color-surface: var(--color-white);
  --color-text-secondary: var(--color-frost-600);
  --color-text-emphasis: var(--color-navy-600);
  --color-link: var(--color-navy-600);
  --color-link-hover: var(--color-navy-700);

  /* Select component */
  --color-select-hover: var(--color-navy-50);
  --color-select-hover-foreground: var(--color-navy-950);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-600);
  --color-checkbox-checked-foreground: var(--color-white);

  /* Navigation */
  --color-nav-foreground: var(--color-navy-600);

  /* Text selection */
  --color-selection: var(--color-navy-200);
  --color-selection-foreground: var(--color-navy-900);

  /* Difficulty levels (puzzles) */
  --color-difficulty-easy: var(--color-success-100);
  --color-difficulty-easy-foreground: var(--color-success-800);
  --color-difficulty-medium: var(--color-navy-100);
  --color-difficulty-medium-foreground: var(--color-navy-800);
  --color-difficulty-hard: var(--color-warning-100);
  --color-difficulty-hard-foreground: var(--color-warning-800);
  --color-difficulty-expert: var(--color-error-100);
  --color-difficulty-expert-foreground: var(--color-error-800);
  --color-difficulty-open: var(--color-frost-200);
  --color-difficulty-open-foreground: var(--color-frost-900);

  /* Gradients */
  --gradient-recommendation-start: var(--color-evergreen-500);
  --gradient-recommendation-end: var(--color-navy-500);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


.dark {
  /* Base colors */
  --color-background: oklch(0.10 0.035 220); /* darker than navy-950, almost pure black */
  --color-foreground: var(--color-frost-200);

  /* Card */
  --color-card: var(--color-navy-900);
  --color-card-foreground: var(--color-frost-200);

  /* Popover */
  --color-popover: var(--color-navy-900);
  --color-popover-foreground: var(--color-frost-200);

  /* Primary */
  --color-primary: var(--color-navy-400);
  --color-primary-foreground: var(--color-navy-950);

  /* Secondary */
  --color-secondary: var(--color-evergreen-400);
  --color-secondary-foreground: var(--color-navy-950);

  /* Muted */
  --color-muted: var(--color-navy-800);
  --color-muted-foreground: var(--color-frost-400);

  /* Accent */
  --color-accent: var(--color-sand-400);
  --color-accent-foreground: var(--color-navy-950);

  /* Destructive */
  --color-destructive: var(--color-error-400);
  --color-destructive-foreground: var(--color-navy-950);

  /* Success */
  --color-success: var(--color-success-400);
  --color-success-foreground: var(--color-navy-950);

  /* Completed (for puzzle/expedition completion badges) */
  --color-completed: var(--color-evergreen-300);
  --color-completed-foreground: var(--color-navy-950);

  /* Warning */
  --color-warning: var(--color-warning-400);
  --color-warning-foreground: var(--color-navy-950);

  /* Info */
  --color-info: var(--color-navy-300);
  --color-info-foreground: var(--color-navy-950);

  /* Border */
  --color-border: var(--color-navy-700);
  --color-input: var(--color-navy-600);
  --color-ring: var(--color-navy-400);

  /* Additional semantic colors for UI elements */
  --color-divider: var(--color-navy-700);
  --color-surface: var(--color-navy-900);
  --color-text-secondary: var(--color-frost-400);
  --color-text-emphasis: var(--color-frost-50);
  --color-link: var(--color-navy-400);
  --color-link-hover: var(--color-navy-300);

  /* Select component */
  --color-select-hover: var(--color-navy-800);
  --color-select-hover-foreground: var(--color-frost-200);

  /* Checkbox */
  --color-checkbox-checked: var(--color-navy-400);
  --color-checkbox-checked-foreground: var(--color-navy-950);

  /* Navigation */
  --color-nav-foreground: var(--color-frost-200);

  /* Text selection */
  --color-selection: var(--color-navy-700);
  --color-selection-foreground: var(--color-navy-100);

  /* Difficulty levels (puzzles) - dark mode */
  --color-difficulty-easy: var(--color-success-900);
  --color-difficulty-easy-foreground: var(--color-success-200);
  --color-difficulty-medium: var(--color-navy-900);
  --color-difficulty-medium-foreground: var(--color-navy-200);
  --color-difficulty-hard: var(--color-warning-900);
  --color-difficulty-hard-foreground: var(--color-warning-200);
  --color-difficulty-expert: var(--color-error-900);
  --color-difficulty-expert-foreground: var(--color-error-200);
  --color-difficulty-open: var(--color-frost-700);
  --color-difficulty-open-foreground: var(--color-frost-200);

  /* Gradients - dark mode */
  --gradient-recommendation-start: var(--color-evergreen-600);
  --gradient-recommendation-end: var(--color-navy-600);
  --gradient-progress-start: var(--color-lagoon-600);
  --gradient-progress-end: var(--color-lagoon-500);
}


    /* Base Reset */
*, ::before, ::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: var(--color-border);
}

html {
  line-height: 1.5;
  -webkit-text-size-adjust: 100%;
  tab-size: 4;
  font-family: &#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif;
  font-feature-settings: normal;
  font-variation-settings: normal;
}

body {
  margin: 0;
  line-height: inherit;
  color: var(--color-foreground);
  background-color: var(--color-background);
}

/* Reset margins on common elements */
h1, h2, h3, h4, h5, h6, p, blockquote, pre, ul, ol, dl, figure, hr {
  margin: 0;
}

/* Reset list styles */
ul, ol {
  padding: 0;
  list-style: none;
}

/* Reset buttons and inputs */
button, input, optgroup, select, textarea {
  font-family: inherit;
  font-feature-settings: inherit;
  font-variation-settings: inherit;
  font-size: 100%;
  font-weight: inherit;
  line-height: inherit;
  letter-spacing: inherit;
  color: inherit;
  margin: 0;
  padding: 0;
}

button, select {
  text-transform: none;
}

button, input:where([type=&#x27;button&#x27;]), input:where([type=&#x27;reset&#x27;]), input:where([type=&#x27;submit&#x27;]) {
  -webkit-appearance: button;
  background-color: transparent;
  background-image: none;
  cursor: pointer;
}

button:disabled, input:disabled {
  cursor: default;
}

/* Reset form elements */
input::placeholder, textarea::placeholder {
  opacity: 1;
  color: var(--color-muted-foreground);
}

/* Reset tables */
table {
  text-indent: 0;
  border-color: inherit;
  border-collapse: collapse;
}

/* Link styles */
a {
  color: var(--color-link);
  text-decoration: none;
}

a:hover {
  color: var(--color-link-hover);
  text-decoration: underline;
}

/* Reset headings */
h1, h2, h3, h4, h5, h6 {
  font-size: inherit;
  font-weight: inherit;
}

/* Reset images and media */
img, svg, video, canvas, audio, iframe, embed, object {
  display: block;
  vertical-align: middle;
}

img, video {
  max-width: 100%;
  height: auto;
}

/* Sandbox-specific UI styles */
.sandbox-select:invalid {
  color: var(--color-muted-foreground) !important;
}

.sandbox-select option {
  background-color: var(--color-popover) !important;
  color: var(--color-popover-foreground) !important;
  padding: 0.375rem 0.5rem !important;
}

.sandbox-select option:disabled {
  color: var(--color-muted-foreground) !important;
  background-color: var(--color-popover) !important;
}

.sandbox-select option:checked {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

.sandbox-select option:hover,
.sandbox-select option:focus,
.sandbox-select option:active {
  background-color: var(--color-select-hover) !important;
  color: var(--color-select-hover-foreground) !important;
}

/* Peer helper class for Radix UI components */
.peer { }
    
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;

  &lt;!-- Runtime and globals script --&gt;
  &lt;script&gt;
    // Component props (available globally)
    window.__COMPONENT_PROPS__ = {&quot;n&quot;:12,&quot;showExtraPaths&quot;:true};

    // Canvas accessibility label (for canvas mode blocks)
    window.__CANVAS_ARIA_LABEL__ = null;

    // Injected sandbox runtime
    (() =&gt; {
  function createCSSGenerator() {
    const generatedClasses = /* @__PURE__ */ new Set();
    const styleSheet = new CSSStyleSheet();
    document.adoptedStyleSheets = [...document.adoptedStyleSheets, styleSheet];
    const spacingScale = {
      &quot;0&quot;: &quot;0&quot;,
      &quot;px&quot;: &quot;1px&quot;,
      &quot;0.5&quot;: &quot;0.125rem&quot;,
      &quot;1&quot;: &quot;0.25rem&quot;,
      &quot;1.5&quot;: &quot;0.375rem&quot;,
      &quot;2&quot;: &quot;0.5rem&quot;,
      &quot;2.5&quot;: &quot;0.625rem&quot;,
      &quot;3&quot;: &quot;0.75rem&quot;,
      &quot;3.5&quot;: &quot;0.875rem&quot;,
      &quot;4&quot;: &quot;1rem&quot;,
      &quot;5&quot;: &quot;1.25rem&quot;,
      &quot;6&quot;: &quot;1.5rem&quot;,
      &quot;7&quot;: &quot;1.75rem&quot;,
      &quot;8&quot;: &quot;2rem&quot;,
      &quot;9&quot;: &quot;2.25rem&quot;,
      &quot;10&quot;: &quot;2.5rem&quot;,
      &quot;11&quot;: &quot;2.75rem&quot;,
      &quot;12&quot;: &quot;3rem&quot;,
      &quot;14&quot;: &quot;3.5rem&quot;,
      &quot;16&quot;: &quot;4rem&quot;,
      &quot;20&quot;: &quot;5rem&quot;,
      &quot;24&quot;: &quot;6rem&quot;,
      &quot;28&quot;: &quot;7rem&quot;,
      &quot;32&quot;: &quot;8rem&quot;,
      &quot;36&quot;: &quot;9rem&quot;,
      &quot;40&quot;: &quot;10rem&quot;,
      &quot;44&quot;: &quot;11rem&quot;,
      &quot;48&quot;: &quot;12rem&quot;,
      &quot;52&quot;: &quot;13rem&quot;,
      &quot;56&quot;: &quot;14rem&quot;,
      &quot;60&quot;: &quot;15rem&quot;,
      &quot;64&quot;: &quot;16rem&quot;,
      &quot;72&quot;: &quot;18rem&quot;,
      &quot;80&quot;: &quot;20rem&quot;,
      &quot;96&quot;: &quot;24rem&quot;
    };
    const sizeValues = {
      &quot;auto&quot;: &quot;auto&quot;,
      &quot;full&quot;: &quot;100%&quot;,
      &quot;screen&quot;: &quot;100vw&quot;,
      // for width
      &quot;min&quot;: &quot;min-content&quot;,
      &quot;max&quot;: &quot;max-content&quot;,
      &quot;fit&quot;: &quot;fit-content&quot;
    };
    const parseArbitraryValue = (value) =&gt; {
      const match = value.match(/^\[(.+)\]$/);
      return match ? match[1] : null;
    };
    const parseOpacity = (className) =&gt; {
      const match = className.match(/^(.+?)\/(\d+)$/);
      if (match) {
        return { base: match[1], opacity: (parseInt(match[2]) / 100).toString() };
      }
      return { base: className, opacity: null };
    };
    const findMatchingBracket = (str, startIndex) =&gt; {
      if (str[startIndex] !== &quot;[&quot;) {
        return -1;
      }
      let depth = 0;
      for (let i = startIndex; i &lt; str.length; i++) {
        const char = str[i];
        if (char === &quot;[&quot;) {
          depth++;
        } else if (char === &quot;]&quot;) {
          depth--;
          if (depth === 0) {
            return i;
          }
        }
      }
      return -1;
    };
    const parseArbitrarySelector = (className) =&gt; {
      if (!className.startsWith(&quot;[&quot;)) {
        return null;
      }
      const closingBracketIndex = findMatchingBracket(className, 0);
      if (closingBracketIndex === -1 || className[closingBracketIndex + 1] !== &quot;:&quot;) {
        return null;
      }
      const bracketContent = className.substring(1, closingBracketIndex);
      if (!bracketContent.startsWith(&quot;&amp;&quot;)) {
        return null;
      }
      const selector = bracketContent.substring(1);
      const baseClass = className.substring(closingBracketIndex + 2);
      return { selector, baseClass };
    };
    const generateRule = (className) =&gt; {
      const arbitrarySelector = parseArbitrarySelector(className);
      if (arbitrarySelector) {
        const { selector, baseClass } = arbitrarySelector;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/&amp;/g, &quot;\\&amp;&quot;).replace(/&gt;/g, &quot;\\&gt;&quot;).replace(/\*/g, &quot;\\*&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\+/g, &quot;\\+&quot;).replace(/~/g, &quot;\\~&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const declarations = baseRule.substring(selectorEnd);
        return `.${escapedClass}${selector} ${declarations}`;
      }
      const variantMatch = className.match(/^(hover|focus|active|disabled|dark):(.+)$/);
      if (variantMatch) {
        const [, variant, baseClass] = variantMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;);
        const selectorEnd = baseRule.indexOf(&quot;{&quot;);
        const baseSelector = baseRule.substring(0, selectorEnd).trim();
        const declarations = baseRule.substring(selectorEnd);
        if (variant === &quot;hover&quot;) {
          return `.${escapedClass}:hover ${declarations}`;
        } else if (variant === &quot;focus&quot;) {
          return `.${escapedClass}:focus ${declarations}`;
        } else if (variant === &quot;active&quot;) {
          return `.${escapedClass}:active ${declarations}`;
        } else if (variant === &quot;disabled&quot;) {
          return `.${escapedClass}:disabled ${declarations}`;
        } else if (variant === &quot;dark&quot;) {
          const pseudoMatch = baseSelector.match(/(:(?:hover|focus|active|disabled|focus-visible)(?:\([^)]*\))?)$/);
          const pseudoSelector = pseudoMatch ? pseudoMatch[1] : &quot;&quot;;
          return `.dark .${escapedClass}${pseudoSelector} ${declarations}`;
        }
      }
      const { base, opacity } = parseOpacity(className);
      const spacingMatch = base.match(/^(px|py|pt|pb|pl|pr|mx|my|mt|mb|ml|mr|gap-x|gap-y|space-x|space-y|min-w|min-h|max-w|max-h|inset-x|inset-y|p|m|gap|w|h|top|right|bottom|left|inset)-(.+)$/);
      if (spacingMatch) {
        const [, property, value] = spacingMatch;
        const spacing = spacingScale[value] || sizeValues[value] || parseArbitraryValue(value);
        if (!spacing) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (property === &quot;space-x&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-x-reverse: 0; margin-inline-start: calc(${spacing} * var(--tw-space-x-reverse)); margin-inline-end: calc(${spacing} * calc(1 - var(--tw-space-x-reverse))); }`;
        }
        if (property === &quot;space-y&quot;) {
          return `.${escapedClass} &gt; :not(:last-child) { --tw-space-y-reverse: 0; margin-block-start: calc(${spacing} * var(--tw-space-y-reverse)); margin-block-end: calc(${spacing} * calc(1 - var(--tw-space-y-reverse))); }`;
        }
        const propertyMap = {
          &quot;p&quot;: [&quot;padding&quot;],
          &quot;px&quot;: [&quot;padding-left&quot;, &quot;padding-right&quot;],
          &quot;py&quot;: [&quot;padding-top&quot;, &quot;padding-bottom&quot;],
          &quot;pt&quot;: [&quot;padding-top&quot;],
          &quot;pb&quot;: [&quot;padding-bottom&quot;],
          &quot;pl&quot;: [&quot;padding-left&quot;],
          &quot;pr&quot;: [&quot;padding-right&quot;],
          &quot;m&quot;: [&quot;margin&quot;],
          &quot;mx&quot;: [&quot;margin-left&quot;, &quot;margin-right&quot;],
          &quot;my&quot;: [&quot;margin-top&quot;, &quot;margin-bottom&quot;],
          &quot;mt&quot;: [&quot;margin-top&quot;],
          &quot;mb&quot;: [&quot;margin-bottom&quot;],
          &quot;ml&quot;: [&quot;margin-left&quot;],
          &quot;mr&quot;: [&quot;margin-right&quot;],
          &quot;gap&quot;: [&quot;gap&quot;],
          &quot;gap-x&quot;: [&quot;column-gap&quot;],
          &quot;gap-y&quot;: [&quot;row-gap&quot;],
          &quot;w&quot;: [&quot;width&quot;],
          &quot;h&quot;: [&quot;height&quot;],
          &quot;min-w&quot;: [&quot;min-width&quot;],
          &quot;min-h&quot;: [&quot;min-height&quot;],
          &quot;max-w&quot;: [&quot;max-width&quot;],
          &quot;max-h&quot;: [&quot;max-height&quot;],
          &quot;top&quot;: [&quot;top&quot;],
          &quot;right&quot;: [&quot;right&quot;],
          &quot;bottom&quot;: [&quot;bottom&quot;],
          &quot;left&quot;: [&quot;left&quot;],
          &quot;inset&quot;: [&quot;top&quot;, &quot;right&quot;, &quot;bottom&quot;, &quot;left&quot;],
          &quot;inset-x&quot;: [&quot;left&quot;, &quot;right&quot;],
          &quot;inset-y&quot;: [&quot;top&quot;, &quot;bottom&quot;]
        };
        const properties = propertyMap[property];
        if (!properties) return null;
        const declarations = properties.map((prop) =&gt; `${prop}: ${spacing}`).join(&quot;; &quot;);
        return `.${escapedClass} { ${declarations}; }`;
      }
      const textSizeMatch = base.match(/^text-(xs|sm|base|lg|xl|2xl|3xl|4xl|5xl|6xl|7xl|8xl|9xl)$/);
      if (textSizeMatch) {
        const [, size] = textSizeMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const sizeMap = {
          &quot;xs&quot;: { fontSize: &quot;0.75rem&quot;, lineHeight: &quot;1rem&quot; },
          &quot;sm&quot;: { fontSize: &quot;0.875rem&quot;, lineHeight: &quot;1.25rem&quot; },
          &quot;base&quot;: { fontSize: &quot;1rem&quot;, lineHeight: &quot;1.5rem&quot; },
          &quot;lg&quot;: { fontSize: &quot;1.125rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;xl&quot;: { fontSize: &quot;1.25rem&quot;, lineHeight: &quot;1.75rem&quot; },
          &quot;2xl&quot;: { fontSize: &quot;1.5rem&quot;, lineHeight: &quot;2rem&quot; },
          &quot;3xl&quot;: { fontSize: &quot;1.875rem&quot;, lineHeight: &quot;2.25rem&quot; },
          &quot;4xl&quot;: { fontSize: &quot;2.25rem&quot;, lineHeight: &quot;2.5rem&quot; },
          &quot;5xl&quot;: { fontSize: &quot;3rem&quot;, lineHeight: &quot;1&quot; },
          &quot;6xl&quot;: { fontSize: &quot;3.75rem&quot;, lineHeight: &quot;1&quot; },
          &quot;7xl&quot;: { fontSize: &quot;4.5rem&quot;, lineHeight: &quot;1&quot; },
          &quot;8xl&quot;: { fontSize: &quot;6rem&quot;, lineHeight: &quot;1&quot; },
          &quot;9xl&quot;: { fontSize: &quot;8rem&quot;, lineHeight: &quot;1&quot; }
        };
        const { fontSize, lineHeight } = sizeMap[size];
        return `.${escapedClass} { font-size: ${fontSize}; line-height: ${lineHeight}; }`;
      }
      const fontWeightMatch = base.match(/^font-(thin|extralight|light|normal|medium|semibold|bold|extrabold|black)$/);
      if (fontWeightMatch) {
        const [, weight] = fontWeightMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const weightMap = {
          &quot;thin&quot;: &quot;100&quot;,
          &quot;extralight&quot;: &quot;200&quot;,
          &quot;light&quot;: &quot;300&quot;,
          &quot;normal&quot;: &quot;400&quot;,
          &quot;medium&quot;: &quot;500&quot;,
          &quot;semibold&quot;: &quot;600&quot;,
          &quot;bold&quot;: &quot;700&quot;,
          &quot;extrabold&quot;: &quot;800&quot;,
          &quot;black&quot;: &quot;900&quot;
        };
        return `.${escapedClass} { font-weight: ${weightMap[weight]}; }`;
      }
      const fontFamilyMatch = base.match(/^font-(sans|serif|mono)$/);
      if (fontFamilyMatch) {
        const [, family] = fontFamilyMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        const familyMap = {
          &quot;sans&quot;: &quot;&#x27;Poppins&#x27;, ui-sans-serif, system-ui, -apple-system, sans-serif&quot;,
          &quot;serif&quot;: &quot;ui-serif, Georgia, Cambria, &#x27;Times New Roman&#x27;, Times, serif&quot;,
          &quot;mono&quot;: &quot;&#x27;Space Mono&#x27;, ui-monospace, &#x27;Cascadia Code&#x27;, monospace&quot;
        };
        return `.${escapedClass} { font-family: ${familyMap[family]}; }`;
      }
      const lineHeightMatch = base.match(/^leading-(.+)$/);
      if (lineHeightMatch) {
        const [, value] = lineHeightMatch;
        const heightMap = {
          &quot;none&quot;: &quot;1&quot;,
          &quot;tight&quot;: &quot;1.25&quot;,
          &quot;snug&quot;: &quot;1.375&quot;,
          &quot;normal&quot;: &quot;1.5&quot;,
          &quot;relaxed&quot;: &quot;1.625&quot;,
          &quot;loose&quot;: &quot;2&quot;
        };
        const lineHeight = heightMap[value] || parseArbitraryValue(value);
        if (!lineHeight) return null;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { line-height: ${lineHeight}; }`;
      }
      const flexMatch = base.match(/^flex-(.+)$/);
      if (flexMatch) {
        const [, value] = flexMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const flexValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { flex: ${flexValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { flex: var(${customProp}); }`;
        }
        const fractionMatch = value.match(/^(\d+)\/(\d+)$/);
        if (fractionMatch) {
          const [, numerator, denominator] = fractionMatch;
          return `.${escapedClass} { flex: calc(${numerator} / ${denominator} * 100%); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { flex: ${number}; }`;
        }
      }
      const gridColsMatch = base.match(/^grid-cols-(.+)$/);
      if (gridColsMatch) {
        const [, value] = gridColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-columns: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-columns: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const colsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-columns: ${colsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-columns: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-columns: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const gridRowsMatch = base.match(/^grid-rows-(.+)$/);
      if (gridRowsMatch) {
        const [, value] = gridRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;none&quot;) {
          return `.${escapedClass} { grid-template-rows: none; }`;
        }
        if (value === &quot;subgrid&quot;) {
          return `.${escapedClass} { grid-template-rows: subgrid; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          const rowsValue = arbitraryValue.replace(/_/g, &quot; &quot;);
          return `.${escapedClass} { grid-template-rows: ${rowsValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-template-rows: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-template-rows: repeat(${number}, minmax(0, 1fr)); }`;
        }
      }
      const colStartMatch = base.match(/^col-start-(.+)$/);
      if (colStartMatch) {
        const [, value] = colStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-start: ${number}; }`;
        }
      }
      const colEndMatch = base.match(/^col-end-(.+)$/);
      if (colEndMatch) {
        const [, value] = colEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-column-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column-end: ${number}; }`;
        }
      }
      const colSpanMatch = base.match(/^col-span-(.+)$/);
      if (colSpanMatch) {
        const [, value] = colSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-column: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-column: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-column: span ${number} / span ${number}; }`;
        }
      }
      const colMatch = base.match(/^col-(.+)$/);
      if (colMatch) {
        const [, value] = colMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-column: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-column: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-column: var(${customProp}); }`;
          }
        }
      }
      const rowStartMatch = base.match(/^row-start-(.+)$/);
      if (rowStartMatch) {
        const [, value] = rowStartMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-start: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-start: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-start: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-start: ${number}; }`;
        }
      }
      const rowEndMatch = base.match(/^row-end-(.+)$/);
      if (rowEndMatch) {
        const [, value] = rowEndMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-row-end: auto; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row-end: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row-end: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row-end: ${number}; }`;
        }
      }
      const rowSpanMatch = base.match(/^row-span-(.+)$/);
      if (rowSpanMatch) {
        const [, value] = rowSpanMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;full&quot;) {
          return `.${escapedClass} { grid-row: 1 / -1; }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-row: var(${customProp}); }`;
        }
        const numericMatch = value.match(/^(\d+)$/);
        if (numericMatch) {
          const number = numericMatch[1];
          return `.${escapedClass} { grid-row: span ${number} / span ${number}; }`;
        }
      }
      const rowMatch = base.match(/^row-(.+)$/);
      if (rowMatch) {
        const [, value] = rowMatch;
        if (value.startsWith(&quot;start-&quot;) || value.startsWith(&quot;end-&quot;) || value.startsWith(&quot;span-&quot;)) {
        } else {
          const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
          if (value === &quot;auto&quot;) {
            return `.${escapedClass} { grid-row: auto; }`;
          }
          const arbitraryValue = parseArbitraryValue(value);
          if (arbitraryValue) {
            return `.${escapedClass} { grid-row: ${arbitraryValue}; }`;
          }
          const customPropMatch = value.match(/^\((.+)\)$/);
          if (customPropMatch) {
            const customProp = customPropMatch[1];
            return `.${escapedClass} { grid-row: var(${customProp}); }`;
          }
        }
      }
      const autoColsMatch = base.match(/^auto-cols-(.+)$/);
      if (autoColsMatch) {
        const [, value] = autoColsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-columns: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-columns: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-columns: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-columns: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-columns: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-columns: var(${customProp}); }`;
        }
      }
      const autoRowsMatch = base.match(/^auto-rows-(.+)$/);
      if (autoRowsMatch) {
        const [, value] = autoRowsMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\(/g, &quot;\\(&quot;).replace(/\)/g, &quot;\\)&quot;).replace(/\./g, &quot;\\.&quot;);
        if (value === &quot;auto&quot;) {
          return `.${escapedClass} { grid-auto-rows: auto; }`;
        }
        if (value === &quot;min&quot;) {
          return `.${escapedClass} { grid-auto-rows: min-content; }`;
        }
        if (value === &quot;max&quot;) {
          return `.${escapedClass} { grid-auto-rows: max-content; }`;
        }
        if (value === &quot;fr&quot;) {
          return `.${escapedClass} { grid-auto-rows: minmax(0, 1fr); }`;
        }
        const arbitraryValue = parseArbitraryValue(value);
        if (arbitraryValue) {
          return `.${escapedClass} { grid-auto-rows: ${arbitraryValue}; }`;
        }
        const customPropMatch = value.match(/^\((.+)\)$/);
        if (customPropMatch) {
          const customProp = customPropMatch[1];
          return `.${escapedClass} { grid-auto-rows: var(${customProp}); }`;
        }
      }
      const gridFlowMatch = base.match(/^grid-flow-(.+)$/);
      if (gridFlowMatch) {
        const [, value] = gridFlowMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;);
        if (value === &quot;row&quot;) {
          return `.${escapedClass} { grid-auto-flow: row; }`;
        }
        if (value === &quot;col&quot;) {
          return `.${escapedClass} { grid-auto-flow: column; }`;
        }
        if (value === &quot;dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: dense; }`;
        }
        if (value === &quot;row-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: row dense; }`;
        }
        if (value === &quot;col-dense&quot;) {
          return `.${escapedClass} { grid-auto-flow: column dense; }`;
        }
      }
      const layoutUtilities = {
        // Display
        &quot;flex&quot;: &quot;display: flex&quot;,
        &quot;inline-flex&quot;: &quot;display: inline-flex&quot;,
        &quot;grid&quot;: &quot;display: grid&quot;,
        &quot;inline-grid&quot;: &quot;display: inline-grid&quot;,
        &quot;block&quot;: &quot;display: block&quot;,
        &quot;inline-block&quot;: &quot;display: inline-block&quot;,
        &quot;inline&quot;: &quot;display: inline&quot;,
        &quot;hidden&quot;: &quot;display: none&quot;,
        // Flex direction
        &quot;flex-row&quot;: &quot;flex-direction: row&quot;,
        &quot;flex-row-reverse&quot;: &quot;flex-direction: row-reverse&quot;,
        &quot;flex-col&quot;: &quot;flex-direction: column&quot;,
        &quot;flex-col-reverse&quot;: &quot;flex-direction: column-reverse&quot;,
        // Flex wrap
        &quot;flex-wrap&quot;: &quot;flex-wrap: wrap&quot;,
        &quot;flex-wrap-reverse&quot;: &quot;flex-wrap: wrap-reverse&quot;,
        &quot;flex-nowrap&quot;: &quot;flex-wrap: nowrap&quot;,
        // Flex shrink/grow
        &quot;shrink-0&quot;: &quot;flex-shrink: 0&quot;,
        &quot;shrink&quot;: &quot;flex-shrink: 1&quot;,
        &quot;grow-0&quot;: &quot;flex-grow: 0&quot;,
        &quot;grow&quot;: &quot;flex-grow: 1&quot;,
        // Flex sizing (common static values)
        &quot;flex-1&quot;: &quot;flex: 1 1 0%&quot;,
        &quot;flex-auto&quot;: &quot;flex: 1 1 auto&quot;,
        &quot;flex-initial&quot;: &quot;flex: 0 1 auto&quot;,
        &quot;flex-none&quot;: &quot;flex: none&quot;,
        // Flex/Grid alignment
        &quot;items-start&quot;: &quot;align-items: flex-start&quot;,
        &quot;items-end&quot;: &quot;align-items: flex-end&quot;,
        &quot;items-center&quot;: &quot;align-items: center&quot;,
        &quot;items-baseline&quot;: &quot;align-items: baseline&quot;,
        &quot;items-stretch&quot;: &quot;align-items: stretch&quot;,
        &quot;justify-start&quot;: &quot;justify-content: flex-start&quot;,
        &quot;justify-end&quot;: &quot;justify-content: flex-end&quot;,
        &quot;justify-center&quot;: &quot;justify-content: center&quot;,
        &quot;justify-between&quot;: &quot;justify-content: space-between&quot;,
        &quot;justify-around&quot;: &quot;justify-content: space-around&quot;,
        &quot;justify-evenly&quot;: &quot;justify-content: space-evenly&quot;,
        &quot;place-content-center&quot;: &quot;place-content: center&quot;,
        &quot;place-content-start&quot;: &quot;place-content: start&quot;,
        &quot;place-content-end&quot;: &quot;place-content: end&quot;,
        // Position
        &quot;relative&quot;: &quot;position: relative&quot;,
        &quot;absolute&quot;: &quot;position: absolute&quot;,
        &quot;fixed&quot;: &quot;position: fixed&quot;,
        &quot;sticky&quot;: &quot;position: sticky&quot;,
        // Overflow
        &quot;overflow-hidden&quot;: &quot;overflow: hidden&quot;,
        &quot;overflow-auto&quot;: &quot;overflow: auto&quot;,
        &quot;overflow-scroll&quot;: &quot;overflow: scroll&quot;,
        &quot;overflow-x-hidden&quot;: &quot;overflow-x: hidden&quot;,
        &quot;overflow-y-hidden&quot;: &quot;overflow-y: hidden&quot;,
        &quot;overflow-x-auto&quot;: &quot;overflow-x: auto&quot;,
        &quot;overflow-y-auto&quot;: &quot;overflow-y: auto&quot;,
        // Cursor
        &quot;cursor-pointer&quot;: &quot;cursor: pointer&quot;,
        &quot;cursor-default&quot;: &quot;cursor: default&quot;,
        &quot;cursor-not-allowed&quot;: &quot;cursor: not-allowed&quot;,
        // Text align
        &quot;text-left&quot;: &quot;text-align: left&quot;,
        &quot;text-center&quot;: &quot;text-align: center&quot;,
        &quot;text-right&quot;: &quot;text-align: right&quot;,
        // Text decoration
        &quot;underline&quot;: &quot;text-decoration: underline&quot;,
        &quot;overline&quot;: &quot;text-decoration: overline&quot;,
        &quot;line-through&quot;: &quot;text-decoration: line-through&quot;,
        &quot;no-underline&quot;: &quot;text-decoration: none&quot;,
        // Pointer events
        &quot;pointer-events-none&quot;: &quot;pointer-events: none&quot;,
        &quot;pointer-events-auto&quot;: &quot;pointer-events: auto&quot;,
        // Aspect ratio
        &quot;aspect-square&quot;: &quot;aspect-ratio: 1 / 1&quot;,
        &quot;aspect-video&quot;: &quot;aspect-ratio: 16 / 9&quot;,
        // Shadow
        &quot;shadow&quot;: &quot;box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-sm&quot;: &quot;box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05)&quot;,
        &quot;shadow-md&quot;: &quot;box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-lg&quot;: &quot;box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)&quot;,
        &quot;shadow-none&quot;: &quot;box-shadow: none&quot;,
        // Outline
        &quot;outline-none&quot;: &quot;outline: 2px solid transparent; outline-offset: 2px&quot;,
        // Opacity (common values)
        &quot;opacity-0&quot;: &quot;opacity: 0&quot;,
        &quot;opacity-50&quot;: &quot;opacity: 0.5&quot;,
        &quot;opacity-100&quot;: &quot;opacity: 1&quot;,
        // Appearance
        &quot;appearance-none&quot;: &quot;appearance: none; -webkit-appearance: none; -moz-appearance: none&quot;,
        // Border
        &quot;border&quot;: &quot;border-width: 1px; border-style: solid&quot;,
        // Peer
        &quot;peer&quot;: &quot;&quot;
      };
      if (layoutUtilities[className]) {
        return `.${className} { ${layoutUtilities[className]}; }`;
      }
      const opacityMatch = base.match(/^opacity-(\d+)$/);
      if (opacityMatch) {
        const [, value] = opacityMatch;
        const opacityValue = parseInt(value) / 100;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass} { opacity: ${opacityValue}; }`;
      }
      const colorMatch = base.match(/^(bg|text|border|ring|outline|fill)-(.+)$/);
      if (colorMatch) {
        const [, property, colorName] = colorMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const propertyMap = {
          &quot;bg&quot;: &quot;background-color&quot;,
          &quot;text&quot;: &quot;color&quot;,
          &quot;border&quot;: &quot;border-color&quot;,
          &quot;ring&quot;: &quot;--tw-ring-color&quot;,
          &quot;outline&quot;: &quot;outline-color&quot;,
          &quot;fill&quot;: &quot;fill&quot;
        };
        const cssProp = propertyMap[property];
        if (!cssProp) return null;
        if (opacity) {
          return `.${escapedClass} { ${cssProp}: oklch(from var(--color-${colorName}) l c h / ${opacity}); }`;
        } else {
          return `.${escapedClass} { ${cssProp}: var(--color-${colorName}); }`;
        }
      }
      if (className === &quot;transition-colors&quot;) {
        return `.transition-colors { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition&quot;) {
        return `.transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      if (className === &quot;transition-opacity&quot;) {
        return `.transition-opacity { transition-property: opacity; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 150ms; }`;
      }
      const borderWidthMatch = base.match(/^border(-[trbl])?-(\d+)$/);
      if (borderWidthMatch) {
        const [, side, width] = borderWidthMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (side) {
          const sideMap = {
            &quot;-t&quot;: &quot;border-top-width&quot;,
            &quot;-r&quot;: &quot;border-right-width&quot;,
            &quot;-b&quot;: &quot;border-bottom-width&quot;,
            &quot;-l&quot;: &quot;border-left-width&quot;
          };
          return `.${escapedClass} { ${sideMap[side]}: ${width}px; }`;
        } else {
          return `.${escapedClass} { border-width: ${width}px; }`;
        }
      }
      const roundedMatch = base.match(/^rounded(-[trblxy])?(-(.+))?$/);
      if (roundedMatch) {
        const [, corner, , value] = roundedMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        const roundedValues = {
          &quot;none&quot;: &quot;0&quot;,
          &quot;sm&quot;: &quot;calc(var(--radius) - 4px)&quot;,
          &quot;md&quot;: &quot;calc(var(--radius) - 2px)&quot;,
          &quot;lg&quot;: &quot;var(--radius)&quot;,
          &quot;xl&quot;: &quot;0.75rem&quot;,
          &quot;2xl&quot;: &quot;1rem&quot;,
          &quot;3xl&quot;: &quot;1.5rem&quot;,
          &quot;full&quot;: &quot;9999px&quot;
        };
        const radiusValue = value ? roundedValues[value] || spacingScale[value] || parseArbitraryValue(value) : &quot;0.25rem&quot;;
        if (!radiusValue) return null;
        const cornerMap = {
          &quot;-t&quot;: [&quot;border-top-left-radius&quot;, &quot;border-top-right-radius&quot;],
          &quot;-r&quot;: [&quot;border-top-right-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-b&quot;: [&quot;border-bottom-left-radius&quot;, &quot;border-bottom-right-radius&quot;],
          &quot;-l&quot;: [&quot;border-top-left-radius&quot;, &quot;border-bottom-left-radius&quot;],
          &quot;-tl&quot;: [&quot;border-top-left-radius&quot;],
          &quot;-tr&quot;: [&quot;border-top-right-radius&quot;],
          &quot;-bl&quot;: [&quot;border-bottom-left-radius&quot;],
          &quot;-br&quot;: [&quot;border-bottom-right-radius&quot;]
        };
        if (corner &amp;&amp; cornerMap[corner]) {
          const declarations = cornerMap[corner].map((prop) =&gt; `${prop}: ${radiusValue}`).join(&quot;; &quot;);
          return `.${escapedClass} { ${declarations}; }`;
        } else {
          return `.${escapedClass} { border-radius: ${radiusValue}; }`;
        }
      }
      const ringMatch = className.match(/^ring(-offset)?(-(\d+))?$/);
      if (ringMatch) {
        const [, offset, , width] = ringMatch;
        const escapedClass = className.replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        if (offset) {
          const ringWidth = width || &quot;2&quot;;
          return `.${escapedClass} { --tw-ring-offset-width: ${ringWidth}px; }`;
        } else {
          const ringWidth = width || &quot;3&quot;;
          return `.${escapedClass} { --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color); --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(${ringWidth}px + var(--tw-ring-offset-width)) var(--tw-ring-color); box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000); }`;
        }
      }
      if (className === &quot;ring-offset-background&quot;) {
        return `.ring-offset-background { --tw-ring-offset-color: var(--color-background); }`;
      }
      const focusVisibleMatch = className.match(/^focus-visible:(.+)$/);
      if (focusVisibleMatch) {
        const [, baseClass] = focusVisibleMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}:focus-visible ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      const dataMatch = className.match(/^data-\[(.+?)\]:(.+)$/);
      if (dataMatch) {
        const [, dataAttr, baseClass] = dataMatch;
        const baseRule = generateRule(baseClass);
        if (!baseRule) return null;
        const escapedClass = className.replace(/:/g, &quot;\\:&quot;).replace(/\//g, &quot;\\/&quot;).replace(/\[/g, &quot;\\[&quot;).replace(/]/g, &quot;\\]&quot;).replace(/=/g, &quot;\\=&quot;).replace(/\./g, &quot;\\.&quot;);
        return `.${escapedClass}[data-${dataAttr}] ${baseRule.substring(baseRule.indexOf(&quot;{&quot;))}`;
      }
      return null;
    };
    const css = (classNames) =&gt; {
      const classes = classNames.trim().split(/\s+/).filter(Boolean);
      for (const className of classes) {
        if (generatedClasses.has(className)) continue;
        const rule = generateRule(className);
        if (rule) {
          try {
            styleSheet.insertRule(rule, styleSheet.cssRules.length);
            generatedClasses.add(className);
          } catch (error) {
            console.error(`[DynamicBlock Error] Failed to generate CSS for class: ${className}`, error);
          }
        }
      }
      return classNames;
    };
    return css;
  }
  function createUIHelpers(cssGenerator) {
    const isSelector = (arg) =&gt; typeof arg === &quot;string&quot;;
    const applyClasses = (element, baseClasses, customClassName) =&gt; {
      const allClasses = customClassName ? `${baseClasses} ${customClassName}`.replace(/\s+/g, &quot; &quot;).trim() : baseClasses;
      cssGenerator(allClasses);
      if (element instanceof SVGElement) {
        element.setAttribute(&quot;class&quot;, allClasses);
      } else {
        element.className = allClasses;
      }
    };
    const applyStyles = (element, styles) =&gt; {
      if (!styles) return;
      Object.entries(styles).forEach(([property, value]) =&gt; {
        if (element instanceof HTMLElement) {
          element.style.setProperty(property, value);
        } else {
          const currentStyle = element.getAttribute(&quot;style&quot;) || &quot;&quot;;
          const newStyle = `${currentStyle}${currentStyle ? &quot;; &quot; : &quot;&quot;}${property}: ${value}`;
          element.setAttribute(&quot;style&quot;, newStyle);
        }
      });
    };
    return {
      /**
       * Button helper - creates or enhances button elements
       */
      button(selectorOrOptions, options) {
        const baseClasses = &quot;inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50&quot;;
        const getVariantClasses = (variant2 = &quot;contained&quot;, color2 = &quot;primary&quot;, size2 = &quot;md&quot;) =&gt; {
          const variantBaseMap = {
            contained: &quot;&quot;,
            outlined: &quot;border bg-background&quot;,
            text: &quot;&quot;,
            ghost: &quot;&quot;
          };
          const variantColorMap = {
            contained: `bg-${color2} text-${color2}-foreground hover:bg-${color2}/80`,
            outlined: `border-${color2} text-${color2} hover:bg-${color2}/20`,
            text: `text-${color2} hover:bg-${color2}/20`,
            ghost: `text-${color2} hover:bg-${color2} hover:text-background`
          };
          const sizeMap = {
            sm: &quot;h-9 rounded-md px-3 text-sm&quot;,
            md: &quot;h-10 px-4 py-2&quot;,
            lg: &quot;h-12 rounded-md px-6 text-base&quot;,
            xl: &quot;h-14 rounded-md px-8 text-lg&quot;,
            icon: &quot;h-10 w-10&quot;
          };
          const variantBase = variantBaseMap[variant2] || variantBaseMap.contained;
          const variantColor = variantColorMap[variant2] || variantColorMap.contained;
          const sizeClasses = sizeMap[size2] || sizeMap.md;
          return `${baseClasses} ${variantBase} ${variantColor} ${sizeClasses}`.replace(/\s+/g, &quot; &quot;).trim();
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((btn2) =&gt; {
            const { variant: variant2, color: color2, size: size2, disabled: disabled2, onClick: onClick2, className: className2, style: style2 } = options || {};
            applyClasses(btn2, getVariantClasses(variant2, color2, size2), className2);
            applyStyles(btn2, style2);
            if (disabled2 !== void 0) btn2.disabled = disabled2;
            if (onClick2) btn2.addEventListener(&quot;click&quot;, onClick2);
          });
          return elements;
        }
        const { label, variant, color, size, disabled, onClick, className, style } = selectorOrOptions;
        const btn = document.createElement(&quot;button&quot;);
        btn.type = &quot;button&quot;;
        if (label) btn.textContent = label;
        applyClasses(btn, getVariantClasses(variant, color, size), className);
        applyStyles(btn, style);
        if (disabled) btn.disabled = disabled;
        if (onClick) btn.addEventListener(&quot;click&quot;, onClick);
        return btn;
      },
      /**
       * Input helper - creates or enhances input elements
       */
      input(selectorOrOptions, options) {
        const baseClasses = &quot;flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((input2) =&gt; {
            const { type: type2, placeholder: placeholder2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(input2, baseClasses, className2);
            applyStyles(input2, style2);
            if (type2) input2.type = type2;
            if (placeholder2) input2.placeholder = placeholder2;
            if (disabled2 !== void 0) input2.disabled = disabled2;
            if (value2 !== void 0) input2.value = value2;
            if (onInput2) input2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) input2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { type, placeholder, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const input = document.createElement(&quot;input&quot;);
        input.type = type || &quot;text&quot;;
        applyClasses(input, baseClasses, className);
        applyStyles(input, style);
        if (placeholder) input.placeholder = placeholder;
        if (disabled) input.disabled = disabled;
        if (value !== void 0) input.value = value;
        if (onInput) input.addEventListener(&quot;input&quot;, onInput);
        if (onChange) input.addEventListener(&quot;change&quot;, onChange);
        return input;
      },
      /**
       * Textarea helper - creates or enhances textarea elements
       */
      textarea(selectorOrOptions, options) {
        const baseClasses = &quot;flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50&quot;;
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((textarea2) =&gt; {
            const { placeholder: placeholder2, rows: rows2, disabled: disabled2, value: value2, onInput: onInput2, onChange: onChange2, className: className2, style: style2 } = options || {};
            applyClasses(textarea2, baseClasses, className2);
            applyStyles(textarea2, style2);
            if (placeholder2) textarea2.placeholder = placeholder2;
            if (rows2) textarea2.rows = rows2;
            if (disabled2 !== void 0) textarea2.disabled = disabled2;
            if (value2 !== void 0) textarea2.value = value2;
            if (onInput2) textarea2.addEventListener(&quot;input&quot;, onInput2);
            if (onChange2) textarea2.addEventListener(&quot;change&quot;, onChange2);
          });
          return elements;
        }
        const { placeholder, rows, disabled, value, onInput, onChange, className, style } = selectorOrOptions;
        const textarea = document.createElement(&quot;textarea&quot;);
        applyClasses(textarea, baseClasses, className);
        applyStyles(textarea, style);
        if (placeholder) textarea.placeholder = placeholder;
        if (rows) textarea.rows = rows;
        if (disabled) textarea.disabled = disabled;
        if (value !== void 0) textarea.value = value;
        if (onInput) textarea.addEventListener(&quot;input&quot;, onInput);
        if (onChange) textarea.addEventListener(&quot;change&quot;, onChange);
        return textarea;
      },
      /**
       * Select helper - creates or enhances select elements
       * Uses native HTML select with chevron icon styling to match shadcn
       */
      select(selectorOrOptions, options) {
        const createSelectWrapper = (items2, value2, placeholder2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;relative w-full&quot;, className2);
          applyStyles(wrapper, style2);
          const select = document.createElement(&quot;select&quot;);
          const selectClasses = &quot;sandbox-select flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none cursor-pointer&quot;;
          applyClasses(select, selectClasses);
          if (placeholder2) {
            const placeholderOption = document.createElement(&quot;option&quot;);
            placeholderOption.value = &quot;&quot;;
            placeholderOption.textContent = placeholder2;
            placeholderOption.disabled = true;
            placeholderOption.selected = true;
            select.appendChild(placeholderOption);
            select.required = true;
          }
          if (items2) {
            items2.forEach((item) =&gt; {
              const option = document.createElement(&quot;option&quot;);
              option.value = item.value;
              option.textContent = item.label;
              select.appendChild(option);
            });
          }
          if (value2) {
            select.value = value2;
            if (placeholder2) select.required = false;
          }
          if (disabled2) select.disabled = disabled2;
          if (onChange2) {
            select.addEventListener(&quot;change&quot;, (e) =&gt; {
              const newValue = e.target.value;
              if (placeholder2) {
                select.required = newValue === &quot;&quot;;
              }
              onChange2(newValue);
            });
          }
          const chevron = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(chevron, &quot;h-4 w-4 opacity-50 pointer-events-none&quot;);
          chevron.style.position = &quot;absolute&quot;;
          chevron.style.right = &quot;0.75rem&quot;;
          chevron.style.top = &quot;50%&quot;;
          chevron.style.transform = &quot;translateY(-50%)&quot;;
          chevron.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          chevron.setAttribute(&quot;width&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;height&quot;, &quot;24&quot;);
          chevron.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          chevron.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          chevron.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          chevron.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          chevron.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          chevron.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;6 9 12 15 18 9&quot;);
          chevron.appendChild(polyline);
          select.style.paddingRight = &quot;2.5rem&quot;;
          wrapper.appendChild(select);
          wrapper.appendChild(chevron);
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          const wrappers = [];
          elements.forEach((select) =&gt; {
            const { items: items2, value: value2, placeholder: placeholder2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const wrapper = createSelectWrapper(items2, value2, placeholder2, disabled2, onChange2, className2, style2);
            select.replaceWith(wrapper);
            wrappers.push(wrapper);
          });
          return document.querySelectorAll(&quot;.relative:has(select)&quot;);
        }
        const { items, value, placeholder, disabled, onChange, className, style } = selectorOrOptions;
        return createSelectWrapper(items, value, placeholder, disabled, onChange, className, style);
      },
      /**
       * Checkbox helper - creates checkbox elements matching shadcn Radix UI styling
       * Uses custom div-based checkbox with check icon for visual parity
       */
      checkbox(selectorOrOptions, options) {
        const createCheckbox = (checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const checkboxContainer = document.createElement(&quot;button&quot;);
          checkboxContainer.type = &quot;button&quot;;
          checkboxContainer.role = &quot;checkbox&quot;;
          checkboxContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          const checkboxClasses = &quot;grid place-content-center peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer&quot;;
          applyClasses(checkboxContainer, checkboxClasses);
          const updateCheckboxStyles = (isChecked2) =&gt; {
            if (isChecked2) {
              checkboxContainer.style.backgroundColor = &quot;var(--color-checkbox-checked)&quot;;
              checkboxContainer.style.color = &quot;var(--color-checkbox-checked-foreground)&quot;;
            } else {
              checkboxContainer.style.backgroundColor = &quot;&quot;;
              checkboxContainer.style.color = &quot;&quot;;
            }
          };
          updateCheckboxStyles(!!checked2);
          if (disabled2) {
            checkboxContainer.disabled = true;
          }
          const checkIcon = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          applyClasses(checkIcon, &quot;h-4 w-4&quot;);
          checkIcon.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          checkIcon.setAttribute(&quot;width&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;height&quot;, &quot;24&quot;);
          checkIcon.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          checkIcon.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          checkIcon.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          checkIcon.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          checkIcon.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          checkIcon.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          const polyline = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;polyline&quot;);
          polyline.setAttribute(&quot;points&quot;, &quot;20 6 9 17 4 12&quot;);
          checkIcon.appendChild(polyline);
          if (checked2) {
            checkboxContainer.appendChild(checkIcon);
          }
          let isChecked = !!checked2;
          checkboxContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            isChecked = !isChecked;
            checkboxContainer.setAttribute(&quot;aria-checked&quot;, isChecked ? &quot;true&quot; : &quot;false&quot;);
            updateCheckboxStyles(isChecked);
            if (isChecked) {
              checkboxContainer.appendChild(checkIcon);
            } else {
              if (checkIcon.parentNode === checkboxContainer) {
                checkboxContainer.removeChild(checkIcon);
              }
            }
            if (onChange2) onChange2(isChecked);
          });
          wrapper.appendChild(checkboxContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) checkboxContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const checkboxWrapper = createCheckbox(checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(checkboxWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createCheckbox(checked, label, disabled, onChange, className, style);
      },
      /**
       * Radio helper - creates radio button elements matching shadcn Radix UI styling
       * Uses custom button-based radio with circle fill indicator for visual parity
       */
      radio(selectorOrOptions, options) {
        const createRadio = (name2, value2, checked2, label2, disabled2, onChange2, className2, style2) =&gt; {
          const wrapper = document.createElement(&quot;div&quot;);
          applyClasses(wrapper, &quot;flex items-center gap-2&quot;, className2);
          applyStyles(wrapper, style2);
          const radioContainer = document.createElement(&quot;button&quot;);
          radioContainer.type = &quot;button&quot;;
          radioContainer.role = &quot;radio&quot;;
          radioContainer.setAttribute(&quot;aria-checked&quot;, checked2 ? &quot;true&quot; : &quot;false&quot;);
          radioContainer.setAttribute(&quot;data-name&quot;, name2);
          radioContainer.setAttribute(&quot;data-value&quot;, value2);
          const radioClasses = &quot;aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 cursor-pointer flex items-center justify-center&quot;;
          applyClasses(radioContainer, radioClasses);
          if (disabled2) {
            radioContainer.disabled = true;
          }
          const circleIndicator = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;svg&quot;);
          circleIndicator.setAttribute(&quot;xmlns&quot;, &quot;http://www.w3.org/2000/svg&quot;);
          circleIndicator.setAttribute(&quot;width&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;height&quot;, &quot;24&quot;);
          circleIndicator.setAttribute(&quot;viewBox&quot;, &quot;0 0 24 24&quot;);
          circleIndicator.setAttribute(&quot;fill&quot;, &quot;none&quot;);
          circleIndicator.setAttribute(&quot;stroke&quot;, &quot;currentColor&quot;);
          circleIndicator.setAttribute(&quot;stroke-width&quot;, &quot;2&quot;);
          circleIndicator.setAttribute(&quot;stroke-linecap&quot;, &quot;round&quot;);
          circleIndicator.setAttribute(&quot;stroke-linejoin&quot;, &quot;round&quot;);
          applyClasses(circleIndicator, &quot;h-3.5 w-3.5 fill-primary&quot;);
          const circle = document.createElementNS(&quot;http://www.w3.org/2000/svg&quot;, &quot;circle&quot;);
          circle.setAttribute(&quot;cx&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;cy&quot;, &quot;12&quot;);
          circle.setAttribute(&quot;r&quot;, &quot;10&quot;);
          circleIndicator.appendChild(circle);
          if (checked2) {
            radioContainer.appendChild(circleIndicator);
          }
          radioContainer.addEventListener(&quot;click&quot;, (e) =&gt; {
            if (disabled2) return;
            e.preventDefault();
            const allRadiosInGroup = document.querySelectorAll(`[role=&quot;radio&quot;][data-name=&quot;${name2}&quot;]`);
            allRadiosInGroup.forEach((radio) =&gt; {
              radio.setAttribute(&quot;aria-checked&quot;, &quot;false&quot;);
              while (radio.firstChild) {
                radio.removeChild(radio.firstChild);
              }
            });
            radioContainer.setAttribute(&quot;aria-checked&quot;, &quot;true&quot;);
            radioContainer.appendChild(circleIndicator);
            if (onChange2) onChange2(value2);
          });
          wrapper.appendChild(radioContainer);
          if (label2) {
            const labelEl = document.createElement(&quot;label&quot;);
            applyClasses(labelEl, &quot;text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer&quot;);
            labelEl.textContent = label2;
            labelEl.addEventListener(&quot;click&quot;, () =&gt; {
              if (!disabled2) radioContainer.click();
            });
            wrapper.appendChild(labelEl);
          }
          return wrapper;
        };
        if (isSelector(selectorOrOptions)) {
          const elements = document.querySelectorAll(selectorOrOptions);
          elements.forEach((el) =&gt; {
            const { name: name2, value: value2, checked: checked2, label: label2, disabled: disabled2, onChange: onChange2, className: className2, style: style2 } = options || {};
            const radioWrapper = createRadio(name2, value2, checked2, label2, disabled2, onChange2, className2, style2);
            el.replaceWith(radioWrapper);
          });
          return document.querySelectorAll(selectorOrOptions);
        }
        const { name, value, checked, label, disabled, onChange, className, style } = selectorOrOptions;
        return createRadio(name, value, checked, label, disabled, onChange, className, style);
      }
    };
  }
  function scanAndGenerateClasses(api) {
    const classNames = /* @__PURE__ */ new Set();
    const elements = document.querySelectorAll(&quot;[class]&quot;);
    elements.forEach((element) =&gt; {
      const classList = element.className;
      if (typeof classList === &quot;string&quot;) {
        classList.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
    });
    const scripts = document.querySelectorAll(&quot;script&quot;);
    scripts.forEach((script) =&gt; {
      const content = script.textContent || &quot;&quot;;
      const stringMatches = content.matchAll(/(?:className|class)\s*[=:]\s*[&quot;&#x27;`]([^&quot;&#x27;`]+)[&quot;&#x27;`]/g);
      for (const match of stringMatches) {
        const classes = match[1];
        classes.split(/\s+/).forEach((cls) =&gt; {
          if (cls) classNames.add(cls);
        });
      }
      const templateMatches = content.matchAll(/`([^`]*(?:p-|m-|bg-|text-|border-|rounded|flex|grid|grid-cols-|grid-rows-|grid-flow-|auto-cols-|auto-rows-|col-|row-|w-|h-|gap-)[^`]*)`/g);
      for (const match of templateMatches) {
        const classes = match[1];
        const tailwindMatches = classes.matchAll(/\b((?:p|px|py|pt|pb|pl|pr|m|mx|my|mt|mb|ml|mr|gap|gap-x|gap-y|w|h|min-w|min-h|max-w|max-h|bg|text|border|rounded|flex|grid|grid-cols|grid-rows|grid-flow|auto-cols|auto-rows|col|row|inline|block|hidden|top|right|bottom|left|inset)(?:-[\w[\]/:.%-]+)?)\b/g);
        for (const tailwindMatch of tailwindMatches) {
          if (tailwindMatch[1]) classNames.add(tailwindMatch[1]);
        }
      }
    });
    if (classNames.size &gt; 0) {
      const allClasses = Array.from(classNames).join(&quot; &quot;);
      api.css(allClasses);
    }
  }
  function setupMutationObserver(api) {
    const sandboxWindow2 = window;
    const config = sandboxWindow2.$CONFIG || {};
    const autoDetectClasses = config.autoDetectClasses !== false;
    if (!autoDetectClasses) {
      return;
    }
    const observer = new MutationObserver((mutations) =&gt; {
      const classNames = /* @__PURE__ */ new Set();
      for (const mutation of mutations) {
        mutation.addedNodes.forEach((node) =&gt; {
          if (node.nodeType === Node.ELEMENT_NODE) {
            const element = node;
            if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
              element.className.split(/\s+/).forEach((cls) =&gt; {
                if (cls) classNames.add(cls);
              });
            }
            element.querySelectorAll(&quot;[class]&quot;).forEach((child) =&gt; {
              if (typeof child.className === &quot;string&quot;) {
                child.className.split(/\s+/).forEach((cls) =&gt; {
                  if (cls) classNames.add(cls);
                });
              }
            });
          }
        });
        if (mutation.type === &quot;attributes&quot; &amp;&amp; mutation.attributeName === &quot;class&quot;) {
          const element = mutation.target;
          if (element.className &amp;&amp; typeof element.className === &quot;string&quot;) {
            element.className.split(/\s+/).forEach((cls) =&gt; {
              if (cls) classNames.add(cls);
            });
          }
        }
      }
      if (classNames.size &gt; 0) {
        const allClasses = Array.from(classNames).join(&quot; &quot;);
        api.css(allClasses);
      }
    });
    observer.observe(document.body, {
      childList: true,
      subtree: true,
      attributes: true,
      attributeFilter: [&quot;class&quot;]
    });
  }
  const clamp = (v, min, max) =&gt; Math.min(Math.max(v, min), max);
  function parseColor(input) {
    const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${input}`).trim();
    const colorStr = cssVar || input;
    const oklchMatch = colorStr.match(/oklch\(([^)]+)\)/);
    if (oklchMatch) {
      const parts = oklchMatch[1].split(&quot;/&quot;);
      const channels = parts[0].trim().split(/\s+/);
      if (channels.length === 3) {
        const parseVal = (s, pctScale) =&gt; s.endsWith(&quot;%&quot;) ? parseFloat(s) / 100 * pctScale : parseFloat(s);
        const l = parseVal(channels[0], 1);
        const c = parseVal(channels[1], 1);
        const h = parseVal(channels[2], 360);
        let a2 = 1;
        if (parts[1] != null) {
          const alphaStr = parts[1].trim();
          a2 = alphaStr.endsWith(&quot;%&quot;) ? parseFloat(alphaStr) / 100 : parseFloat(alphaStr);
        }
        if (!isNaN(l) &amp;&amp; !isNaN(c) &amp;&amp; !isNaN(h) &amp;&amp; !isNaN(a2)) {
          return oklchToRgb({ l, c, h, a: a2 });
        }
      }
    }
    const canvas = document.createElement(&quot;canvas&quot;);
    canvas.width = 1;
    canvas.height = 1;
    const ctx = canvas.getContext(&quot;2d&quot;);
    ctx.fillStyle = colorStr;
    ctx.fillRect(0, 0, 1, 1);
    const [r, g, b, a] = ctx.getImageData(0, 0, 1, 1).data;
    return { r: r / 255, g: g / 255, b: b / 255, a: a / 255 };
  }
  function srgbToLinear(c) {
    return c &lt;= 0.04045 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
  }
  function linearToSrgb(c) {
    return c &lt;= 31308e-7 ? c * 12.92 : 1.055 * Math.pow(c, 1 / 2.4) - 0.055;
  }
  function rgbToOklab(rgb) {
    const r = srgbToLinear(rgb.r);
    const g = srgbToLinear(rgb.g);
    const b = srgbToLinear(rgb.b);
    const l_ = 0.4122214708 * r + 0.5363325363 * g + 0.0514459929 * b;
    const m_ = 0.2119034982 * r + 0.6806995451 * g + 0.1073969566 * b;
    const s_ = 0.0883024619 * r + 0.2817188376 * g + 0.6299787005 * b;
    const l = Math.cbrt(l_);
    const m = Math.cbrt(m_);
    const s = Math.cbrt(s_);
    return {
      L: 0.2104542553 * l + 0.793617785 * m - 0.0040720468 * s,
      a: 1.9779984951 * l - 2.428592205 * m + 0.4505937099 * s,
      b: 0.0259040371 * l + 0.7827717662 * m - 0.808675766 * s,
      alpha: rgb.a
    };
  }
  function oklabToRgb(lab) {
    const l = lab.L + 0.3963377774 * lab.a + 0.2158037573 * lab.b;
    const m = lab.L - 0.1055613458 * lab.a - 0.0638541728 * lab.b;
    const s = lab.L - 0.0894841775 * lab.a - 1.291485548 * lab.b;
    const l3 = l * l * l;
    const m3 = m * m * m;
    const s3 = s * s * s;
    return {
      r: clamp(linearToSrgb(4.0767416621 * l3 - 3.3077115913 * m3 + 0.2309699292 * s3), 0, 1),
      g: clamp(linearToSrgb(-1.2684380046 * l3 + 2.6097574011 * m3 - 0.3413193965 * s3), 0, 1),
      b: clamp(linearToSrgb(-0.0041960863 * l3 - 0.7034186147 * m3 + 1.707614701 * s3), 0, 1),
      a: lab.alpha
    };
  }
  function oklabToOklch(lab) {
    const c = Math.sqrt(lab.a * lab.a + lab.b * lab.b);
    let h = Math.atan2(lab.b, lab.a) * 180 / Math.PI;
    if (h &lt; 0) h += 360;
    return { l: lab.L, c, h, a: lab.alpha };
  }
  function oklchToOklab(oklch) {
    const hRad = oklch.h * Math.PI / 180;
    return {
      L: oklch.l,
      a: oklch.c * Math.cos(hRad),
      b: oklch.c * Math.sin(hRad),
      alpha: oklch.a
    };
  }
  function rgbToOklch(rgb) {
    return oklabToOklch(rgbToOklab(rgb));
  }
  function oklchToRgb(oklch) {
    return oklabToRgb(oklchToOklab(oklch));
  }
  function rgbToHsl(rgb) {
    const { r, g, b } = rgb;
    const max = Math.max(r, g, b);
    const min = Math.min(r, g, b);
    const d = max - min;
    const l = (max + min) / 2;
    if (d === 0) return { h: 0, s: 0, l: l * 100, a: rgb.a };
    const s = l &gt; 0.5 ? d / (2 - max - min) : d / (max + min);
    let h = 0;
    if (max === r) h = ((g - b) / d + (g &lt; b ? 6 : 0)) / 6;
    else if (max === g) h = ((b - r) / d + 2) / 6;
    else h = ((r - g) / d + 4) / 6;
    return { h: h * 360, s: s * 100, l: l * 100, a: rgb.a };
  }
  function hslToRgb(hsl) {
    const h = hsl.h / 360;
    const s = hsl.s / 100;
    const l = hsl.l / 100;
    if (s === 0) return { r: l, g: l, b: l, a: hsl.a };
    const hue2rgb = (p2, q2, t) =&gt; {
      if (t &lt; 0) t += 1;
      if (t &gt; 1) t -= 1;
      if (t &lt; 1 / 6) return p2 + (q2 - p2) * 6 * t;
      if (t &lt; 1 / 2) return q2;
      if (t &lt; 2 / 3) return p2 + (q2 - p2) * (2 / 3 - t) * 6;
      return p2;
    };
    const q = l &lt; 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    return {
      r: hue2rgb(p, q, h + 1 / 3),
      g: hue2rgb(p, q, h),
      b: hue2rgb(p, q, h - 1 / 3),
      a: hsl.a
    };
  }
  function formatOklch(oklch) {
    const l = Math.round(oklch.l * 1e3) / 1e3;
    const c = Math.round(oklch.c * 1e3) / 1e3;
    const h = Math.round(oklch.h * 100) / 100;
    if (oklch.a &lt; 1) {
      const a = Math.round(oklch.a * 1e3) / 1e3;
      return `oklch(${l} ${c} ${h} / ${a})`;
    }
    return `oklch(${l} ${c} ${h})`;
  }
  function determineAdjustSpace(opts) {
    if (opts.space) return opts.space;
    const hasOklch = opts.lightness != null || opts.chroma != null || opts.hue != null;
    const hasHsl = opts.saturation != null;
    const hasRgb = opts.red != null || opts.green != null || opts.blue != null;
    if (hasHsl &amp;&amp; !hasOklch &amp;&amp; !hasRgb) return &quot;hsl&quot;;
    if (hasRgb &amp;&amp; !hasOklch &amp;&amp; !hasHsl) return &quot;rgb&quot;;
    if (hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    if (!hasOklch &amp;&amp; !hasHsl &amp;&amp; !hasRgb) return &quot;oklch&quot;;
    throw new Error(
      &quot;[getColor] Cannot mix channels from different color spaces. Use the space parameter to disambiguate, or only use channels from one space.&quot;
    );
  }
  function adjustColor(input, opts) {
    const rgba = parseColor(input);
    const space = determineAdjustSpace(opts);
    const alphaAdj = opts.alpha ?? 0;
    if (space === &quot;oklch&quot;) {
      const oklch = rgbToOklch(rgba);
      oklch.l = clamp(oklch.l + (opts.lightness ?? 0), 0, 1);
      oklch.c = Math.max(0, oklch.c + (opts.chroma ?? 0));
      oklch.h = ((oklch.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      oklch.a = clamp(oklch.a + alphaAdj, 0, 1);
      return formatOklch(oklch);
    }
    if (space === &quot;hsl&quot;) {
      const hsl = rgbToHsl(rgba);
      hsl.h = ((hsl.h + (opts.hue ?? 0)) % 360 + 360) % 360;
      hsl.s = clamp(hsl.s + (opts.saturation ?? 0), 0, 100);
      hsl.l = clamp(hsl.l + (opts.lightness ?? 0), 0, 100);
      hsl.a = clamp(hsl.a + alphaAdj, 0, 1);
      const rgb = hslToRgb(hsl);
      return formatOklch(rgbToOklch(rgb));
    }
    const r = clamp(rgba.r + (opts.red ?? 0) / 255, 0, 1);
    const g = clamp(rgba.g + (opts.green ?? 0) / 255, 0, 1);
    const b = clamp(rgba.b + (opts.blue ?? 0) / 255, 0, 1);
    const a = clamp(rgba.a + alphaAdj, 0, 1);
    return formatOklch(rgbToOklch({ r, g, b, a }));
  }
  function initializeSandbox() {
    const themeChangeCallbacks = [];
    const resizeCallbacks = [];
    let currentTheme = document.documentElement.classList.contains(&quot;dark&quot;) ? &quot;dark&quot; : &quot;light&quot;;
    const cssGenerator = createCSSGenerator();
    const api = {
      get theme() {
        return currentTheme;
      },
      size: {
        get width() {
          return window.innerWidth;
        }
      },
      onResize: (callback) =&gt; {
        resizeCallbacks.push(callback);
        callback(window.innerWidth);
      },
      onThemeChange: (callback) =&gt; {
        themeChangeCallbacks.push(callback);
        callback(currentTheme);
      },
      requestResize: (height) =&gt; {
        window.parent.postMessage(
          {
            event: &quot;resize-request&quot;,
            data: { height }
          },
          &quot;*&quot;
        );
      },
      getColor: (color, adjust) =&gt; {
        if (adjust) {
          return adjustColor(color, adjust);
        }
        const cssVar = getComputedStyle(document.documentElement).getPropertyValue(`--color-${color}`).trim();
        if (cssVar) return cssVar;
        return formatOklch(rgbToOklch(parseColor(color)));
      },
      getFont: (name) =&gt; {
        if (name === &quot;default&quot;) {
          const value = getComputedStyle(document.body).fontFamily;
          return value.trim();
        } else if (name === &quot;mono&quot;) {
          return &#x27;&quot;Space Mono&quot;, ui-monospace, &quot;Cascadia Code&quot;, monospace&#x27;;
        }
        return &quot;&quot;;
      },
      css: cssGenerator,
      ui: createUIHelpers(cssGenerator),
      emit: (event, data) =&gt; {
        void event;
        void data;
      }
    };
    window.addEventListener(&quot;message&quot;, (event) =&gt; {
      if (event.data?.event === &quot;theme-change&quot;) {
        const newTheme = event.data.data.theme;
        if (newTheme === &quot;dark&quot;) {
          document.documentElement.classList.add(&quot;dark&quot;);
        } else {
          document.documentElement.classList.remove(&quot;dark&quot;);
        }
        currentTheme = newTheme;
        themeChangeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newTheme);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onThemeChange callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }
    });
    let resizeTimeout;
    window.addEventListener(&quot;resize&quot;, () =&gt; {
      clearTimeout(resizeTimeout);
      resizeTimeout = window.setTimeout(() =&gt; {
        const newWidth = window.innerWidth;
        resizeCallbacks.forEach((callback) =&gt; {
          try {
            callback(newWidth);
          } catch (error) {
            console.error(&quot;[DynamicBlock Error] Error in onResize callback:&quot;, error);
            console.error(&quot;Stack trace:&quot;, error.stack);
          }
        });
      }, 150);
    });
    const sandboxWindow2 = window;
    sandboxWindow2.sandboxContext = api;
    setupAutoResize(api);
    scanAndGenerateClasses(api);
    setupMutationObserver(api);
  }
  function setupAutoResize(api) {
    let lastHeight = 0;
    const updateHeight = () =&gt; {
      const root2 = document.getElementById(&quot;root&quot;);
      if (!root2) return;
      const currentHeight = root2.scrollHeight;
      if (currentHeight !== lastHeight) {
        lastHeight = currentHeight;
        api.requestResize(currentHeight);
      }
    };
    const resizeObserver = new ResizeObserver(() =&gt; {
      updateHeight();
    });
    const root = document.getElementById(&quot;root&quot;);
    if (root) {
      resizeObserver.observe(root);
    }
    setTimeout(updateHeight, 0);
  }
  initializeSandbox();
  function executeMountIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const root = document.getElementById(&quot;root&quot;);
      if (!root) {
        console.error(&quot;[DynamicBlock Error] Root element not found - cannot execute mount()&quot;);
        return;
      }
      if (typeof sandboxWindow2.mount === &quot;function&quot;) {
        try {
          sandboxWindow2.mount({ root, api, props });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in mount() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error in executeMountIfExists():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  function executeDrawIfExists(props = {}) {
    try {
      const sandboxWindow2 = window;
      const api = sandboxWindow2.sandboxContext;
      const drawFn = sandboxWindow2.draw;
      if (!api) {
        console.error(&quot;[DynamicBlock Error] Sandbox context not initialized&quot;);
        return;
      }
      if (typeof drawFn !== &quot;function&quot;) {
        return;
      }
      let canvas = document.querySelector(&quot;canvas&quot;);
      if (!canvas) {
        const root = document.getElementById(&quot;root&quot;);
        if (!root) {
          console.error(&quot;[DynamicBlock Error] Root element not found - cannot create canvas&quot;);
          return;
        }
        root.innerHTML = &quot;&quot;;
        canvas = document.createElement(&quot;canvas&quot;);
        canvas.className = api.css(&quot;[&amp;:not([width])]:w-full [&amp;[width]]:mx-auto&quot;);
        root.appendChild(canvas);
      }
      const ariaLabel = sandboxWindow2.__CANVAS_ARIA_LABEL__;
      if (ariaLabel &amp;&amp; typeof ariaLabel === &quot;string&quot;) {
        canvas.setAttribute(&quot;aria-label&quot;, ariaLabel);
      }
      const autoRedrawConfig = sandboxWindow2.autoRedraw || {
        onThemeChange: true,
        onResize: true
      };
      const themeChangeConfig = autoRedrawConfig.onThemeChange === false ? false : autoRedrawConfig.onThemeChange || 0;
      const resizeConfig = autoRedrawConfig.onResize === false ? false : autoRedrawConfig.onResize === true ? 150 : autoRedrawConfig.onResize;
      let resizeTimeout;
      const executeDraw = () =&gt; {
        try {
          const theme = api.theme;
          const width = window.innerWidth;
          drawFn({ canvas, api, theme, width, props });
          requestAnimationFrame(() =&gt; {
            const root = document.getElementById(&quot;root&quot;);
            if (root) {
              const height = root.scrollHeight;
              if (height &gt; 0) {
                api.requestResize(height);
              }
            }
          });
        } catch (error) {
          console.error(&quot;[DynamicBlock Error] Error in draw() function:&quot;, error);
          console.error(&quot;Stack trace:&quot;, error.stack);
        }
      };
      executeDraw();
      if (themeChangeConfig !== false) {
        api.onThemeChange(() =&gt; {
          const debounce = typeof themeChangeConfig === &quot;number&quot; ? themeChangeConfig : 0;
          if (debounce === 0) {
            executeDraw();
          } else {
            setTimeout(executeDraw, debounce);
          }
        });
      }
      if (resizeConfig !== false) {
        api.onResize(() =&gt; {
          clearTimeout(resizeTimeout);
          const debounce = typeof resizeConfig === &quot;number&quot; ? resizeConfig : 150;
          resizeTimeout = window.setTimeout(executeDraw, debounce);
        });
      }
    } catch (error) {
      console.error(&quot;[DynamicBlock Error] Fatal error setting up draw():&quot;, error);
      console.error(&quot;Stack trace:&quot;, error.stack);
    }
  }
  const sandboxWindow = window;
  sandboxWindow.executeMountIfExists = executeMountIfExists;
  sandboxWindow.executeDrawIfExists = executeDrawIfExists;
})();

  &lt;/script&gt;

  &lt;!-- User code script with source mapping --&gt;
  &lt;script&gt;//# sourceURL=content/puzzles/cryptography/average-salaries-2.md

































































































































































































function draw(options) {
  const { canvas, api, width: _width, props } = options;
  const { n, showExtraPaths = false, maxWidth = 600 } = props || {};

  const width = Math.min(_width, maxWidth);
  const lineThickness = 2;
  const fontSize = 16;
  const labelOffset = 20;
  const canvasSize = width + lineThickness * 2;
  canvas.width = canvasSize;
  canvas.height = canvasSize;

  const centerX = canvasSize / 2;
  const centerY = canvasSize / 2;
  const radius = Math.max(0, (width / 2) - labelOffset - fontSize / 2);

  const ctx = canvas.getContext(&#x27;2d&#x27;);
  const fgColor = api.getColor(&#x27;foreground&#x27;);
  const mutedColor = api.getColor(&#x27;blue-500&#x27;);
  const font = api.getFont(&#x27;default&#x27;);

  // Calculate point positions around the circle
  const points = [];
  for (let i = 0; i &lt; n; i++) {
    const angle = (i / n) * 2 * Math.PI - Math.PI / 2; // Start from top
    const x = centerX + radius * Math.cos(angle);
    const y = centerY + radius * Math.sin(angle);
    points.push({ x, y, angle });
  }

  // Draw lines between all pairs of points
  ctx.strokeStyle = fgColor;
  ctx.lineWidth = lineThickness;
  for (let i = 0; i &lt; n; i++) {
    for (let j = i + 1; j &lt; n; j++) {
      ctx.beginPath();
      ctx.moveTo(points[i].x, points[i].y);
      ctx.lineTo(points[j].x, points[j].y);
      ctx.stroke();
    }
  }

  // Draw extra arc paths if requested
  if (showExtraPaths) {
    ctx.strokeStyle = mutedColor;
    ctx.lineWidth = lineThickness;
    for (let i = 1; i &lt; n - 1; i += 2) {
      const startAngle = points[i].angle;
      const endAngle = points[i + 1].angle;

      ctx.beginPath();
      ctx.arc(centerX, centerY, radius, startAngle, endAngle);
      ctx.stroke();
    }
  }

  // Draw and label points
  ctx.fillStyle = fgColor;
  const pointRadius = 5;

  for (let i = 0; i &lt; n; i++) {
    // Draw point
    ctx.beginPath();
    ctx.arc(points[i].x, points[i].y, pointRadius, 0, 2 * Math.PI);
    ctx.fill();

    // Draw label
    const labelAngle = points[i].angle;
    const labelX = centerX + (radius + labelOffset) * Math.cos(labelAngle);
    const labelY = centerY + (radius + labelOffset) * Math.sin(labelAngle);

    ctx.font = `${fontSize}px ${font}`;
    ctx.textAlign = &#x27;center&#x27;;
    ctx.textBaseline = &#x27;middle&#x27;;
    ctx.fillText((i + 1).toString(), labelX, labelY);
  }
}&lt;/script&gt;

  &lt;!-- Execution script --&gt;
  &lt;script&gt;
    // Execute mount() if defined, passing props
    if (typeof executeMountIfExists === &#x27;function&#x27;) {
      executeMountIfExists(window.__COMPONENT_PROPS__);
    }

    // Execute draw() if defined, passing props
    if (typeof executeDrawIfExists === &#x27;function&#x27;) {
      executeDrawIfExists(window.__COMPONENT_PROPS__);
    }
  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;" style="width:100%;height:300px" title="Interactive content 3"></iframe></div><p>A valid Eulerian path would be:</p><p>1 → 2 → 3 → 1 → 4 → 2 → 3 → 4 → 5 → 1 → 6 → 2 → 5 → 3 → 6 → 4 → 5 → 6 → 7 → 1 → 8 → 2 → 7 → 3 → 8 → 4 → 7 → 5 → 8 → 6 → 7 → 8 → 9 → 1 → 10 → 2 → 9 → 3 → 10 → 4 → 9 → 5 → 10 → 6 → 9 → 7 → 10 → 8 → 9 → 10 → 11 → 1 → 12 → 2 → 11 → 3 → 12 → 4 → 11 → 5 → 12 → 6 → 11 → 7 → 12 → 8 → 11 → 9 → 12 → 10 → 11 → 12</p><p>The actual path is not important, but the optimal length of such a sequence is 71 emails.</p><p>With our valid email path, what each employee needs to do next is to see how many times they appear in the path, then split their salary into that many numbers.</p><p>Let’s use some examples.</p><p>Employee 4 shows up in the path 6 times. If he makes $4000, he can simply add 1000 to the sum each time it comes to him.</p><p>Employee 1 shows up in the path 5 times. If he makes $6200, he can:</p><ol>
<li>Send 500 to the next person (since the path starts with him).</li>
<li>Add 7000 the second time the email comes to him.</li>
<li>Add 1234 the third time</li>
<li>Subtract 10,000 the fourth time</li>
<li>Add 7466 the final time.</li>
</ol><p>If every employee does this, then the final sum at the end of the email path will be the sum of all employees’ salaries. They can divide this sum by 12 to get the average salary.</p></div></details>
<div class="inline-component-definition" style="display:none"></div></div><div class="flex justify-center my-8"><button class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 cursor-pointer disabled:cursor-not-allowed disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 border bg-background h-10 px-4 py-2 border-completed text-completed hover:bg-completed/20 gap-2 w-full sm:w-40" aria-label="Mark puzzle as solved">Mark as Solved</button></div><section class="mt-12"><h2 class="mb-6 text-xl font-bold text-foreground lg:text-2xl">Try These Next</h2><div class="overflow-hidden rounded-xl border border-border bg-card [&amp;&gt;*]:border-b [&amp;&gt;*]:border-border [&amp;&gt;*:last-child]:border-b-0"><a class="relative block transition-colors no-underline p-4 hover:bg-muted" href="/puzzle/equal-shape-cutting-4" data-discover="true"><div class="flex items-center gap-3 mb-3"><span class="px-3 py-1 rounded-full text-sm font-medium bg-difficulty-easy text-difficulty-easy-foreground">Easy</span></div><div class="space-y-2"><h3 class="text-base font-semibold pr-8 text-foreground">Equal Shape Cutting 4</h3><p class="text-sm line-clamp-2 pr-8 text-muted-foreground">With 1 cut, divide the zigzag shape into 2 equal shapes of itself. The cut does not have to be straight, but has to be a connected line. The shapes can be...</p></div></a><a class="relative block transition-colors no-underline p-4 hover:bg-muted" href="/puzzle/stack-of-coins-2" data-discover="true"><div class="flex items-center gap-3 mb-3"><span class="px-3 py-1 rounded-full text-sm font-medium bg-difficulty-medium text-difficulty-medium-foreground">Medium</span></div><div class="space-y-2"><h3 class="text-base font-semibold pr-8 text-foreground">Stack of Coins 2</h3><p class="text-sm line-clamp-2 pr-8 text-muted-foreground">You and your friend have decided to make treasure hunting your weekend project. After a few weeks of treasure hunting, you guys stumble on another pirate’s...</p></div></a><a class="relative block transition-colors no-underline p-4 hover:bg-muted" href="/puzzle/close-shave-with-a-train" data-discover="true"><div class="flex items-center gap-3 mb-3"><span class="px-3 py-1 rounded-full text-sm font-medium bg-difficulty-easy text-difficulty-easy-foreground">Easy</span></div><div class="space-y-2"><h3 class="text-base font-semibold pr-8 text-foreground">Close Shave with a Train</h3><p class="text-sm line-clamp-2 pr-8 text-muted-foreground">Alan is traversing a railway track that spans over a treacherous ravine. As he reaches \frac{3}{8} of the way across the track, he hears the whistle of a train...</p></div></a></div></section></div></main></div><script>((storageKey2, restoreKey) => {
    if (!window.history.state || !window.history.state.key) {
      let key = Math.random().toString(32).slice(2);
      window.history.replaceState({ key }, "");
    }
    try {
      let positions = JSON.parse(sessionStorage.getItem(storageKey2) || "{}");
      let storedY = positions[restoreKey || window.history.state.key];
      if (typeof storedY === "number") {
        window.scrollTo(0, storedY);
      }
    } catch (error) {
      console.error(error);
      sessionStorage.removeItem(storageKey2);
    }
  })("react-router-scroll-positions", null)</script><script>window.__reactRouterContext = {"basename":"/","future":{"v8_middleware":false,"unstable_optimizeDeps":false,"unstable_splitRouteModules":false,"unstable_subResourceIntegrity":false,"unstable_viteEnvironmentApi":false},"routeDiscovery":{"mode":"initial"},"ssr":false,"isSpaMode":false};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());</script><script type="module" async="">import "/assets/manifest-25fb394a.js";
import * as route0 from "/assets/root-BjuwspyJ.js";
import * as route1 from "/assets/puzzle-detail-ByHrUMNS.js";
  
  window.__reactRouterRouteModules = {"root":route0,"routes/puzzle-detail":route1};

import("/assets/entry.client-BQEHofJp.js");</script><!--$?--><template id="B:0"></template><!--/$--><script id="_R_">requestAnimationFrame(function(){$RT=performance.now()});</script><div hidden id="S:0"><script>window.__reactRouterContext.streamController.enqueue("[{\"_1\":2,\"_78\":-5,\"_79\":-5},\"loaderData\",{\"_3\":4},\"routes/puzzle-detail\",{\"_5\":6,\"_7\":8,\"_9\":10},\"status\",\"success\",\"slug\",\"average-salaries-2\",\"puzzle\",{\"_7\":8,\"_11\":12,\"_38\":39,\"_40\":41,\"_42\":43,\"_70\":71},\"metadata\",{\"_13\":14,\"_15\":16,\"_17\":18,\"_19\":22,\"_25\":26,\"_28\":29,\"_30\":31,\"_32\":33,\"_34\":33,\"_35\":36,\"_37\":36},\"id\",\"puzzle-27\",\"title\",\"Average Salaries 2\",\"difficulty\",{\"_19\":20,\"_21\":20},\"concepts\",\"hard\",\"reasoning\",[23,24],\"cryptography\",\"encoding\",\"tags\",[27],\"has-solution\",\"credit\",\"Original question by Puzzlestone Peak.\",\"previousPuzzle\",\"average-salaries-1\",\"dateCreated\",\"2025-11-02\",\"lastUpdated\",\"preview\",\"Back in [[puzzle ]], 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s the...\",\"websitePreview\",\"content\",\"\u003cp\u003eBack in \u003ca href=\\\"/puzzle/average-salaries-1\\\"\u003eAverage Salaries 1\u003c/a\u003e, 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s the method they came up with:\u003c/p\u003e\\n\u003cdetails class=\\\"content-block spoiler-block\\\" data-type=\\\"spoiler\\\"\u003e\u003csummary class=\\\"spoiler-label\\\"\u003eSpoiler: Solution to the previous puzzle\u003c/summary\u003e\u003cdiv class=\\\"spoiler-content markdown-content prose max-w-none px-4 py-4 space-y-4\\\"\u003e\u003col\u003e\\n\u003cli\u003eNumber the employees them 1 to 12.\u003c/li\u003e\\n\u003cli\u003eEmployee 1 comes up with a random number, which we will call \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.07847em;\\\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e, and adds his salary to it. He emails this sum to employee 2.\u003c/li\u003e\\n\u003cli\u003eEmployee 2 adds his salary to the sum and emails the new sum to employee 3.\u003c/li\u003e\\n\u003cli\u003eEmployee 3 does the same, sending the new sum to employee 4.\u003c/li\u003e\\n\u003cli\u003eRepeat this process until employee 12 has everyone’s salaries + \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.07847em;\\\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e. He then sends this overall sum to employee 1.\u003c/li\u003e\\n\u003cli\u003eEmployee 1 now has the overall sum, which is the sum of everyone’s salaries + \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.07847em;\\\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e. He subtracts \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eX\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation\u003eX\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.07847em;\\\"\u003eX\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e from it, leaving him with the sum of all their salaries. He then divides this sum by 12 to get their average salary.\u003c/li\u003e\\n\u003c/ol\u003e\u003c/div\u003e\u003c/details\u003e\\n\u003cp\u003eHowever, before they begin, one employee interrupts. “Wait! I’m number 7. What if number 6 and number 8 collude? Employee 6 can tell employee 8 what he sent me, then employee 8 can calculate the difference to get my salary.”\u003c/p\u003e\\n\u003cp\u003eThe employees pause to think about it. With their current solution, if any 2 employees collude and reveal the contents of their emails, they can find out someone else’s salary. That’s not great.\u003c/p\u003e\\n\u003cp\u003eIs there a way we can do better? Can we make it such that if any 10 employees try to collude, they still can’t get anyone’s salary?\u003c/p\u003e\\n\u003cdetails class=\\\"content-block hint-block\\\" data-type=\\\"hint\\\"\u003e\u003csummary class=\\\"hint-label\\\"\u003eHint: Why 10 employees, not 11?\u003c/summary\u003e\u003cdiv class=\\\"hint-content markdown-content prose max-w-none px-4 py-4 space-y-4\\\"\u003e\u003cp\u003eNo matter what method you use to come up with the average salary, any 11 employees colluding can \u003cstrong\u003ealways\u003c/strong\u003e get the 12th employees salary.\u003c/p\u003e\u003cp\u003eLet’s assume the 12 employees find out their average salary \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation\u003eS_1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.8333em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.05764em;\\\"\u003eS\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3011em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eIf any 11 employees are colluding, they can use the same method to find out their average salary \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation\u003eS_2\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.8333em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.05764em;\\\"\u003eS\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3011em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e.\u003c/p\u003e\u003cp\u003eThen the 12th employee’s salary is \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e12\u003c/mn\u003e\u003cmsub\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/msub\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e11\u003c/mn\u003e\u003cmsub\u003e\u003cmi\u003eS\u003c/mi\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation\u003e12S_1 - 11S_2\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.8333em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e12\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.05764em;\\\"\u003eS\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3011em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mbin\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.8333em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e11\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.05764em;\\\"\u003eS\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3011em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e. This is possible no matter what method you use to get the average salary.\u003c/p\u003e\u003c/div\u003e\u003c/details\u003e\\n\u003cdetails class=\\\"content-block hint-block\\\" data-type=\\\"hint\\\"\u003e\u003csummary class=\\\"hint-label\\\"\u003eHint\u003c/summary\u003e\u003cdiv class=\\\"hint-content markdown-content prose max-w-none px-4 py-4 space-y-4\\\"\u003e\u003cp\u003eJust as before, the number of coworkers doesn’t matter. In general, for \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation\u003en\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.4306em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e employees, is there a method that doesn’t allow any \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation\u003en-2\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6667em;vertical-align:-0.0833em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mbin\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6444em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e employees to get another employee’s salary?\u003c/p\u003e\u003c/div\u003e\u003c/details\u003e\\n\u003cdetails class=\\\"content-block hint-block\\\" data-type=\\\"hint\\\"\u003e\u003csummary class=\\\"hint-label\\\"\u003eHint: Examining A Semi-Working Solution\u003c/summary\u003e\u003cdiv class=\\\"hint-content markdown-content prose max-w-none px-4 py-4 space-y-4\\\"\u003e\u003cp\u003eAfter some more discusson in a video call, someone comes up with another solution. Instead of sending the email in a loop from 1 to 12, then back to 1, they will send it in 2 loops instead.\u003c/p\u003e\u003cp\u003eThis time, every employee comes up with a random number that they’ll keep secret.\u003c/p\u003e\u003col\u003e\\n\u003cli\u003eNumber the employees them 1 to 12.\u003c/li\u003e\\n\u003cli\u003eEmployee 1 emails his salary and his random number to employee 2.\u003c/li\u003e\\n\u003cli\u003eEmployee 2 adds his salary and his random number to employee 1’s salary and emails the sum to employee 3.\u003c/li\u003e\\n\u003cli\u003eEmployee 3 does the same, sending the new sum to employee 4.\u003c/li\u003e\\n\u003cli\u003eRepeat this process until employee 12 sends the sum back to employee 1.\u003c/li\u003e\\n\u003cli\u003eThis time, employee 1 deducts his random number from the sum and sends the new sum to employee 2.\u003c/li\u003e\\n\u003cli\u003eEmployee 2 deducts his random number and sends the new sum to employee 3.\u003c/li\u003e\\n\u003cli\u003eThis repeats until the sum reaches employee 12. Employee 12 deducts his random number, then divides the final sum by 12 to get the average salary.\u003c/li\u003e\\n\u003c/ol\u003e\u003cp\u003eLet \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation\u003es_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.5806em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003es\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3117em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e be the \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmtext\u003eth\u003c/mtext\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation\u003ei^\\\\text{th}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.8491em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ei\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.8491em;\\\"\u003e\u003cspan style=\\\"top:-3.063em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord text mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003eth\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e employee’s salary, and \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation\u003er_i\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.5806em;vertical-align:-0.15em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.02778em;\\\"\u003er\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3117em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e be the \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsup\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmtext\u003eth\u003c/mtext\u003e\u003c/msup\u003e\u003c/mrow\u003e\u003cannotation\u003ei^\\\\text{th}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.8491em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003ei\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.8491em;\\\"\u003e\u003cspan style=\\\"top:-3.063em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord text mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003eth\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e employee’s random number. Our total sum would be:\u003c/p\u003e\u003cp\u003e\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cmn\u003e12\u003c/mn\u003e\u003c/msubsup\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e)\u003c/mo\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cmn\u003e12\u003c/mn\u003e\u003c/msubsup\u003e\u003cmsub\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsubsup\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cmn\u003e12\u003c/mn\u003e\u003c/msubsup\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation\u003e\\\\sum_{i=1}^{12} (s_i + r_i) - \\\\sum_{i=1}^{12} r_i = \\\\sum_{i=1}^{12} (s_i)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1.2537em;vertical-align:-0.2997em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mop\\\"\u003e\u003cspan class=\\\"mop op-symbol small-op\\\" style=\\\"position:relative;top:0em;\\\"\u003e∑\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.954em;\\\"\u003e\u003cspan style=\\\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003cspan class=\\\"mrel mtight\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.2029em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e12\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.2997em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mopen\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003es\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3117em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mbin\\\"\u003e+\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1em;vertical-align:-0.25em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.02778em;\\\"\u003er\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3117em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mbin\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1.2537em;vertical-align:-0.2997em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mop\\\"\u003e\u003cspan class=\\\"mop op-symbol small-op\\\" style=\\\"position:relative;top:0em;\\\"\u003e∑\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.954em;\\\"\u003e\u003cspan style=\\\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003cspan class=\\\"mrel mtight\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.2029em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e12\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.2997em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.1667em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\" style=\\\"margin-right:0.02778em;\\\"\u003er\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3117em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mrel\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1.2537em;vertical-align:-0.2997em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mop\\\"\u003e\u003cspan class=\\\"mop op-symbol small-op\\\" style=\\\"position:relative;top:0em;\\\"\u003e∑\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.954em;\\\"\u003e\u003cspan style=\\\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003cspan class=\\\"mrel mtight\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.2029em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e12\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.2997em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mopen\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003es\u003c/span\u003e\u003cspan class=\\\"msupsub\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.3117em;\\\"\u003e\u003cspan style=\\\"top:-2.55em;margin-left:0em;margin-right:0.05em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:2.7em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.15em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\u003cp\u003eThe final sum divided by 12 gives the average salary, as expected.\u003c/p\u003e\u003cp\u003eEmployee 7 is not convinced. “Employee 6 and 8 can still figure out my salary! On both passes, they can see how much I’ve added and deducted. They can add the differences up to get my salary anyway.”\u003c/p\u003e\u003cp\u003eBack to the drawing board.\u003c/p\u003e\u003c/div\u003e\u003c/details\u003e\\n\u003cdetails class=\\\"content-block solution-block\\\" data-type=\\\"solution\\\"\u003e\u003csummary class=\\\"solution-label\\\"\u003eSolution\u003c/summary\u003e\u003cdiv class=\\\"solution-content markdown-content prose max-w-none px-4 py-4 space-y-4\\\"\u003e\u003cp\u003eLet’s imagine a sequence of emails that goes through all the employees in some specified order. As before, each time an employee receives a cumulative sum, modifies it, then emails it on to the next employee.\u003c/p\u003e\u003cp\u003eThe semi-working solution earlier certainly didn’t work, but there’s a seed of a solution in there. Let’s say for a particular employee X, the email chain passes through him three times.\u003c/p\u003e\u003col\u003e\\n\u003cli\u003eThe first time, employee A emails the sum to employee X. Employee X adds 1000 to the number and emails it to employee B.\u003c/li\u003e\\n\u003cli\u003eThe second time, employee C emails the sum to employee X. Employee X subtracts 2500 and emails it to employee D.\u003c/li\u003e\\n\u003cli\u003eThe third time, employee E emails the sum to employee X. Employee X adds 7000 and emails it to employee F.\u003c/li\u003e\\n\u003c/ol\u003e\u003cp\u003eThe total sum of his changes amounts to his pay of $5500.\u003c/p\u003e\u003cp\u003eHowever, imagine that you’re another employee trying to get that previous employee’s salary. If you only got access to 1 or 2 of the numbers (1000, -2500, or 7000), you still don’t have any information as to that employee’s salary. You need all the numbers to compute the person’s salary.\u003c/p\u003e\u003cp\u003eIn fact, you need access to employee A, B, C, D, E, and F to get all these numbers. If any one of them refuse to collude with you, you can’t determine employee X’s salary.\u003c/p\u003e\u003cp\u003eIn general, for any employee X, all the employees that he sends and receives email from must be colluding in order to find out employee X’s salary. If any 1 of them doesn’t cooperate, then his salary remains unknown.\u003c/p\u003e\u003cp\u003eThat gives us an idea of the strategy:\u003c/p\u003e\u003cul\u003e\\n\u003cli\u003e\\n\u003cp\u003eThe email path must go through all the employees such that for any 2 employees X and Y, the email path must go through them.\u003c/p\u003e\\n\u003c/li\u003e\\n\u003cli\u003e\\n\u003cp\u003eFor any employee X, all his contributions to the sum must add up to his salary. The individual contributions can be positive or negative.\u003c/p\u003e\\n\u003c/li\u003e\\n\u003c/ul\u003e\u003cp\u003eBut how do we determine what this path is? Let’s start with a scenario with 5 employees. Let’s represent it with a graph: each vertex represents an employee, and we draw edges between all pairs of employees. We want to draw a path that covers all edges.\u003c/p\u003e\u003cdiv class=\\\"dynamic-block-placeholder\\\" data-dynamic-block-id=\\\"0\\\" data-mode=\\\"component\\\"\u003e\u003cp class=\\\"text-muted-foreground text-sm\\\"\u003e[Interactive content: component mode]\u003c/p\u003e\u003c/div\u003e\u003cp\u003eIn this example, we can traverse all the edges with the path:\u003c/p\u003e\u003cp\u003e1 → 2 → 3 → 4 → 5 → 1 → 3 → 5 → 2 → 4 → 1\u003c/p\u003e\u003cp\u003eThis is called an Eulerian path: a path that traverses all the edges exactly once. The length of the path is \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mfrac\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e10\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation\u003e\\\\frac{n(n-1)}{2} = 10\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1.355em;vertical-align:-0.345em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mopen nulldelimiter\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mfrac\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.01em;\\\"\u003e\u003cspan style=\\\"top:-2.655em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.23em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"frac-line\\\" style=\\\"border-bottom-width:0.04em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.485em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mopen mtight\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mbin mtight\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"mclose mtight\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.345em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mrel\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6444em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e10\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e: the total number of edges.\u003c/p\u003e\u003cp\u003e:::note{type=\\\"info\\\"}[Eulerian Graphs]\\nIf a graph has only vertex with even degrees, it must have an Eulerian circuit: a path that traverses every edge exactly once, ending on same vertex.\u003c/p\u003e\u003cp\u003eIf a graph has exactly 2 vertices with odd degrees, it must have an Eulerian path: a path that traverses every edge exactly once. This path must start on one of the vertices with odd degrees, and end on the other vertex with odd degree.\\n:::\u003c/p\u003e\u003cp\u003eHowever, this only applies to situations with an odd number of employees. How about when there are an even number of employees? Let’s take a look at a situation with 6 employees.\u003c/p\u003e\u003cdiv class=\\\"dynamic-block-placeholder\\\" data-dynamic-block-id=\\\"1\\\" data-mode=\\\"component\\\"\u003e\u003cp class=\\\"text-muted-foreground text-sm\\\"\u003e[Interactive content: component mode]\u003c/p\u003e\u003c/div\u003e\u003cp\u003eHere, we have 6 vertices of degree 5, which means there isn’t an Eulerian path. However, if we allow some pairs of employees to email each other more than once, we can add some repeated edges, marked in blue.\u003c/p\u003e\u003cdiv class=\\\"dynamic-block-placeholder\\\" data-dynamic-block-id=\\\"2\\\" data-mode=\\\"component\\\"\u003e\u003cp class=\\\"text-muted-foreground text-sm\\\"\u003e[Interactive content: component mode]\u003c/p\u003e\u003c/div\u003e\u003cp\u003eWith our additional edges, we now have 4 vertices of degree 6, and 2 vertices of degree 5. We can start at employee 1 and end at employee 6. This is one of the possible Eulerian paths:\u003c/p\u003e\u003cp\u003e1 → 2 → 3 → 4 → 5 → 6 → 1 → 3 → 5 → 1 → 4 → 6 → 2 → 4 → 5 → 2 → 3 → 6\u003c/p\u003e\u003cp\u003eThe length of the path is \u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mfrac\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mfrac\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e17\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation\u003e\\\\frac{n(n-1)}{2} + \\\\frac{(n - 2)}{2}= 17\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1.355em;vertical-align:-0.345em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mopen nulldelimiter\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mfrac\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.01em;\\\"\u003e\u003cspan style=\\\"top:-2.655em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.23em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"frac-line\\\" style=\\\"border-bottom-width:0.04em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.485em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mopen mtight\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mbin mtight\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"mclose mtight\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.345em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mbin\\\"\u003e+\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:1.355em;vertical-align:-0.345em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mopen nulldelimiter\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mfrac\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.01em;\\\"\u003e\u003cspan style=\\\"top:-2.655em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.23em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"frac-line\\\" style=\\\"border-bottom-width:0.04em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.485em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mopen mtight\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mbin mtight\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"mclose mtight\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.345em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mrel\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2778em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:0.6444em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e17\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e, where the second term accounts for the additional blue edges.\u003c/p\u003e\u003cp\u003eTo summarise, the minimum length of this path (and thus the minimum number of emails sent) is given as:\u003c/p\u003e\u003cspan class=\\\"katex-display\\\"\u003e\u003cspan class=\\\"katex\\\"\u003e\u003cspan class=\\\"katex-mathml\\\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e{\u003c/mo\u003e\u003cmtable\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mfrac\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmrow\u003e\u003cmtext\u003eif \u003c/mtext\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmtext\u003e is even\u003c/mtext\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmrow\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mfrac\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmo\u003e(\u003c/mo\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmrow\u003e\u003cmtext\u003eif \u003c/mtext\u003e\u003cmi\u003en\u003c/mi\u003e\u003cmtext\u003e is odd\u003c/mtext\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003c/mtable\u003e\u003c/mrow\u003e\u003cannotation\u003e\\\\begin{cases}\\n  \\\\frac{n(n-1)}{2} \u0026#x26;\\\\text{if } n \\\\text{ is even} \\\\\\\\\\n  \\\\frac{n(n-1)}{2} + \\\\frac{(n - 2)}{2} \u0026#x26;\\\\text{if } n \\\\text{ is odd}\\n\\\\end{cases}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\\\"katex-html\\\"\u003e\u003cspan class=\\\"base\\\"\u003e\u003cspan class=\\\"strut\\\" style=\\\"height:3em;vertical-align:-1.25em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"minner\\\"\u003e\u003cspan class=\\\"mopen delimcenter\\\" style=\\\"top:0em;\\\"\u003e\u003cspan class=\\\"delimsizing size4\\\"\u003e{\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mtable\\\"\u003e\u003cspan class=\\\"col-align-l\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.692em;\\\"\u003e\u003cspan style=\\\"top:-3.692em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3.01em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mopen nulldelimiter\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mfrac\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.01em;\\\"\u003e\u003cspan style=\\\"top:-2.655em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.23em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"frac-line\\\" style=\\\"border-bottom-width:0.04em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.485em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mopen mtight\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mbin mtight\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"mclose mtight\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.345em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-2.25em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3.01em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mopen nulldelimiter\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mfrac\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.01em;\\\"\u003e\u003cspan style=\\\"top:-2.655em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.23em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"frac-line\\\" style=\\\"border-bottom-width:0.04em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.485em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mopen mtight\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mbin mtight\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"mclose mtight\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.345em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mbin\\\"\u003e+\u003c/span\u003e\u003cspan class=\\\"mspace\\\" style=\\\"margin-right:0.2222em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mopen nulldelimiter\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mfrac\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.01em;\\\"\u003e\u003cspan style=\\\"top:-2.655em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.23em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"frac-line\\\" style=\\\"border-bottom-width:0.04em;\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-3.485em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"sizing reset-size6 size3 mtight\\\"\u003e\u003cspan class=\\\"mord mtight\\\"\u003e\u003cspan class=\\\"mopen mtight\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"mord mathnormal mtight\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mbin mtight\\\"\u003e−\u003c/span\u003e\u003cspan class=\\\"mord mtight\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"mclose mtight\\\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:0.345em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.192em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"arraycolsep\\\" style=\\\"width:1em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"col-align-l\\\"\u003e\u003cspan class=\\\"vlist-t vlist-t2\\\"\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.692em;\\\"\u003e\u003cspan style=\\\"top:-3.692em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3.01em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord text\\\"\u003e\u003cspan class=\\\"mord\\\"\u003eif \u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mord text\\\"\u003e\u003cspan class=\\\"mord\\\"\u003e is even\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\\\"top:-2.25em;\\\"\u003e\u003cspan class=\\\"pstrut\\\" style=\\\"height:3.01em;\\\"\u003e\u003c/span\u003e\u003cspan class=\\\"mord\\\"\u003e\u003cspan class=\\\"mord text\\\"\u003e\u003cspan class=\\\"mord\\\"\u003eif \u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mord mathnormal\\\"\u003en\u003c/span\u003e\u003cspan class=\\\"mord text\\\"\u003e\u003cspan class=\\\"mord\\\"\u003e is odd\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-s\\\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"vlist-r\\\"\u003e\u003cspan class=\\\"vlist\\\" style=\\\"height:1.192em;\\\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"mclose nulldelimiter\\\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cp\u003eFor our situation with 12 employees, this will be our graph.\u003c/p\u003e\u003cdiv class=\\\"dynamic-block-placeholder\\\" data-dynamic-block-id=\\\"3\\\" data-mode=\\\"component\\\"\u003e\u003cp class=\\\"text-muted-foreground text-sm\\\"\u003e[Interactive content: component mode]\u003c/p\u003e\u003c/div\u003e\u003cp\u003eA valid Eulerian path would be:\u003c/p\u003e\u003cp\u003e1 → 2 → 3 → 1 → 4 → 2 → 3 → 4 → 5 → 1 → 6 → 2 → 5 → 3 → 6 → 4 → 5 → 6 → 7 → 1 → 8 → 2 → 7 → 3 → 8 → 4 → 7 → 5 → 8 → 6 → 7 → 8 → 9 → 1 → 10 → 2 → 9 → 3 → 10 → 4 → 9 → 5 → 10 → 6 → 9 → 7 → 10 → 8 → 9 → 10 → 11 → 1 → 12 → 2 → 11 → 3 → 12 → 4 → 11 → 5 → 12 → 6 → 11 → 7 → 12 → 8 → 11 → 9 → 12 → 10 → 11 → 12\u003c/p\u003e\u003cp\u003eThe actual path is not important, but the optimal length of such a sequence is 71 emails.\u003c/p\u003e\u003cp\u003eWith our valid email path, what each employee needs to do next is to see how many times they appear in the path, then split their salary into that many numbers.\u003c/p\u003e\u003cp\u003eLet’s use some examples.\u003c/p\u003e\u003cp\u003eEmployee 4 shows up in the path 6 times. If he makes $4000, he can simply add 1000 to the sum each time it comes to him.\u003c/p\u003e\u003cp\u003eEmployee 1 shows up in the path 5 times. If he makes $6200, he can:\u003c/p\u003e\u003col\u003e\\n\u003cli\u003eSend 500 to the next person (since the path starts with him).\u003c/li\u003e\\n\u003cli\u003eAdd 7000 the second time the email comes to him.\u003c/li\u003e\\n\u003cli\u003eAdd 1234 the third time\u003c/li\u003e\\n\u003cli\u003eSubtract 10,000 the fourth time\u003c/li\u003e\\n\u003cli\u003eAdd 7466 the final time.\u003c/li\u003e\\n\u003c/ol\u003e\u003cp\u003eIf every employee does this, then the final sum at the end of the email path will be the sum of all employees’ salaries. They can divide this sum by 12 to get the average salary.\u003c/p\u003e\u003c/div\u003e\u003c/details\u003e\\n\u003cdiv class=\\\"inline-component-definition\\\" style=\\\"display: none;\\\"\u003e\u003c/div\u003e\",\"rawContent\",\"\\nBack in [Average Salaries 1](puzzle:average-salaries-1), 12 employees came up with a method to find out their average salary without revealing their individual salaries to anyone. Here’s the method they came up with:\\n\\n:::spoiler[Spoiler: Solution to the previous puzzle]\\n1. Number the employees them 1 to 12.\\n2. Employee 1 comes up with a random number, which we will call $X$, and adds his salary to it. He emails this sum to employee 2.\\n3. Employee 2 adds his salary to the sum and emails the new sum to employee 3.\\n4. Employee 3 does the same, sending the new sum to employee 4.\\n5. Repeat this process until employee 12 has everyone’s salaries + $X$. He then sends this overall sum to employee 1.\\n6. Employee 1 now has the overall sum, which is the sum of everyone’s salaries + $X$. He subtracts $X$ from it, leaving him with the sum of all their salaries. He then divides this sum by 12 to get their average salary.\\n:::\\n\\nHowever, before they begin, one employee interrupts. “Wait! I’m number 7. What if number 6 and number 8 collude? Employee 6 can tell employee 8 what he sent me, then employee 8 can calculate the difference to get my salary.”\\n\\nThe employees pause to think about it. With their current solution, if any 2 employees collude and reveal the contents of their emails, they can find out someone else’s salary. That’s not great.\\n\\nIs there a way we can do better? Can we make it such that if any 10 employees try to collude, they still can’t get anyone’s salary?\\n\\n:::hint[Hint: Why 10 employees, not 11?]\\nNo matter what method you use to come up with the average salary, any 11 employees colluding can **always** get the 12th employees salary.\\n\\nLet’s assume the 12 employees find out their average salary $S_1$.\\n\\nIf any 11 employees are colluding, they can use the same method to find out their average salary $S_2$.\\n\\nThen the 12th employee’s salary is $12S_1 - 11S_2$. This is possible no matter what method you use to get the average salary.\\n:::\\n\\n:::hint\\nJust as before, the number of coworkers doesn’t matter. In general, for $n$ employees, is there a method that doesn’t allow any $n-2$ employees to get another employee’s salary?\\n:::\\n\\n:::hint[Hint: Examining A Semi-Working Solution]\\nAfter some more discusson in a video call, someone comes up with another solution. Instead of sending the email in a loop from 1 to 12, then back to 1, they will send it in 2 loops instead.\\n\\nThis time, every employee comes up with a random number that they’ll keep secret.\\n\\n1. Number the employees them 1 to 12.\\n2. Employee 1 emails his salary and his random number to employee 2.\\n3. Employee 2 adds his salary and his random number to employee 1’s salary and emails the sum to employee 3.\\n4. Employee 3 does the same, sending the new sum to employee 4.\\n5. Repeat this process until employee 12 sends the sum back to employee 1.\\n6. This time, employee 1 deducts his random number from the sum and sends the new sum to employee 2.\\n7. Employee 2 deducts his random number and sends the new sum to employee 3.\\n8. This repeats until the sum reaches employee 12. Employee 12 deducts his random number, then divides the final sum by 12 to get the average salary.\\n\\nLet $s_i$ be the $i^\\\\text{th}$ employee’s salary, and $r_i$ be the $i^\\\\text{th}$ employee’s random number. Our total sum would be:\\n\\n$\\\\sum_{i=1}^{12} (s_i + r_i) - \\\\sum_{i=1}^{12} r_i = \\\\sum_{i=1}^{12} (s_i)$\\n\\nThe final sum divided by 12 gives the average salary, as expected.\\n\\nEmployee 7 is not convinced. “Employee 6 and 8 can still figure out my salary! On both passes, they can see how much I’ve added and deducted. They can add the differences up to get my salary anyway.”\\n\\nBack to the drawing board.\\n:::\\n\\n::::solution\\nLet’s imagine a sequence of emails that goes through all the employees in some specified order. As before, each time an employee receives a cumulative sum, modifies it, then emails it on to the next employee.\\n\\nThe semi-working solution earlier certainly didn’t work, but there’s a seed of a solution in there. Let’s say for a particular employee X, the email chain passes through him three times.\\n\\n1. The first time, employee A emails the sum to employee X. Employee X adds 1000 to the number and emails it to employee B.\\n2. The second time, employee C emails the sum to employee X. Employee X subtracts 2500 and emails it to employee D.\\n2. The third time, employee E emails the sum to employee X. Employee X adds 7000 and emails it to employee F.\\n\\nThe total sum of his changes amounts to his pay of \\\\$5500.\\n\\nHowever, imagine that you’re another employee trying to get that previous employee’s salary. If you only got access to 1 or 2 of the numbers (1000, -2500, or 7000), you still don’t have any information as to that employee’s salary. You need all the numbers to compute the person’s salary.\\n\\nIn fact, you need access to employee A, B, C, D, E, and F to get all these numbers. If any one of them refuse to collude with you, you can’t determine employee X’s salary.\\n\\nIn general, for any employee X, all the employees that he sends and receives email from must be colluding in order to find out employee X’s salary. If any 1 of them doesn’t cooperate, then his salary remains unknown.\\n\\nThat gives us an idea of the strategy:\\n\\n- The email path must go through all the employees such that for any 2 employees X and Y, the email path must go through them.\\n\\n- For any employee X, all his contributions to the sum must add up to his salary. The individual contributions can be positive or negative.\\n\\nBut how do we determine what this path is? Let’s start with a scenario with 5 employees. Let’s represent it with a graph: each vertex represents an employee, and we draw edges between all pairs of employees. We want to draw a path that covers all edges.\\n\\n:::dynamic\\n```yaml\\nuse: '#diagram'\\nprops:\\n  n: 5\\n  maxWidth: 300\\n```\\n:::\\n\\nIn this example, we can traverse all the edges with the path:\\n\\n1 → 2 → 3 → 4 → 5 → 1 → 3 → 5 → 2 → 4 → 1\\n\\nThis is called an Eulerian path: a path that traverses all the edges exactly once. The length of the path is $\\\\frac{n(n-1)}{2} = 10$: the total number of edges.\\n\\n:::note{type=\\\"info\\\"}[Eulerian Graphs]\\nIf a graph has only vertex with even degrees, it must have an Eulerian circuit: a path that traverses every edge exactly once, ending on same vertex.\\n\\nIf a graph has exactly 2 vertices with odd degrees, it must have an Eulerian path: a path that traverses every edge exactly once. This path must start on one of the vertices with odd degrees, and end on the other vertex with odd degree.\\n:::\\n\\nHowever, this only applies to situations with an odd number of employees. How about when there are an even number of employees? Let’s take a look at a situation with 6 employees.\\n\\n:::dynamic\\n```yaml\\nuse: '#diagram'\\nprops:\\n  n: 6\\n  maxWidth: 350\\n```\\n:::\\n\\nHere, we have 6 vertices of degree 5, which means there isn’t an Eulerian path. However, if we allow some pairs of employees to email each other more than once, we can add some repeated edges, marked in blue.\\n\\n:::dynamic\\n```yaml\\nuse: '#diagram'\\nprops:\\n  n: 6\\n  maxWidth: 350\\n  showExtraPaths: true\\n```\\n:::\\n\\nWith our additional edges, we now have 4 vertices of degree 6, and 2 vertices of degree 5. We can start at employee 1 and end at employee 6. This is one of the possible Eulerian paths:\\n\\n1 → 2 → 3 → 4 → 5 → 6 → 1 → 3 → 5 → 1 → 4 → 6 → 2 → 4 → 5 → 2 → 3 → 6\\n\\nThe length of the path is $\\\\frac{n(n-1)}{2} + \\\\frac{(n - 2)}{2}= 17$, where the second term accounts for the additional blue edges.\\n\\nTo summarise, the minimum length of this path (and thus the minimum number of emails sent) is given as:\\n\\n$$\\n\\\\begin{cases}\\n  \\\\frac{n(n-1)}{2} \u0026\\\\text{if } n \\\\text{ is even} \\\\\\\\\\n  \\\\frac{n(n-1)}{2} + \\\\frac{(n - 2)}{2} \u0026\\\\text{if } n \\\\text{ is odd}\\n\\\\end{cases}\\n$$\\n\\nFor our situation with 12 employees, this will be our graph.\\n\\n:::dynamic\\n```yaml\\nuse: '#diagram'\\nprops:\\n  n: 12\\n  showExtraPaths: true\\n```\\n:::\\n\\nA valid Eulerian path would be:\\n\\n1 → 2 → 3 → 1 → 4 → 2 → 3 → 4 → 5 → 1 → 6 → 2 → 5 → 3 → 6 → 4 → 5 → 6 → 7 → 1 → 8 → 2 → 7 → 3 → 8 → 4 → 7 → 5 → 8 → 6 → 7 → 8 → 9 → 1 → 10 → 2 → 9 → 3 → 10 → 4 → 9 → 5 → 10 → 6 → 9 → 7 → 10 → 8 → 9 → 10 → 11 → 1 → 12 → 2 → 11 → 3 → 12 → 4 → 11 → 5 → 12 → 6 → 11 → 7 → 12 → 8 → 11 → 9 → 12 → 10 → 11 → 12\\n\\nThe actual path is not important, but the optimal length of such a sequence is 71 emails.\\n\\nWith our valid email path, what each employee needs to do next is to see how many times they appear in the path, then split their salary into that many numbers.\\n\\nLet’s use some examples.\\n\\nEmployee 4 shows up in the path 6 times. If he makes $4000, he can simply add 1000 to the sum each time it comes to him.\\n\\nEmployee 1 shows up in the path 5 times. If he makes $6200, he can:\\n1. Send 500 to the next person (since the path starts with him).\\n2. Add 7000 the second time the email comes to him.\\n3. Add 1234 the third time\\n4. Subtract 10,000 the fourth time\\n5. Add 7466 the final time.\\n\\nIf every employee does this, then the final sum at the end of the email path will be the sum of all employees’ salaries. They can divide this sum by 12 to get the average salary.\\n::::\\n\\n\\n:::component[diagram]\\n```js\\nfunction draw(options) {\\n  const { canvas, api, width: _width, props } = options;\\n  const { n, showExtraPaths = false, maxWidth = 600 } = props || {};\\n\\n  const width = Math.min(_width, maxWidth);\\n  const lineThickness = 2;\\n  const fontSize = 16;\\n  const labelOffset = 20;\\n  const canvasSize = width + lineThickness * 2;\\n  canvas.width = canvasSize;\\n  canvas.height = canvasSize;\\n\\n  const centerX = canvasSize / 2;\\n  const centerY = canvasSize / 2;\\n  const radius = Math.max(0, (width / 2) - labelOffset - fontSize / 2);\\n\\n  const ctx = canvas.getContext('2d');\\n  const fgColor = api.getColor('foreground');\\n  const mutedColor = api.getColor('blue-500');\\n  const font = api.getFont('default');\\n\\n  // Calculate point positions around the circle\\n  const points = [];\\n  for (let i = 0; i \u003c n; i++) {\\n    const angle = (i / n) * 2 * Math.PI - Math.PI / 2; // Start from top\\n    const x = centerX + radius * Math.cos(angle);\\n    const y = centerY + radius * Math.sin(angle);\\n    points.push({ x, y, angle });\\n  }\\n\\n  // Draw lines between all pairs of points\\n  ctx.strokeStyle = fgColor;\\n  ctx.lineWidth = lineThickness;\\n  for (let i = 0; i \u003c n; i++) {\\n    for (let j = i + 1; j \u003c n; j++) {\\n      ctx.beginPath();\\n      ctx.moveTo(points[i].x, points[i].y);\\n      ctx.lineTo(points[j].x, points[j].y);\\n      ctx.stroke();\\n    }\\n  }\\n\\n  // Draw extra arc paths if requested\\n  if (showExtraPaths) {\\n    ctx.strokeStyle = mutedColor;\\n    ctx.lineWidth = lineThickness;\\n    for (let i = 1; i \u003c n - 1; i += 2) {\\n      const startAngle = points[i].angle;\\n      const endAngle = points[i + 1].angle;\\n\\n      ctx.beginPath();\\n      ctx.arc(centerX, centerY, radius, startAngle, endAngle);\\n      ctx.stroke();\\n    }\\n  }\\n\\n  // Draw and label points\\n  ctx.fillStyle = fgColor;\\n  const pointRadius = 5;\\n\\n  for (let i = 0; i \u003c n; i++) {\\n    // Draw point\\n    ctx.beginPath();\\n    ctx.arc(points[i].x, points[i].y, pointRadius, 0, 2 * Math.PI);\\n    ctx.fill();\\n\\n    // Draw label\\n    const labelAngle = points[i].angle;\\n    const labelX = centerX + (radius + labelOffset) * Math.cos(labelAngle);\\n    const labelY = centerY + (radius + labelOffset) * Math.sin(labelAngle);\\n\\n    ctx.font = `${fontSize}px ${font}`;\\n    ctx.textAlign = 'center';\\n    ctx.textBaseline = 'middle';\\n    ctx.fillText((i + 1).toString(), labelX, labelY);\\n  }\\n}\\n```\\n:::\\n\",\"dynamicBlocks\",[44,59,63,67],{\"_45\":46,\"_47\":48,\"_49\":50,\"_51\":52,\"_57\":58},\"type\",\"dynamic\",\"mode\",\"component\",\"componentId\",\"#diagram\",\"props\",{\"_53\":54,\"_55\":56},\"n\",5,\"maxWidth\",300,\"sourceFile\",\"/home/runner/work/puzzlestone-peak/puzzlestone-peak/apps/web/content/puzzles/cryptography/average-salaries-2.md\",{\"_45\":46,\"_47\":48,\"_49\":50,\"_51\":60,\"_57\":58},{\"_53\":61,\"_55\":62},6,350,{\"_45\":46,\"_47\":48,\"_49\":50,\"_51\":64,\"_57\":58},{\"_53\":61,\"_55\":62,\"_65\":66},\"showExtraPaths\",true,{\"_45\":46,\"_47\":48,\"_49\":50,\"_51\":68,\"_57\":58},{\"_53\":69,\"_65\":66},12,\"inlineComponents\",{\"_72\":73},\"diagram\",{\"_13\":72,\"_74\":75,\"_76\":77},\"code\",\"function draw(options) {\\n  const { canvas, api, width: _width, props } = options;\\n  const { n, showExtraPaths = false, maxWidth = 600 } = props || {};\\n\\n  const width = Math.min(_width, maxWidth);\\n  const lineThickness = 2;\\n  const fontSize = 16;\\n  const labelOffset = 20;\\n  const canvasSize = width + lineThickness * 2;\\n  canvas.width = canvasSize;\\n  canvas.height = canvasSize;\\n\\n  const centerX = canvasSize / 2;\\n  const centerY = canvasSize / 2;\\n  const radius = Math.max(0, (width / 2) - labelOffset - fontSize / 2);\\n\\n  const ctx = canvas.getContext('2d');\\n  const fgColor = api.getColor('foreground');\\n  const mutedColor = api.getColor('blue-500');\\n  const font = api.getFont('default');\\n\\n  // Calculate point positions around the circle\\n  const points = [];\\n  for (let i = 0; i \u003c n; i++) {\\n    const angle = (i / n) * 2 * Math.PI - Math.PI / 2; // Start from top\\n    const x = centerX + radius * Math.cos(angle);\\n    const y = centerY + radius * Math.sin(angle);\\n    points.push({ x, y, angle });\\n  }\\n\\n  // Draw lines between all pairs of points\\n  ctx.strokeStyle = fgColor;\\n  ctx.lineWidth = lineThickness;\\n  for (let i = 0; i \u003c n; i++) {\\n    for (let j = i + 1; j \u003c n; j++) {\\n      ctx.beginPath();\\n      ctx.moveTo(points[i].x, points[i].y);\\n      ctx.lineTo(points[j].x, points[j].y);\\n      ctx.stroke();\\n    }\\n  }\\n\\n  // Draw extra arc paths if requested\\n  if (showExtraPaths) {\\n    ctx.strokeStyle = mutedColor;\\n    ctx.lineWidth = lineThickness;\\n    for (let i = 1; i \u003c n - 1; i += 2) {\\n      const startAngle = points[i].angle;\\n      const endAngle = points[i + 1].angle;\\n\\n      ctx.beginPath();\\n      ctx.arc(centerX, centerY, radius, startAngle, endAngle);\\n      ctx.stroke();\\n    }\\n  }\\n\\n  // Draw and label points\\n  ctx.fillStyle = fgColor;\\n  const pointRadius = 5;\\n\\n  for (let i = 0; i \u003c n; i++) {\\n    // Draw point\\n    ctx.beginPath();\\n    ctx.arc(points[i].x, points[i].y, pointRadius, 0, 2 * Math.PI);\\n    ctx.fill();\\n\\n    // Draw label\\n    const labelAngle = points[i].angle;\\n    const labelX = centerX + (radius + labelOffset) * Math.cos(labelAngle);\\n    const labelY = centerY + (radius + labelOffset) * Math.sin(labelAngle);\\n\\n    ctx.font = `${fontSize}px ${font}`;\\n    ctx.textAlign = 'center';\\n    ctx.textBaseline = 'middle';\\n    ctx.fillText((i + 1).toString(), labelX, labelY);\\n  }\\n}\",\"startLine\",195,\"actionData\",\"errors\"]\n");</script><!--$?--><template id="B:1"></template><!--/$--></div><script>$RB=[];$RV=function(a){$RT=performance.now();for(var b=0;b<a.length;b+=2){var c=a[b],e=a[b+1];null!==e.parentNode&&e.parentNode.removeChild(e);var f=c.parentNode;if(f){var g=c.previousSibling,h=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d||"/&"===d)if(0===h)break;else h--;else"$"!==d&&"$?"!==d&&"$~"!==d&&"$!"!==d&&"&"!==d||h++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;e.firstChild;)f.insertBefore(e.firstChild,c);g.data="$";g._reactRetry&&requestAnimationFrame(g._reactRetry)}}a.length=0};
$RC=function(a,b){if(b=document.getElementById(b))(a=document.getElementById(a))?(a.previousSibling.data="$~",$RB.push(a,b),2===$RB.length&&("number"!==typeof $RT?requestAnimationFrame($RV.bind(null,$RB)):(a=performance.now(),setTimeout($RV.bind(null,$RB),2300>a&&2E3<a?2300-a:$RT+300-a)))):b.parentNode.removeChild(b)};$RC("B:0","S:0")</script><div hidden id="S:1"><script>window.__reactRouterContext.streamController.close();</script></div><script>$RC("B:1","S:1")</script></body></html>