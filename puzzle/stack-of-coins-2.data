[{"_1":2},"routes/puzzle-detail",{"_3":4},"data",{"_5":6,"_7":8,"_9":10},"status","success","slug","stack-of-coins-2","puzzle",{"_7":8,"_11":12,"_41":42,"_43":44,"_45":46,"_47":48},"metadata",{"_13":14,"_15":16,"_17":18,"_19":22,"_26":27,"_29":30,"_31":32,"_33":34,"_35":34,"_36":37,"_38":39,"_40":39},"id","puzzle-70","title","Stack of Coins 2","difficulty",{"_19":20,"_21":20},"concepts","medium","reasoning",[23,24,25],"adversarial-game","invariants","number-theory","tags",[28],"has-solution","previousPuzzle","stack-of-coins-1c","nextPuzzle","stack-of-coins-3","dateCreated","2026-02-06","lastUpdated","credit","Adapted from “[Can you solve the rogue AI riddle?](https://www.youtube.com/watch?v=qMFpOcLroOg)” by Dan Finkel on the TED-Ed YouTube channel. Question and solution written by Puzzlestone Peak.","preview","You and your friend have decided to make treasure hunting your weekend project. After a few weeks of treasure hunting, you guys stumble on another pirate’s...","websitePreview","content","<p>You and your friend have decided to make treasure hunting your weekend project. After a few weeks of treasure hunting, you guys stumble on another pirate’s treasure: an old chest filled with coins: 99 copper coins and 1 gold coin. As before, these old coins are no longer legal tender, so the copper ones are worthless. Only the gold coin is worth something due to its material.</p>\n<p>Not wanting to lose again, your friend comes up with another game of wits. He stacks the 100 coins in a tall stack with the gold coin at the bottom. You and him will take turns taking either 1, 4, or 5 coins from the top of the stack, all the way until the final coin is taken. If there’s only 2 or 3 coins left, the only option for the player is to take 1 coin, since there aren’t enough coins for the player to take 4 or 5. He lets you decide if you want to go first or second.</p>\n<p>Should you go first or second? And what strategy do you use to ensure you’ll win the gold coin?</p>\n<details class=\"content-block solution-block\" data-type=\"solution\"><summary class=\"solution-label\">Solution</summary><div class=\"solution-content markdown-content prose max-w-none px-4 py-4 space-y-4\"><p>Choose to go first and take 4 coins. After that, follow the strategy below.</p><p>Let’s start from 0 coins and work backwards. If a player is presented with a stack of 0 coins, it means their opponent took the gold coin, resulting in a loss for the current player. If there are 1, 4, or 5 coins left, the player that moves next can take all the coins and win. A stack of 2 coins left is a losing position as the only option is for the player to take 1 coin, allowing their opponent to take the last coin and win.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Coins in stack</th><th align=\"left\">Position for the player that moves next</th></tr></thead><tbody><tr><td align=\"left\">0</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">1</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">2</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">3</td><td align=\"left\">?</td></tr><tr><td align=\"left\">4</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">5</td><td align=\"left\">Win</td></tr></tbody></table><p>We notice that when there are 3 coins left, the next player can take away 1 coin, forcing their opponent into a losing position with 2 coins.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Coins in stack</th><th align=\"left\">Position for the player that moves next</th></tr></thead><tbody><tr><td align=\"left\">0</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">1</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">2</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">3</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">4</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">5</td><td align=\"left\">Win</td></tr></tbody></table><p>Let’s extend the table a bit more.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Coins in stack</th><th align=\"left\">Position for the player that moves next</th></tr></thead><tbody><tr><td align=\"left\">0</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">1</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">2</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">3</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">4</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">5</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">6</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">7</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">8</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">9</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">10</td><td align=\"left\">Lose</td></tr></tbody></table><p>As we learnt in <a href=\"/expedition/adversarial-games\">Adversarial Games</a>, a position is a winning position if there exists a move for the current player to put the other player in a losing position. A position is a losing position if ALL moves put the other player in a winning position.</p><p>A stack of 6 coins is a winning position since you can take 4 coins to leave the other player with a stack of 2 coins: a losing position.</p><p>A stack of 7 coins is a winning position since you can take 5 coins to leave the other player with a stack of 2 coins: a losing position.</p><p>A stack of 8 coins is a losing position, since taking 1, 4, or 5 coins leaves you with a stack of 7, 4, or 3 coins, all of which are winning positions for their opponent.</p><p>Notice that the table is starting to repeat itself. This is because we can determine if a position is winning or losing by looking up to 5 positions up the table. Once it starts repeating, it will repeat all the way down.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\">Coins in stack</th><th align=\"left\">Position for the player that moves next</th></tr></thead><tbody><tr><td align=\"left\">0</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">1</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">2</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">3</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">4</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">5</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">6</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">7</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">8</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">9</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">10</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">11</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">12</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">13</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">14</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">15</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">16</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">17</td><td align=\"left\">Win</td></tr><tr><td align=\"left\">18</td><td align=\"left\">Lose</td></tr><tr><td align=\"left\">…</td><td align=\"left\"></td></tr></tbody></table><p>In general, we see that the losing positions are positions where the stack of coins are (a) a multiple of 8, or (b) 2 more than a multiple of 8.</p><p>Since 100 is 4 more than a multiple of 8, it is a winning position, so you should choose to go first. On your turn, you want to take a number of coins to leave your opponent in a losing position. To do so, you can follow the strategy below: divide the number of coins by 8 to get the remainder <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation>k</annotation></semantics></math></span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span>, then follow the table below to see what action to take.</p>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<table><thead><tr><th align=\"left\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi></mrow><annotation>k</annotation></semantics></math></span><span class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span></th><th align=\"left\">What to do</th></tr></thead><tbody><tr><td align=\"left\">0</td><td align=\"left\">Losing position: all moves lead to a loss in optimal play.</td></tr><tr><td align=\"left\">1</td><td align=\"left\">Take 1 coin</td></tr><tr><td align=\"left\">2</td><td align=\"left\">Losing position: all moves lead to a loss in optimal play.</td></tr><tr><td align=\"left\">3</td><td align=\"left\">Take 1 coin</td></tr><tr><td align=\"left\">4</td><td align=\"left\">Take 4 coins</td></tr><tr><td align=\"left\">5</td><td align=\"left\">Take 5 coins</td></tr><tr><td align=\"left\">6</td><td align=\"left\">Take 4 coins</td></tr><tr><td align=\"left\">7</td><td align=\"left\">Take 5 coins</td></tr></tbody></table></div></details>","rawContent","\nYou and your friend have decided to make treasure hunting your weekend project. After a few weeks of treasure hunting, you guys stumble on another pirate’s treasure: an old chest filled with coins: 99 copper coins and 1 gold coin. As before, these old coins are no longer legal tender, so the copper ones are worthless. Only the gold coin is worth something due to its material.\n\nNot wanting to lose again, your friend comes up with another game of wits. He stacks the 100 coins in a tall stack with the gold coin at the bottom. You and him will take turns taking either 1, 4, or 5 coins from the top of the stack, all the way until the final coin is taken. If there’s only 2 or 3 coins left, the only option for the player is to take 1 coin, since there aren’t enough coins for the player to take 4 or 5. He lets you decide if you want to go first or second.\n\nShould you go first or second? And what strategy do you use to ensure you’ll win the gold coin?\n\n:::solution\nChoose to go first and take 4 coins. After that, follow the strategy below.\n\nLet’s start from 0 coins and work backwards. If a player is presented with a stack of 0 coins, it means their opponent took the gold coin, resulting in a loss for the current player. If there are 1, 4, or 5 coins left, the player that moves next can take all the coins and win. A stack of 2 coins left is a losing position as the only option is for the player to take 1 coin, allowing their opponent to take the last coin and win.\n\n| Coins in stack | Position for the player that moves next |\n| :--- | :--- |\n| 0 | Lose |\n| 1 | Win |\n| 2 | Lose |\n| 3 | ? |\n| 4 | Win |\n| 5 | Win |\n\nWe notice that when there are 3 coins left, the next player can take away 1 coin, forcing their opponent into a losing position with 2 coins.\n\n| Coins in stack | Position for the player that moves next |\n| :--- | :--- |\n| 0 | Lose |\n| 1 | Win |\n| 2 | Lose |\n| 3 | Win |\n| 4 | Win |\n| 5 | Win |\n\nLet’s extend the table a bit more.\n\n| Coins in stack | Position for the player that moves next |\n| :--- | :--- |\n| 0 | Lose |\n| 1 | Win |\n| 2 | Lose |\n| 3 | Win |\n| 4 | Win |\n| 5 | Win |\n| 6 | Win |\n| 7 | Win |\n| 8 | Lose |\n| 9 | Win |\n| 10 | Lose |\n\nAs we learnt in [Adversarial Games](expedition:adversarial-games), a position is a winning position if there exists a move for the current player to put the other player in a losing position. A position is a losing position if ALL moves put the other player in a winning position.\n\nA stack of 6 coins is a winning position since you can take 4 coins to leave the other player with a stack of 2 coins: a losing position.\n\nA stack of 7 coins is a winning position since you can take 5 coins to leave the other player with a stack of 2 coins: a losing position.\n\nA stack of 8 coins is a losing position, since taking 1, 4, or 5 coins leaves you with a stack of 7, 4, or 3 coins, all of which are winning positions for their opponent.\n\nNotice that the table is starting to repeat itself. This is because we can determine if a position is winning or losing by looking up to 5 positions up the table. Once it starts repeating, it will repeat all the way down.\n\n| Coins in stack | Position for the player that moves next |\n| :--- | :--- |\n| 0 | Lose |\n| 1 | Win |\n| 2 | Lose |\n| 3 | Win |\n| 4 | Win |\n| 5 | Win |\n| 6 | Win |\n| 7 | Win |\n| 8 | Lose |\n| 9 | Win |\n| 10 | Lose |\n| 11 | Win |\n| 12 | Win |\n| 13 | Win |\n| 14 | Win |\n| 15 | Win |\n| 16 | Lose |\n| 17 | Win |\n| 18 | Lose |\n| … | |\n\nIn general, we see that the losing positions are positions where the stack of coins are (a) a multiple of 8, or (b) 2 more than a multiple of 8.\n\nSince 100 is 4 more than a multiple of 8, it is a winning position, so you should choose to go first. On your turn, you want to take a number of coins to leave your opponent in a losing position. To do so, you can follow the strategy below: divide the number of coins by 8 to get the remainder $k$, then follow the table below to see what action to take.\n\n| $k$ | What to do |\n| :--- | :--- |\n| 0 | Losing position: all moves lead to a loss in optimal play. |\n| 1 | Take 1 coin |\n| 2 | Losing position: all moves lead to a loss in optimal play. |\n| 3 | Take 1 coin |\n| 4 | Take 4 coins |\n| 5 | Take 5 coins |\n| 6 | Take 4 coins |\n| 7 | Take 5 coins |\n:::\n","dynamicBlocks",[],"inlineComponents",{}]
