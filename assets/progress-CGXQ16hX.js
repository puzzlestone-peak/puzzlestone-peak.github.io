import{t as e,b as l,J as de,w as ue,x as xe,A as me,i as ge}from"./index-DIth0oIc.js";import{u as O,T as S,r as B,s as M,h as fe,c as pe,f as D,k as R,P as h,b as p,e as he,D as ve,t as je,v as E,I as $}from"./ItemCardList-BrZolSfb.js";import{k as be,c as m,b as F,u as L,q as ye,v,B as G,C as Ne,l as De,m as Ce,n as Pe,o as we,R as Re}from"./card-CRYRt8Xe.js";import{h as Ee,R as Le,u as _e,F as ke}from"./index-Nyvf4o9H.js";import{p as w}from"./puzzleIndex-CkuFLq0I.js";import{L as ze}from"./loader-circle-D4Vxh6Q3.js";import{r as I,g as A,E as f}from"./ErrorBoundary-DAtG3o8H.js";const Ie=["first-easy-puzzle","first-puzzle","first-expedition"];/**
 * @license lucide-react v0.546.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],H=be("x",Ae),Te=120,C=120;function Oe({currentRank:t,nextRank:s}){const r=s!==void 0,a=r?s.xp-t.xp:0,o=r?Math.round(t.xp/s.xp*100):100;return e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"relative overflow-hidden rounded-2xl p-6 pb-8 shadow-xl",children:[e.jsxs("svg",{className:"absolute inset-0 size-full",viewBox:"0 0 1400 500",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid slice",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"skyGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",className:"[stop-color:var(--color-navy-400)]"}),e.jsx("stop",{offset:"50%",className:"[stop-color:var(--color-navy-300)]"}),e.jsx("stop",{offset:"100%",className:"[stop-color:var(--color-navy-200)]"})]})}),e.jsx("rect",{width:"1400",height:"500",fill:"url(#skyGradient)"}),e.jsx("path",{d:"M 0 350 L 240 220 L 420 290 L 620 200 L 840 270 L 1060 230 L 1280 300 L 1400 260 L 1400 500 L 0 500 Z",className:"fill-primary opacity-25"}),e.jsx("path",{d:"M 0 380 L 280 260 L 480 340 L 700 240 L 920 310 L 1140 270 L 1400 330 L 1400 500 L 0 500 Z",className:"fill-secondary opacity-50"}),e.jsx("path",{d:"M 0 420 L 220 320 L 420 390 L 640 300 L 860 370 L 1080 320 L 1280 380 L 1400 350 L 1400 500 L 0 500 Z",className:"fill-evergreen-700"}),e.jsx("path",{d:"M 580 200 L 700 80 L 820 240 Z",className:"fill-accent"}),e.jsx("path",{d:"M 260 260 L 340 190 L 420 280 Z",className:"fill-sand-400 opacity-70"})]}),e.jsxs("div",{className:"relative z-10 flex items-center justify-center",style:{paddingTop:`${C/2}px`},children:[e.jsx("div",{className:"absolute left-1/2 top-0 z-10 -translate-x-1/2",style:{width:`${Te}px`,height:`${C}px`},children:e.jsx("img",{src:t.badgeImage,alt:t.rankName,className:"size-full drop-shadow-md",style:{filter:"drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2))"}})}),e.jsxs("div",{className:"w-fit overflow-hidden rounded-xl shadow-lg",children:[e.jsxs("div",{className:"relative rounded-t-xl px-8 pb-4 text-center backdrop-blur-lg backdrop-brightness-125 sm:px-12 md:px-16 dark:backdrop-brightness-50 dark:backdrop-saturate-200",style:{paddingTop:`calc(${C/2}px + 1rem)`},children:[e.jsx("p",{className:"mb-1 text-3xl font-bold text-foreground sm:text-4xl",children:t.rankName}),e.jsxs("p",{className:"text-2xl font-bold text-foreground sm:text-3xl",children:[t.xp," XP"]})]}),e.jsxs("div",{className:"bg-card p-4",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mb-1 text-[10px] font-semibold uppercase tracking-wide text-text-secondary",children:r?"Next Rank":"Status"}),e.jsx("div",{className:"text-lg font-semibold text-foreground",children:r?`${s.xp} XP`:"Maximum rank achieved"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between text-[13px] font-semibold text-text-secondary",children:[e.jsx("span",{children:r?"Progress to Next Rank":"XP"}),e.jsxs("span",{children:[o,"%"]})]}),e.jsx("div",{className:"mb-2 h-2.5 overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-primary to-secondary transition-all duration-300",style:{width:`${o}%`}})}),e.jsx("div",{className:"text-center text-muted-foreground",children:r?`${a} XP needed to reach ${s.rankName}`:"Congratulations on reaching the peak!"})]})]})]})]})]})})}function Se(){const t=O(),s={rankName:t.currentRank.name,xp:t.totalXP,badgeImage:t.currentRank.badgeIcon},r=t.nextRank?{rankName:t.nextRank.name,xp:t.nextRank.minXP}:void 0;return e.jsx(Oe,{currentRank:s,nextRank:r})}const W="grid gap-4 grid-cols-[repeat(auto-fill,minmax(140px,1fr))] sm:grid-cols-[repeat(auto-fill,minmax(170px,1fr))]",Be={easy:"bg-green-600",medium:"bg-blue-600",hard:"bg-orange-600",expert:"bg-red-600"},T={easy:"Beginner",medium:"Intermediate",hard:"Advanced",expert:"Expert"};function Me(t,s){return s>0?Math.round(t/s*100):0}function $e({difficultyStats:t}){return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-border bg-card p-6",children:[e.jsx("h3",{className:"mb-4 text-base font-bold text-foreground",children:"Progress by Difficulty"}),e.jsx("div",{className:"flex flex-col gap-4",children:Object.entries(t).map(([s,{completed:r,total:a}])=>{const o=Me(r,a);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex justify-between text-sm",children:[e.jsx("span",{className:"font-semibold",children:T[s]}),e.jsxs("span",{className:"text-muted-foreground",children:[r,"/",a]})]}),e.jsxs(S,{children:[e.jsx(B,{asChild:!0,children:e.jsx("div",{role:"progressbar","aria-valuenow":o,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${T[s]} difficulty: ${r} of ${a} puzzles completed`,className:"h-2 overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:m("h-full transition-all duration-500",Be[s]),style:{width:`${o}%`}})})}),e.jsxs(M,{children:[o,"%"]})]})]},s)})})]})}function Fe(t){return typeof t=="number"?t.toLocaleString():t}function P({value:t,label:s}){const r=Fe(t);return e.jsxs("div",{className:"rounded-lg bg-muted p-4 text-center",children:[e.jsx("div",{className:"mb-1 text-3xl font-bold text-text-emphasis",children:r}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s})]})}function Ge({totalPuzzlesCompleted:t,totalExpeditionsCompleted:s,overallProgress:r}){return e.jsxs("div",{className:"overflow-hidden rounded-xl border border-border bg-card p-6",children:[e.jsx("h3",{className:"mb-4 text-base font-bold text-foreground",children:"Quick Stats"}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(P,{value:t,label:"Puzzles Completed"}),e.jsx(P,{value:s,label:"Expeditions Completed"}),e.jsx(P,{value:`${r}%`,label:"Overall Progress"})]})]})}const He="/assets/badge-CzD5dZhQ.png";function U({badgeId:t,completionState:s,className:r}){const a=F.get(t);if(!a)return null;const o=s.type==="hidden",n=s.type==="not-done"||s.type==="progress",i=s.type==="done",c=o&&a.secret?a.secret.title:a.title,d=o&&a.secret?a.secret.description:a.description;return e.jsxs("div",{className:m("flex flex-col overflow-hidden rounded-xl border p-6",i&&"border-completed/30 bg-completed/5",n&&"border-muted-foreground/20 bg-muted/50",o&&"border-muted-foreground/10 bg-muted/30",r),role:"listitem",children:[e.jsx("div",{className:"mb-4 flex justify-center",children:e.jsx("img",{src:He,alt:`${c} badge`,className:m("h-16 w-16 object-contain",o&&"grayscale",n&&!o&&"saturate-50")})}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"font-bold",children:c})}),e.jsx("div",{className:"text-center text-sm text-muted-foreground",children:d})]}),e.jsxs("div",{children:[s.type==="done"&&e.jsxs("div",{className:"text-center text-sm font-semibold text-success",children:["Completed on ",s.completedDate.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}),s.type==="progress"&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[s.current," / ",s.total]})]}),e.jsxs(S,{children:[e.jsx(B,{asChild:!0,children:e.jsx("div",{role:"progressbar","aria-valuenow":s.percentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${c} progress: ${s.current} of ${s.total}`,className:"h-2 overflow-hidden rounded-full bg-border",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[var(--gradient-progress-start)] to-[var(--gradient-progress-end)] transition-all duration-500",style:{width:`${s.percentage}%`}})})}),e.jsxs(M,{children:[s.percentage,"%"]})]})]}),s.type==="hidden"&&e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground",children:"Not yet discovered"}),s.type==="not-done"&&e.jsx("div",{className:"text-center text-sm font-medium text-muted-foreground",children:"Not done"})]})]})]})}function j({title:t,children:s,className:r}){return e.jsxs("div",{className:r,children:[e.jsx("h4",{className:"mb-4 text-lg font-bold text-foreground",children:t}),e.jsx("div",{role:"list","aria-label":`${t} badges`,className:m("grid gap-4",W),children:s})]})}var y="Dialog",[X]=pe(y),[We,x]=X(y),Y=t=>{const{__scopeDialog:s,children:r,open:a,defaultOpen:o,onOpenChange:n,modal:i=!0}=t,c=l.useRef(null),d=l.useRef(null),[u,N]=fe({prop:a,defaultProp:o??!1,onChange:n,caller:y});return e.jsx(We,{scope:s,triggerRef:c,contentRef:d,contentId:D(),titleId:D(),descriptionId:D(),open:u,onOpenChange:N,onOpenToggle:l.useCallback(()=>N(ce=>!ce),[N]),modal:i,children:r})};Y.displayName=y;var Z="DialogTrigger",Ue=l.forwardRef((t,s)=>{const{__scopeDialog:r,...a}=t,o=x(Z,r),n=L(s,o.triggerRef);return e.jsx(h.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":z(o.open),...a,ref:n,onClick:p(t.onClick,o.onOpenToggle)})});Ue.displayName=Z;var _="DialogPortal",[Xe,V]=X(_,{forceMount:void 0}),Q=t=>{const{__scopeDialog:s,forceMount:r,children:a,container:o}=t,n=x(_,s);return e.jsx(Xe,{scope:s,forceMount:r,children:l.Children.map(a,i=>e.jsx(R,{present:r||n.open,children:e.jsx(he,{asChild:!0,container:o,children:i})}))})};Q.displayName=_;var b="DialogOverlay",q=l.forwardRef((t,s)=>{const r=V(b,t.__scopeDialog),{forceMount:a=r.forceMount,...o}=t,n=x(b,t.__scopeDialog);return n.modal?e.jsx(R,{present:a||n.open,children:e.jsx(Ze,{...o,ref:s})}):null});q.displayName=b;var Ye=ye("DialogOverlay.RemoveScroll"),Ze=l.forwardRef((t,s)=>{const{__scopeDialog:r,...a}=t,o=x(b,r);return e.jsx(Le,{as:Ye,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(h.div,{"data-state":z(o.open),...a,ref:s,style:{pointerEvents:"auto",...a.style}})})}),g="DialogContent",J=l.forwardRef((t,s)=>{const r=V(g,t.__scopeDialog),{forceMount:a=r.forceMount,...o}=t,n=x(g,t.__scopeDialog);return e.jsx(R,{present:a||n.open,children:n.modal?e.jsx(Ve,{...o,ref:s}):e.jsx(Qe,{...o,ref:s})})});J.displayName=g;var Ve=l.forwardRef((t,s)=>{const r=x(g,t.__scopeDialog),a=l.useRef(null),o=L(s,r.contentRef,a);return l.useEffect(()=>{const n=a.current;if(n)return Ee(n)},[]),e.jsx(K,{...t,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:p(t.onCloseAutoFocus,n=>{n.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:p(t.onPointerDownOutside,n=>{const i=n.detail.originalEvent,c=i.button===0&&i.ctrlKey===!0;(i.button===2||c)&&n.preventDefault()}),onFocusOutside:p(t.onFocusOutside,n=>n.preventDefault())})}),Qe=l.forwardRef((t,s)=>{const r=x(g,t.__scopeDialog),a=l.useRef(!1),o=l.useRef(!1);return e.jsx(K,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{t.onCloseAutoFocus?.(n),n.defaultPrevented||(a.current||r.triggerRef.current?.focus(),n.preventDefault()),a.current=!1,o.current=!1},onInteractOutside:n=>{t.onInteractOutside?.(n),n.defaultPrevented||(a.current=!0,n.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=n.target;r.triggerRef.current?.contains(i)&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&o.current&&n.preventDefault()}})}),K=l.forwardRef((t,s)=>{const{__scopeDialog:r,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:n,...i}=t,c=x(g,r),d=l.useRef(null),u=L(s,d);return _e(),e.jsxs(e.Fragment,{children:[e.jsx(ke,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:o,onUnmountAutoFocus:n,children:e.jsx(ve,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":z(c.open),...i,ref:u,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Je,{titleId:c.titleId}),e.jsx(et,{contentRef:d,descriptionId:c.descriptionId})]})]})}),k="DialogTitle",ee=l.forwardRef((t,s)=>{const{__scopeDialog:r,...a}=t,o=x(k,r);return e.jsx(h.h2,{id:o.titleId,...a,ref:s})});ee.displayName=k;var te="DialogDescription",qe=l.forwardRef((t,s)=>{const{__scopeDialog:r,...a}=t,o=x(te,r);return e.jsx(h.p,{id:o.descriptionId,...a,ref:s})});qe.displayName=te;var se="DialogClose",re=l.forwardRef((t,s)=>{const{__scopeDialog:r,...a}=t,o=x(se,r);return e.jsx(h.button,{type:"button",...a,ref:s,onClick:p(t.onClick,()=>o.onOpenChange(!1))})});re.displayName=se;function z(t){return t?"open":"closed"}var oe="DialogTitleWarning",[Pt,ae]=je(oe,{contentName:g,titleName:k,docsSlug:"dialog"}),Je=({titleId:t})=>{const s=ae(oe),r=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return l.useEffect(()=>{t&&(document.getElementById(t)||console.error(r))},[r,t]),null},Ke="DialogDescriptionWarning",et=({contentRef:t,descriptionId:s})=>{const a=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ae(Ke).contentName}}.`;return l.useEffect(()=>{const o=t.current?.getAttribute("aria-describedby");s&&o&&(document.getElementById(s)||console.warn(a))},[a,t,s]),null},tt=Y,st=Q,rt=q,ot=J,at=ee,ne=re;function nt({...t}){return e.jsx(tt,{"data-slot":"dialog",...t})}function lt({...t}){return e.jsx(st,{"data-slot":"dialog-portal",...t})}function it({className:t,...s}){return e.jsx(rt,{"data-slot":"dialog-overlay",className:m("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[1100] bg-black/50",t),...s})}function ct({className:t,children:s,showCloseButton:r=!1,...a}){return e.jsxs(lt,{"data-slot":"dialog-portal",children:[e.jsx(it,{}),e.jsxs(ot,{"data-slot":"dialog-content",className:m("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[1200] grid w-full max-w-[calc(100%-2rem)] max-h-[calc(100vh-2rem)] translate-x-[-50%] translate-y-[-50%] rounded-lg border border-border shadow-lg duration-200 overflow-hidden sm:max-w-lg",t),...a,children:[s,r&&e.jsxs(ne,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 bg-background z-10",children:[e.jsx(H,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function dt({className:t,children:s,...r}){return e.jsxs("div",{"data-slot":"dialog-header",className:m("flex flex-row items-start justify-between p-4 sm:pt-8 sm:px-8 sm:pb-4",t),...r,children:[s,e.jsxs(ne,{"data-slot":"dialog-close",className:"cursor-pointer rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(H,{className:"h-6 w-6"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})}function ut({className:t,...s}){return e.jsx(at,{"data-slot":"dialog-title",className:m("text-lg leading-none font-semibold",t),...s})}function xt({isOpen:t,onOpenChange:s}){const{getBadgeCompletionState:r}=E(),a=o=>{const n=r(o);return e.jsx(U,{badgeId:o,completionState:n},o)};return e.jsx(nt,{open:t,onOpenChange:s,children:e.jsxs(ct,{className:"!w-full !max-w-[min(var(--width-container),calc(100vw-2rem))] flex flex-col overflow-hidden p-0",children:[e.jsx(dt,{children:e.jsx(ut,{className:"text-2xl font-bold text-foreground",children:"All Badges"})}),e.jsxs("div",{className:"overflow-y-auto px-4 pb-4 sm:px-8 sm:pb-8",role:"region","aria-label":"Badge collection",children:[e.jsx(j,{title:"Puzzle Badges",className:"mb-8",children:v.puzzles.map(o=>a(o.id))}),e.jsx(j,{title:"Expedition Badges",className:"mb-8",children:v.expeditions.map(o=>a(o.id))}),e.jsx(j,{title:"Rank Badges",className:"mb-8",children:v.ranks.map(o=>a(o.id))}),e.jsx(j,{title:"Completionist Badges",children:v.completionist.map(o=>a(o.id))})]})]})})}function mt(){const[t,s]=l.useState(!1),{userProgress:r,getBadgeCompletionState:a}=E(),o=l.useMemo(()=>{const i=Array.from(r.earnedBadges.values()).sort((c,d)=>d.earnedAt-c.earnedAt).filter(({badgeId:c})=>F.get(c)?.condition.type!=="rank").slice(0,3);if(i.length<3){const c=new Set(i.map(u=>u.badgeId)),d=Ie.filter(u=>!c.has(u)).slice(0,3-i.length).map(u=>({badgeId:u,earnedAt:0}));return[...i,...d]}return i},[r.earnedBadges]);return e.jsxs("section",{children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Recent Badges"}),e.jsx("div",{role:"list","aria-label":"Recent badges",className:m("mb-4",W),children:o.map(({badgeId:n})=>{const i=a(n);return e.jsx(U,{badgeId:n,completionState:i},n)})}),e.jsxs("div",{className:"text-center",children:[e.jsx(G,{type:"button",onClick:()=>s(!0),variant:"contained",color:"primary",children:"View All Badges"}),e.jsx(xt,{isOpen:t,onOpenChange:s})]})]})}function gt(t){const s=[{type:"recently-seen",viewHistory:t.viewHistory,maxHistory:20},{type:"completion",status:"undone"},{type:"publication",mode:"auto"}],r=[];return{count:t.count??5,filters:s,fallbacks:r,selectionStrategy:{type:"recent-first",mode:"chronological-recent-first",maxCount:t.count??5}}}function ft(t){return{count:5,filters:[{type:"exclude",excludeList:t.excludeList,always:!0},{type:"completion",status:"undone"},{type:"publication",mode:"auto"}],fallbacks:[{type:"difficulty",strategy:"balanced",balanceConstraint:{type:"max-min-diff",maxDiff:1},excludeFullyCompletedDifficulties:!0},{type:"completion",allowCompleted:!0}],selectionStrategy:{type:"random-by-difficulty",mode:"one-per-difficulty",difficulties:["easy","medium","hard","expert","open"]},balancingStrategy:{type:"difficulty-balance",maxDiff:1,excludeFullyCompleted:!0}}}function le(){const t=O(),{lastSeen:s,recommended:r}=l.useMemo(()=>{const a=t.lastSeenPuzzles.map(u=>u.id),o=gt({viewHistory:a,count:5}),n=I(o,{allPuzzles:w,userProgress:t,excludeList:[],viewHistory:a,environment:"production",seed:A("progress-last-seen")}),i=n.map(u=>u.id),c=ft({excludeList:i}),d=I(c,{allPuzzles:w,userProgress:t,excludeList:i,environment:"production",seed:A("progress-recommended")});return{lastSeen:n,recommended:d}},[t]);return{lastSeen:s,recommended:r}}function pt(){const{lastSeen:t}=le();return t.length===0?null:e.jsxs("section",{children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Continue Where You Left Off"}),e.jsx($,{type:"puzzle",items:t,variant:"compact"})]})}function ht(){const{recommended:t}=le();return t.length===0?null:e.jsxs("section",{children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Recommended Puzzles"}),e.jsx($,{type:"puzzle",items:t,variant:"compact"})]})}function ie({className:t,...s}){return e.jsx(ze,{role:"status","aria-label":"Loading",className:m("size-4 animate-spin",t),...s})}const wt=()=>[{title:"Progress - Puzzlestone Peak"},{name:"description",content:"Track your puzzle-solving progress and achievements."}],Rt=de(function(){return e.jsx("div",{className:"container mx-auto flex min-h-[50vh] max-w-container items-center justify-center px-6 py-8",children:e.jsx(ie,{className:"size-8"})})}),Et=ue(function(){const r=E().userProgress,a=l.useMemo(()=>{const o={easy:{completed:0,total:0},medium:{completed:0,total:0},hard:{completed:0,total:0},expert:{completed:0,total:0}};for(const n of r.progressByDifficulty)n.difficulty in o&&(o[n.difficulty]={completed:n.completed,total:n.total});return o},[r.progressByDifficulty]);return w.length===0?e.jsx("div",{className:"container mx-auto flex min-h-[50vh] max-w-container items-center justify-center px-6 py-8",children:e.jsx(ie,{className:"size-8"})}):e.jsxs("div",{className:"container mx-auto max-w-container px-6 py-8",children:[e.jsx(Se,{}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-[350px_1fr]",children:[e.jsxs("aside",{className:"flex flex-col gap-6",children:[e.jsx(f,{context:"progress",children:e.jsx($e,{difficultyStats:a})}),e.jsx(f,{context:"progress",children:e.jsx(Ge,{totalPuzzlesCompleted:r.totalProgress.completed,totalExpeditionsCompleted:r.expeditionProgress.completed,overallProgress:r.totalProgress.percentage})})]}),e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(f,{context:"progress",children:e.jsx(mt,{})}),e.jsx(f,{context:"recommendations",children:e.jsx(pt,{})}),e.jsx(f,{context:"recommendations",children:e.jsx(ht,{})})]})]})]})}),Lt=xe(function(){const s=me(),[r,a]=l.useState(!1);let o="Progress Page Error",n="An error occurred while loading your progress data.";return ge(s)?(o=`Error ${s.status}`,n="An error occurred while loading the progress page.",s.data?.message||s.statusText):s instanceof Error&&((s.message.includes("localStorage")||s.message.includes("storage"))&&(o="Progress Data Error",n="There was a problem accessing your progress data."),s.message),e.jsx("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:e.jsxs(Ne,{className:"border-destructive/50",children:[e.jsx(De,{children:e.jsxs(Ce,{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl text-destructive",children:"âš "}),o]})}),e.jsxs(Pe,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:n}),e.jsx("p",{className:"text-sm text-foreground",children:"Try clearing your browser cache or localStorage. This may reset your progress data, but will resolve the issue."}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(G,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),children:"Reload Page"}),e.jsx(we,{to:Re.HOME,variant:"outlined",children:"Return Home"})]}),!1]})]})})});export{Lt as ErrorBoundary,Rt as HydrateFallback,Et as default,wt as meta};
