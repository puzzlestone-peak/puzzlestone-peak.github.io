import{b as Ze,t as D,G as En,w as An,x as In,H as Tn,L as Fn,A as Ln,B as Pn,i as vn}from"./index-DIth0oIc.js";import{p as Nn,u as Dn,D as Mn,C as ke,M as _n}from"./useBack-uAQCGYKp.js";import{u as Bn,I as Ge,n as jn,o as On}from"./ItemCardList-BrZolSfb.js";import{p as Xt}from"./puzzleIndex-CkuFLq0I.js";import{o as Je,R as Pt,C as qn,l as Rn,m as Vn,n as $n,B as Hn}from"./card-CRYRt8Xe.js";import{r as Un,g as Qn,E as Wn}from"./ErrorBoundary-DAtG3o8H.js";import"./use-dark-mode-mdHJdo6o.js";function Yn(t){const n=[{type:"exclude",excludeList:[t.currentPuzzleId,...t.excludeList??[]],always:!0},{type:"completion",status:"undone"},{type:"publication",mode:"auto"}],r=[{type:"difficulty",strategy:"spiral",preferredDifficulty:t.currentPuzzleDifficulty,allowRange:1,spiralOrder:["+1","+2","+3","+4","+5","-1","-2","-3","-4","-5"]},{type:"completion",allowCompleted:!0,respectExcludeList:!0}];return{count:t.count??3,filters:n,fallbacks:r,selectionStrategy:{type:"random",mode:"uniform"}}}function Zn({currentPuzzleId:t}){const e=Bn(),n=Ze.useMemo(()=>{const i=Xt.find(a=>a.id===t)?.difficulty;if(!i)return console.warn(`Could not find difficulty for puzzle ${t}`),[];const u=Yn({currentPuzzleId:t,currentPuzzleDifficulty:i});return Un(u,{allPuzzles:Xt,userProgress:e,excludeList:[],environment:"production",currentPuzzleDifficulty:i,seed:Qn(`puzzle-${t}`)})},[t,e]);return n.length===0?null:D.jsxs("section",{className:"mt-12",children:[D.jsx("h2",{className:"mb-6 text-xl font-bold text-foreground lg:text-2xl",children:"Try These Next"}),D.jsx(Ge,{type:"puzzle",items:n,variant:"compact"})]})}function be(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function Gn({metadata:t}){return D.jsxs("div",{className:"space-y-4 border-b border-divider pb-6 mb-6",children:[D.jsx("div",{children:D.jsx(jn,{difficulty:t.difficulty})}),D.jsxs("div",{className:"text-sm text-muted-foreground",children:[D.jsxs("span",{children:["Created: ",be(t.dateCreated)]}),t.lastUpdated!==t.dateCreated&&D.jsxs("span",{className:"ml-4",children:["Updated: ",be(t.lastUpdated)]})]}),t.credits&&D.jsx("div",{className:"text-sm text-muted-foreground prose prose-sm dark:prose-invert",children:D.jsx("div",{dangerouslySetInnerHTML:{__html:Nn.sanitize(t.credits)}})})]})}function we({type:t,puzzleSlug:e}){if(!e)return null;const n=Xt.find(i=>i.slug===e);if(!n)return null;const r=t==="previous"?"Previous puzzle in this series":"Next puzzle in this series";return D.jsxs("div",{className:"my-6",children:[D.jsx("h2",{className:"text-lg font-semibold mb-3",children:r}),D.jsx(Ge,{type:"puzzle",items:[n],variant:"compact"})]})}function ze(t){if(t)throw t}var Mt,Se;function Jn(){if(Se)return Mt;Se=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(s){return typeof Array.isArray=="function"?Array.isArray(s):e.call(s)==="[object Array]"},u=function(s){if(!s||e.call(s)!=="[object Object]")return!1;var c=t.call(s,"constructor"),f=s.constructor&&s.constructor.prototype&&t.call(s.constructor.prototype,"isPrototypeOf");if(s.constructor&&!c&&!f)return!1;var p;for(p in s);return typeof p>"u"||t.call(s,p)},a=function(s,c){n&&c.name==="__proto__"?n(s,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):s[c.name]=c.newValue},l=function(s,c){if(c==="__proto__")if(t.call(s,c)){if(r)return r(s,c).value}else return;return s[c]};return Mt=function o(){var s,c,f,p,h,S,g=arguments[0],C=1,w=arguments.length,z=!1;for(typeof g=="boolean"&&(z=g,g=arguments[1]||{},C=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});C<w;++C)if(s=arguments[C],s!=null)for(c in s)f=l(g,c),p=l(s,c),g!==p&&(z&&p&&(u(p)||(h=i(p)))?(h?(h=!1,S=f&&i(f)?f:[]):S=f&&u(f)?f:{},a(g,{name:c,newValue:o(z,S,p)})):typeof p<"u"&&a(g,{name:c,newValue:p}));return g},Mt}var Kn=Jn();const _t=En(Kn);function te(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Xn(){const t=[],e={run:n,use:r};return e;function n(...i){let u=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);l(null,...i);function l(o,...s){const c=t[++u];let f=-1;if(o){a(o);return}for(;++f<i.length;)(s[f]===null||s[f]===void 0)&&(s[f]=i[f]);i=s,c?tr(c,l)(...s):a(null,...s)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function tr(t,e){let n;return r;function r(...a){const l=t.length>a.length;let o;l&&a.push(i);try{o=t.apply(this,a)}catch(s){const c=s;if(l&&n)throw c;return i(c)}l||(o&&o.then&&typeof o.then=="function"?o.then(u,i):o instanceof Error?i(o):u(o))}function i(a,...l){n||(n=!0,e(a,...l))}function u(a){i(null,a)}}function St(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Ce(t.position):"start"in t||"end"in t?Ce(t):"line"in t||"column"in t?ee(t):""}function ee(t){return Ee(t&&t.line)+":"+Ee(t&&t.column)}function Ce(t){return ee(t&&t.start)+"-"+ee(t&&t.end)}function Ee(t){return t&&typeof t=="number"?t:1}class Y extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",u={},a=!1;if(n&&("line"in n&&"column"in n?u={place:n}:"start"in n&&"end"in n?u={place:n}:"type"in n?u={ancestors:[n],place:n.position}:u={...n}),typeof e=="string"?i=e:!u.cause&&e&&(a=!0,i=e.message,u.cause=e),!u.ruleId&&!u.source&&typeof r=="string"){const o=r.indexOf(":");o===-1?u.ruleId=r:(u.source=r.slice(0,o),u.ruleId=r.slice(o+1))}if(!u.place&&u.ancestors&&u.ancestors){const o=u.ancestors[u.ancestors.length-1];o&&(u.place=o.position)}const l=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=St(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=a&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Y.prototype.file="";Y.prototype.name="";Y.prototype.reason="";Y.prototype.message="";Y.prototype.stack="";Y.prototype.column=void 0;Y.prototype.line=void 0;Y.prototype.ancestors=void 0;Y.prototype.cause=void 0;Y.prototype.fatal=void 0;Y.prototype.place=void 0;Y.prototype.ruleId=void 0;Y.prototype.source=void 0;const nt={basename:er,dirname:nr,extname:rr,join:ir,sep:"/"};function er(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');It(t);let n=0,r=-1,i=t.length,u;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(u){n=i+1;break}}else r<0&&(u=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(u){n=i+1;break}}else a<0&&(u=!0,a=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function nr(t){if(It(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function rr(t){It(t);let e=t.length,n=-1,r=0,i=-1,u=0,a;for(;e--;){const l=t.codePointAt(e);if(l===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),l===46?i<0?i=e:u!==1&&(u=1):i>-1&&(u=-1)}return i<0||n<0||u===0||u===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function ir(...t){let e=-1,n;for(;++e<t.length;)It(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":ur(n)}function ur(t){It(t);const e=t.codePointAt(0)===47;let n=ar(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function ar(t,e){let n="",r=0,i=-1,u=0,a=-1,l,o;for(;++a<=t.length;){if(a<t.length)l=t.codePointAt(a);else{if(l===47)break;l=47}if(l===47){if(!(i===a-1||u===1))if(i!==a-1&&u===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(o=n.lastIndexOf("/"),o!==n.length-1){o<0?(n="",r=0):(n=n.slice(0,o),r=n.length-1-n.lastIndexOf("/")),i=a,u=0;continue}}else if(n.length>0){n="",r=0,i=a,u=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,u=0}else l===46&&u>-1?u++:u=-1}return n}function It(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const lr={cwd:sr};function sr(){return"/"}function ne(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function or(t){if(typeof t=="string")t=new URL(t);else if(!ne(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return cr(t)}function cr(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Bt=["history","path","basename","stem","extname","dirname"];class hr{constructor(e){let n;e?ne(e)?n={path:e}:typeof e=="string"||fr(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":lr.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Bt.length;){const u=Bt[r];u in n&&n[u]!==void 0&&n[u]!==null&&(this[u]=u==="history"?[...n[u]]:n[u])}let i;for(i in n)Bt.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?nt.basename(this.path):void 0}set basename(e){Ot(e,"basename"),jt(e,"basename"),this.path=nt.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?nt.dirname(this.path):void 0}set dirname(e){Ae(this.basename,"dirname"),this.path=nt.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?nt.extname(this.path):void 0}set extname(e){if(jt(e,"extname"),Ae(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=nt.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){ne(e)&&(e=or(e)),Ot(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?nt.basename(this.path,this.extname):void 0}set stem(e){Ot(e,"stem"),jt(e,"stem"),this.path=nt.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new Y(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function jt(t,e){if(t&&t.includes(nt.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+nt.sep+"`")}function Ot(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Ae(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function fr(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const pr=(function(t){const r=this.constructor.prototype,i=r[t],u=function(){return i.apply(u,arguments)};return Object.setPrototypeOf(u,r),u}),mr={}.hasOwnProperty;class ae extends pr{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Xn()}copy(){const e=new ae;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(_t(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Vt("data",this.frozen),this.namespace[e]=n,this):mr.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Vt("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Ft(e),r=this.parser||this.Parser;return qt("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),qt("process",this.parser||this.Parser),Rt("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(u,a){const l=Ft(e),o=r.parse(l);r.run(o,l,function(c,f,p){if(c||!f||!p)return s(c);const h=f,S=r.stringify(h,p);gr(S)?p.value=S:p.result=S,s(c,p)});function s(c,f){c||!f?a(c):u?u(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),qt("processSync",this.parser||this.Parser),Rt("processSync",this.compiler||this.Compiler),this.process(e,i),Te("processSync","process",n),r;function i(u,a){n=!0,ze(u),r=a}}run(e,n,r){Ie(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?u(void 0,r):new Promise(u);function u(a,l){const o=Ft(n);i.run(e,o,s);function s(c,f,p){const h=f||e;c?l(c):a?a(h):r(void 0,h,p)}}}runSync(e,n){let r=!1,i;return this.run(e,n,u),Te("runSync","run",r),i;function u(a,l){ze(a),i=l,r=!0}}stringify(e,n){this.freeze();const r=Ft(n),i=this.compiler||this.Compiler;return Rt("stringify",i),Ie(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(Vt("use",this.frozen),e!=null)if(typeof e=="function")o(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function u(s){if(typeof s=="function")o(s,[]);else if(typeof s=="object")if(Array.isArray(s)){const[c,...f]=s;o(c,f)}else a(s);else throw new TypeError("Expected usable value, not `"+s+"`")}function a(s){if(!("plugins"in s)&&!("settings"in s))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(s.plugins),s.settings&&(i.settings=_t(!0,i.settings,s.settings))}function l(s){let c=-1;if(s!=null)if(Array.isArray(s))for(;++c<s.length;){const f=s[c];u(f)}else throw new TypeError("Expected a list of plugins, not `"+s+"`")}function o(s,c){let f=-1,p=-1;for(;++f<r.length;)if(r[f][0]===s){p=f;break}if(p===-1)r.push([s,...c]);else if(c.length>0){let[h,...S]=c;const g=r[p][1];te(g)&&te(h)&&(h=_t(!0,g,h)),r[p]=[s,h,...S]}}}}const dr=new ae().freeze();function qt(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Rt(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Vt(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ie(t){if(!te(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Te(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Ft(t){return xr(t)?t:new hr(t)}function xr(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function gr(t){return typeof t=="string"||yr(t)}function yr(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const kr={};function br(t,e){const n=kr,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Ke(t,r,i)}function Ke(t,e,n){if(wr(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Fe(t.children,e,n)}return Array.isArray(t)?Fe(t,e,n):""}function Fe(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=Ke(t[i],e,n);return r.join("")}function wr(t){return!!(t&&typeof t=="object")}const Le=document.createElement("i");function Ct(t){const e="&"+t+";";Le.innerHTML=e;const n=Le.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function it(t,e,n,r){const i=t.length;let u=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);u<r.length;)a=r.slice(u,u+1e4),a.unshift(e,0),t.splice(...a),u+=1e4,e+=1e4}function G(t,e){return t.length>0?(it(t,t.length,0,e),t):e}const Pe={}.hasOwnProperty;function zr(t){const e={};let n=-1;for(;++n<t.length;)Sr(e,t[n]);return e}function Sr(t,e){let n;for(n in e){const i=(Pe.call(t,n)?t[n]:void 0)||(t[n]={}),u=e[n];let a;if(u)for(a in u){Pe.call(i,a)||(i[a]=[]);const l=u[a];Cr(i[a],Array.isArray(l)?l:l?[l]:[])}}}function Cr(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);it(t,0,0,r)}function Xe(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"ï¿½":String.fromCodePoint(n)}function yt(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const rt=ft(/[A-Za-z]/),et=ft(/[\dA-Za-z]/),Er=ft(/[#-'*+\--9=?A-Z^-~]/);function re(t){return t!==null&&(t<32||t===127)}const ie=ft(/\d/),Ar=ft(/[\dA-Fa-f]/),Ir=ft(/[!-/:-@[-`{-~]/);function I(t){return t!==null&&t<-2}function H(t){return t!==null&&(t<0||t===32)}function R(t){return t===-2||t===-1||t===32}const Et=ft(new RegExp("\\p{P}|\\p{S}","u")),At=ft(/\s/);function ft(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function j(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let u=0;return a;function a(o){return R(o)?(t.enter(n),l(o)):e(o)}function l(o){return R(o)&&u++<i?(t.consume(o),l):(t.exit(n),e(o))}}const Tr={tokenize:Fr};function Fr(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),j(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),u(l)}function u(l){const o=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=o),n=o,a(l)}function a(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return I(l)?(t.consume(l),t.exit("chunkText"),u):(t.consume(l),a)}}const Lr={tokenize:Pr},ve={tokenize:vr};function Pr(t){const e=this,n=[];let r=0,i,u,a;return l;function l(A){if(r<n.length){const P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,o,s)(A)}return s(A)}function o(A){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&z();const P=e.events.length;let _=P,k;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){k=e.events[_][1].end;break}w(r);let v=P;for(;v<e.events.length;)e.events[v][1].end={...k},v++;return it(e.events,_+1,0,e.events.slice(P)),e.events.length=v,s(A)}return l(A)}function s(A){if(r===n.length){if(!i)return p(A);if(i.currentConstruct&&i.currentConstruct.concrete)return S(A);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(ve,c,f)(A)}function c(A){return i&&z(),w(r),p(A)}function f(A){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,S(A)}function p(A){return e.containerState={},t.attempt(ve,h,S)(A)}function h(A){return r++,n.push([e.currentConstruct,e.containerState]),p(A)}function S(A){if(A===null){i&&z(),w(0),t.consume(A);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:u}),g(A)}function g(A){if(A===null){C(t.exit("chunkFlow"),!0),w(0),t.consume(A);return}return I(A)?(t.consume(A),C(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(A),g)}function C(A,P){const _=e.sliceStream(A);if(P&&_.push(null),A.previous=u,u&&(u.next=A),u=A,i.defineSkip(A.start),i.write(_),e.parser.lazy[A.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<a&&(!i.events[k][1].end||i.events[k][1].end.offset>a))return;const v=e.events.length;let B=v,b,N;for(;B--;)if(e.events[B][0]==="exit"&&e.events[B][1].type==="chunkFlow"){if(b){N=e.events[B][1].end;break}b=!0}for(w(r),k=v;k<e.events.length;)e.events[k][1].end={...N},k++;it(e.events,B+1,0,e.events.slice(v)),e.events.length=k}}function w(A){let P=n.length;for(;P-- >A;){const _=n[P];e.containerState=_[1],_[0].exit.call(e,t)}n.length=A}function z(){i.write([null]),u=void 0,i=void 0,e.containerState._closeFlow=void 0}}function vr(t,e,n){return j(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ne(t){if(t===null||H(t)||At(t))return 1;if(Et(t))return 2}function le(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const u=t[i].resolveAll;u&&!r.includes(u)&&(e=u(e,n),r.push(u))}return e}const ue={name:"attention",resolveAll:Nr,tokenize:Dr};function Nr(t,e){let n=-1,r,i,u,a,l,o,s,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;o=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},p={...t[n][1].start};De(f,-o),De(p,o),a={type:o>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},l={type:o>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:p},u={type:o>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:o>1?"strong":"emphasis",start:{...a.start},end:{...l.end}},t[r][1].end={...a.start},t[n][1].start={...l.end},s=[],t[r][1].end.offset-t[r][1].start.offset&&(s=G(s,[["enter",t[r][1],e],["exit",t[r][1],e]])),s=G(s,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",u,e]]),s=G(s,le(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),s=G(s,[["exit",u,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,s=G(s,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,it(t,r-1,n-r+3,s),n=r+s.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Dr(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ne(r);let u;return a;function a(o){return u=o,t.enter("attentionSequence"),l(o)}function l(o){if(o===u)return t.consume(o),l;const s=t.exit("attentionSequence"),c=Ne(o),f=!c||c===2&&i||n.includes(o),p=!i||i===2&&c||n.includes(r);return s._open=!!(u===42?f:f&&(i||!p)),s._close=!!(u===42?p:p&&(c||!f)),e(o)}}function De(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Mr={name:"autolink",tokenize:_r};function _r(t,e,n){let r=0;return i;function i(h){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),u}function u(h){return rt(h)?(t.consume(h),a):h===64?n(h):s(h)}function a(h){return h===43||h===45||h===46||et(h)?(r=1,l(h)):s(h)}function l(h){return h===58?(t.consume(h),r=0,o):(h===43||h===45||h===46||et(h))&&r++<32?(t.consume(h),l):(r=0,s(h))}function o(h){return h===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):h===null||h===32||h===60||re(h)?n(h):(t.consume(h),o)}function s(h){return h===64?(t.consume(h),c):Er(h)?(t.consume(h),s):n(h)}function c(h){return et(h)?f(h):n(h)}function f(h){return h===46?(t.consume(h),r=0,c):h===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(h),t.exit("autolinkMarker"),t.exit("autolink"),e):p(h)}function p(h){if((h===45||et(h))&&r++<63){const S=h===45?p:f;return t.consume(h),S}return n(h)}}const Nt={partial:!0,tokenize:Br};function Br(t,e,n){return r;function r(u){return R(u)?j(t,i,"linePrefix")(u):i(u)}function i(u){return u===null||I(u)?e(u):n(u)}}const tn={continuation:{tokenize:Or},exit:qr,name:"blockQuote",tokenize:jr};function jr(t,e,n){const r=this;return i;function i(a){if(a===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),u}return n(a)}function u(a){return R(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function Or(t,e,n){const r=this;return i;function i(a){return R(a)?j(t,u,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):u(a)}function u(a){return t.attempt(tn,e,n)(a)}}function qr(t){t.exit("blockQuote")}const en={name:"characterEscape",tokenize:Rr};function Rr(t,e,n){return r;function r(u){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(u),t.exit("escapeMarker"),i}function i(u){return Ir(u)?(t.enter("characterEscapeValue"),t.consume(u),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(u)}}const nn={name:"characterReference",tokenize:Vr};function Vr(t,e,n){const r=this;let i=0,u,a;return l;function l(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),o}function o(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),s):(t.enter("characterReferenceValue"),u=31,a=et,c(f))}function s(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),u=6,a=Ar,c):(t.enter("characterReferenceValue"),u=7,a=ie,c(f))}function c(f){if(f===59&&i){const p=t.exit("characterReferenceValue");return a===et&&!Ct(r.sliceSerialize(p))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(f)&&i++<u?(t.consume(f),c):n(f)}}const Me={partial:!0,tokenize:Hr},_e={concrete:!0,name:"codeFenced",tokenize:$r};function $r(t,e,n){const r=this,i={partial:!0,tokenize:_};let u=0,a=0,l;return o;function o(k){return s(k)}function s(k){const v=r.events[r.events.length-1];return u=v&&v[1].type==="linePrefix"?v[2].sliceSerialize(v[1],!0).length:0,l=k,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(k)}function c(k){return k===l?(a++,t.consume(k),c):a<3?n(k):(t.exit("codeFencedFenceSequence"),R(k)?j(t,f,"whitespace")(k):f(k))}function f(k){return k===null||I(k)?(t.exit("codeFencedFence"),r.interrupt?e(k):t.check(Me,g,P)(k)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),p(k))}function p(k){return k===null||I(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(k)):R(k)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),j(t,h,"whitespace")(k)):k===96&&k===l?n(k):(t.consume(k),p)}function h(k){return k===null||I(k)?f(k):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),S(k))}function S(k){return k===null||I(k)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(k)):k===96&&k===l?n(k):(t.consume(k),S)}function g(k){return t.attempt(i,P,C)(k)}function C(k){return t.enter("lineEnding"),t.consume(k),t.exit("lineEnding"),w}function w(k){return u>0&&R(k)?j(t,z,"linePrefix",u+1)(k):z(k)}function z(k){return k===null||I(k)?t.check(Me,g,P)(k):(t.enter("codeFlowValue"),A(k))}function A(k){return k===null||I(k)?(t.exit("codeFlowValue"),z(k)):(t.consume(k),A)}function P(k){return t.exit("codeFenced"),e(k)}function _(k,v,B){let b=0;return N;function N(x){return k.enter("lineEnding"),k.consume(x),k.exit("lineEnding"),T}function T(x){return k.enter("codeFencedFence"),R(x)?j(k,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(x):F(x)}function F(x){return x===l?(k.enter("codeFencedFenceSequence"),L(x)):B(x)}function L(x){return x===l?(b++,k.consume(x),L):b>=a?(k.exit("codeFencedFenceSequence"),R(x)?j(k,V,"whitespace")(x):V(x)):B(x)}function V(x){return x===null||I(x)?(k.exit("codeFencedFence"),v(x)):B(x)}}}function Hr(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),u)}function u(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const $t={name:"codeIndented",tokenize:Qr},Ur={partial:!0,tokenize:Wr};function Qr(t,e,n){const r=this;return i;function i(s){return t.enter("codeIndented"),j(t,u,"linePrefix",5)(s)}function u(s){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?a(s):n(s)}function a(s){return s===null?o(s):I(s)?t.attempt(Ur,a,o)(s):(t.enter("codeFlowValue"),l(s))}function l(s){return s===null||I(s)?(t.exit("codeFlowValue"),a(s)):(t.consume(s),l)}function o(s){return t.exit("codeIndented"),e(s)}}function Wr(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):I(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):j(t,u,"linePrefix",5)(a)}function u(a){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):I(a)?i(a):n(a)}}const Yr={name:"codeText",previous:Gr,resolve:Zr,tokenize:Jr};function Zr(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Gr(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Jr(t,e,n){let r=0,i,u;return a;function a(f){return t.enter("codeText"),t.enter("codeTextSequence"),l(f)}function l(f){return f===96?(t.consume(f),r++,l):(t.exit("codeTextSequence"),o(f))}function o(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),o):f===96?(u=t.enter("codeTextSequence"),i=0,c(f)):I(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),o):(t.enter("codeTextData"),s(f))}function s(f){return f===null||f===32||f===96||I(f)?(t.exit("codeTextData"),o(f)):(t.consume(f),s)}function c(f){return f===96?(t.consume(f),i++,c):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(u.type="codeTextData",s(f))}}class Kr{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const u=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&zt(this.left,r),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),zt(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),zt(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);zt(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);zt(this.left,n.reverse())}}}function zt(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function rn(t){const e={};let n=-1,r,i,u,a,l,o,s;const c=new Kr(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(o=r[1]._tokenizer.events,u=0,u<o.length&&o[u][1].type==="lineEndingBlank"&&(u+=2),u<o.length&&o[u][1].type==="content"))for(;++u<o.length&&o[u][1].type!=="content";)o[u][1].type==="chunkText"&&(o[u][1]._isInFirstContentOfListItem=!0,u++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,Xr(c,n)),n=e[n],s=!0);else if(r[1]._container){for(u=n,i=void 0;u--;)if(a=c.get(u),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=u);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...c.get(i)[1].start},l=c.slice(i,n),l.unshift(r),c.splice(i,n-i+1,l))}}return it(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!s}function Xr(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const u=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const l=a.events,o=[],s={};let c,f,p=-1,h=n,S=0,g=0;const C=[g];for(;h;){for(;t.get(++i)[1]!==h;);u.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&a.defineSkip(h.start),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),h._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++p<l.length;)l[p][0]==="exit"&&l[p-1][0]==="enter"&&l[p][1].type===l[p-1][1].type&&l[p][1].start.line!==l[p][1].end.line&&(g=p+1,C.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(a.events=[],h?(h._tokenizer=void 0,h.previous=void 0):C.pop(),p=C.length;p--;){const w=l.slice(C[p],C[p+1]),z=u.pop();o.push([z,z+w.length-1]),t.splice(z,2,w)}for(o.reverse(),p=-1;++p<o.length;)s[S+o[p][0]]=S+o[p][1],S+=o[p][1]-o[p][0]-1;return s}const ti={resolve:ni,tokenize:ri},ei={partial:!0,tokenize:ii};function ni(t){return rn(t),t}function ri(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?u(l):I(l)?t.check(ei,a,u)(l):(t.consume(l),i)}function u(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function a(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function ii(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),j(t,u,"linePrefix")}function u(a){if(a===null||I(a))return n(a);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function un(t,e,n,r,i,u,a,l,o){const s=o||Number.POSITIVE_INFINITY;let c=0;return f;function f(w){return w===60?(t.enter(r),t.enter(i),t.enter(u),t.consume(w),t.exit(u),p):w===null||w===32||w===41||re(w)?n(w):(t.enter(r),t.enter(a),t.enter(l),t.enter("chunkString",{contentType:"string"}),g(w))}function p(w){return w===62?(t.enter(u),t.consume(w),t.exit(u),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),h(w))}function h(w){return w===62?(t.exit("chunkString"),t.exit(l),p(w)):w===null||w===60||I(w)?n(w):(t.consume(w),w===92?S:h)}function S(w){return w===60||w===62||w===92?(t.consume(w),h):h(w)}function g(w){return!c&&(w===null||w===41||H(w))?(t.exit("chunkString"),t.exit(l),t.exit(a),t.exit(r),e(w)):c<s&&w===40?(t.consume(w),c++,g):w===41?(t.consume(w),c--,g):w===null||w===32||w===40||re(w)?n(w):(t.consume(w),w===92?C:g)}function C(w){return w===40||w===41||w===92?(t.consume(w),g):g(w)}}function an(t,e,n,r,i,u){const a=this;let l=0,o;return s;function s(h){return t.enter(r),t.enter(i),t.consume(h),t.exit(i),t.enter(u),c}function c(h){return l>999||h===null||h===91||h===93&&!o||h===94&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):h===93?(t.exit(u),t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):I(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||I(h)||l++>999?(t.exit("chunkString"),c(h)):(t.consume(h),o||(o=!R(h)),h===92?p:f)}function p(h){return h===91||h===92||h===93?(t.consume(h),l++,f):f(h)}}function ln(t,e,n,r,i,u){let a;return l;function l(p){return p===34||p===39||p===40?(t.enter(r),t.enter(i),t.consume(p),t.exit(i),a=p===40?41:p,o):n(p)}function o(p){return p===a?(t.enter(i),t.consume(p),t.exit(i),t.exit(r),e):(t.enter(u),s(p))}function s(p){return p===a?(t.exit(u),o(a)):p===null?n(p):I(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),j(t,s,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(p))}function c(p){return p===a||p===null||I(p)?(t.exit("chunkString"),s(p)):(t.consume(p),p===92?f:c)}function f(p){return p===a||p===92?(t.consume(p),c):c(p)}}function ot(t,e){let n;return r;function r(i){return I(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):R(i)?j(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const ui={name:"definition",tokenize:li},ai={partial:!0,tokenize:si};function li(t,e,n){const r=this;let i;return u;function u(h){return t.enter("definition"),a(h)}function a(h){return an.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function l(h){return i=yt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(t.enter("definitionMarker"),t.consume(h),t.exit("definitionMarker"),o):n(h)}function o(h){return H(h)?ot(t,s)(h):s(h)}function s(h){return un(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return t.attempt(ai,f,f)(h)}function f(h){return R(h)?j(t,p,"whitespace")(h):p(h)}function p(h){return h===null||I(h)?(t.exit("definition"),r.parser.defined.push(i),e(h)):n(h)}}function si(t,e,n){return r;function r(l){return H(l)?ot(t,i)(l):n(l)}function i(l){return ln(t,u,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function u(l){return R(l)?j(t,a,"whitespace")(l):a(l)}function a(l){return l===null||I(l)?e(l):n(l)}}const oi={name:"hardBreakEscape",tokenize:ci};function ci(t,e,n){return r;function r(u){return t.enter("hardBreakEscape"),t.consume(u),i}function i(u){return I(u)?(t.exit("hardBreakEscape"),e(u)):n(u)}}const hi={name:"headingAtx",resolve:fi,tokenize:pi};function fi(t,e){let n=t.length-2,r=3,i,u;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},u={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},it(t,r,n-r+1,[["enter",i,e],["enter",u,e],["exit",u,e],["exit",i,e]])),t}function pi(t,e,n){let r=0;return i;function i(c){return t.enter("atxHeading"),u(c)}function u(c){return t.enter("atxHeadingSequence"),a(c)}function a(c){return c===35&&r++<6?(t.consume(c),a):c===null||H(c)?(t.exit("atxHeadingSequence"),l(c)):n(c)}function l(c){return c===35?(t.enter("atxHeadingSequence"),o(c)):c===null||I(c)?(t.exit("atxHeading"),e(c)):R(c)?j(t,l,"whitespace")(c):(t.enter("atxHeadingText"),s(c))}function o(c){return c===35?(t.consume(c),o):(t.exit("atxHeadingSequence"),l(c))}function s(c){return c===null||c===35||H(c)?(t.exit("atxHeadingText"),l(c)):(t.consume(c),s)}}const mi=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Be=["pre","script","style","textarea"],di={concrete:!0,name:"htmlFlow",resolveTo:yi,tokenize:ki},xi={partial:!0,tokenize:wi},gi={partial:!0,tokenize:bi};function yi(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function ki(t,e,n){const r=this;let i,u,a,l,o;return s;function s(d){return c(d)}function c(d){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(d),f}function f(d){return d===33?(t.consume(d),p):d===47?(t.consume(d),u=!0,g):d===63?(t.consume(d),i=3,r.interrupt?e:m):rt(d)?(t.consume(d),a=String.fromCharCode(d),C):n(d)}function p(d){return d===45?(t.consume(d),i=2,h):d===91?(t.consume(d),i=5,l=0,S):rt(d)?(t.consume(d),i=4,r.interrupt?e:m):n(d)}function h(d){return d===45?(t.consume(d),r.interrupt?e:m):n(d)}function S(d){const X="CDATA[";return d===X.charCodeAt(l++)?(t.consume(d),l===X.length?r.interrupt?e:F:S):n(d)}function g(d){return rt(d)?(t.consume(d),a=String.fromCharCode(d),C):n(d)}function C(d){if(d===null||d===47||d===62||H(d)){const X=d===47,pt=a.toLowerCase();return!X&&!u&&Be.includes(pt)?(i=1,r.interrupt?e(d):F(d)):mi.includes(a.toLowerCase())?(i=6,X?(t.consume(d),w):r.interrupt?e(d):F(d)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(d):u?z(d):A(d))}return d===45||et(d)?(t.consume(d),a+=String.fromCharCode(d),C):n(d)}function w(d){return d===62?(t.consume(d),r.interrupt?e:F):n(d)}function z(d){return R(d)?(t.consume(d),z):N(d)}function A(d){return d===47?(t.consume(d),N):d===58||d===95||rt(d)?(t.consume(d),P):R(d)?(t.consume(d),A):N(d)}function P(d){return d===45||d===46||d===58||d===95||et(d)?(t.consume(d),P):_(d)}function _(d){return d===61?(t.consume(d),k):R(d)?(t.consume(d),_):A(d)}function k(d){return d===null||d===60||d===61||d===62||d===96?n(d):d===34||d===39?(t.consume(d),o=d,v):R(d)?(t.consume(d),k):B(d)}function v(d){return d===o?(t.consume(d),o=null,b):d===null||I(d)?n(d):(t.consume(d),v)}function B(d){return d===null||d===34||d===39||d===47||d===60||d===61||d===62||d===96||H(d)?_(d):(t.consume(d),B)}function b(d){return d===47||d===62||R(d)?A(d):n(d)}function N(d){return d===62?(t.consume(d),T):n(d)}function T(d){return d===null||I(d)?F(d):R(d)?(t.consume(d),T):n(d)}function F(d){return d===45&&i===2?(t.consume(d),O):d===60&&i===1?(t.consume(d),U):d===62&&i===4?(t.consume(d),K):d===63&&i===3?(t.consume(d),m):d===93&&i===5?(t.consume(d),ut):I(d)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(xi,at,L)(d)):d===null||I(d)?(t.exit("htmlFlowData"),L(d)):(t.consume(d),F)}function L(d){return t.check(gi,V,at)(d)}function V(d){return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),x}function x(d){return d===null||I(d)?L(d):(t.enter("htmlFlowData"),F(d))}function O(d){return d===45?(t.consume(d),m):F(d)}function U(d){return d===47?(t.consume(d),a="",J):F(d)}function J(d){if(d===62){const X=a.toLowerCase();return Be.includes(X)?(t.consume(d),K):F(d)}return rt(d)&&a.length<8?(t.consume(d),a+=String.fromCharCode(d),J):F(d)}function ut(d){return d===93?(t.consume(d),m):F(d)}function m(d){return d===62?(t.consume(d),K):d===45&&i===2?(t.consume(d),m):F(d)}function K(d){return d===null||I(d)?(t.exit("htmlFlowData"),at(d)):(t.consume(d),K)}function at(d){return t.exit("htmlFlow"),e(d)}}function bi(t,e,n){const r=this;return i;function i(a){return I(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),u):n(a)}function u(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function wi(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Nt,e,n)}}const zi={name:"htmlText",tokenize:Si};function Si(t,e,n){const r=this;let i,u,a;return l;function l(m){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(m),o}function o(m){return m===33?(t.consume(m),s):m===47?(t.consume(m),_):m===63?(t.consume(m),A):rt(m)?(t.consume(m),B):n(m)}function s(m){return m===45?(t.consume(m),c):m===91?(t.consume(m),u=0,S):rt(m)?(t.consume(m),z):n(m)}function c(m){return m===45?(t.consume(m),h):n(m)}function f(m){return m===null?n(m):m===45?(t.consume(m),p):I(m)?(a=f,U(m)):(t.consume(m),f)}function p(m){return m===45?(t.consume(m),h):f(m)}function h(m){return m===62?O(m):m===45?p(m):f(m)}function S(m){const K="CDATA[";return m===K.charCodeAt(u++)?(t.consume(m),u===K.length?g:S):n(m)}function g(m){return m===null?n(m):m===93?(t.consume(m),C):I(m)?(a=g,U(m)):(t.consume(m),g)}function C(m){return m===93?(t.consume(m),w):g(m)}function w(m){return m===62?O(m):m===93?(t.consume(m),w):g(m)}function z(m){return m===null||m===62?O(m):I(m)?(a=z,U(m)):(t.consume(m),z)}function A(m){return m===null?n(m):m===63?(t.consume(m),P):I(m)?(a=A,U(m)):(t.consume(m),A)}function P(m){return m===62?O(m):A(m)}function _(m){return rt(m)?(t.consume(m),k):n(m)}function k(m){return m===45||et(m)?(t.consume(m),k):v(m)}function v(m){return I(m)?(a=v,U(m)):R(m)?(t.consume(m),v):O(m)}function B(m){return m===45||et(m)?(t.consume(m),B):m===47||m===62||H(m)?b(m):n(m)}function b(m){return m===47?(t.consume(m),O):m===58||m===95||rt(m)?(t.consume(m),N):I(m)?(a=b,U(m)):R(m)?(t.consume(m),b):O(m)}function N(m){return m===45||m===46||m===58||m===95||et(m)?(t.consume(m),N):T(m)}function T(m){return m===61?(t.consume(m),F):I(m)?(a=T,U(m)):R(m)?(t.consume(m),T):b(m)}function F(m){return m===null||m===60||m===61||m===62||m===96?n(m):m===34||m===39?(t.consume(m),i=m,L):I(m)?(a=F,U(m)):R(m)?(t.consume(m),F):(t.consume(m),V)}function L(m){return m===i?(t.consume(m),i=void 0,x):m===null?n(m):I(m)?(a=L,U(m)):(t.consume(m),L)}function V(m){return m===null||m===34||m===39||m===60||m===61||m===96?n(m):m===47||m===62||H(m)?b(m):(t.consume(m),V)}function x(m){return m===47||m===62||H(m)?b(m):n(m)}function O(m){return m===62?(t.consume(m),t.exit("htmlTextData"),t.exit("htmlText"),e):n(m)}function U(m){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),J}function J(m){return R(m)?j(t,ut,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):ut(m)}function ut(m){return t.enter("htmlTextData"),a(m)}}const se={name:"labelEnd",resolveAll:Ii,resolveTo:Ti,tokenize:Fi},Ci={tokenize:Li},Ei={tokenize:Pi},Ai={tokenize:vi};function Ii(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&it(t,0,t.length,n),t}function Ti(t,e){let n=t.length,r=0,i,u,a,l;for(;n--;)if(i=t[n][1],u){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(u=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const o={type:t[u][1].type==="labelLink"?"link":"image",start:{...t[u][1].start},end:{...t[t.length-1][1].end}},s={type:"label",start:{...t[u][1].start},end:{...t[a][1].end}},c={type:"labelText",start:{...t[u+r+2][1].end},end:{...t[a-2][1].start}};return l=[["enter",o,e],["enter",s,e]],l=G(l,t.slice(u+1,u+r+3)),l=G(l,[["enter",c,e]]),l=G(l,le(e.parser.constructs.insideSpan.null,t.slice(u+r+4,a-3),e)),l=G(l,[["exit",c,e],t[a-2],t[a-1],["exit",s,e]]),l=G(l,t.slice(a+1)),l=G(l,[["exit",o,e]]),it(t,u,t.length,l),t}function Fi(t,e,n){const r=this;let i=r.events.length,u,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){u=r.events[i][1];break}return l;function l(p){return u?u._inactive?f(p):(a=r.parser.defined.includes(yt(r.sliceSerialize({start:u.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelEnd"),o):n(p)}function o(p){return p===40?t.attempt(Ci,c,a?c:f)(p):p===91?t.attempt(Ei,c,a?s:f)(p):a?c(p):f(p)}function s(p){return t.attempt(Ai,c,f)(p)}function c(p){return e(p)}function f(p){return u._balanced=!0,n(p)}}function Li(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return H(f)?ot(t,u)(f):u(f)}function u(f){return f===41?c(f):un(t,a,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return H(f)?ot(t,o)(f):c(f)}function l(f){return n(f)}function o(f){return f===34||f===39||f===40?ln(t,s,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function s(f){return H(f)?ot(t,c)(f):c(f)}function c(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function Pi(t,e,n){const r=this;return i;function i(l){return an.call(r,t,u,a,"reference","referenceMarker","referenceString")(l)}function u(l){return r.parser.defined.includes(yt(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function a(l){return n(l)}}function vi(t,e,n){return r;function r(u){return t.enter("reference"),t.enter("referenceMarker"),t.consume(u),t.exit("referenceMarker"),i}function i(u){return u===93?(t.enter("referenceMarker"),t.consume(u),t.exit("referenceMarker"),t.exit("reference"),e):n(u)}}const Ni={name:"labelStartImage",resolveAll:se.resolveAll,tokenize:Di};function Di(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),u}function u(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),a):n(l)}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const Mi={name:"labelStartLink",resolveAll:se.resolveAll,tokenize:_i};function _i(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),u}function u(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const Ht={name:"lineEnding",tokenize:Bi};function Bi(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),j(t,e,"linePrefix")}}const vt={name:"thematicBreak",tokenize:ji};function ji(t,e,n){let r=0,i;return u;function u(s){return t.enter("thematicBreak"),a(s)}function a(s){return i=s,l(s)}function l(s){return s===i?(t.enter("thematicBreakSequence"),o(s)):r>=3&&(s===null||I(s))?(t.exit("thematicBreak"),e(s)):n(s)}function o(s){return s===i?(t.consume(s),r++,o):(t.exit("thematicBreakSequence"),R(s)?j(t,l,"whitespace")(s):l(s))}}const W={continuation:{tokenize:Vi},exit:Hi,name:"list",tokenize:Ri},Oi={partial:!0,tokenize:Ui},qi={partial:!0,tokenize:$i};function Ri(t,e,n){const r=this,i=r.events[r.events.length-1];let u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return l;function l(h){const S=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:ie(h)){if(r.containerState.type||(r.containerState.type=S,t.enter(S,{_container:!0})),S==="listUnordered")return t.enter("listItemPrefix"),h===42||h===45?t.check(vt,n,s)(h):s(h);if(!r.interrupt||h===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),o(h)}return n(h)}function o(h){return ie(h)&&++a<10?(t.consume(h),o):(!r.interrupt||a<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(t.exit("listItemValue"),s(h)):n(h)}function s(h){return t.enter("listItemMarker"),t.consume(h),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,t.check(Nt,r.interrupt?n:c,t.attempt(Oi,p,f))}function c(h){return r.containerState.initialBlankLine=!0,u++,p(h)}function f(h){return R(h)?(t.enter("listItemPrefixWhitespace"),t.consume(h),t.exit("listItemPrefixWhitespace"),p):n(h)}function p(h){return r.containerState.size=u+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(h)}}function Vi(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Nt,i,u);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,j(t,e,"listItemIndent",r.containerState.size+1)(l)}function u(l){return r.containerState.furtherBlankLines||!R(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(qi,e,a)(l))}function a(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,j(t,t.attempt(W,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function $i(t,e,n){const r=this;return j(t,i,"listItemIndent",r.containerState.size+1);function i(u){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(u):n(u)}}function Hi(t){t.exit(this.containerState.type)}function Ui(t,e,n){const r=this;return j(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(u){const a=r.events[r.events.length-1];return!R(u)&&a&&a[1].type==="listItemPrefixWhitespace"?e(u):n(u)}}const je={name:"setextUnderline",resolveTo:Qi,tokenize:Wi};function Qi(t,e){let n=t.length,r,i,u;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!u&&t[n][1].type==="definition"&&(u=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",u?(t.splice(i,0,["enter",a,e]),t.splice(u+1,0,["exit",t[r][1],e]),t[r][1].end={...t[u][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function Wi(t,e,n){const r=this;let i;return u;function u(s){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=s,a(s)):n(s)}function a(s){return t.enter("setextHeadingLineSequence"),l(s)}function l(s){return s===i?(t.consume(s),l):(t.exit("setextHeadingLineSequence"),R(s)?j(t,o,"lineSuffix")(s):o(s))}function o(s){return s===null||I(s)?(t.exit("setextHeadingLine"),e(s)):n(s)}}const Yi={tokenize:Zi};function Zi(t){const e=this,n=t.attempt(Nt,r,t.attempt(this.parser.constructs.flowInitial,i,j(t,t.attempt(this.parser.constructs.flow,i,t.attempt(ti,i)),"linePrefix")));return n;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEndingBlank"),t.consume(u),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Gi={resolveAll:on()},Ji=sn("string"),Ki=sn("text");function sn(t){return{resolveAll:on(t==="text"?Xi:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],u=n.attempt(i,a,l);return a;function a(c){return s(c)?u(c):l(c)}function l(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),o}function o(c){return s(c)?(n.exit("data"),u(c)):(n.consume(c),o)}function s(c){if(c===null)return!0;const f=i[c];let p=-1;if(f)for(;++p<f.length;){const h=f[p];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function on(t){return e;function e(n,r){let i=-1,u;for(;++i<=n.length;)u===void 0?n[i]&&n[i][1].type==="data"&&(u=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==u+2&&(n[u][1].end=n[i-1][1].end,n.splice(u+2,i-u-2),i=u+2),u=void 0);return t?t(n,r):n}}function Xi(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let u=i.length,a=-1,l=0,o;for(;u--;){const s=i[u];if(typeof s=="string"){for(a=s.length;s.charCodeAt(a-1)===32;)l++,a--;if(a)break;a=-1}else if(s===-2)o=!0,l++;else if(s!==-1){u++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const s={type:n===t.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?a:r.start._bufferIndex+a,_index:r.start._index+u,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...s.start},r.start.offset===r.end.offset?Object.assign(r,s):(t.splice(n,0,["enter",s,e],["exit",s,e]),n+=2)}n++}return t}const tu={42:W,43:W,45:W,48:W,49:W,50:W,51:W,52:W,53:W,54:W,55:W,56:W,57:W,62:tn},eu={91:ui},nu={[-2]:$t,[-1]:$t,32:$t},ru={35:hi,42:vt,45:[je,vt],60:di,61:je,95:vt,96:_e,126:_e},iu={38:nn,92:en},uu={[-5]:Ht,[-4]:Ht,[-3]:Ht,33:Ni,38:nn,42:ue,60:[Mr,zi],91:Mi,92:[oi,en],93:se,95:ue,96:Yr},au={null:[ue,Gi]},lu={null:[42,95]},su={null:[]},ou=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:lu,contentInitial:eu,disable:su,document:tu,flow:ru,flowInitial:nu,insideSpan:au,string:iu,text:uu},Symbol.toStringTag,{value:"Module"}));function cu(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},u=[];let a=[],l=[];const o={attempt:v(_),check:v(k),consume:z,enter:A,exit:P,interrupt:v(k,{interrupt:!0})},s={code:null,containerState:{},defineSkip:g,events:[],now:S,parser:t,previous:null,sliceSerialize:p,sliceStream:h,write:f};let c=e.tokenize.call(s,o);return e.resolveAll&&u.push(e),s;function f(T){return a=G(a,T),C(),a[a.length-1]!==null?[]:(B(e,0),s.events=le(u,s.events,s),s.events)}function p(T,F){return fu(h(T),F)}function h(T){return hu(a,T)}function S(){const{_bufferIndex:T,_index:F,line:L,column:V,offset:x}=r;return{_bufferIndex:T,_index:F,line:L,column:V,offset:x}}function g(T){i[T.line]=T.column,N()}function C(){let T;for(;r._index<a.length;){const F=a[r._index];if(typeof F=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<F.length;)w(F.charCodeAt(r._bufferIndex));else w(F)}}function w(T){c=c(T)}function z(T){I(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,N()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),s.previous=T}function A(T,F){const L=F||{};return L.type=T,L.start=S(),s.events.push(["enter",L,s]),l.push(L),L}function P(T){const F=l.pop();return F.end=S(),s.events.push(["exit",F,s]),F}function _(T,F){B(T,F.from)}function k(T,F){F.restore()}function v(T,F){return L;function L(V,x,O){let U,J,ut,m;return Array.isArray(V)?at(V):"tokenize"in V?at([V]):K(V);function K(Q){return kt;function kt(ct){const dt=ct!==null&&Q[ct],xt=ct!==null&&Q.null,Tt=[...Array.isArray(dt)?dt:dt?[dt]:[],...Array.isArray(xt)?xt:xt?[xt]:[]];return at(Tt)(ct)}}function at(Q){return U=Q,J=0,Q.length===0?O:d(Q[J])}function d(Q){return kt;function kt(ct){return m=b(),ut=Q,Q.partial||(s.currentConstruct=Q),Q.name&&s.parser.constructs.disable.null.includes(Q.name)?pt():Q.tokenize.call(F?Object.assign(Object.create(s),F):s,o,X,pt)(ct)}}function X(Q){return T(ut,m),x}function pt(Q){return m.restore(),++J<U.length?d(U[J]):O}}}function B(T,F){T.resolveAll&&!u.includes(T)&&u.push(T),T.resolve&&it(s.events,F,s.events.length-F,T.resolve(s.events.slice(F),s)),T.resolveTo&&(s.events=T.resolveTo(s.events,s))}function b(){const T=S(),F=s.previous,L=s.currentConstruct,V=s.events.length,x=Array.from(l);return{from:V,restore:O};function O(){r=T,s.previous=F,s.currentConstruct=L,s.events.length=V,l=x,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function hu(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,u=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,u)];else{if(a=t.slice(n,i),r>-1){const l=a[0];typeof l=="string"?a[0]=l.slice(r):a.shift()}u>0&&a.push(t[i].slice(0,u))}return a}function fu(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const u=t[n];let a;if(typeof u=="string")a=u;else switch(u){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(u)}i=u===-2,r.push(a)}return r.join("")}function pu(t){const r={constructs:zr([ou,...(t||{}).extensions||[]]),content:i(Tr),defined:[],document:i(Lr),flow:i(Yi),lazy:{},string:i(Ji),text:i(Ki)};return r;function i(u){return a;function a(l){return cu(r,u,l)}}}function mu(t){for(;!rn(t););return t}const Oe=/[\0\t\n\r]/g;function du(){let t=1,e="",n=!0,r;return i;function i(u,a,l){const o=[];let s,c,f,p,h;for(u=e+(typeof u=="string"?u.toString():new TextDecoder(a||void 0).decode(u)),f=0,e="",n&&(u.charCodeAt(0)===65279&&f++,n=void 0);f<u.length;){if(Oe.lastIndex=f,s=Oe.exec(u),p=s&&s.index!==void 0?s.index:u.length,h=u.charCodeAt(p),!s){e=u.slice(f);break}if(h===10&&f===p&&r)o.push(-3),r=void 0;else switch(r&&(o.push(-5),r=void 0),f<p&&(o.push(u.slice(f,p)),t+=p-f),h){case 0:{o.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,o.push(-2);t++<c;)o.push(-1);break}case 10:{o.push(-4),t=1;break}default:r=!0,t=1}f=p+1}return l&&(r&&o.push(-5),e&&o.push(e),o.push(null)),o}}const xu=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function gu(t){return t.replace(xu,yu)}function yu(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),u=i===120||i===88;return Xe(n.slice(u?2:1),u?16:10)}return Ct(n)||t}const cn={}.hasOwnProperty;function ku(t,e,n){return typeof e!="string"&&(n=e,e=void 0),bu(n)(mu(pu(n).document().write(du()(t,e,!0))))}function bu(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(ge),autolinkProtocol:b,autolinkEmail:b,atxHeading:u(me),blockQuote:u(xt),characterEscape:b,characterReference:b,codeFenced:u(Tt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:u(Tt,a),codeText:u(xn,a),codeTextData:b,data:b,codeFlowValue:b,definition:u(gn),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:u(yn),hardBreakEscape:u(de),hardBreakTrailing:u(de),htmlFlow:u(xe,a),htmlFlowData:b,htmlText:u(xe,a),htmlTextData:b,image:u(kn),label:a,link:u(ge),listItem:u(bn),listItemValue:p,listOrdered:u(ye,f),listUnordered:u(ye),paragraph:u(wn),reference:d,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:u(me),strong:u(zn),thematicBreak:u(Cn)},exit:{atxHeading:o(),atxHeadingSequence:_,autolink:o(),autolinkEmail:dt,autolinkProtocol:ct,blockQuote:o(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:pt,characterReferenceMarkerNumeric:pt,characterReferenceValue:Q,characterReference:kt,codeFenced:o(C),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:S,codeFlowValue:N,codeIndented:o(w),codeText:o(x),codeTextData:N,data:N,definition:o(),definitionDestinationString:P,definitionLabelString:z,definitionTitleString:A,emphasis:o(),hardBreakEscape:o(F),hardBreakTrailing:o(F),htmlFlow:o(L),htmlFlowData:N,htmlText:o(V),htmlTextData:N,image:o(U),label:ut,labelText:J,lineEnding:T,link:o(O),listItem:o(),listOrdered:o(),listUnordered:o(),paragraph:o(),referenceString:X,resourceDestinationString:m,resourceTitleString:K,resource:at,setextHeading:o(B),setextHeadingLineSequence:v,setextHeadingText:k,strong:o(),thematicBreak:o()}};hn(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(y){let E={type:"root",children:[]};const M={stack:[E],tokenStack:[],config:e,enter:l,exit:s,buffer:a,resume:c,data:n},q=[];let $=-1;for(;++$<y.length;)if(y[$][1].type==="listOrdered"||y[$][1].type==="listUnordered")if(y[$][0]==="enter")q.push($);else{const tt=q.pop();$=i(y,tt,$)}for($=-1;++$<y.length;){const tt=e[y[$][0]];cn.call(tt,y[$][1].type)&&tt[y[$][1].type].call(Object.assign({sliceSerialize:y[$][2].sliceSerialize},M),y[$][1])}if(M.tokenStack.length>0){const tt=M.tokenStack[M.tokenStack.length-1];(tt[1]||qe).call(M,void 0,tt[0])}for(E.position={start:ht(y.length>0?y[0][1].start:{line:1,column:1,offset:0}),end:ht(y.length>0?y[y.length-2][1].end:{line:1,column:1,offset:0})},$=-1;++$<e.transforms.length;)E=e.transforms[$](E)||E;return E}function i(y,E,M){let q=E-1,$=-1,tt=!1,mt,lt,bt,wt;for(;++q<=M;){const Z=y[q];switch(Z[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Z[0]==="enter"?$++:$--,wt=void 0;break}case"lineEndingBlank":{Z[0]==="enter"&&(mt&&!wt&&!$&&!bt&&(bt=q),wt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:wt=void 0}if(!$&&Z[0]==="enter"&&Z[1].type==="listItemPrefix"||$===-1&&Z[0]==="exit"&&(Z[1].type==="listUnordered"||Z[1].type==="listOrdered")){if(mt){let gt=q;for(lt=void 0;gt--;){const st=y[gt];if(st[1].type==="lineEnding"||st[1].type==="lineEndingBlank"){if(st[0]==="exit")continue;lt&&(y[lt][1].type="lineEndingBlank",tt=!0),st[1].type="lineEnding",lt=gt}else if(!(st[1].type==="linePrefix"||st[1].type==="blockQuotePrefix"||st[1].type==="blockQuotePrefixWhitespace"||st[1].type==="blockQuoteMarker"||st[1].type==="listItemIndent"))break}bt&&(!lt||bt<lt)&&(mt._spread=!0),mt.end=Object.assign({},lt?y[lt][1].start:Z[1].end),y.splice(lt||q,0,["exit",mt,Z[2]]),q++,M++}if(Z[1].type==="listItemPrefix"){const gt={type:"listItem",_spread:!1,start:Object.assign({},Z[1].start),end:void 0};mt=gt,y.splice(q,0,["enter",gt,Z[2]]),q++,M++,bt=void 0,wt=!0}}}return y[E][1]._spread=tt,M}function u(y,E){return M;function M(q){l.call(this,y(q),q),E&&E.call(this,q)}}function a(){this.stack.push({type:"fragment",children:[]})}function l(y,E,M){this.stack[this.stack.length-1].children.push(y),this.stack.push(y),this.tokenStack.push([E,M||void 0]),y.position={start:ht(E.start),end:void 0}}function o(y){return E;function E(M){y&&y.call(this,M),s.call(this,M)}}function s(y,E){const M=this.stack.pop(),q=this.tokenStack.pop();if(q)q[0].type!==y.type&&(E?E.call(this,y,q[0]):(q[1]||qe).call(this,y,q[0]));else throw new Error("Cannot close `"+y.type+"` ("+St({start:y.start,end:y.end})+"): itâs not open");M.position.end=ht(y.end)}function c(){return br(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function p(y){if(this.data.expectingFirstListItemValue){const E=this.stack[this.stack.length-2];E.start=Number.parseInt(this.sliceSerialize(y),10),this.data.expectingFirstListItemValue=void 0}}function h(){const y=this.resume(),E=this.stack[this.stack.length-1];E.lang=y}function S(){const y=this.resume(),E=this.stack[this.stack.length-1];E.meta=y}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const y=this.resume(),E=this.stack[this.stack.length-1];E.value=y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function w(){const y=this.resume(),E=this.stack[this.stack.length-1];E.value=y.replace(/(\r?\n|\r)$/g,"")}function z(y){const E=this.resume(),M=this.stack[this.stack.length-1];M.label=E,M.identifier=yt(this.sliceSerialize(y)).toLowerCase()}function A(){const y=this.resume(),E=this.stack[this.stack.length-1];E.title=y}function P(){const y=this.resume(),E=this.stack[this.stack.length-1];E.url=y}function _(y){const E=this.stack[this.stack.length-1];if(!E.depth){const M=this.sliceSerialize(y).length;E.depth=M}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function v(y){const E=this.stack[this.stack.length-1];E.depth=this.sliceSerialize(y).codePointAt(0)===61?1:2}function B(){this.data.setextHeadingSlurpLineEnding=void 0}function b(y){const M=this.stack[this.stack.length-1].children;let q=M[M.length-1];(!q||q.type!=="text")&&(q=Sn(),q.position={start:ht(y.start),end:void 0},M.push(q)),this.stack.push(q)}function N(y){const E=this.stack.pop();E.value+=this.sliceSerialize(y),E.position.end=ht(y.end)}function T(y){const E=this.stack[this.stack.length-1];if(this.data.atHardBreak){const M=E.children[E.children.length-1];M.position.end=ht(y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(E.type)&&(b.call(this,y),N.call(this,y))}function F(){this.data.atHardBreak=!0}function L(){const y=this.resume(),E=this.stack[this.stack.length-1];E.value=y}function V(){const y=this.resume(),E=this.stack[this.stack.length-1];E.value=y}function x(){const y=this.resume(),E=this.stack[this.stack.length-1];E.value=y}function O(){const y=this.stack[this.stack.length-1];if(this.data.inReference){const E=this.data.referenceType||"shortcut";y.type+="Reference",y.referenceType=E,delete y.url,delete y.title}else delete y.identifier,delete y.label;this.data.referenceType=void 0}function U(){const y=this.stack[this.stack.length-1];if(this.data.inReference){const E=this.data.referenceType||"shortcut";y.type+="Reference",y.referenceType=E,delete y.url,delete y.title}else delete y.identifier,delete y.label;this.data.referenceType=void 0}function J(y){const E=this.sliceSerialize(y),M=this.stack[this.stack.length-2];M.label=gu(E),M.identifier=yt(E).toLowerCase()}function ut(){const y=this.stack[this.stack.length-1],E=this.resume(),M=this.stack[this.stack.length-1];if(this.data.inReference=!0,M.type==="link"){const q=y.children;M.children=q}else M.alt=E}function m(){const y=this.resume(),E=this.stack[this.stack.length-1];E.url=y}function K(){const y=this.resume(),E=this.stack[this.stack.length-1];E.title=y}function at(){this.data.inReference=void 0}function d(){this.data.referenceType="collapsed"}function X(y){const E=this.resume(),M=this.stack[this.stack.length-1];M.label=E,M.identifier=yt(this.sliceSerialize(y)).toLowerCase(),this.data.referenceType="full"}function pt(y){this.data.characterReferenceType=y.type}function Q(y){const E=this.sliceSerialize(y),M=this.data.characterReferenceType;let q;M?(q=Xe(E,M==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):q=Ct(E);const $=this.stack[this.stack.length-1];$.value+=q}function kt(y){const E=this.stack.pop();E.position.end=ht(y.end)}function ct(y){N.call(this,y);const E=this.stack[this.stack.length-1];E.url=this.sliceSerialize(y)}function dt(y){N.call(this,y);const E=this.stack[this.stack.length-1];E.url="mailto:"+this.sliceSerialize(y)}function xt(){return{type:"blockquote",children:[]}}function Tt(){return{type:"code",lang:null,meta:null,value:""}}function xn(){return{type:"inlineCode",value:""}}function gn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function yn(){return{type:"emphasis",children:[]}}function me(){return{type:"heading",depth:0,children:[]}}function de(){return{type:"break"}}function xe(){return{type:"html",value:""}}function kn(){return{type:"image",title:null,url:"",alt:null}}function ge(){return{type:"link",title:null,url:"",children:[]}}function ye(y){return{type:"list",ordered:y.type==="listOrdered",start:null,spread:y._spread,children:[]}}function bn(y){return{type:"listItem",spread:y._spread,checked:null,children:[]}}function wn(){return{type:"paragraph",children:[]}}function zn(){return{type:"strong",children:[]}}function Sn(){return{type:"text",value:""}}function Cn(){return{type:"thematicBreak"}}}function ht(t){return{line:t.line,column:t.column,offset:t.offset}}function hn(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?hn(t,r):wu(t,r)}}function wu(t,e){let n;for(n in e)if(cn.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function qe(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+St({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+St({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+St({start:e.start,end:e.end})+") is still open")}function zu(t){const e=this;e.parser=n;function n(r){return ku(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Su(t,e){const n=String(t);let r=n.indexOf(e),i=r,u=0,a=0;for(;r!==-1;)r===i?++u>a&&(a=u):u=1,i=r+e.length,r=n.indexOf(e,i);return a}function Cu(){return{enter:{mathFlow:t,mathFlowFenceMeta:e,mathText:u},exit:{mathFlow:i,mathFlowFence:r,mathFlowFenceMeta:n,mathFlowValue:l,mathText:a,mathTextData:l}};function t(o){const s={type:"element",tagName:"code",properties:{className:["language-math","math-display"]},children:[]};this.enter({type:"math",meta:null,value:"",data:{hName:"pre",hChildren:[s]}},o)}function e(){this.buffer()}function n(){const o=this.resume(),s=this.stack[this.stack.length-1];s.type,s.meta=o}function r(){this.data.mathFlowInside||(this.buffer(),this.data.mathFlowInside=!0)}function i(o){const s=this.resume().replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),c=this.stack[this.stack.length-1];c.type,this.exit(o),c.value=s;const f=c.data.hChildren[0];f.type,f.tagName,f.children.push({type:"text",value:s}),this.data.mathFlowInside=void 0}function u(o){this.enter({type:"inlineMath",value:"",data:{hName:"code",hProperties:{className:["language-math","math-inline"]},hChildren:[]}},o),this.buffer()}function a(o){const s=this.resume(),c=this.stack[this.stack.length-1];c.type,this.exit(o),c.value=s,c.data.hChildren.push({type:"text",value:s})}function l(o){this.config.enter.data.call(this,o),this.config.exit.data.call(this,o)}}function Eu(t){let e=(t||{}).singleDollarTextMath;return e==null&&(e=!0),r.peek=i,{unsafe:[{character:"\r",inConstruct:"mathFlowMeta"},{character:`
`,inConstruct:"mathFlowMeta"},{character:"$",after:e?void 0:"\\$",inConstruct:"phrasing"},{character:"$",inConstruct:"mathFlowMeta"},{atBreak:!0,character:"$",after:"\\$"}],handlers:{math:n,inlineMath:r}};function n(u,a,l,o){const s=u.value||"",c=l.createTracker(o),f="$".repeat(Math.max(Su(s,"$")+1,2)),p=l.enter("mathFlow");let h=c.move(f);if(u.meta){const S=l.enter("mathFlowMeta");h+=c.move(l.safe(u.meta,{after:`
`,before:h,encode:["$"],...c.current()})),S()}return h+=c.move(`
`),s&&(h+=c.move(s+`
`)),h+=c.move(f),p(),h}function r(u,a,l){let o=u.value||"",s=1;for(e||s++;new RegExp("(^|[^$])"+"\\$".repeat(s)+"([^$]|$)").test(o);)s++;const c="$".repeat(s);/[^ \r\n]/.test(o)&&(/^[ \r\n]/.test(o)&&/[ \r\n]$/.test(o)||/^\$|\$$/.test(o))&&(o=" "+o+" ");let f=-1;for(;++f<l.unsafe.length;){const p=l.unsafe[f];if(!p.atBreak)continue;const h=l.compilePattern(p);let S;for(;S=h.exec(o);){let g=S.index;o.codePointAt(g)===10&&o.codePointAt(g-1)===13&&g--,o=o.slice(0,g)+" "+o.slice(S.index+1)}}return c+o+c}function i(){return"$"}}const Au={tokenize:Iu,concrete:!0,name:"mathFlow"},Re={tokenize:Tu,partial:!0};function Iu(t,e,n){const r=this,i=r.events[r.events.length-1],u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let a=0;return l;function l(z){return t.enter("mathFlow"),t.enter("mathFlowFence"),t.enter("mathFlowFenceSequence"),o(z)}function o(z){return z===36?(t.consume(z),a++,o):a<2?n(z):(t.exit("mathFlowFenceSequence"),j(t,s,"whitespace")(z))}function s(z){return z===null||I(z)?f(z):(t.enter("mathFlowFenceMeta"),t.enter("chunkString",{contentType:"string"}),c(z))}function c(z){return z===null||I(z)?(t.exit("chunkString"),t.exit("mathFlowFenceMeta"),f(z)):z===36?n(z):(t.consume(z),c)}function f(z){return t.exit("mathFlowFence"),r.interrupt?e(z):t.attempt(Re,p,C)(z)}function p(z){return t.attempt({tokenize:w,partial:!0},C,h)(z)}function h(z){return(u?j(t,S,"linePrefix",u+1):S)(z)}function S(z){return z===null?C(z):I(z)?t.attempt(Re,p,C)(z):(t.enter("mathFlowValue"),g(z))}function g(z){return z===null||I(z)?(t.exit("mathFlowValue"),S(z)):(t.consume(z),g)}function C(z){return t.exit("mathFlow"),e(z)}function w(z,A,P){let _=0;return j(z,k,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function k(b){return z.enter("mathFlowFence"),z.enter("mathFlowFenceSequence"),v(b)}function v(b){return b===36?(_++,z.consume(b),v):_<a?P(b):(z.exit("mathFlowFenceSequence"),j(z,B,"whitespace")(b))}function B(b){return b===null||I(b)?(z.exit("mathFlowFence"),A(b)):P(b)}}}function Tu(t,e,n){const r=this;return i;function i(a){return a===null?e(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),u)}function u(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function Fu(t){let n=(t||{}).singleDollarTextMath;return n==null&&(n=!0),{tokenize:r,resolve:Lu,previous:Pu,name:"mathText"};function r(i,u,a){let l=0,o,s;return c;function c(g){return i.enter("mathText"),i.enter("mathTextSequence"),f(g)}function f(g){return g===36?(i.consume(g),l++,f):l<2&&!n?a(g):(i.exit("mathTextSequence"),p(g))}function p(g){return g===null?a(g):g===36?(s=i.enter("mathTextSequence"),o=0,S(g)):g===32?(i.enter("space"),i.consume(g),i.exit("space"),p):I(g)?(i.enter("lineEnding"),i.consume(g),i.exit("lineEnding"),p):(i.enter("mathTextData"),h(g))}function h(g){return g===null||g===32||g===36||I(g)?(i.exit("mathTextData"),p(g)):(i.consume(g),h)}function S(g){return g===36?(i.consume(g),o++,S):o===l?(i.exit("mathTextSequence"),i.exit("mathText"),u(g)):(s.type="mathTextData",h(g))}}}function Lu(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="mathTextData"){t[e][1].type="mathTextPadding",t[n][1].type="mathTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="mathTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function Pu(t){return t!==36||this.events[this.events.length-1][1].type==="characterEscape"}function vu(t){return{flow:{36:Au},text:{36:Fu(t)}}}const Nu={};function Du(t){const e=this,n=t||Nu,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),u=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),a=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(vu(n)),u.push(Cu()),a.push(Eu(n))}function Ve(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let r=0,i=n.indexOf(e);for(;i!==-1;)r++,i=n.indexOf(e,i+e.length);return r}const Mu=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],$e={0:"ï¿½",128:"â¬",130:"â",131:"Æ",132:"â",133:"â¦",134:"â ",135:"â¡",136:"Ë",137:"â°",138:"Å ",139:"â¹",140:"Å",142:"Å½",145:"â",146:"â",147:"â",148:"â",149:"â¢",150:"â",151:"â",152:"Ë",153:"â¢",154:"Å¡",155:"âº",156:"Å",158:"Å¾",159:"Å¸"};function fn(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=48&&e<=57}function _u(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function Bu(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}function He(t){return Bu(t)||fn(t)}const ju=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function oe(t,e){const n=e||{},r=typeof n.additional=="string"?n.additional.charCodeAt(0):n.additional,i=[];let u=0,a=-1,l="",o,s;n.position&&("start"in n.position||"indent"in n.position?(s=n.position.indent,o=n.position.start):o=n.position);let c=(o?o.line:0)||1,f=(o?o.column:0)||1,p=S(),h;for(u--;++u<=t.length;)if(h===10&&(f=(s?s[a]:0)||1),h=t.charCodeAt(u),h===38){const w=t.charCodeAt(u+1);if(w===9||w===10||w===12||w===32||w===38||w===60||Number.isNaN(w)||r&&w===r){l+=String.fromCharCode(h),f++;continue}const z=u+1;let A=z,P=z,_;if(w===35){P=++A;const L=t.charCodeAt(P);L===88||L===120?(_="hexadecimal",P=++A):_="decimal"}else _="named";let k="",v="",B="";const b=_==="named"?He:_==="decimal"?fn:_u;for(P--;++P<=t.length;){const L=t.charCodeAt(P);if(!b(L))break;B+=String.fromCharCode(L),_==="named"&&Mu.includes(B)&&(k=B,v=Ct(B))}let N=t.charCodeAt(P)===59;if(N){P++;const L=_==="named"?Ct(B):!1;L&&(k=B,v=L)}let T=1+P-z,F="";if(!(!N&&n.nonTerminated===!1))if(!B)_!=="named"&&g(4,T);else if(_==="named"){if(N&&!v)g(5,1);else if(k!==B&&(P=A+k.length,T=1+P-A,N=!1),!N){const L=k?1:3;if(n.attribute){const V=t.charCodeAt(P);V===61?(g(L,T),v=""):He(V)?v="":g(L,T)}else g(L,T)}F=v}else{N||g(2,T);let L=Number.parseInt(B,_==="hexadecimal"?16:10);if(Ou(L))g(7,T),F="ï¿½";else if(L in $e)g(6,T),F=$e[L];else{let V="";qu(L)&&g(6,T),L>65535&&(L-=65536,V+=String.fromCharCode(L>>>10|55296),L=56320|L&1023),F=V+String.fromCharCode(L)}}if(F){C(),p=S(),u=P-1,f+=P-z+1,i.push(F);const L=S();L.offset++,n.reference&&n.reference.call(n.referenceContext||void 0,F,{start:p,end:L},t.slice(z-1,P)),p=L}else B=t.slice(z-1,P),l+=B,f+=B.length,u=P-1}else h===10&&(c++,a++,f=0),Number.isNaN(h)?C():(l+=String.fromCharCode(h),f++);return i.join("");function S(){return{line:c,column:f,offset:u+((o?o.offset:0)||0)}}function g(w,z){let A;n.warning&&(A=S(),A.column+=z,A.offset+=z,n.warning.call(n.warningContext||void 0,ju[w],A,w))}function C(){l&&(i.push(l),n.text&&n.text.call(n.textContext||void 0,l,{start:p,end:S()}),l="")}}function Ou(t){return t>=55296&&t<=57343||t>1114111}function qu(t){return t>=1&&t<=8||t===11||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534}const Ru=/["&'<>`]/g,Vu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$u=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Hu=/[|\\{}()[\]^$+*?.]/g,Ue=new WeakMap;function Uu(t,e){if(t=t.replace(e.subset?Qu(e.subset):Ru,r),e.subset||e.escapeOnly)return t;return t.replace(Vu,n).replace($u,r);function n(i,u,a){return e.format((i.charCodeAt(0)-55296)*1024+i.charCodeAt(1)-56320+65536,a.charCodeAt(u+2),e)}function r(i,u,a){return e.format(i.charCodeAt(0),a.charCodeAt(u+1),e)}}function Qu(t){let e=Ue.get(t);return e||(e=Wu(t),Ue.set(t,e)),e}function Wu(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(Hu,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function Yu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function Zu(t,e){return Uu(t,Object.assign({format:Yu},e))}const pn=(function(t){if(t==null)return Xu;if(typeof t=="function")return Dt(t);if(typeof t=="object")return Array.isArray(t)?Gu(t):Ju(t);if(typeof t=="string")return Ku(t);throw new Error("Expected function, string, or object as test")});function Gu(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=pn(t[n]);return Dt(r);function r(...i){let u=-1;for(;++u<e.length;)if(e[u].apply(this,i))return!0;return!1}}function Ju(t){const e=t;return Dt(n);function n(r){const i=r;let u;for(u in t)if(i[u]!==e[u])return!1;return!0}}function Ku(t){return Dt(e);function e(n){return n&&n.type===t}}function Dt(t){return e;function e(n,r,i){return!!(ta(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Xu(){return!0}function ta(t){return t!==null&&typeof t=="object"&&"type"in t}const mn=[],ea=!0,Qe=!1,na="skip";function dn(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const u=pn(i),a=r?-1:1;l(t,void 0,[])();function l(o,s,c){const f=o&&typeof o=="object"?o:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(o.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=mn,S,g,C;if((!e||u(o,s,c[c.length-1]||void 0))&&(h=ra(n(o,c)),h[0]===Qe))return h;if("children"in o&&o.children){const w=o;if(w.children&&h[0]!==na)for(g=(r?w.children.length:-1)+a,C=c.concat(w);g>-1&&g<w.children.length;){const z=w.children[g];if(S=l(z,g,C)(),S[0]===Qe)return S;g=typeof S[1]=="number"?S[1]:g+a}}return h}}}function ra(t){return Array.isArray(t)?t:typeof t=="number"?[ea,t]:t==null?mn:[t]}const ia={}.hasOwnProperty,ua={},We=/^[^\t\n\r "#'.<=>`}]+$/,aa=/^[^\t\n\r "'<=>`}]+$/;function la(){return{canContainEols:["textDirective"],enter:{directiveContainer:oa,directiveContainerAttributes:Qt,directiveContainerLabel:fa,directiveLeaf:ca,directiveLeafAttributes:Qt,directiveText:ha,directiveTextAttributes:Qt},exit:{directiveContainer:Kt,directiveContainerAttributeClassValue:Yt,directiveContainerAttributeIdValue:Wt,directiveContainerAttributeName:Gt,directiveContainerAttributeValue:Zt,directiveContainerAttributes:Jt,directiveContainerLabel:pa,directiveContainerName:Ut,directiveLeaf:Kt,directiveLeafAttributeClassValue:Yt,directiveLeafAttributeIdValue:Wt,directiveLeafAttributeName:Gt,directiveLeafAttributeValue:Zt,directiveLeafAttributes:Jt,directiveLeafName:Ut,directiveText:Kt,directiveTextAttributeClassValue:Yt,directiveTextAttributeIdValue:Wt,directiveTextAttributeName:Gt,directiveTextAttributeValue:Zt,directiveTextAttributes:Jt,directiveTextName:Ut}}}function sa(t){const e=ua;if(e.quote!=='"'&&e.quote!=="'"&&e.quote!==null&&e.quote!==void 0)throw new Error("Invalid quote `"+e.quote+"`, expected `'` or `\"`");return n.peek=ma,{handlers:{containerDirective:n,leafDirective:n,textDirective:n},unsafe:[{character:"\r",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{character:`
`,inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}]};function n(u,a,l,o){const s=l.createTracker(o),c=da(u),f=l.enter(u.type);let p=s.move(c+(u.name||"")),h;if(u.type==="containerDirective"){const S=(u.children||[])[0];h=Ye(S)?S:void 0}else h=u;if(h&&h.children&&h.children.length>0){const S=l.enter("label"),g=`${u.type}Label`,C=l.enter(g);p+=s.move("["),p+=s.move(l.containerPhrasing(h,{...s.current(),before:p,after:"]"})),p+=s.move("]"),C(),S()}if(p+=s.move(r(u,l)),u.type==="containerDirective"){const S=(u.children||[])[0];let g=u;Ye(S)&&(g=Object.assign({},u,{children:u.children.slice(1)})),g&&g.children&&g.children.length>0&&(p+=s.move(`
`),p+=s.move(l.containerFlow(g,s.current()))),p+=s.move(`
`+c)}return f(),p}function r(u,a){const l=u.attributes||{},o=[];let s,c,f,p;for(p in l)if(ia.call(l,p)&&l[p]!==void 0&&l[p]!==null){const h=String(l[p]);if(p==="id")f=e.preferShortcut!==!1&&We.test(h)?"#"+h:i("id",h,u,a);else if(p==="class"){const S=h.split(/[\t\n\r ]+/g),g=[],C=[];let w=-1;for(;++w<S.length;)(e.preferShortcut!==!1&&We.test(S[w])?C:g).push(S[w]);s=g.length>0?i("class",g.join(" "),u,a):"",c=C.length>0?"."+C.join("."):""}else o.push(i(p,h,u,a))}return s&&o.unshift(s),c&&o.unshift(c),f&&o.unshift(f),o.length>0?"{"+o.join(" ")+"}":""}function i(u,a,l,o){if(e.collapseEmptyAttributes!==!1&&!a)return u;if(e.preferUnquoted&&aa.test(a))return u+"="+a;const s=e.quote||o.options.quote||'"',c=s==='"'?"'":'"',f=e.quoteSmart&&Ve(a,s)>Ve(a,c)?c:s,p=l.type==="textDirective"?[f]:[f,`
`,"\r"];return u+"="+f+Zu(a,{subset:p})+f}}function oa(t){ce.call(this,"containerDirective",t)}function ca(t){ce.call(this,"leafDirective",t)}function ha(t){ce.call(this,"textDirective",t)}function ce(t,e){this.enter({type:t,name:"",attributes:{},children:[]},e)}function Ut(t){const e=this.stack[this.stack.length-1];e.type==="containerDirective"||e.type==="leafDirective"||e.type,e.name=this.sliceSerialize(t)}function fa(t){this.enter({type:"paragraph",data:{directiveLabel:!0},children:[]},t)}function pa(t){this.exit(t)}function Qt(){this.data.directiveAttributes=[],this.buffer()}function Wt(t){this.data.directiveAttributes.push(["id",oe(this.sliceSerialize(t),{attribute:!0})])}function Yt(t){this.data.directiveAttributes.push(["class",oe(this.sliceSerialize(t),{attribute:!0})])}function Zt(t){const e=this.data.directiveAttributes;e[e.length-1][1]=oe(this.sliceSerialize(t),{attribute:!0})}function Gt(t){this.data.directiveAttributes.push([this.sliceSerialize(t),""])}function Jt(){const t=this.data.directiveAttributes,e={};let n=-1;for(;++n<t.length;){const i=t[n];i[0]==="class"&&e.class?e.class+=" "+i[1]:e[i[0]]=i[1]}this.data.directiveAttributes=void 0,this.resume();const r=this.stack[this.stack.length-1];r.type==="containerDirective"||r.type==="leafDirective"||r.type,r.attributes=e}function Kt(t){this.exit(t)}function ma(){return":"}function Ye(t){return!!(t&&t.type==="paragraph"&&t.data&&t.data.directiveLabel)}function da(t){let e=0;return t.type==="containerDirective"?(dn(t,function(n,r){if(n.type==="containerDirective"){let i=r.length,u=0;for(;i--;)r[i].type==="containerDirective"&&u++;u>e&&(e=u)}}),e+=3):t.type==="leafDirective"?e=2:e=1,":".repeat(e)}function he(t,e,n,r,i,u,a,l,o,s,c,f,p,h,S){let g,C;return w;function w(x){return t.enter(r),t.enter(i),t.consume(x),t.exit(i),z}function z(x){return x===35?(g=a,A(x)):x===46?(g=l,A(x)):S&&R(x)?j(t,z,"whitespace")(x):!S&&H(x)?ot(t,z)(x):x===null||I(x)||At(x)||Et(x)&&x!==45&&x!==95?V(x):(t.enter(u),t.enter(o),t.consume(x),k)}function A(x){const O=g+"Marker";return t.enter(u),t.enter(g),t.enter(O),t.consume(x),t.exit(O),P}function P(x){if(x===null||x===34||x===35||x===39||x===46||x===60||x===61||x===62||x===96||x===125||H(x))return n(x);const O=g+"Value";return t.enter(O),t.consume(x),_}function _(x){if(x===null||x===34||x===39||x===60||x===61||x===62||x===96)return n(x);if(x===35||x===46||x===125||H(x)){const O=g+"Value";return t.exit(O),t.exit(g),t.exit(u),z(x)}return t.consume(x),_}function k(x){return x===null||I(x)||At(x)||Et(x)&&x!==45&&x!==46&&x!==58&&x!==95?(t.exit(o),S&&R(x)?j(t,v,"whitespace")(x):!S&&H(x)?ot(t,v)(x):v(x)):(t.consume(x),k)}function v(x){return x===61?(t.enter(s),t.consume(x),t.exit(s),B):(t.exit(u),z(x))}function B(x){return x===null||x===60||x===61||x===62||x===96||x===125||S&&I(x)?n(x):x===34||x===39?(t.enter(c),t.enter(p),t.consume(x),t.exit(p),C=x,N):S&&R(x)?j(t,B,"whitespace")(x):!S&&H(x)?ot(t,B)(x):(t.enter(f),t.enter(h),t.consume(x),C=void 0,b)}function b(x){return x===null||x===34||x===39||x===60||x===61||x===62||x===96?n(x):x===125||H(x)?(t.exit(h),t.exit(f),t.exit(u),z(x)):(t.consume(x),b)}function N(x){return x===C?(t.enter(p),t.consume(x),t.exit(p),t.exit(c),t.exit(u),L):(t.enter(f),T(x))}function T(x){return x===C?(t.exit(f),N(x)):x===null?n(x):I(x)?S?n(x):ot(t,T)(x):(t.enter(h),t.consume(x),F)}function F(x){return x===C||x===null||I(x)?(t.exit(h),T(x)):(t.consume(x),F)}function L(x){return x===125||H(x)?z(x):V(x)}function V(x){return x===125?(t.enter(i),t.consume(x),t.exit(i),t.exit(r),e):n(x)}}function fe(t,e,n,r,i,u,a){let l=0,o=0,s;return c;function c(C){return t.enter(r),t.enter(i),t.consume(C),t.exit(i),f}function f(C){return C===93?(t.enter(i),t.consume(C),t.exit(i),t.exit(r),e):(t.enter(u),p(C))}function p(C){if(C===93&&!o)return g(C);const w=t.enter("chunkText",{_contentTypeTextTrailing:!0,contentType:"text",previous:s});return s&&(s.next=w),s=w,h(C)}function h(C){return C===null||l>999||C===91&&++o>32?n(C):C===93&&!o--?(t.exit("chunkText"),g(C)):I(C)?a?n(C):(t.consume(C),t.exit("chunkText"),p):(t.consume(C),C===92?S:h)}function S(C){return C===91||C===92||C===93?(t.consume(C),l++,h):h(C)}function g(C){return t.exit(u),t.enter(i),t.consume(C),t.exit(i),t.exit(r),e}}function pe(t,e,n,r){const i=this;return u;function u(l){return l===null||I(l)||Et(l)||At(l)?n(l):(t.enter(r),t.consume(l),a)}function a(l){return l===null||I(l)||At(l)||Et(l)&&l!==45&&l!==95?(t.exit(r),i.previous===45||i.previous===95?n(l):e(l)):(t.consume(l),a)}}const xa={tokenize:ka,concrete:!0},ga={tokenize:ba,partial:!0},ya={tokenize:wa,partial:!0},Lt={tokenize:za,partial:!0};function ka(t,e,n){const r=this,i=r.events[r.events.length-1],u=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let a=0,l;return o;function o(b){return t.enter("directiveContainer"),t.enter("directiveContainerFence"),t.enter("directiveContainerSequence"),s(b)}function s(b){return b===58?(t.consume(b),a++,s):a<3?n(b):(t.exit("directiveContainerSequence"),pe.call(r,t,c,n,"directiveContainerName")(b))}function c(b){return b===91?t.attempt(ga,f,f)(b):f(b)}function f(b){return b===123?t.attempt(ya,p,p)(b):p(b)}function p(b){return j(t,h,"whitespace")(b)}function h(b){return t.exit("directiveContainerFence"),b===null?v(b):I(b)?r.interrupt?e(b):t.attempt(Lt,S,v)(b):n(b)}function S(b){return b===null?v(b):I(b)?t.check(Lt,A,v)(b):(t.enter("directiveContainerContent"),g(b))}function g(b){return t.attempt({tokenize:B,partial:!0},k,u?j(t,C,"linePrefix",u+1):C)(b)}function C(b){return b===null?k(b):I(b)?t.check(Lt,z,k)(b):z(b)}function w(b){if(b===null){const N=t.exit("chunkDocument");return r.parser.lazy[N.start.line]=!1,k(b)}return I(b)?t.check(Lt,P,_)(b):(t.consume(b),w)}function z(b){const N=t.enter("chunkDocument",{contentType:"document",previous:l});return l&&(l.next=N),l=N,w(b)}function A(b){return t.enter("directiveContainerContent"),g(b)}function P(b){t.consume(b);const N=t.exit("chunkDocument");return r.parser.lazy[N.start.line]=!1,g}function _(b){const N=t.exit("chunkDocument");return r.parser.lazy[N.start.line]=!1,k(b)}function k(b){return t.exit("directiveContainerContent"),v(b)}function v(b){return t.exit("directiveContainer"),e(b)}function B(b,N,T){let F=0;return j(b,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function L(O){return b.enter("directiveContainerFence"),b.enter("directiveContainerSequence"),V(O)}function V(O){return O===58?(b.consume(O),F++,V):F<a?T(O):(b.exit("directiveContainerSequence"),j(b,x,"whitespace")(O))}function x(O){return O===null||I(O)?(b.exit("directiveContainerFence"),N(O)):T(O)}}}function ba(t,e,n){return fe(t,e,n,"directiveContainerLabel","directiveContainerLabelMarker","directiveContainerLabelString",!0)}function wa(t,e,n){return he(t,e,n,"directiveContainerAttributes","directiveContainerAttributesMarker","directiveContainerAttribute","directiveContainerAttributeId","directiveContainerAttributeClass","directiveContainerAttributeName","directiveContainerAttributeInitializerMarker","directiveContainerAttributeValueLiteral","directiveContainerAttributeValue","directiveContainerAttributeValueMarker","directiveContainerAttributeValueData",!0)}function za(t,e,n){const r=this;return i;function i(a){return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),u}function u(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Sa={tokenize:Aa},Ca={tokenize:Ia,partial:!0},Ea={tokenize:Ta,partial:!0};function Aa(t,e,n){const r=this;return i;function i(c){return t.enter("directiveLeaf"),t.enter("directiveLeafSequence"),t.consume(c),u}function u(c){return c===58?(t.consume(c),t.exit("directiveLeafSequence"),pe.call(r,t,a,n,"directiveLeafName")):n(c)}function a(c){return c===91?t.attempt(Ca,l,l)(c):l(c)}function l(c){return c===123?t.attempt(Ea,o,o)(c):o(c)}function o(c){return j(t,s,"whitespace")(c)}function s(c){return c===null||I(c)?(t.exit("directiveLeaf"),e(c)):n(c)}}function Ia(t,e,n){return fe(t,e,n,"directiveLeafLabel","directiveLeafLabelMarker","directiveLeafLabelString",!0)}function Ta(t,e,n){return he(t,e,n,"directiveLeafAttributes","directiveLeafAttributesMarker","directiveLeafAttribute","directiveLeafAttributeId","directiveLeafAttributeClass","directiveLeafAttributeName","directiveLeafAttributeInitializerMarker","directiveLeafAttributeValueLiteral","directiveLeafAttributeValue","directiveLeafAttributeValueMarker","directiveLeafAttributeValueData",!0)}const Fa={tokenize:Na,previous:va},La={tokenize:Da,partial:!0},Pa={tokenize:Ma,partial:!0};function va(t){return t!==58||this.events[this.events.length-1][1].type==="characterEscape"}function Na(t,e,n){const r=this;return i;function i(o){return t.enter("directiveText"),t.enter("directiveTextMarker"),t.consume(o),t.exit("directiveTextMarker"),pe.call(r,t,u,n,"directiveTextName")}function u(o){return o===58?n(o):o===91?t.attempt(La,a,a)(o):a(o)}function a(o){return o===123?t.attempt(Pa,l,l)(o):l(o)}function l(o){return t.exit("directiveText"),e(o)}}function Da(t,e,n){return fe(t,e,n,"directiveTextLabel","directiveTextLabelMarker","directiveTextLabelString")}function Ma(t,e,n){return he(t,e,n,"directiveTextAttributes","directiveTextAttributesMarker","directiveTextAttribute","directiveTextAttributeId","directiveTextAttributeClass","directiveTextAttributeName","directiveTextAttributeInitializerMarker","directiveTextAttributeValueLiteral","directiveTextAttributeValue","directiveTextAttributeValueMarker","directiveTextAttributeValueData")}function _a(){return{text:{58:Fa},flow:{58:[xa,Sa]}}}function Ba(){const e=this.data(),n=e.micromarkExtensions||(e.micromarkExtensions=[]),r=e.fromMarkdownExtensions||(e.fromMarkdownExtensions=[]),i=e.toMarkdownExtensions||(e.toMarkdownExtensions=[]);n.push(_a()),r.push(la()),i.push(sa())}function ja(t,e,n,r){let i,u,a;typeof e=="function"&&typeof n!="function"?(u=void 0,a=e,i=n):(u=e,a=n,i=r),dn(t,u,l,i);function l(o,s){const c=s[s.length-1],f=c?c.children.indexOf(o):void 0;return a(o,f,c)}}function Oa(t,e={}){const{maxLength:n=160,stopAtHint:r=!0,stopAtSolution:i=!0,titleLookup:u,expeditionTitleLookup:a}=e;if(!t||t.trim().length===0)return"";try{let l=t;u&&(l=l.replace(/\[\[puzzle:([^\]#?]+)(?:[#?][^\]]*)?\]\]/g,(f,p)=>u.get(p)||`[Puzzle: ${p}]`)),a&&(l=l.replace(/\[\[expedition:([^\]#?]+)(?:[#?][^\]]*)?\]\]/g,(f,p)=>a.get(p)||`[Expedition: ${p}]`));const o=dr().use(zu).use(Du).use(Ba).parse(l);let s="",c=!1;return ja(o,f=>{if(!c){if(f.type==="containerDirective"||f.type==="leafDirective"||f.type==="textDirective"){const p=f;if(r&&p.name==="hint"||i&&p.name==="solution"){c=!0;return}}f.type==="text"&&(s+=f.value+" "),f.type==="inlineMath"&&"value"in f&&(s+=f.value+" "),f.type==="math"&&"value"in f&&(s+=`[Math: ${f.value}] `)}}),s=s.replace(/\s+/g," ").trim(),s.length===0?"":qa(s,n)}catch(l){return console.error("Error extracting text from puzzle markdown:",l),""}}function qa(t,e){if(t.length<=e)return t;const n=t.substring(0,e),r=n.lastIndexOf(" ");return r>0?n.substring(0,r)+"...":n+"..."}const Ya=({data:t})=>{if(!t||t.status!=="success")return[{title:"Puzzle - Puzzlestone Peak"},{name:"description",content:"Explore logic puzzles and problem-solving challenges."}];const e=t.puzzle,n=`${e.metadata.title} - Puzzlestone Peak`,i=(e.rawContent?Oa(e.rawContent,{maxLength:160}):"")||e.metadata.websitePreview||e.metadata.preview||"A logic puzzle from Puzzlestone Peak.",u=e.metadata.concepts?.length?[...e.metadata.concepts,e.metadata.difficulty,"logic puzzle"].join(", "):"",a=[{title:n},{name:"description",content:i},{property:"og:title",content:n},{property:"og:description",content:i},{property:"og:type",content:"article"},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:n},{name:"twitter:description",content:i}];return u&&a.push({name:"keywords",content:u}),a},Za=An(function(){const e=Tn(),n=Dn(Pt.PUZZLES);if(e.status==="not-found")return D.jsx("div",{className:"container mx-auto px-4 py-6",children:D.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[D.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Puzzle Not Found"}),D.jsx("p",{className:"text-muted-foreground mb-8",children:"The puzzle you're looking for doesn't exist or has been moved."}),D.jsx(Je,{to:Pt.PUZZLES,children:"Back to Puzzle Library"})]})});if(e.status==="error")return D.jsx(Mn,{error:e.error,slug:e.slug,backRoute:Pt.PUZZLES,contentType:"puzzle"});const{puzzle:r}=e,i=r.metadata.id;return On(i),D.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[D.jsx(Fn,{...n,className:"inline-flex items-center text-link hover:text-link-hover hover:underline mb-6 cursor-pointer",children:"â Back"}),D.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[D.jsx("h1",{className:"text-4xl font-bold text-foreground sm:flex-1",children:r.metadata.title}),D.jsx(ke,{type:"puzzle",id:r.metadata.id})]}),D.jsx(Gn,{metadata:r.metadata}),D.jsx(we,{type:"previous",puzzleSlug:r.metadata.previousPuzzle}),D.jsx(_n,{content:r.content,dynamicBlocks:r.dynamicBlocks,inlineComponents:r.inlineComponents}),D.jsx("div",{className:"flex justify-center my-8",children:D.jsx(ke,{type:"puzzle",id:r.metadata.id})}),D.jsx(we,{type:"next",puzzleSlug:r.metadata.nextPuzzle}),D.jsx(Wn,{context:"recommendations",children:D.jsx(Zn,{currentPuzzleId:r.metadata.id})})]})}),Ga=In(function(){const e=Ln(),{slug:n}=Pn(),[r,i]=Ze.useState(!1);let u="Puzzle Loading Error",a="We encountered a problem loading this puzzle.";return vn(e)?(e.status===404?(u="Puzzle Not Found",a=n?`The puzzle "${n}" could not be found. It may have been moved or deleted.`:"The puzzle you are looking for does not exist."):(u=`Error ${e.status}`,a="An error occurred while loading this puzzle."),e.data?.message||e.statusText):e instanceof Error&&(e.message.includes("parse")?(u="Content Format Error",a="This puzzle content has a formatting error and cannot be displayed."):(e.message.includes("network")||e.message.includes("fetch"))&&(u="Content Loading Error",a="Failed to load the puzzle content. Please check your connection and try again."),e.message),D.jsx("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:D.jsxs(qn,{className:"border-destructive/50",children:[D.jsx(Rn,{children:D.jsxs(Vn,{className:"flex items-center gap-3",children:[D.jsx("span",{className:"text-3xl text-destructive",children:"â "}),u]})}),D.jsxs($n,{className:"space-y-6",children:[D.jsx("p",{className:"text-muted-foreground",children:a}),n&&D.jsxs("p",{className:"text-sm text-foreground",children:["Puzzle slug: ",D.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:n})]}),D.jsxs("div",{className:"flex gap-3 flex-wrap",children:[D.jsx(Je,{to:Pt.PUZZLES,variant:"contained",color:"primary",children:"Back to Puzzle Library"}),D.jsx(Hn,{variant:"outlined",onClick:()=>window.location.reload(),children:"Reload Page"})]}),!1]})]})})});export{Ga as ErrorBoundary,Za as default,Ya as meta};
