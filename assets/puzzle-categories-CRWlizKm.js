import{b as u,t as e,w as m,x,A as p,i as f,L as g}from"./index-DIth0oIc.js";import{p as l}from"./puzzleIndex-CkuFLq0I.js";import{p as i,D as z,C as h,l as y,m as b,n as j,o as C,R as P,B as w}from"./card-CRYRt8Xe.js";import{C as d}from"./CardContainer-44PDIoDq.js";import{u as N,I as E}from"./ItemCardList-BrZolSfb.js";import{r as v,g as L,E as R}from"./ErrorBoundary-DAtG3o8H.js";function k(a){return{count:5,filters:[{type:"exclude",excludeList:a?.excludeList??[]},{type:"completion",status:"undone"},{type:"publication",mode:"auto"}],fallbacks:[{type:"difficulty",strategy:"balanced",balanceConstraint:{type:"max-min-diff",maxDiff:1},excludeFullyCompletedDifficulties:!0},{type:"completion",allowCompleted:!0}],selectionStrategy:{type:"random-by-difficulty",mode:"one-per-difficulty",difficulties:["easy","medium","hard","expert","open"]},balancingStrategy:{type:"difficulty-balance",maxDiff:1,excludeFullyCompleted:!0}}}function B(){const a=N(),r=u.useMemo(()=>{const s=k({excludeList:[]});return v(s,{allPuzzles:l,userProgress:a,environment:"production",seed:L("puzzle-categories")})},[a]);return r.length===0?null:e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Recommended Puzzles"}),e.jsx(E,{type:"puzzle",items:r,variant:"regular"})]})}const F=()=>[{title:"All Puzzles - Puzzlestone Peak"},{name:"description",content:"Browse all logic puzzles organized by difficulty: Easy, Medium, Hard, Expert, and Open problems."},{property:"og:title",content:"All Puzzles - Puzzlestone Peak"},{property:"og:description",content:"Browse all logic puzzles organized by difficulty: Easy, Medium, Hard, Expert, and Open problems."},{property:"og:type",content:"website"}];function c({title:a,description:r,count:s,href:n}){return e.jsxs(g,{to:n,className:"block p-5 lg:p-8 border-b border-divider last:border-b-0 transition-colors hover:bg-muted no-underline",children:[e.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[e.jsx("h3",{className:"text-lg lg:text-2xl font-semibold text-foreground hover:text-primary transition-colors",children:a}),e.jsxs("span",{className:"text-sm lg:text-base font-medium text-link ml-4",children:[s," ",s===1?"puzzle":"puzzles"]})]}),e.jsx("p",{className:"text-muted-foreground text-sm lg:text-[0.95rem] leading-relaxed max-w-[800px]",children:r})]})}const H=m(function(){const r={easy:l.filter(t=>t.difficulty==="easy").length,medium:l.filter(t=>t.difficulty==="medium").length,hard:l.filter(t=>t.difficulty==="hard").length,expert:l.filter(t=>t.difficulty==="expert").length,open:l.filter(t=>t.difficulty==="open").length},s=l.filter(t=>t.tags?.includes("starter")).length;return l.filter(t=>t.tags?.includes("developer")).length,e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-6 lg:py-12 max-w-container",children:[e.jsxs("div",{className:"mb-6 lg:mb-8",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-2 text-foreground tracking-tight",children:"Puzzle Library"}),e.jsx("p",{className:"text-muted-foreground text-base lg:text-lg",children:"Browse our hand-curated puzzles"})]}),e.jsxs(d,{className:"mb-6 lg:mb-8",children:[e.jsx(c,{title:"All Puzzles",description:"Browse every puzzle in the library",count:l.length,href:i("all")}),s>0&&e.jsx(c,{title:"Starter Puzzles",description:"Puzzles for new hikers starting out!",count:s,href:i("starter")}),!1]}),e.jsx("h2",{className:"text-xl lg:text-2xl font-semibold mb-4 text-foreground",children:"Puzzles By Difficulty"}),e.jsx(d,{children:Object.keys(r).map(t=>e.jsx(c,{title:t.charAt(0).toUpperCase()+t.slice(1),description:z[t],count:r[t],href:i(t)},t))}),e.jsx(R,{context:"recommendations",children:e.jsx(B,{})})]})}),M=x(function(){const r=p(),[s,n]=u.useState(!1);let t="Unable to Load Puzzle Categories",o="An error occurred while loading puzzle categories.";return f(r)?(t=`Error ${r.status}`,o="An error occurred while loading puzzle categories.",r.data?.message||r.statusText):r instanceof Error&&(r.message.includes("index")||r.message.includes("Index")?(t="Puzzle Index Error",o="Failed to load the puzzle index. This may be a temporary issue."):(r.message.includes("category")||r.message.includes("filter"))&&(t="Category Loading Error",o="There was a problem loading puzzle categories."),r.message),e.jsx("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:e.jsxs(h,{className:"border-destructive/50",children:[e.jsx(y,{children:e.jsxs(b,{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl text-destructive",children:"âš "}),t]})}),e.jsxs(j,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:o}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(C,{to:P.HOME,variant:"contained",color:"primary",children:"Return Home"}),e.jsx(w,{variant:"outlined",onClick:()=>window.location.reload(),children:"Reload Page"})]}),!1]})]})})});export{M as ErrorBoundary,H as default,F as meta};
