import{b as u,t as e,w as x,x as p,A as g,i as f,L as z}from"./index-DIth0oIc.js";import{puzzleIndex as o}from"./puzzleIndex-CvT980ad.js";import{D as m,g as h,u as i,v as y,C as b,o as j,p as C,n as P,q as E,s as w,R as N,B as v}from"./card-CeispfCi.js";import{C as d}from"./CardContainer-h8JH8jnF.js";import{u as L,I as D}from"./ItemCardList-DC-u4o5t.js";import{r as R,g as k,E as B}from"./ErrorBoundary-Ch767kHG.js";function I(l){return{count:5,filters:[{type:"exclude",excludeList:l?.excludeList??[]},{type:"completion",status:"undone"},{type:"publication",mode:"auto"}],fallbacks:[{type:"difficulty",strategy:"balanced",balanceConstraint:{type:"max-min-diff",maxDiff:1},excludeFullyCompletedDifficulties:!0},{type:"completion",allowCompleted:!0}],selectionStrategy:{type:"random-by-difficulty",mode:"one-per-difficulty",difficulties:[...m]},balancingStrategy:{type:"difficulty-balance",maxDiff:1,excludeFullyCompleted:!0}}}function S(){const l=L(),t=u.useMemo(()=>{const r=I({excludeList:[]});return R(r,{allPuzzles:o,userProgress:l,environment:"production",seed:k("puzzle-categories")})},[l]);return t.length===0?null:e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Recommended Puzzles"}),e.jsx(D,{type:"puzzle",items:t,variant:"regular"})]})}const M=()=>[{title:"All Puzzles - Puzzlestone Peak"},{name:"description",content:"Browse all logic puzzles organized by difficulty: Easy, Medium, Hard, Expert, and Open problems."},{property:"og:title",content:"All Puzzles - Puzzlestone Peak"},{property:"og:description",content:"Browse all logic puzzles organized by difficulty: Easy, Medium, Hard, Expert, and Open problems."},{property:"og:type",content:"website"}];function c({title:l,description:t,count:r,href:n}){return e.jsxs(z,{to:n,className:"block p-5 lg:p-8 border-b border-divider last:border-b-0 transition-colors hover:bg-muted no-underline",children:[e.jsxs("div",{className:"flex items-baseline justify-between mb-2",children:[e.jsx("h3",{className:"text-lg lg:text-2xl font-semibold text-foreground hover:text-primary transition-colors",children:l}),e.jsxs("span",{className:"text-sm lg:text-base font-medium text-link ml-4",children:[r," ",r===1?"puzzle":"puzzles"]})]}),e.jsx("p",{className:"text-muted-foreground text-sm lg:text-[0.95rem] leading-relaxed max-w-[800px]",children:t})]})}const Y=x(function(){const t=Object.fromEntries(m.map(s=>[s,o.filter(a=>h(a.difficulty)===s).length])),r=o.filter(s=>s.tags?.includes("starter")).length;return o.filter(s=>s.tags?.includes("developer")).length,e.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-6 lg:py-12 max-w-container",children:[e.jsxs("div",{className:"mb-6 lg:mb-8",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-2 text-foreground tracking-tight",children:"Puzzle Library"}),e.jsx("p",{className:"text-muted-foreground text-base lg:text-lg",children:"Browse our hand-curated puzzles"})]}),e.jsxs(d,{className:"mb-6 lg:mb-8",children:[e.jsx(c,{title:"All Puzzles",description:"Browse every puzzle in the library",count:o.length,href:i("all")}),r>0&&e.jsx(c,{title:"Starter Puzzles",description:"Puzzles for new hikers starting out!",count:r,href:i("starter")}),!1]}),e.jsx("h2",{className:"text-xl lg:text-2xl font-semibold mb-4 text-foreground",children:"Puzzles By Difficulty"}),e.jsx(d,{children:Object.keys(t).map(s=>e.jsx(c,{title:s.charAt(0).toUpperCase()+s.slice(1),description:y[s],count:t[s],href:i(s)},s))}),e.jsx(B,{context:"recommendations",children:e.jsx(S,{})})]})}),_=p(function(){const t=g(),[r,n]=u.useState(!1);let s="Unable to Load Puzzle Categories",a="An error occurred while loading puzzle categories.";return f(t)?(s=`Error ${t.status}`,a="An error occurred while loading puzzle categories.",t.data?.message||t.statusText):t instanceof Error&&(t.message.includes("index")||t.message.includes("Index")?(s="Puzzle Index Error",a="Failed to load the puzzle index. This may be a temporary issue."):(t.message.includes("category")||t.message.includes("filter"))&&(s="Category Loading Error",a="There was a problem loading puzzle categories."),t.message),e.jsx("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:e.jsxs(b,{className:"border-destructive/50",children:[e.jsx(j,{children:e.jsxs(C,{className:"flex items-center gap-3",children:[e.jsx(P,{className:"text-destructive size-8"}),s]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:a}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(w,{to:N.HOME,variant:"contained",color:"primary",children:"Return Home"}),e.jsx(v,{variant:"outlined",onClick:()=>window.location.reload(),children:"Reload Page"})]}),!1]})]})})});export{_ as ErrorBoundary,Y as default,M as meta};
