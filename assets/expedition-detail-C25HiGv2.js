import{b as m,t as e,w as x,D as p,L as a}from"./index-BdwX92X6.js";import{M as u,u as f,C as d}from"./useBack-B_Vf79Bw.js";import{e as o}from"./expeditionIndex-EGyna6u9.js";import{u as g,I as r}from"./ItemCardList-DvmhThDx.js";import{R as c}from"./createLucideIcon-DsSOLlez.js";import{a as h,g as y}from"./engine-CXIqnuIe.js";import"./use-dark-mode-CNQh-kvv.js";function j(t){const n=[{type:"exclude",excludeList:[t.currentExpeditionId,...t.excludeList??[]],always:!0},{type:"completion",status:"undone"},{type:"publication",mode:"auto"},{type:"prerequisites",mode:"ready",userProgress:t.userProgress}],s=[{type:"prerequisites",mode:"any"},{type:"completion",allowCompleted:!0,respectExcludeList:!0}];return{count:t.count??3,filters:n,fallbacks:s,selectionStrategy:{type:"random",mode:"uniform"}}}function b({currentExpeditionId:t}){const i=g(),n=m.useMemo(()=>{const s=j({currentExpeditionId:t,userProgress:i});return h(s,{allExpeditions:o,userProgress:i,excludeList:[],environment:"production",seed:y(`expedition-${t}`)})},[t,i]);return n.length===0?null:e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Try These Expeditions Next"}),e.jsx(r,{type:"expedition",items:n,variant:"compact"})]})}function v({content:t,dynamicBlocks:i}){return e.jsx(u,{content:t,dynamicBlocks:i})}function l(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function E({metadata:t}){return e.jsxs("div",{className:"space-y-4 border-b border-divider pb-6 mb-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Created: ",l(t.dateCreated)]}),t.lastUpdated!==t.dateCreated&&e.jsxs("span",{className:"ml-4",children:["Updated: ",l(t.lastUpdated)]})]}),t.credits&&e.jsx("div",{className:"text-sm text-muted-foreground prose prose-sm dark:prose-invert",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.credits}})})]})}function N({prerequisiteSlugs:t}){if(!t||t.length===0)return null;const i=t.map(n=>o.find(s=>s.slug===n)).filter(n=>n!==void 0);return i.length===0?null:e.jsxs("div",{className:"my-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Prerequisites"}),e.jsx(r,{type:"expedition",items:i,variant:"compact"})]})}function k({currentSlug:t}){const i=o.filter(n=>n.prerequisites?.includes(t));return i.length===0?null:e.jsxs("div",{className:"my-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Expeditions that build on this"}),e.jsx(r,{type:"expedition",items:i,variant:"compact"})]})}const S=({data:t})=>{if(!t?.slug||!t?.expedition)return[{title:"Expedition - Puzzlestone Peak"},{name:"description",content:"Guided learning path to master puzzle-solving concepts."}];const i=t.expedition,n=`${i.metadata.title} - Puzzlestone Peak`,s=i.metadata.description||"A guided learning path to master puzzle-solving concepts and techniques.";return[{title:n},{name:"description",content:s},{property:"og:title",content:n},{property:"og:description",content:s},{property:"og:type",content:"article"},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:n},{name:"twitter:description",content:s}]},T=x(function(){const{slug:i,expedition:n}=p(),s=f(c.EXPEDITIONS);return!i||!n?e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Expedition Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"The expedition you're looking for doesn't exist or has been moved."}),e.jsx(a,{to:c.EXPEDITIONS,className:"inline-block px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",children:"Back to Expedition Library"})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsx(a,{...s,className:"inline-flex items-center text-link hover:text-link-hover hover:underline mb-6 cursor-pointer",children:"‚Üê Back"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground sm:flex-1",children:n.metadata.title}),e.jsx(d,{type:"expedition",id:n.metadata.id})]}),e.jsx(E,{metadata:n.metadata}),e.jsx(N,{prerequisiteSlugs:n.metadata.prerequisites}),e.jsx(v,{content:n.content,dynamicBlocks:n.dynamicBlocks}),e.jsx("div",{className:"flex justify-center my-8",children:e.jsx(d,{type:"expedition",id:n.metadata.id})}),e.jsx(k,{currentSlug:n.slug}),e.jsx(b,{currentExpeditionId:n.metadata.id})]})});export{T as default,S as meta};
