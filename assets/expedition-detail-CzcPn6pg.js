import{M as E,p as _,u as g,D as y,C as u,_ as s}from"./useBack-DqnUndht.js";import{b as f,t as e,w as j,x as v,H as b,L as P,A as N,B as T,i as D}from"./index-DIth0oIc.js";import{expeditionIndex as m}from"./expeditionIndex-fN_P2HPz.js";import{u as I,I as p}from"./ItemCardList-C-RxMh7h.js";import{p as h,R as d,C as L,m as w,n as R,l as k,o as C,B as O}from"./card-fxtljBLB.js";import{a as A,g as B,E as V}from"./ErrorBoundary-B5mn_yui.js";import"./chevron-down-BphMwi9y.js";import"./use-dark-mode-mdHJdo6o.js";import"./difficulty-types-Yz_I7Ggm.js";function S(t){const o=[{type:"exclude",excludeList:[t.currentExpeditionId,...t.excludeList??[]],always:!0},{type:"completion",status:"undone"},{type:"publication",mode:"auto"},{type:"prerequisites",mode:"ready",userProgress:t.userProgress}],i=[{type:"prerequisites",mode:"any"},{type:"completion",allowCompleted:!0,respectExcludeList:!0}];return{count:t.count??3,filters:o,fallbacks:i,selectionStrategy:{type:"random",mode:"uniform"}}}function z({currentExpeditionId:t}){const n=I(),o=f.useMemo(()=>{const i=S({currentExpeditionId:t,userProgress:n});return A(i,{allExpeditions:m,userProgress:n,excludeList:[],environment:"production",seed:B(`expedition-${t}`)})},[t,n]);return o.length===0?null:e.jsxs("section",{className:"mt-12",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-foreground lg:text-2xl",children:"Try These Expeditions Next"}),e.jsx(p,{type:"expedition",items:o,variant:"compact"})]})}function $({content:t,dynamicBlocks:n,inlineComponents:o}){return e.jsx(E,{content:t,dynamicBlocks:n,inlineComponents:o})}function x(t){return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function q({metadata:t}){return e.jsxs("div",{className:"space-y-4 border-b border-divider pb-6 mb-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Created: ",x(t.dateCreated)]}),t.lastUpdated!==t.dateCreated&&e.jsxs("span",{className:"ml-4",children:["Updated: ",x(t.lastUpdated)]})]}),t.credits&&e.jsx("div",{className:"text-sm text-muted-foreground prose prose-sm dark:prose-invert",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:_.sanitize(t.credits)}})})]})}function M({prerequisiteSlugs:t}){if(!t||t.length===0)return null;const n=t.map(o=>m.find(i=>i.slug===o)).filter(o=>o!==void 0);return n.length===0?null:e.jsxs("div",{className:"my-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Prerequisites"}),e.jsx(p,{type:"expedition",items:n,variant:"compact"})]})}function U({currentSlug:t}){const n=m.filter(o=>o.prerequisites?.includes(t));return n.length===0?null:e.jsxs("div",{className:"my-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Expeditions that build on this"}),e.jsx(p,{type:"expedition",items:n,variant:"compact"})]})}const F=Object.assign({"/content/expeditions/adversarial-games.md":()=>s(()=>import("./adversarial-games-CZJIXaRj.js"),[]),"/content/expeditions/binary.md":()=>s(()=>import("./binary-Bxbf18Mb.js"),[]),"/content/expeditions/bitwise-operations.md":()=>s(()=>import("./bitwise-operations-2tl_t4Rm.js"),[]),"/content/expeditions/gray-code.md":()=>s(()=>import("./gray-code-fiuA_0Bk.js"),[]),"/content/expeditions/induction.md":()=>s(()=>import("./induction-BxBiBzFP.js"),[]),"/content/expeditions/invariants.md":()=>s(()=>import("./invariants-Bd8RPd2X.js"),[]),"/content/expeditions/misc-proving-techniques.md":()=>s(()=>import("./misc-proving-techniques-CvkH-oft.js"),[]),"/content/expeditions/number-theory.md":()=>s(()=>import("./number-theory-Drl14SYc.js"),[]),"/content/expeditions/parity-math.md":()=>s(()=>import("./parity-math-LLYQcXW6.js"),[]),"/content/expeditions/permutation-cycles.md":()=>s(()=>import("./permutation-cycles-CtudYi9M.js"),[]),"/content/expeditions/permutations-combinations.md":()=>s(()=>import("./permutations-combinations-DD49WLwD.js"),[]),"/content/expeditions/twos-complement.md":()=>s(()=>import("./twos-complement-BCbUZj_i.js"),[])});async function X(t){if(!t)return{status:"not-found",slug:null};try{const{expeditionIndex:n}=await s(async()=>{const{expeditionIndex:l}=await import("./expeditionIndex-fN_P2HPz.js");return{expeditionIndex:l}},[]),o=n.find(l=>l.slug===t);if(!o)return{status:"not-found",slug:t};const i=o._path?`/content/expeditions/${o._path}/${t}.md`:`/content/expeditions/${t}.md`,c=F[i];if(!c)throw new Error(`Expedition module not found for slug "${t}" at path: ${i}`);const r=(await c()).default;return{status:"success",slug:t,expedition:r}}catch{return{status:"not-found",slug:t}}}async function te({params:t}){return X(t.slug)}const ne=({data:t})=>{if(!t||t.status!=="success")return[{title:"Expedition - Puzzlestone Peak"},{name:"description",content:"Guided learning path to master puzzle-solving concepts."}];const n=t.expedition,o=`${n.metadata.title} - Puzzlestone Peak`,i=n.metadata.description||"A guided learning path to master puzzle-solving concepts and techniques.";return[{title:o},{name:"description",content:i},{property:"og:title",content:o},{property:"og:description",content:i},{property:"og:type",content:"article"},{name:"twitter:card",content:"summary"},{name:"twitter:title",content:o},{name:"twitter:description",content:i}]},oe=j(function(){const n=b(),o=g(d.EXPEDITIONS);if(n.status==="not-found")return e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Expedition Not Found"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"The expedition you're looking for doesn't exist or has been moved."}),e.jsx(h,{to:d.EXPEDITIONS,children:"Back to Expedition Library"})]})});if(n.status==="error")return e.jsx(y,{error:n.error,slug:n.slug,backRoute:d.EXPEDITIONS,contentType:"expedition"});const{expedition:i}=n;return e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsx(P,{...o,className:"inline-flex items-center text-link hover:text-link-hover hover:underline mb-6 cursor-pointer",children:"â† Back"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground sm:flex-1",children:i.metadata.title}),e.jsx(u,{type:"expedition",id:i.metadata.id})]}),e.jsx(q,{metadata:i.metadata}),e.jsx(M,{prerequisiteSlugs:i.metadata.prerequisites}),e.jsx($,{content:i.content,dynamicBlocks:i.dynamicBlocks,inlineComponents:i.inlineComponents}),e.jsx("div",{className:"flex justify-center my-8",children:e.jsx(u,{type:"expedition",id:i.metadata.id})}),e.jsx(U,{currentSlug:i.slug}),e.jsx(V,{context:"recommendations",children:e.jsx(z,{currentExpeditionId:i.metadata.id})})]})}),ie=v(function(){const n=N(),{slug:o}=T(),[i,c]=f.useState(!1);let a="Expedition Loading Error",r="We encountered a problem loading this expedition.";return D(n)?(n.status===404?(a="Expedition Not Found",r=o?`The expedition "${o}" could not be found. It may have been moved or deleted.`:"The expedition you are looking for does not exist."):(a=`Error ${n.status}`,r="An error occurred while loading this expedition."),n.data?.message||n.statusText):n instanceof Error&&(n.message.includes("parse")?(a="Content Format Error",r="This expedition content has a formatting error and cannot be displayed."):(n.message.includes("network")||n.message.includes("fetch"))&&(a="Content Loading Error",r="Failed to load the expedition content. Please check your connection and try again."),n.message),e.jsx("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:e.jsxs(L,{className:"border-destructive/50",children:[e.jsx(w,{children:e.jsxs(R,{className:"flex items-center gap-3",children:[e.jsx(k,{className:"text-destructive size-8"}),a]})}),e.jsxs(C,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:r}),o&&e.jsxs("p",{className:"text-sm text-foreground",children:["Expedition slug: ",e.jsx("code",{className:"bg-muted px-2 py-1 rounded",children:o})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsx(h,{to:d.EXPEDITIONS,variant:"contained",color:"primary",children:"Back to Expedition Library"}),e.jsx(O,{variant:"outlined",onClick:()=>window.location.reload(),children:"Reload Page"})]}),!1]})]})})});export{ie as ErrorBoundary,te as clientLoader,oe as default,ne as meta};
