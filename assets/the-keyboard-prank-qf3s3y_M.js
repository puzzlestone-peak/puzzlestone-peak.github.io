const s={slug:"the-keyboard-prank",metadata:{id:"puzzle-16",title:"The Keyboard Prank",difficulty:{concepts:"expert",reasoning:"expert"},concepts:["permutation-cycles"],tags:["has-solution"],credit:`Puzzle by Leonid Broukhis (via Wu Riddles).
Question and solution written by Puzzlestone Peak.
`,dateCreated:"2025-11-02",lastUpdated:"2025-11-02",changelog:"2025-11-03: Added to Puzzlestone Peak",preview:"Anne comes into the office to find that her co-workers had played a prank on her. The keycaps on her keyboard had been shuffled such that if she types out a...",websitePreview:"Anne comes into the office to find that her co-workers had played a prank on her. The keycaps on her keyboard had been shuffled such that if she types out a..."},content:`<p>Anne comes into the office to find that her co-workers had played a prank on her. The keycaps on her keyboard had been shuffled such that if she types out a message according to the letters on the keyboard, the message is gibberish when it appears on the screen.</p>
<p>No matter, she thinks. She types out the gibberish message with the letters on her keyboard, ending up with another gibberish message. She continues this process on the new message, repeating until she gets her original message back.</p>
<p>Is it always possible to get the original message back, no matter how the keyboard was rewired? And in the cases where this is possible, what is the maximum number of times she would need to retype the message in order to get the original message back? We can assume that the message only involves the letters A-Z.</p>
<details class="content-block solution-block" data-type="solution"><summary class="solution-label">Solution</summary><div class="solution-content markdown-content prose max-w-none px-4 py-4 space-y-4"><p>It is always possible to get the original message back, no matter how the keyboard is rewired. She is guaranteed to get the original message back after retyping the message 26771144400 times.</p><p>To show this, let’s start with an easier example with the letters A to E. Imagine if Anne types out “ABCDE” using her keyboard and observes the letters that appear. Notice that the result will also be the letters from A-E, just not in the same order. That is a permutation!</p><p>We’ll assume after typing “ABCDE”, she sees “BCAED” on her screen. Remember that a permutation can be decomposed into disjoint cycles? We can represent the cycles with:</p><p>A → B → C → A<br>
D → E → D</p><p>If a message starts with the letter A, then after the first re-type it will be B, then C, then back to A after 3 steps. The same goes for the other letters in this cycle, B and C. By the same reasoning, if a message starts with the letter D or E, it will end up on the original letter again after 2 steps. For us to get the original message again, we need to type it 6 times, the lowest common multiple of 2 and 3.</p><p>In general, a permutation of 5 letters can leave us with cycles of length 1, 2, 3, 4, and/or 5. To get the worst-case scenario, we take the lowest common multiple of 1, 2, 3, 4, and 5 to get 60.</p><p>For our original problem with 26 letters, we know that the re-mapping of letters also gives us a permutation that can be broken down into cycles of 1 to 26. The lowest common multiple of all the numbers from 1 to 26 is 26771144400, giving us our answer.</p><details class="content-block solution-block" data-type="solution"><summary class="solution-label">Extra Credit: Computing the LCM</summary><div class="solution-content markdown-content prose max-w-none px-4 py-4 space-y-4"><p>If you want to learn how to compute the lowest common multiple of the numbers from 1 to n by hand, read on.</p><p>First, remember that to get the lowest common multiple (LCM) of any 2 numbers, we have to compute both their prime factorisations, then take the highest power of each prime. Let’s try finding the LCM of 72 and 100.</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>72</mn><mo>=</mo><msup><mn>2</mn><mn>3</mn></msup><mo>×</mo><msup><mn>3</mn><mn>2</mn></msup></mrow><annotation>72 = 2^3 \\times 3^2</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">72</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span> <br>
<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>100</mn><mo>=</mo><msup><mn>2</mn><mn>2</mn></msup><mo>×</mo><msup><mn>5</mn><mn>2</mn></msup></mrow><annotation>100 = 2^2 \\times 5^2</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">100</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p><p>Taking the highest of each power, we get <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mo>×</mo><msup><mn>3</mn><mn>2</mn></msup><mo>×</mo><msup><mn>5</mn><mn>2</mn></msup><mo>=</mo><mn>1800</mn></mrow><annotation>2^3 \\times 3^2 \\times 5^2 = 1800</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1800</span></span></span></span>.</p><p>How about the LCM of a sequence of numbers from 1 to n? For a start, notice that we’ll only have to consider the primes between 1 to n. Any prime above that will have a power of 0 in the prime factorisation.</p><p>Let’s try to compute the LCM of the numbers from 1 to 10. Our primes are 2, 3, 5, and 7.</p><p>The largest number from 1 to 10 that is a power of 2 is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8</mn><mo>=</mo><msup><mn>2</mn><mn>3</mn></msup></mrow><annotation>8 = 2^3</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>. The next power of 2 is 16, which is more than 10. So the highest power of 2 in the LCM is 3. We can actually compute this more easily with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⌊</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>n</mi><mo>⌋</mo></mrow><annotation>\\lfloor \\log_2 n \\rfloor</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">⌋</span></span></span></span>. The largest number from 1 to 10 that is a power of 3 is <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn><mo>=</mo><msup><mn>3</mn><mn>2</mn></msup></mrow><annotation>9 = 3^2</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">9</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>, hence the highest power of 3 in the LCM is 2 (which we can also compute with <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>⌊</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>3</mn></msub><mi>n</mi><mo>⌋</mo></mrow><annotation>\\lfloor \\log_3 n \\rfloor</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">⌊</span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mclose">⌋</span></span></span></span>. Likewise, for 5 and 7, the highest power is 1. The LCM of the numbers from 1 to 10 is therefore <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mo>×</mo><msup><mn>3</mn><mn>2</mn></msup><mo>×</mo><mn>5</mn><mo>×</mo><mn>7</mn><mo>=</mo><mn>2520</mn></mrow><annotation>2^3 \\times 3^2 \\times 5 \\times 7 = 2520</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">2520</span></span></span></span>.</p><p>In general, the LCM of the numbers 1 to n is:</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>∏</mo><mrow><mi>p</mi><mo>∈</mo><mi>P</mi></mrow></msub><msup><mi>p</mi><mrow><mo>⌊</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mi>p</mi></msub><mi>n</mi><mo>⌋</mo></mrow></msup><mspace width="1em"></mspace><mtext>where </mtext><mi>P</mi><mo>=</mo><mo>{</mo><mi>p</mi><mo>∈</mo><mi>N</mi><mo>:</mo><mi>p</mi><mo>≤</mo><mi>n</mi><mo>,</mo><mtext> </mtext><mi>p</mi><mtext> prime</mtext><mo>}</mo></mrow><annotation>\\prod_{p \\in P} p^{\\lfloor \\log_p n \\rfloor} \\quad \\text{where } P = \\{p \\in \\mathbb{N} : p \\leq n, \\, p \\text{ prime}\\}</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:1.3519em;vertical-align:-0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∏</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1786em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9161em;"><span style="top:-3.0911em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">⌊</span><span class="mop mtight"><span class="mop mtight"><span class="mtight">l</span><span class="mtight">o</span><span class="mtight" style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0417em;"><span style="top:-2.2341em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4048em;"><span></span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.1952em;"></span><span class="mord mathnormal mtight">n</span><span class="mclose mtight">⌋</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">where </span></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8304em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">p</span><span class="mord text"><span class="mord"> prime</span></span><span class="mclose">}</span></span></span></span></p><p>For n=26, we get the LCM <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo><msup><mn>2</mn><mn>4</mn></msup><mo>×</mo><msup><mn>3</mn><mn>2</mn></msup><mo>×</mo><msup><mn>5</mn><mn>2</mn></msup><mo>×</mo><mn>7</mn><mo>×</mo><mn>11</mn><mo>×</mo><mn>13</mn><mo>×</mo><mn>17</mn><mo>×</mo><mn>19</mn><mo>×</mo><mn>23</mn></mrow><annotation>= 2^4 \\times 3^2 \\times 5^2 \\times 7 \\times 11 \\times 13 \\times 17 \\times 19 \\times 23</annotation></semantics></math></span><span class="katex-html"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">5</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">11</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">13</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">17</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">19</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">23</span></span></span></span>.</p></div></details></div></details>`,rawContent:`
Anne comes into the office to find that her co-workers had played a prank on her. The keycaps on her keyboard had been shuffled such that if she types out a message according to the letters on the keyboard, the message is gibberish when it appears on the screen.

No matter, she thinks. She types out the gibberish message with the letters on her keyboard, ending up with another gibberish message. She continues this process on the new message, repeating until she gets her original message back.

Is it always possible to get the original message back, no matter how the keyboard was rewired? And in the cases where this is possible, what is the maximum number of times she would need to retype the message in order to get the original message back? We can assume that the message only involves the letters A-Z.


::::solution
It is always possible to get the original message back, no matter how the keyboard is rewired. She is guaranteed to get the original message back after retyping the message 26771144400 times.

To show this, let’s start with an easier example with the letters A to E. Imagine if Anne types out “ABCDE” using her keyboard and observes the letters that appear. Notice that the result will also be the letters from A-E, just not in the same order. That is a permutation!

<!-- TOOD: Write the permutation cycles module and link -->
<!-- We’ll assume after typing “ABCDE”, she sees “BCAED” on her screen. Remember from \\[Link to Permutation Cycles module\\] that a permutation can be decomposed into disjoint cycles? We can represent the cycles with: -->

We’ll assume after typing “ABCDE”, she sees “BCAED” on her screen. Remember that a permutation can be decomposed into disjoint cycles? We can represent the cycles with:

A → B → C → A  
D → E → D

If a message starts with the letter A, then after the first re-type it will be B, then C, then back to A after 3 steps. The same goes for the other letters in this cycle, B and C. By the same reasoning, if a message starts with the letter D or E, it will end up on the original letter again after 2 steps. For us to get the original message again, we need to type it 6 times, the lowest common multiple of 2 and 3.

In general, a permutation of 5 letters can leave us with cycles of length 1, 2, 3, 4, and/or 5. To get the worst-case scenario, we take the lowest common multiple of 1, 2, 3, 4, and 5 to get 60.

For our original problem with 26 letters, we know that the re-mapping of letters also gives us a permutation that can be broken down into cycles of 1 to 26. The lowest common multiple of all the numbers from 1 to 26 is 26771144400, giving us our answer.

:::solution[Extra Credit: Computing the LCM]
If you want to learn how to compute the lowest common multiple of the numbers from 1 to n by hand, read on.

First, remember that to get the lowest common multiple (LCM) of any 2 numbers, we have to compute both their prime factorisations, then take the highest power of each prime. Let’s try finding the LCM of 72 and 100.

$$72 = 2^3 \\times 3^2$$ \\
$$100 = 2^2 \\times 5^2$$

Taking the highest of each power, we get $2^3 \\times 3^2 \\times 5^2 = 1800$.

How about the LCM of a sequence of numbers from 1 to n? For a start, notice that we’ll only have to consider the primes between 1 to n. Any prime above that will have a power of 0 in the prime factorisation.

Let’s try to compute the LCM of the numbers from 1 to 10. Our primes are 2, 3, 5, and 7.

The largest number from 1 to 10 that is a power of 2 is $8 = 2^3$. The next power of 2 is 16, which is more than 10. So the highest power of 2 in the LCM is 3. We can actually compute this more easily with $\\lfloor \\log_2 n \\rfloor$. The largest number from 1 to 10 that is a power of 3 is $9 = 3^2$, hence the highest power of 3 in the LCM is 2 (which we can also compute with $\\lfloor \\log_3 n \\rfloor$. Likewise, for 5 and 7, the highest power is 1. The LCM of the numbers from 1 to 10 is therefore $2^3 \\times 3^2 \\times 5 \\times 7 = 2520$.

In general, the LCM of the numbers 1 to n is:

$$\\prod_{p \\in P} p^{\\lfloor \\log_p n \\rfloor} \\quad \\text{where } P = \\{p \\in \\mathbb{N} : p \\leq n, \\, p \\text{ prime}\\}$$

For n=26, we get the LCM $= 2^4 \\times 3^2 \\times 5^2 \\times 7 \\times 11 \\times 13 \\times 17 \\times 19 \\times 23$.
:::
::::
`,dynamicBlocks:[],inlineComponents:{}};export{s as default};
