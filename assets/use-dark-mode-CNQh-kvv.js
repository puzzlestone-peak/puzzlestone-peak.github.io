import{b as a}from"./index-BdwX92X6.js";function h(e){function u(r,o=null,g){const{serializer:E=n=>JSON.stringify(n),deserializer:s=n=>JSON.parse(n),initializeWithValue:f=!0,listen:c=!0}=g??{},d=a.useId(),[S,i]=a.useState(f?w(e,r,o,s):o),m=a.useRef(f);function p(n){i(t=>{const l=typeof n=="function"?n(t):n;return requestAnimationFrame(()=>z(e,r,E(l))),l})}return a.useEffect(()=>{f||i(()=>(m.current=!0,w(e,r,o,s)))},[]),a.useEffect(()=>{function n(t){if(t.hookId!==d){{if(t.storageArea!==e)return;if(t.key!==r)return}i(t.newValue===null?o:s(t.newValue))}}return window.addEventListener("sync-storage",n),()=>{window.removeEventListener("sync-storage",n)}},[r,d,c,o,s]),a.useEffect(()=>{if(!c)return;function n(t){t.storageArea===e&&t.key===r&&i(t.newValue===null?o:s(t.newValue))}return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}},[r,c,o,s]),[S,p]}return u}function w(e,u,r,o){return typeof e[u]>"u"?r:o(e[u])}function z(e,u,r){const o=e[u];e[u]=r,window.dispatchEvent(new StorageEvent("sync-storage",{key:u,newValue:r,oldValue:o,storageArea:e,url:location.href}))}const L=h(typeof window<"u"?window.localStorage:{});function I(e,u="",r){return()=>L(e,u,r)}const H=I("darkmode",!1,{serializer:e=>e?"1":"0",deserializer:e=>e==="1"});export{H as a,L as u};
